@use '../../../style/mixins';

$min-item-size: 0.5rem;

:host(limel-chart[type='area']) {
    .chart {
        display: flex;
        background-color: var(--chart-background-color, transparent);
    }

    .item {
        @include mixins.visualize-keyboard-focus;
        mix-blend-mode: hard-light;

        background-color: var(--limel-chart-item-color);

        //ðŸ‘‡ Prevents a rendering bug in Chrome, that causes the
        // colors to change, due to conflict between
        // `mix-blend-mode` and `clip-path`
        transform: translate3d(0, 0, 0);
    }
}

:host(limel-chart[type='area'][orientation='landscape']) {
    --limel-chart-padding: 0.5rem 0.5rem 0.5rem 2rem;

    .chart {
        flex-direction: row;
        align-items: flex-end;
        overflow: auto hidden;
        padding: 0 0.125rem;
    }

    .item {
        min-width: $min-item-size;
        width: inherit;
        height: 100%;
        clip-path: polygon(
            0 calc((100 - var(--limel-chart-item-offset)) * 1%),
            0
                calc(
                    (
                            100 -
                                (
                                    var(--limel-chart-item-size) +
                                        var(--limel-chart-item-offset)
                                )
                        ) * 1%
                ),
            100%
                calc(
                    (
                            100 -
                                (
                                    var(--limel-chart-next-item-size) +
                                        var(--limel-chart-next-item-offset)
                                )
                        ) * 1%
                ),
            100% calc((100 - var(--limel-chart-next-item-offset)) * 1%)
        );

        &.has-negative-value-only {
            transform-origin: bottom;
            transform: rotateX(180deg);
        }
    }
}

:host(limel-chart[type='area'][orientation='portrait']) {
    --limel-chart-padding: 0.5rem 0.5rem 1rem 0.5rem;

    .chart {
        flex-direction: column;
        overflow: hidden auto;
        padding: 0.125rem 0;
    }

    .item {
        min-height: $min-item-size;
        height: inherit;
        width: 100%;
        clip-path: polygon(
            calc(var(--limel-chart-item-offset) * 1%) 0,
            calc(
                    (
                            var(--limel-chart-item-size) +
                                var(--limel-chart-item-offset)
                        ) * 1%
                )
                0,
            calc(
                    (
                            var(--limel-chart-next-item-size) +
                                var(--limel-chart-next-item-offset)
                        ) * 1%
                )
                100%,
            calc(var(--limel-chart-next-item-offset) * 1%) 100%
        );

        &.has-negative-value-only {
            transform-origin: left;
            transform: rotateY(180deg);
        }
    }
}
