{"version":3,"names":["CoreFeature","constructor","table","this","reloadData","data","silent","columnsChanged","dataLoader","load","undefined","langText","modules","localize","getText","arguments","langBind","bind","langLocale","getLocale","commsConnections","comms","getConnections","commsSend","send","layoutMode","layout","getMode","layoutRefresh","force","subscribe","eventBus","unsubscribe","subscribed","key","subscriptionChange","dispatch","chain","confirm","dispatchExternal","externalEvents","subscribedExternal","subscriptionChangeExternal","options","setOption","value","deprecationCheck","oldOption","newOption","deprecationAdvisor","check","deprecationCheckMsg","msg","checkMsg","deprecationMsg","module","Helpers","static","el","offsetWidth","offsetHeight","box","getBoundingClientRect","top","window","pageYOffset","document","documentElement","clientTop","left","pageXOffset","clientLeft","obj","clone","list","objectProto","__proto__","arrayProto","Object","assign","Array","isArray","i","subject","match","copy","findIndex","item","unshift","deepClone","Popup","element","parent","super","container","_lookupContainer","reversedX","childPopup","blurable","blurCallback","blurEventsBound","renderedCallback","visible","hideable","classList","add","blurEvent","hide","escEvent","_escapeCheck","destroyBinding","tableDestroyed","destroyed","popupContainer","querySelector","console","warn","_checkContainerIsParent","body","parentNode","renderCallback","callback","containerEventCoords","e","touch","MouseEvent","x","touches","pageX","y","pageY","parentOffset","elOffset","elementPositionCoords","position","offset","containerOffset","show","origin","parentEl","coords","HTMLElement","style","appendChild","_fitToScreen","addEventListener","stopPropagation","scrollTop","right","Math","max","scrollHeight","parseInt","isVisible","hideOnBlur","setTimeout","rowManager","keyCode","blockHide","restoreHide","removeEventListener","removeChild","child","Module","name","_handler","initialize","registerTableOption","optionsList","register","registerColumnOption","columnManager","registerTableFunction","func","args","initGuard","registerComponentFunction","component","handler","componentFunctionBinder","registerDataHandler","priority","registerDataPipelineHandler","registerDisplayHandler","registerDisplayPipelineHandler","displayRows","adjust","index","length","lookupIndex","displayPipeline","getDisplayRows","activeRows","refreshData","renderInPosition","refreshActiveData","footerAppend","footerManager","append","footerPrepend","prepend","footerRemove","remove","popup","menuEl","menuContainer","alert","content","type","alertManager","clearAlert","clear","defaultAccessors","Accessor","allowedTypes","initializeColumn","transformRow","column","config","forEach","charAt","toUpperCase","slice","accessor","definition","lookupAccessor","params","accessors","row","rowComponent","getComponent","traverse","colComponent","getFieldValue","setFieldValue","moduleName","defaultConfig","method","generateParamsList","prefix","output","concat","push","serializeParams","encoded","encodeURIComponent","join","urlBuilder","url","keys","toLowerCase","includes","defaultLoaderPromise","contentType","Promise","resolve","reject","urlGenerator","call","ajaxContentType","contentTypeFormatters","headers","Accept","mode","location","credentials","fetch","then","response","ok","json","catch","error","status","statusText","generateParamsList$1","defaultContentTypeFormatters","JSON","stringify","form","FormData","Ajax","loaderPromise","ajaxRequestFunc","ajaxURLGenerator","defaultURLGenerator","ajaxURL","setUrl","setDefaultConfig","ajaxConfig","getUrl","requestDataCheck","requestParams","requestData","ajaxParams","previousData","generateConfig","sendRequest","ajaxRequesting","ajaxResponse","defaultPasteActions","replace","rows","setData","update","updateOrAddData","insert","addData","defaultPasteParsers","clipboard","headerFindSuccess","columns","columnMap","split","find","title","trim","field","columnsByIndex","shift","Clipboard","pasteParser","pasteAction","customSelection","rowRange","blocked","clipboardCopyRowRange","plain","html","preventDefault","clipboardCopyFormatter","export","generateExportList","clipboardCopyConfig","clipboardCopyStyled","generateHTMLTable","generatePlainContent","clipboardData","originalEvent","reset","paste","setPasteParser","clipboardPasteParser","setPasteAction","clipboardPasteAction","rowData","col","getKey","range","internal","sel","textRange","getSelection","createRange","selectNodeContents","toString","removeAllRanges","addRange","selection","createTextRange","moveToElementText","select","execCommand","action","pasteActions","parser","pasteParsers","checkPaseOrigin","getPasteData","modExists","mutateData","mutator","valid","target","tagName","edit","currentCell","getData","CalcComponent","_row","Proxy","get","receiver","handle","transform","getElement","getTable","getCells","cells","cell","getCell","_getSelf","CellComponent","_cell","getValue","getOldValue","getInitialValue","initialValue","getRow","getType","getField","getColumn","setValue","mutate","restoreOldValue","setValueActual","restoreInitialValue","checkHeight","Cell","oldValue","height","width","minWidth","loaded","build","generateElement","setWidth","_configureCell","createElement","className","setAttribute","vertAligns","bottom","middle","hozAligns","center","textAlign","hozAlign","vertAlign","display","alignItems","justifyContent","cssClass","classNames","_generateContents","val","innerHTML","Node","firstChild","cellRendered","containerOnly","layoutElement","changed","setValueProcessData","cellEdited","widthStyled","clearWidth","getWidth","setMinWidth","minWidthStyled","setMaxWidth","maxWidth","maxWidthStyled","reinitializeHeight","clearHeight","setHeight","heightStyled","getHeight","delete","redrawBlock","deleteCell","calcs","getIndex","getCellIndex","ColumnComponent","_column","getDefinition","getTitleDownload","isGroup","toggle","getSubColumns","getParentColumn","Column","scrollTo","ifVisible","scrollToColumn","move","to","after","toColumn","findColumn","moveColumn","getNextColumn","nextCol","nextColumn","getPrevColumn","prevCol","prevColumn","updateDefinition","updates","result","reinitializeWidth","rerenderColumns","defaultColumnOptions","maxInitialWidth","variableHeight","headerVertical","headerHozAlign","headerWordWrap","editableTitle","def","contentElement","titleHolderElement","titleElement","groupElement","createGroupElement","fieldStructure","titleDownload","titleFormatterRendered","mapDefinitions","setField","widthFixed","newCol","attachColumn","checkColumnVisibility","registerColumnField","_initialize","columnHeaderVertAlign","defaults","columnDefaults","generate","defaultOptionList","checkDefinition","indexOf","nestedFieldSeparator","_getNestedData","_getFlatData","_setNestedData","_setFlatData","registerColumnPosition","reRegisterPosition","_buildColumnHeaderContent","_buildGroupHeader","_buildColumnHeader","_buildColumnHeaderTitle","focus","text","_formatColumnHeaderTitle","contents","dataObj","structure","columnRendered","verticalAlign","alignment","parentHeight","getGroupElement","clientHeight","getHeadersElement","minHeight","clearVerticalAlign","paddingTop","getFirstColumn","getLastColumn","getColumns","getTopColumn","updateBranches","colDefs","responsiveToggle","verticalAlignHeaders","matchChildWidths","childWidth","splice","setWidthActual","isNaN","floor","clientWidth","min","checkCellHeights","heightInitialized","offsetParent","clearCellHeight","calcHeight","setCellHeight","getLeftOffset","offsetLeft","ceil","cellCount","deregisterColumn","generateCell","findColumnIndex","_nextVisibleColumn","getColumnByIndex","_prevVisibleColumn","fitToData","setTo","addColumn","RowComponent","getPosition","watchPosition","scrollToRow","moveToRow","updateData","normalizeHeight","reformat","reinitialize","getNextRow","nextRow","getPrevRow","prevRow","Row","manualHeight","outerHeight","initialized","positionWatchers","created","create","detachElement","generateCells","inFragment","deleteCells","renderer","renderRowCells","rowFormatter","rerenderRowCells","rendered","deinitialize","deinitializeHeight","children","maxHeight","rowHeight","resizableRows","updatedData","elVisible","tempData","newRowData","parse","attrname","getColumnsByFieldRoot","findCell","nextDisplayRow","prevDisplayRow","before","toRow","findRow","moveRowActual","deleteActual","blockRedraw","detachModules","deleteRow","wipe","isDisplayed","setPosition","getGroup","group","defaultCalculations","avg","values","calcParams","precision","reduce","sum","Number","toFixed","parseFloat","String","count","unique","filter","ColumnCalcs","topCalcs","botCalcs","genColumn","topElement","botElement","topRow","botRow","topInitialized","botInitialized","recalcAfterBlock","cellValueChanged","initializeColumnCheck","rowsUpdated","scrollHorizontal","recalcActiveRows","recalcActiveRowsRefresh","tableRedraw","visibleRows","adjustForScrollbar","restoreRedraw","resizeHolderWidth","getResults","userRecalc","headersElement","recalc","redraw","blockCheck","viewable","groupBy","recalcRowGroup","dataTreeStartExpanded","dataTree","recalcAll","topCalc","bottomCalc","columnCalcs","topCalcParams","botCalcParams","bottomCalcParams","calculations","initializeTopRow","botCalc","initializeBottomRow","removeCalcs","adjustTableSize","reinitializeCalcs","getContentsElement","insertBefore","nextSibling","scrollLeft","rowsToData","generateRow","frozenColumns","recalcGroup","groupRows","getRowGroup","groups","getChildGroups","generateRowData","generateTopRow","generateBottomRow","dataTreeChildColumnCalcs","open","getFilteredTreeChildren","pos","disable","enable","format","formatter","getFormatter","paramKey","hasTopCalcs","hasBottomCalcs","results","getGroups","getGroupResults","groupObj","subGroups","getSubGroups","subGroupResults","subgroup","rtl","paddingLeft","paddingRight","DataTree","indent","collapseEl","expandEl","branchEl","elementField","startOpen","collapseRow","expandRow","toggleRow","getTreeParent","getRowChildren","addTreeChildRow","isRowExpanded","dummyEl","dataTreeChildField","dataTreeChildIndent","dataTreeBranchElement","dataTreeCollapseElement","tabIndex","dataTreeExpandElement","initializeRow","layoutRow","rowDelete","rowDataChanged","columnMoving","initializeElementField","tableRedrawing","getRows","reinitializeRowChildren","firstCol","getFirstVisibleColumn","dataTreeElementColumn","getTreeChildren","redrawNeeded","childArray","controlEl","generateControlElement","cloneNode","marginRight","marginLeft","getComputedStyle","getPropertyValue","oldControl","replaceChild","getChildren","allChildren","generateChildren","dataTreeFilter","dataTreeSort","sort","subChildren","sub","childData","childRow","getTreeParentRoot","childIndex","findChildIndex","recurse","getChildField","csv","setFileContents","delimiter","fileContents","depth","bom","pdf","header","autoTableParams","rowGroupStyles","fontStyle","fontSize","cellPadding","fillColor","rowCalcStyles","jsPDFParams","jsPDF","orientation","unit","parseRow","styles","colSpan","rowSpan","doc","jspdf","autoTable","didDrawPage","head","documentProcessing","xlsx","self","sheetName","workbook","XLSX","utils","book_new","tableFeatures","compression","compress","writeOptions","bookType","bookSST","SheetNames","Sheets","generateSheet","merges","worksheet","s","c","r","a","b","j","Date","sheet_add_aoa","encode_range","sheetOnly","sheets","sheet","active","intercept","s2ab","buf","ArrayBuffer","view","Uint8Array","charCodeAt","write","jsonLines","defaultDownloaders","Download","mimeType","Blob","deprecatedOptionsCheck","download","downloadToTab","filename","interceptCallback","downloadFunc","buildLink","mime","triggerDownload","downloaders","downloadConfig","downloadRowRange","groupHeader","groupHeaderDownload","_group","getRowCount","newTab","blob","downloadEncoder","URL","createObjectURL","navigator","msSaveOrOpenBlob","click","commsReceived","maskInput","mask","maskLetter","maskLetterChar","maskNumber","maskNumberChar","maskWildcard","maskWildcardChar","fillSymbols","symbol","char","ctrlKey","metaKey","maskAutoFill","placeholder","input","onRendered","success","cancel","editorParams","cellValue","search","padding","boxSizing","elementAttributes","getAttribute","preventScroll","selectContents","onChange","textarea","vertNav","verticalNavigation","whiteSpace","resize","heightNow","shiftKey","shiftEnterSubmit","selectionStart","stopImmediatePropagation","number","step","blurFunc","date","inputFormat","DT","DateTime","luxon","convertDate","newDatetime","isDateTime","fromISO","fromFormat","toFormat","luxDate","toISO","relatedTarget","rangeParent","explicitOriginalTarget","time","luxTime","datetime","luxDateTime","Edit","editor","_initializeParams","displayItems","currentItems","focusedItem","_createInputElement","listEl","_createListElement","initialValues","isFilter","filterTimeout","filtered","typing","listIteration","lastAction","filterTerm","actions","_deprecatedOptionsCheck","_initializeValue","_onRendered","listItemFormatter","sortValuesList","searchFunc","searchingPlaceholder","defaultValue","multiselect","headerFilterInitialListGen","cellEl","clickStop","_preventPopupBlur","_preventBlur","_inputKeyDown","_setListWidth","attribs","clearable","autocomplete","cursor","caretColor","_bindInputEvents","valueKeys","valueCheck","placeholderLoading","placeholderEmpty","filterDelay","emptyValue","freetext","filterFunc","filterRemote","allowEmpty","listOnEmpty","valuesLookup","valuesURL","_inputFocus","_inputClick","_inputBlur","_inputSearch","_inputKeyUp","rebuildOptionsList","_filter","clearTimeout","_filterList","_resolveValue","_clearChoices","_keyUp","_keyDown","_keySide","_keyEnter","_keyEsc","_keyHomeEnd","_keyTab","_keySelectLetter","_keyAutoCompLetter","_chooseItem","_focusItem","_cancel","_scrollToValue","character","fromCharCode","label","startsWith","scrollIntoView","behavior","block","inline","_generateOptions","_sortOptions","_buildList","_showList","isInteger","_filterOptions","iteration","_ajaxRequest","_uniqueColumnValues","valuesLookupField","_addPlaceholder","responseValues","_parseList","_clearList","term","getColumnByField","inputValues","entries","map","_parseListItem","option","level","_parseListGroup","itemParams","selected","original","sorter","_defaultSortFunction","_sortGroup","as","bs","a1","b1","L","rx","rd","emptyAlign","isFinite","test","_defaultFilterFunc","_filterItem","matches","_buildItem","itemFormatter","_groupClick","_itemClick","_styleItem","startVis","blur","star","maxStars","getElementsByTagName","size","stars","starsHolder","createElementNS","starChange","browser","buildStar","starHolder","nextStar","changeValue","overflow","textOverflow","progress","percent","bar","mouseDrag","mouseDragWidth","updateValue","calcVal","round","backgroundColor","screenX","tickCross","tristate","indetermValue","indeterminateValue","indetermState","trueValueSet","falseValueSet","marginTop","indeterminate","checked","trueValue","checkedValue","falseValue","defaultEditors","Edit$1","mouseClick","recursionBlock","invalidEdit","editedCells","editors","getEditedCells","clearCellEdited","navigatePrev","navigateNext","navigateLeft","navigateRight","navigateUp","navigateDown","cellIsEdited","clearEdited","editCell","cellCancelEdit","bindEditor","updateCellClass","columnDeleteCheck","rowDeleteCheck","rowEditableCheck","cancelEdit","keybindingNavigateNext","newRow","addRow","edited","allowEdit","nextCell","findPrevEditableCell","findNextEditableCell","prevCell","editable","getCurrentCell","clearEditor","cellEditCancelled","contains","button","focusCellNoEvent","forceEdit","focusScrollAdjust","getRenderMode","topEdge","bottomEdge","rowEl","offsetTop","leftEdge","rightEdge","leftMargin","rightMargin","renderHorizontal","vDomPadLeft","cellEditor","validationMode","cellClick","cellEditing","editIndex","ExportRow","ExportColumn","Export","cloneTableStyle","colVisProp","getHtml","columnHeaders","headersToExportRows","generateColumnGroupHeaders","bodyToExportRows","rowLookup","generateTable","generateTableElement","getVisibleRows","selectRow","selectedRows","pagination","columnGroups","colData","processColumnGroup","maxDepth","groupData","subGroup","subGroupData","columnVisCheck","visProp","headerDepth","exportRows","parseColumnGroup","rowGroups","exportCols","headerEl","bodyEl","lookupTableStyles","setup","treeElementField","mapElementStyles","generateHeaderElement","generateGroupElement","generateCalcElement","generateRowElement","evenRow","oddRow","calcRow","firstRow","firstGroup","getElementsByClassName","styleCells","firstCell","lastCell","generator","cellStyle","cellWrapper","formatCells","formatExportValue","align","formatComponent","holder","htmlOutputConfig","from","props","lookup","color","fromStyle","prop","defaultFilters","filterVal","rowVal","filterParams","regex","RegExp","like","keywords","separator","keyword","matchAll","starts","ends","endsWith","in","Filter","filterList","headerFilters","headerFilterColumns","prevHeaderFilterChangeCheck","tableInitialized","searchRows","searchData","userSetFilter","userRefreshFilter","userAddFilter","getFilters","userSetHeaderFilterFocus","userGetHeaderFilterValue","userSetHeaderFilterValue","getHeaderFilters","userRemoveFilter","userClearFilter","userClearHeaderFilter","setHeaderFilterFocus","reloadHeaderFilter","getHeaderFilterValue","setHeaderFilterValue","initializeColumnHeaderFilter","hideHeaderFilterElements","showHeaderFilterElements","tableBuilt","generatePlaceholder","filterMode","remoteFilterParams","initialFilter","setFilter","initialHeaderFilter","placeholderHeaderFilter","refreshFilter","addFilter","removeFilter","all","clearFilter","clearHeaderFilter","headerFilter","filterType","tagType","attrType","filterChangeCheck","prevSuccess","emptyFunc","headerFilterFunc","filters","headerFilterFuncParams","fieldVal","colVal","trackChanges","generateHeaderFilterElement","filterElement","editorElement","typingTimer","searchTrigger","onRenderedCallback","headerElement","headerFilterEmptyCheck","headerFilterParams","headerFilterPlaceholder","contentsElement","headerPos","headerFilterLiveFilterDelay","hasAttribute","headerFilterLiveFilter","hasChanged","findFilter","findSubFilters","ajax","filtersToArray","searchType","filterRecurse","rowList","activeRowComponents","filterRow","subFilter","plaintext","formatterParams","emptyToSpace","sanitizeHTML","html$1","textarea$1","money","floatVal","sign","integer","decimal","rgx","decimalSym","thousandSym","thousand","negativeSign","symbolAfter","abs","link","urlPrefix","labelTraverse","path","labelField","urlField","image","src","urlSuffix","tickCross$1","empty","truthy","allowTruthy","tick","tickElement","cross","crossElement","datetime$1","outputFormat","invalid","invalidPlaceholder","isValid","timezone","setZone","datetimediff","suffix","humanize","now","diff","toHuman","star$1","starActive","starInactive","traffic","colors","percentValue","progress$1","legendAlign","legend","legendColor","barEl","barContainer","legendEl","holderEl","buttonTick","buttonCross","rownum","innerText","responsiveCollapse","responsiveLayout","toggleList","isOpen","rowSelection","checkbox","selectableRangeMode","toggleSelect","handleComplexRowClick","isSelected","registerRowSelectCheckbox","deselectRow","registerHeaderSelectCheckbox","defaultFormatters","Format","formatValue","formatHeader","lookupFormatter","formatterPrint","print","formatterClipboard","formatterHtmlOutput","htmlOutput","formatters","mockCell","titleFormatter","titleFormatterParams","entityMap","FrozenColumns","leftColumns","rightColumns","initializationMode","layoutCell","reinitializeColumns","blockLayout","unblockLayout","margin","edge","frozenCheck","frozen","layoutCalcRows","layoutGroupCalcs","groupList","layoutColumnPosition","allCells","leftParents","marginValue","getColGroupParentElement","reinitializeRows","otherRows","getTableElement","_calcSpace","FrozenRows","freezeRow","unfreezeRow","isRowFrozen","detachRow","frozenRows","initializeRows","rowType","isFrozen","styleRows","styleRow","GroupComponent","groupManager","getParentGroup","toggleVisibility","Group","oldGroup","hasSubGroups","groupIDLookups","_addRowToGroup","_addRow","old","elementContents","arrowElement","createElements","addBindings","createValueGroups","elementsOnly","arrow","movableRows","moveRow","initializeGroupHeader","allowedValues","_createGroup","toggleElement","groupToggleElement","groupID","groupKey","headerGenerator","insertRow","conformRowData","toIndex","updateGroupRows","scrollHeader","getRowIndex","removeRow","groupValues","removeGroup","generateGroupHeaderContents","getHeadersAndRows","_visSet","groupClosedShowCalcs","prev","includeChildren","getPath","childNodes","GroupRows","displayHandler","setGroupBy","setGroupValues","setGroupStartOpen","setGroupHeader","userGetGroups","userGetGroupedData","rowGetGroup","_blockRedrawing","_restore_redrawing","groupUpdateOnCellEdit","cellUpdated","reassignRowToGroup","configureGroupSetup","rowDeleting","scrollHeaders","rowMoving","rowAddingIndex","rowSample","virtualRenderFill","groupStartOpen","langValue","lang","items","cols","getRealColumns","lookupFunc","prevValue","tableElement","assignRowToGroup","moveRowInArray","getGroupedData","toGroup","fromGroup","generateGroups","groupComponents","pullGroupListData","groupListData","rowCount","headerContent","countGroups","oldGroups","createGroup","assignRowToExistingGroup","newGroupNeeded","oldRowGroup","oldGroupPath","newGroupPath","getExpectedPath","samePath","every","groupPath","groupId","checkBasicModeGroupHeaderWidth","onlyGroupHeaders","defaultUndoers","cellEdit","rowAdd","addRowActual","_rebindRow","rowMove","posFrom","posTo","getRowFromPosition","regenerateRowPositions","reRenderInPosition","defaultRedoers","newValue","History","history","clearComponentHistory","rowDeleted","rowAdded","rowMoved","undo","redo","getHistoryUndoSize","getHistoryRedoSize","undoers","redoers","oldRow","HtmlTableImport","fieldIndex","hasIndex","tableElementCheck","originalElement","parseTable","_extractOptions","_extractHeaders","_generateBlankHeaders","defaultOptions","attributes","optionsArr","attrib","_attribValue","_findCol","exists","textContent","registeredDefaults","csvImporter","inQuote","nextChar","json$1","arrayImporter","defaultImporters","array","Import","importFromFile","importFormat","loadDataCheck","loadData","importData","lookupImporter","structureData","err","importer","importers","extension","pickFile","extensions","accept","file","files","reader","FileReader","importReader","readAsArrayBuffer","readAsBinaryString","readAsDataURL","readAsText","onload","onerror","parsedData","autoColumns","structureArrayToObject","structureArrayToColumns","Interaction","eventMap","rowClick","rowDblClick","rowContext","rowMouseEnter","rowMouseLeave","rowMouseOver","rowMouseOut","rowMouseMove","rowMouseDown","rowMouseUp","rowTap","rowDblTap","rowTapHold","cellDblClick","cellContext","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellMouseDown","cellMouseUp","cellTap","cellDblTap","cellTapHold","headerClick","headerDblClick","headerContext","headerMouseEnter","headerMouseLeave","headerMouseOver","headerMouseOut","headerMouseMove","headerMouseDown","headerMouseUp","headerTap","headerDblTap","headerTapHold","groupClick","groupDblClick","groupContext","groupMouseEnter","groupMouseLeave","groupMouseOver","groupMouseOut","groupMouseMove","groupMouseDown","groupMouseUp","groupTap","groupDblTap","groupTapHold","subscribers","touchSubscribers","columnSubscribers","touchWatchers","tap","tapDbl","tapHold","initializeExternalEvents","cellContentsSelectionFixer","clearTouchWatchers","types","selectNode","subscriptionChanged","added","subscribeTouchEvents","unsubscribeTouchEvents","handleTouch","noTouch","dispatchEvent","watchers","componentObj","defaultBindings","navPrev","navNext","navUp","navDown","scrollPageUp","scrollPageDown","scrollToStart","scrollToEnd","copyToClipboard","defaultActions","keyBlock","newPos","displayRowsCount","scrollMax","navLeft","navRight","Keybindings","watchKeys","pressedKeys","keyupBinding","keydownBinding","bindings","keybindings","mergedBindings","mapBindings","bindEvents","clearBindings","binding","bindingList","mapBinding","symbolsList","ctrl","meta","symbols","code","checkBinding","Menu","nestedMenuBlock","currentComponent","rootPopup","initializeRowWatchers","initializeGroupWatchers","rowContextMenu","loadMenuEvent","on","rowClickMenu","rowDblClickMenu","groupContextMenu","groupClickMenu","groupDblClickMenu","headerContextMenu","loadMenuTableColumnEvent","headerClickMenu","headerDblClickMenu","headerMenu","initializeColumnHeaderMenu","contextMenu","loadMenuTableCellEvent","clickMenu","dblClickMenu","icon","headerMenuIcon","headerMenuEl","menu","loadMenu","parentPopup","itemEl","disabled","MoveColumns","placeholderElement","createPlaceholderElement","hoverElement","checkTimeout","checkPeriod","moving","toCol","toColAfter","startX","autoScrollMargin","autoScrollStep","autoScrollTimeout","touchMove","moveHover","endMove","movableColumns","colEl","mousemove","which","startMove","bindTouchEvents","startXMove","nextColWidth","prevColWidth","nextColWidthLast","prevColWidthLast","passive","moveToCol","_bindMouseMove","_unbindMouseMove","movingCells","moveColumnActual","columnHolder","xPos","scrollPos","MoveRows","toRowAfter","hasHandle","startY","tableRowDropEvent","connection","connectionSelectorsTables","connectionSelectorsElements","connectionElements","connections","connectedTable","connectedRow","movableRowsConnectedTables","movableRowsConnectedElements","initializeCell","mouseup","tableRowDrop","previousSibling","rowHandle","startYMove","nextRowHeight","prevRowHeight","nextRowHeightLast","prevRowHeightLast","setStartPosition","connectToTables","pointerEvents","disconnectFromTables","moveHoverConnections","moveHoverTable","rowHolder","yPos","elementRowDrop","connectionTables","query","prototype","querySelectorAll","dropEvent","tabulatorElementDropEvent","connect","disconnect","dropComplete","sender","movableRowsSender","senders","movableRowsReceiver","receivers","fromRow","fromTable","toTable","defaultMutators","Mutator","enabled","transformCell","mutateLink","lookupMutator","mutators","mutatorEdit","links","linkCell","pageSize","currentRow","currentPage","totalRows","totalPages","showingEl","valueEl","ofEl","totalEl","rowsEl","pages","defaultPageCounters","Page","progressiveLoad","pageCounterElement","pageCounter","page","remoteRowCountEstimate","initialLoad","dataChanging","pageSizes","setMaxPage","setPage","userSetPageToRow","userSetPageSize","getPageSize","previousPage","nextPage","getPage","getPageMax","setPageToRow","initialLoadComplete","calculatePageSizes","footerRedraw","paginationAddRow","rowAddingPosition","paginationMode","remotePageParams","_parseRemoteData","restOnRenderBefore","initializePageCounter","initializePaginator","initializeProgressive","scrollVertical","testElRow","testElCell","paginationSize","visibility","generatePageSizeSelectList","setPageSize","dir","loading","progressiveLoadScrollMargin","pagesElement","firstBut","prevBut","nextBut","lastBut","paginationSizeSelector","pageSizeSelect","counter","paginationCounter","pageCounters","hidden","pageSelectLabel","paginationCounterHolder","paginationElement","paginationCounterElement","paginationInitialPage","paginationButtonCount","setMaxRows","trigger","_setPageCounter","_setPageButtons","leftSize","rightSize","_generatePageButton","actualRowPageSize","start","end","actualStartRow","actualRows","finally","last_page","last_row","addRows","progressiveLoadDelay","footer","containerElement","scrollWidth","defaultReaders","local","id","localStorage","getItem","cookie","cookiePos","defaultWriters","setItem","expireDate","setDate","getDate","toUTCString","Persistence","defWatcherBlock","readFunc","writeFunc","localStorageTest","testKey","removeItem","persistence","persistenceMode","persistenceID","retrievedData","persistenceReaderFunc","readers","persistenceWriterFunc","writers","retrieveData","save","eventSave","getColumnLayout","setColumnLayout","sorters","initialSort","parseColumns","setColumns","mergeDefinition","getOwnPropertyDescriptor","defineProperty","set","current","oldCols","newCols","_findColumn","validateSorters","getSort","getGroupConfig","getPageConfig","definitions","excludedKeys","defStore","colDef","moduleInitOrder","Popup$1","_componentPopupCall","loadPopupEvent","rowContextPopup","rowClickPopup","rowDblClickPopup","groupContextPopup","groupClickPopup","groupDblClickPopup","headerContextPopup","loadPopupTableColumnEvent","headerClickPopup","headerDblClickPopup","headerPopup","initializeColumnHeaderPopup","contextPopup","loadPopupTableCellEvent","clickPopup","dblClickPopup","headerPopupIcon","headerPopupEl","loadPopup","contentsEl","Print","manualBlock","beforeprintEventHandler","afterprintEventHandler","printAsHtml","replaceTable","cleanup","destroy","printFullscreen","printConfig","printStyled","printRowRange","scrollX","scrollY","footerEl","tableEl","footerContent","printHeader","printFooter","printFormatter","ReactiveData","origFuncs","currentVersion","reactiveData","unblock","watchRow","watchData","unwatchData","version","enumerable","configurable","arg","apply","getRowFromDataObject","pop","newRows","startRow","reverse","oldRows","writable","watchKey","watchTreeChildren","childField","rebuildTree","unwatchRow","ResizeColumns","startColumn","startWidth","latestX","initialNextColumn","layoutColumnHeader","initializeEventWatchers","layoutCellHandles","deInitializeComponent","resizeHandle","columnLayoutUpdated","deInitializeColumn","columnWidthUpdated","resizable","reinitializeColumn","frozenColumnOffset","frozenOffset","handleEl","nearestColumn","_checkResizability","handleDown","_mouseDown","oldWidth","parentElement","mouseMove","startDiff","moveDiff","blockedBefore","blockedAfter","resizableColumnFit","colWidth","browserSlow","mouseUp","ResizeRows","startHeight","prevHandle","prevHandleDown","screenY","ResizeTable","visibilityObserver","resizeObserver","containerObserver","tableHeight","tableWidth","containerHeight","containerWidth","autoResize","initialRedraw","tableStyle","IntersectionObserver","ResizeObserver","initializeVisibilityObserver","entry","browserMobile","nodeHeight","contentRect","nodeWidth","redrawTable","observe","fixedHeight","tableResized","isIntersecting","unobserve","ResponsiveLayout","hiddenColumns","collapseFormatter","collapseStartOpen","collapseHandleColumn","updateColumnVisibility","initializeResponsivity","generateCollapsedRowContent","responsiveLayoutCollapseFormatter","formatCollapsedData","responsiveLayoutCollapseStartOpen","responsive","order","generateCollapsedContent","hideColumn","colCount","showColumn","working","getFlexBaseWidth","headerVisible","activeRowsCount","renderEmptyScroll","generateCollapsedRowData","mockCellComponent","responsiveLayoutCollapseUseFormatters","titleData","valueData","node_content","titleHighlight","SelectRow","selecting","lastClickedRow","selectPrev","headerCheckboxElement","selectRows","deselectRows","getSelectedRows","getSelectedData","isRowSelected","selectable","clearSelectionData","rowRetrieve","selectablePersistence","_deselectRow","prevSelected","_rowSelectionChanged","endSelect","checkRowSelectability","_clearSelection","lastClickedRowIdx","getDisplayRowIndex","rowIdx","fromRowIdx","toRowIdx","toggledRows","toggledRow","selectableCheck","_selectRow","changes","rowMatch","change","rowInfo","selectableRollingSelection","checkboxEl","dataTreeSelectPropagate","childRowSelection","selectedRow","deselected","number$1","aRow","bRow","alignEmptyValues","decimalSeparator","thousandSeparator","string","locale","localeCompare","datetime$2","date$1","time$1","boolean","el1","el2","calc","d","alphanum","defaultSorters","Sort","sortList","userSetSort","clearSort","sortMode","remoteSortParams","setSort","refreshSort","arrowEl","sorterParams","startingDir","headerSortStartingDir","headerSortTristate","headerSort","headerSortClickElement","headerSortElement","setColumnHeaderSortIcon","columnHeaderSortMulti","newSortList","findSorter","sortOrderReverse","sortListActual","rowComponents","clearColumnHeaders","sortObj","setColumnHeader","_sortItems","sortEl","sorterCount","sortItem","_sortRow","el1Comp","el2Comp","Tooltip","tooltipSubscriber","headerSubscriber","timeout","popupInstance","headerTooltip","mousemoveCheck","mouseoutCheck","tooltip","clearPopup","loadTooltip","tooltipDelay","defaultValidators","parameters","float","numeric","minLength","maxLength","reg","cellData","required","Validate","invalidCells","getInvalidCells","userClearCellValidation","userValidate","cellIsValid","clearValidation","cellValidate","columnValidate","rowValidate","editValidate","editorClear","editedClear","previousValue","validate","cancelled","validator","_extractValidator","substring","_buildValidator","validators","failedValidators","invalidIndex","freeze","AccessorModule","AjaxModule","ClipboardModule","ColumnCalcsModule","DataTreeModule","DownloadModule","EditModule","ExportModule","FilterModule","FormatModule","FrozenColumnsModule","FrozenRowsModule","GroupRowsModule","HistoryModule","HtmlTableImportModule","ImportModule","InteractionModule","KeybindingsModule","MenuModule","MoveColumnsModule","MoveRowsModule","MutatorModule","PageModule","PersistenceModule","PopupModule","PrintModule","ReactiveDataModule","ResizeColumnsModule","ResizeRowsModule","ResizeTableModule","ResponsiveLayoutModule","SelectRowModule","SortModule","TooltipModule","ValidateModule","debugEventsExternal","debugEventsInternal","debugInvalidOptions","debugInvalidComponentFuncs","debugInitialization","debugDeprecation","autoColumnsDefinitions","footerElement","textDirection","addRowPos","renderVertical","renderVerticalBuffer","scrollToRowPosition","scrollToRowIfVisible","scrollToColumnPosition","scrollToColumnIfVisible","rowFormatterPrint","rowFormatterClipboard","rowFormatterHtmlOutput","dataLoaderLoading","dataLoaderError","dataLoaderErrorTimeout","dataSendParams","dataReceiveParams","OptionsList","msgType","userOptions","hasOwnProperty","Renderer","elementVertical","elementHorizontal","verticalFillMode","clearRows","clearColumns","reinitializeColumnWidths","renderRows","renderColumns","rerenderRows","scrollColumns","scrollRows","scrollToRowNearestTop","includingBuffer","render","rerender","rowIndex","BasicHorizontal","rowFrag","createDocumentFragment","VirtualDomHorizontal","leftCol","rightCol","vDomScrollPosLeft","vDomScrollPosRight","vDomPadRight","fitDataColAvg","windowBuffer","isFitData","compatibilityCheck","layoutCheck","vertScrollListen","clearVisRowCache","dataChange","scroll","calcWindowBuffer","buffer","colPos","leftPos","rightPos","fitDataCheck","vdomHoz","reinitChanged","reinitializeRow","colEnd","addColRight","removeColLeft","addColLeft","removeColRight","colPositionAdjust","fitDataColActualWidthCheck","ex","message","newWidth","widthDiff","appendCell","ColumnManager","blockHozScrollEvent","columnsByField","redrawBlockUpdate","initializeRenderer","createHeadersElement","createHeaderContentsElement","createHeaderElement","initializeScrollWheelWatcher","padVerticalScrollbar","renderClass","renderers","virtual","basic","deltaX","generateColumnsFromRowData","_addColumn","_reIndexColumns","nextToColumn","topColumn","parentIndex","nextEl","root","fieldRoot","getDefinitions","getDefinitionTree","getComponents","structured","_moveColumnInArray","updateRows","fromIndex","totalWidth","fixedWidth","resetScroll","BasicVertical","tableFrag","rowTop","VirtualDomVertical","vDomRowHeight","vDomTop","vDomBottom","vDomScrollPosTop","vDomScrollPosBottom","vDomTopPad","vDomBottomPad","vDomMaxRenderChain","vDomWindowBuffer","vDomWindowMinTotalRows","vDomWindowMinMarginRows","vDomTopNewRows","vDomBottomNewRows","paddingBottom","_virtualRenderFill","topOffset","tableEmpty","topDiff","bottomDiff","_addTopRow","vDomScrollHeight","_removeBottomRow","_addBottomRow","_removeTopRow","topFound","bottomRow","forceMove","topPad","rowsHeight","heightOccupied","topPadHeight","rowsCount","rowFragment","renderedRows","totalRowsRendered","rowsToRender","avgRowHeight","resized","fillableSpace","addedRows","paddingAdjust","_quickNormalizeRowHeight","removableRows","RowManager","createHolderElement","createTableElement","heightFixer","placeholderContents","firstRender","renderMode","activeRowsPipeline","redrawBlockRestoreConfig","redrawBlockRenderInPosition","dataPipeline","scrollbarWidth","initializePlaceholder","leftDir","topDir","_positionPlaceholder","_setDataActual","_wipeElements","allIndex","activeIndex","setActiveRows","displayRowIterator","displayIndex","refreshDisplayOnly","findAddRowPos","_clearPlaceholder","chainResult","clearData","findRowIndex","rowOnly","getDataCount","skipStage","stage","cascadeOrder","refreshPipelines","renderTable","layoutColumnsOnNewData","resetDisplayRows","setDisplayRows","scrollBarCheck","_clearTable","_showPlaceholder","initialHeight","otherHeight","external","event","createEvent","initEvent","Event","FooterManager","createContainerElement","initializeElement","activate","deactivate","InteractionManager","abortClasses","previousTargets","listeners","componentMap","pseudoTrackers","subscriber","pseudoTracking","buildListenerMap","bindSubscriptionWatchers","listenerMap","listener","components","bindPseudoEvents","pseudoMouseEnter","pseudoMouseLeave","leaveList","linkedKeys","comp","clearWatchers","updateEventListeners","track","composedPath","targets","findTargets","bindComponents","triggerEvents","abort","elTargets","targetMatches","previousTarget","closest","ComponentFunctionBinder","funcName","DataLoader","requestOrder","requestNo","alertLoader","mapParams","objectInvert","alertError","blockActiveLoad","shouldLoad","ExternalEventBus","debug","events","subscriptionNotifiers","_debugDispatch","_dispatch","_notifySubscriptionChange","notifiers","callResult","log","InternalEventBus","_debugChain","_chain","_debugConfirm","_confirm","fallback","confirmed","DeprecationAdvisor","_warnUser","TableRegistry","tables","matchElement","Tabulator","lookupTable","fitData","forced","fitDataGeneral","fitDataStretch","colsWidth","gap","lastCol","fitColumns","flexWidth","flexGrowUnits","flexColWidth","flexColumns","fixedShrinkColumns","flexShrinkUnits","overflowWidth","gapFill","calcWidth","scaleColumns","freeSpace","shrinkCols","oversizeCols","oversizeSpace","remainingSpace","remainingFlexGrowUnits","changeUnits","undersizeCols","calcGrow","widthGrow","calcShrink","widthShrink","defaultModes","fitDataFill","fitDataTable","Layout","modes","dataChanged","defaultLangs","default","page_size","page_title","first","first_title","last","last_title","prev_title","next","next_title","showing","of","Localize","langList","langs","setHeaderFilterPlaceholder","installLang","setLocale","getLang","_setLangProp","desiredLocale","traverseLang","trans","language","_executeBindings","fillPath","pathArray","_getLangElement","rootPath","Comms","receive","selectors","con","tableComms","coreModules","LayoutModule","LocalizeModule","CommsModule","ModuleBinder","tabulator","bindStaticFunctionality","bindModules","moduleBindings","extendModule","property","source","registerModule","mod","registerModuleBinding","findTable","orderedStartMods","orderedEndMods","unOrderedMods","moduleCore","modulesCore","modulesRegular","core","mods","Alert","_createAlertElement","msgElement","_createMsgElement","_typeClass","interactionMonitor","initializeCoreSystems","_create","_clearObjectPointers","_mapDeprecatedFunctionality","_rtlCheck","_buildElement","_initializeTable","_loadInitialData","direction","newElement","_detectBrowser","deregister","ua","userAgent","vendor","opera","stack","line","Error","replaceData","responses","foundRows","updateOrAddRow","updateRow","getRowPosition","getColumnDefinitions","toggleColumn","deleteColumn","updateColumnDefinition","fromColumn","off","plugin","TabulatorFull","ca","esca","pe","m","escape","es","ColumnDefinitionFactory","pool","horizontalAlign","headerComponent","_a","createFormatter","aggregator","getColumnAggregator","customElement","propsFactory","setElementProperties","formatCell","columnElementExists","createCustomComponent","isNativeElement","customElementExists","customElements","createResizeObserver","properties","pickBy","negate","isEventListener","getEventName","eventListener","RESIZE_TIMEOUT","COLUMN_PADDING","observer","createColumnSorter","isAggregatorFunction","ElementPool","isFree","usedElements","has","releaseAll","release","WeakMap","Selection","getDataByIndex","toggleRange","selectedItems","lowerBound","upperBound","updatedIndexes","updatedItems","lastToggledIndex","indexes","Set","toggleSelection","toggleSelectionFromLastIndex","LIMEL_CHECKBOX","TableSelection","selectEvent","rowSelectorCellClick","ev","clickedRow","rowPosition","updateRowSelectors","emit","changeSet","getRowByIndex","updateRowSelector","checkBox","getActiveRows","hasSelection","setSelection","isEqual","columnDefinitions","getRowSelectorColumnDefinition","getRowSelectorFormatter","mapLayout","layouts","stretchLastColumn","stretchColumns","lowDensity","tableCss","FIRST_PAGE","Table","hostRef","getActiveRowsData","selectAllOnChange","selectAll","detail","newSelection","tableSelection","getColumnOptions","handleMoveColumn","_","changeColumns","handleDataSorting","handlePageLoaded","handleAjaxRequesting","onClickRow","formatRow","formatRows","updateMaxPage","initTabulatorComponent","addColumnAggregator","columnFactory","componentWillLoad","firstRequest","initTableSelection","componentDidLoad","init","disconnectedCallback","totalRowsChanged","pageSizeChanged","pageChanged","activeRowChanged","newData","oldData","updateColumns","newColumns","oldColumns","areSameColumns","columnsInTable","oldColumnsInTable","updateAggregates","newAggregates","oldAggregates","haveSameAggregateFields","updateSelection","updateSelectable","oldAggregateFields","getOptions","host","shadowRoot","createTabulator","isRemoteMode","calculatePageCount","ajaxOptions","getAjaxOptions","paginationOptions","getPaginationOptions","columnOptions","getColumnSorter","sorting","currentSorting","toLocaleLowerCase","aggregates","aggregate","_values","_data","remoteUrl","abortRequest","__","changePage","columnSorters","resolveExistingData","currentLoad","_ev","activeRow","total","hasAggregation","some","h","Host","class","renderEmptyMessage","renderSelectAll","showSelectAll","_b","_c","showEmptyMessage","emptyMessage"],"sources":["./node_modules/tabulator-tables/dist/js/tabulator_esm.js","./node_modules/html-escaper/esm/index.js","./src/components/table/columns.ts","./src/components/table/element-pool.ts","./src/components/table/selection.ts","./src/components/table/table-selection.ts","./src/components/table/layout.ts","./src/components/table/table.scss?tag=limel-table&encapsulation=shadow","./src/components/table/table.tsx"],"sourcesContent":["/* Tabulator v5.5.1 (c) Oliver Folkerd 2023 */\nclass CoreFeature{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\t}\n\n\t//////////////////////////////////////////\n\t/////////////// DataLoad /////////////////\n\t//////////////////////////////////////////\n\n\treloadData(data, silent, columnsChanged){\n\t\treturn this.table.dataLoader.load(data, undefined, undefined, undefined, silent, columnsChanged);\n\t}\n\n\t//////////////////////////////////////////\n\t///////////// Localization ///////////////\n\t//////////////////////////////////////////\n\n\tlangText(){\n\t\treturn this.table.modules.localize.getText(...arguments);\n\t}\n\n\tlangBind(){\n\t\treturn this.table.modules.localize.bind(...arguments);\n\t}\n\n\tlangLocale(){\n\t\treturn this.table.modules.localize.getLocale(...arguments);\n\t}\n\n\n\t//////////////////////////////////////////\n\t////////// Inter Table Comms /////////////\n\t//////////////////////////////////////////\n\n\tcommsConnections(){\n\t\treturn this.table.modules.comms.getConnections(...arguments);\n\t}\n\n\tcommsSend(){\n\t\treturn this.table.modules.comms.send(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Layout  /////////////////\n\t//////////////////////////////////////////\n\n\tlayoutMode(){\n\t\treturn this.table.modules.layout.getMode();\n\t}\n\n\tlayoutRefresh(force){\n\t\treturn this.table.modules.layout.layout(force);\n\t}\n\n\n\t//////////////////////////////////////////\n\t/////////////// Event Bus ////////////////\n\t//////////////////////////////////////////\n\n\tsubscribe(){\n\t\treturn this.table.eventBus.subscribe(...arguments);\n\t}\n\n\tunsubscribe(){\n\t\treturn this.table.eventBus.unsubscribe(...arguments);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.table.eventBus.subscribed(key);\n\t}\n\n\tsubscriptionChange(){\n\t\treturn this.table.eventBus.subscriptionChange(...arguments);\n\t}\n\n\tdispatch(){\n\t\treturn this.table.eventBus.dispatch(...arguments);\n\t}\n\n\tchain(){\n\t\treturn this.table.eventBus.chain(...arguments);\n\t}\n\n\tconfirm(){\n\t\treturn this.table.eventBus.confirm(...arguments);\n\t}\n\n\tdispatchExternal(){\n\t\treturn this.table.externalEvents.dispatch(...arguments);\n\t}\n\n\tsubscribedExternal(key){\n\t\treturn this.table.externalEvents.subscribed(key);\n\t}\n\n\tsubscriptionChangeExternal(){\n\t\treturn this.table.externalEvents.subscriptionChange(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Options /////////////////\n\t//////////////////////////////////////////\n\n\toptions(key){\n\t\treturn this.table.options[key];\n\t}\n\n\tsetOption(key, value){\n\t\tif(typeof value !== \"undefined\"){\n\t\t\tthis.table.options[key] = value;\n\t\t}\n\n\t\treturn this.table.options[key];\n\t}\n\n\t//////////////////////////////////////////\n\t/////////// Deprecation Checks ///////////\n\t//////////////////////////////////////////\n\n\tdeprecationCheck(oldOption, newOption){\n\t\treturn this.table.deprecationAdvisor.check(oldOption, newOption);\n\t}\n\n\tdeprecationCheckMsg(oldOption, msg){\n\t\treturn this.table.deprecationAdvisor.checkMsg(oldOption, msg);\n\t}\n\n\tdeprecationMsg(msg){\n\t\treturn this.table.deprecationAdvisor.msg(msg);\n\t}\n\t//////////////////////////////////////////\n\t//////////////// Modules /////////////////\n\t//////////////////////////////////////////\n\n\tmodule(key){\n\t\treturn this.table.module(key);\n\t}\n}\n\nclass Helpers{\n\n\tstatic elVisible(el){\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n\t}\n\n\tstatic elOffset(el){\n\t\tvar box = el.getBoundingClientRect();\n\n\t\treturn {\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\n\t\t};\n\t}\n\n\tstatic deepClone(obj, clone, list = []){\n\t\tvar objectProto = {}.__proto__,\n\t\tarrayProto = [].__proto__;\n\n\t\tif (!clone){\n\t\t\tclone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\n\t\t}\n\n\t\tfor(var i in obj) {\n\t\t\tlet subject = obj[i],\n\t\t\tmatch, copy;\n\n\t\t\tif(subject != null && typeof subject === \"object\" && (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)){\n\t\t\t\tmatch = list.findIndex((item) => {\n\t\t\t\t\treturn item.subject === subject;\n\t\t\t\t});\n\n\t\t\t\tif(match > -1){\n\t\t\t\t\tclone[i] = list[match].copy;\n\t\t\t\t}else {\n\t\t\t\t\tcopy = Object.assign(Array.isArray(subject) ? [] : {}, subject);\n\n\t\t\t\t\tlist.unshift({subject, copy});\n\n\t\t\t\t\tclone[i] = this.deepClone(subject, copy, list);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n}\n\nclass Popup extends CoreFeature{\n\tconstructor(table, element, parent){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = element;\n\t\tthis.container = this._lookupContainer();\n\t\t\n\t\tthis.parent = parent;\n\t\t\n\t\tthis.reversedX = false;\n\t\tthis.childPopup = null;\n\t\tthis.blurable = false;\n\t\tthis.blurCallback = null;\n\t\tthis.blurEventsBound = false;\n\t\tthis.renderedCallback = null;\n\t\t\n\t\tthis.visible = false;\n\t\tthis.hideable = true;\n\t\t\n\t\tthis.element.classList.add(\"tabulator-popup-container\");\n\t\t\n\t\tthis.blurEvent = this.hide.bind(this, false);\n\t\tthis.escEvent = this._escapeCheck.bind(this);\n\t\t\n\t\tthis.destroyBinding = this.tableDestroyed.bind(this);\n\t\tthis.destroyed = false;\n\t}\n\t\n\ttableDestroyed(){\n\t\tthis.destroyed = true;\n\t\tthis.hide(true);\n\t}\n\t\n\t_lookupContainer(){\n\t\tvar container = this.table.options.popupContainer;\n\t\t\n\t\tif(typeof container === \"string\"){\n\t\t\tcontainer = document.querySelector(container);\n\t\t\t\n\t\t\tif(!container){\n\t\t\t\tconsole.warn(\"Menu Error - no container element found matching selector:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t\t}\n\t\t}else if (container === true){\n\t\t\tcontainer = this.table.element;\n\t\t}\n\t\t\n\t\tif(container && !this._checkContainerIsParent(container)){\n\t\t\tcontainer = false;\n\t\t\tconsole.warn(\"Menu Error - container element does not contain this table:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n\t\t}\n\t\t\n\t\tif(!container){\n\t\t\tcontainer = document.body;\n\t\t}\n\t\t\n\t\treturn container;\n\t}\n\t\n\t_checkContainerIsParent(container, element = this.table.element){\n\t\tif(container === element){\n\t\t\treturn true;\n\t\t}else {\n\t\t\treturn element.parentNode ? this._checkContainerIsParent(container, element.parentNode) : false;\n\t\t}\n\t}\n\t\n\trenderCallback(callback){\n\t\tthis.renderedCallback = callback;\n\t}\n\t\n\tcontainerEventCoords(e){\n\t\tvar touch = !(e instanceof MouseEvent);\n\t\t\n\t\tvar x = touch ? e.touches[0].pageX : e.pageX;\n\t\tvar y = touch ? e.touches[0].pageY : e.pageY;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tlet parentOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\tx -= parentOffset.left;\n\t\t\ty -= parentOffset.top;\n\t\t}\n\t\t\n\t\treturn {x, y};\n\t}\n\t\n\telementPositionCoords(element, position = \"right\"){\n\t\tvar offset = Helpers.elOffset(element),\n\t\tcontainerOffset, x, y;\n\t\t\n\t\tif(this.container !== document.body){\n\t\t\tcontainerOffset = Helpers.elOffset(this.container);\n\t\t\t\n\t\t\toffset.left -= containerOffset.left;\n\t\t\toffset.top -= containerOffset.top;\n\t\t}\n\t\t\n\t\tswitch(position){\n\t\t\tcase \"right\":\n\t\t\t\tx = offset.left + element.offsetWidth;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"bottom\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top + element.offsetHeight;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"left\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top - 1;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"top\":\n\t\t\t\tx = offset.left;\n\t\t\t\ty = offset.top;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"center\":\n\t\t\t\tx = offset.left + (element.offsetWidth / 2);\n\t\t\t\ty = offset.top + (element.offsetHeight / 2);\n\t\t\t\tbreak;\n\t\t\t\n\t\t}\n\t\t\n\t\treturn {x, y, offset};\n\t}\n\t\n\tshow(origin, position){\n\t\tvar x, y, parentEl, parentOffset, coords;\n\t\t\n\t\tif(this.destroyed || this.table.destroyed){\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tif(origin instanceof HTMLElement){\n\t\t\tparentEl = origin;\n\t\t\tcoords = this.elementPositionCoords(origin, position);\n\t\t\t\n\t\t\tparentOffset = coords.offset;\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t}else if(typeof origin === \"number\"){\n\t\t\tparentOffset = {top:0, left:0};\n\t\t\tx = origin;\n\t\t\ty = position;\n\t\t}else {\n\t\t\tcoords = this.containerEventCoords(origin);\n\t\t\t\n\t\t\tx = coords.x;\n\t\t\ty = coords.y;\n\t\t\t\n\t\t\tthis.reversedX = false;\n\t\t}\n\t\t\n\t\tthis.element.style.top = y + \"px\";\n\t\tthis.element.style.left = x + \"px\";\n\t\t\n\t\tthis.container.appendChild(this.element);\n\t\t\n\t\tif(typeof this.renderedCallback === \"function\"){\n\t\t\tthis.renderedCallback();\n\t\t}\n\t\t\n\t\tthis._fitToScreen(x, y, parentEl, parentOffset, position);\n\t\t\n\t\tthis.visible = true;\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.destroyBinding);\n\t\t\n\t\tthis.element.addEventListener(\"mousedown\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_fitToScreen(x, y, parentEl, parentOffset, position){\n\t\tvar scrollTop = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;\n\t\t\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\n\t\tif((x + this.element.offsetWidth) >= this.container.offsetWidth || this.reversedX){\n\t\t\tthis.element.style.left = \"\";\n\t\t\t\n\t\t\tif(parentEl){\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - parentOffset.left) + \"px\";\n\t\t\t}else {\n\t\t\t\tthis.element.style.right = (this.container.offsetWidth - x) + \"px\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.reversedX = true;\n\t\t}\n\t\t\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\n\t\tif((y + this.element.offsetHeight) > Math.max(this.container.offsetHeight, scrollTop ? this.container.scrollHeight : 0)) {\n\t\t\tif(parentEl){\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"bottom\":\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight - parentEl.offsetHeight - 1) + \"px\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight + parentEl.offsetHeight + 1) + \"px\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\tthis.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight) + \"px\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisVisible(){\n\t\treturn this.visible;\n\t}\n\t\n\thideOnBlur(callback){\n\t\tthis.blurable = true;\n\t\t\n\t\tif(this.visible){\n\t\t\tsetTimeout(() => {\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n\t\t\t\t\tthis.subscribe(\"cell-editing\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\t\twindow.addEventListener(\"resize\", this.blurEvent);\n\t\t\t\t\tdocument.body.addEventListener(\"keydown\", this.escEvent);\n\n\t\t\t\t\tthis.blurEventsBound = true;\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t\t\n\t\t\tthis.blurCallback = callback;\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\t_escapeCheck(e){\n\t\tif(e.keyCode == 27){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\t\n\tblockHide(){\n\t\tthis.hideable = false;\n\t}\n\t\n\trestoreHide(){\n\t\tthis.hideable = true;\n\t}\n\t\n\thide(silent = false){\n\t\tif(this.visible && this.hideable){\n\t\t\tif(this.blurable && this.blurEventsBound){\n\t\t\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\n\t\t\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\n\t\t\t\tdocument.body.removeEventListener(\"mousedown\", this.blurEvent);\n\t\t\t\twindow.removeEventListener(\"resize\", this.blurEvent);\n\t\t\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n\t\t\t\tthis.unsubscribe(\"cell-editing\", this.blurEvent);\n\n\t\t\t\tthis.blurEventsBound = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.childPopup){\n\t\t\t\tthis.childPopup.hide();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.childPopup = null;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.visible = false;\n\t\t\t\n\t\t\tif(this.blurCallback && !silent){\n\t\t\t\tthis.blurCallback();\n\t\t\t}\n\t\t\t\n\t\t\tthis.unsubscribe(\"table-destroy\", this.destroyBinding);\n\t\t}\n\t\t\n\t\treturn this;\n\t}\n\t\n\tchild(element){\n\t\tif(this.childPopup){\n\t\t\tthis.childPopup.hide();\n\t\t}\n\t\t\n\t\tthis.childPopup = new Popup(this.table, element, this);\n\t\t\n\t\treturn this.childPopup;\n\t}\n}\n\nclass Module extends CoreFeature{\n\t\n\tconstructor(table, name){\n\t\tsuper(table);\n\t\t\n\t\tthis._handler = null;\n\t}\n\t\n\tinitialize(){\n\t\t// setup module when table is initialized, to be overridden in module\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Options Registration ///////\n\t///////////////////////////////////\n\t\n\tregisterTableOption(key, value){\n\t\tthis.table.optionsList.register(key, value);\n\t}\n\t\n\tregisterColumnOption(key, value){\n\t\tthis.table.columnManager.optionsList.register(key, value);\n\t}\n\t\n\t///////////////////////////////////\n\t/// Public Function Registration ///\n\t///////////////////////////////////\n\t\n\tregisterTableFunction(name, func){\n\t\tif(typeof this.table[name] === \"undefined\"){\n\t\t\tthis.table[name] = (...args) => {\n\t\t\t\tthis.table.initGuard(name);\n\t\t\t\t\n\t\t\t\treturn func(...args);\n\t\t\t};\n\t\t}else {\n\t\t\tconsole.warn(\"Unable to bind table function, name already in use\", name);\n\t\t}\n\t}\n\t\n\tregisterComponentFunction(component, func, handler){\n\t\treturn this.table.componentFunctionBinder.bind(component, func, handler);\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Data Pipeline //////////\n\t///////////////////////////////////\n\t\n\tregisterDataHandler(handler, priority){\n\t\tthis.table.rowManager.registerDataPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tregisterDisplayHandler(handler, priority){\n\t\tthis.table.rowManager.registerDisplayPipelineHandler(handler, priority);\n\t\tthis._handler = handler;\n\t}\n\t\n\tdisplayRows(adjust){\n\t\tvar index = this.table.rowManager.displayRows.length - 1, \n\t\tlookupIndex;\n\t\t\n\t\tif(this._handler){\n\t\t\tlookupIndex = this.table.rowManager.displayPipeline.findIndex((item) => {\n\t\t\t\treturn item.handler === this._handler;\n\t\t\t});\n\n\t\t\tif(lookupIndex > -1){\n\t\t\t\tindex = lookupIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(adjust){\n\t\t\tindex = index + adjust;\n\t\t}\n\n\t\tif(this._handler){\n\t\t\tif(index > -1){\n\t\t\t\treturn this.table.rowManager.getDisplayRows(index);\n\t\t\t}else {\n\t\t\t\treturn this.activeRows();\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\tactiveRows(){\n\t\treturn this.table.rowManager.activeRows;\n\t}\n\t\n\trefreshData(renderInPosition, handler){\n\t\tif(!handler){\n\t\t\thandler = this._handler;\n\t\t}\n\t\t\n\t\tif(handler){\n\t\t\tthis.table.rowManager.refreshActiveData(handler, false, renderInPosition);\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Footer Management ////////\n\t///////////////////////////////////\n\t\n\tfooterAppend(element){\n\t\treturn this.table.footerManager.append(element);\n\t}\n\t\n\tfooterPrepend(element){\n\t\treturn this.table.footerManager.prepend(element);\n\t}\n\t\n\tfooterRemove(element){\n\t\treturn this.table.footerManager.remove(element);\n\t} \n\t\n\t///////////////////////////////////\n\t//////// Popups Management ////////\n\t///////////////////////////////////\n\t\n\tpopup(menuEl, menuContainer){\n\t\treturn new Popup(this.table, menuEl, menuContainer);\n\t}\n\t\n\t///////////////////////////////////\n\t//////// Alert Management ////////\n\t///////////////////////////////////\n\t\n\talert(content, type){\n\t\treturn this.table.alertManager.alert(content, type);\n\t}\n\t\n\tclearAlert(){\n\t\treturn this.table.alertManager.clear();\n\t}\n\t\n}\n\nvar defaultAccessors = {};\n\nclass Accessor extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n\n\t\tthis.registerColumnOption(\"accessor\");\n\t\tthis.registerColumnOption(\"accessorParams\");\n\t\tthis.registerColumnOption(\"accessorData\");\n\t\tthis.registerColumnOption(\"accessorDataParams\");\n\t\tthis.registerColumnOption(\"accessorDownload\");\n\t\tthis.registerColumnOption(\"accessorDownloadParams\");\n\t\tthis.registerColumnOption(\"accessorClipboard\");\n\t\tthis.registerColumnOption(\"accessorClipboardParams\");\n\t\tthis.registerColumnOption(\"accessorPrint\");\n\t\tthis.registerColumnOption(\"accessorPrintParams\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutput\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutputParams\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\n\t}\n\n\t//initialize column accessor\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\taccessor;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\taccessor = this.lookupAccessor(column.definition[key]);\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\taccessor:accessor,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.accessor = config;\n\t\t}\n\t}\n\n\tlookupAccessor(value){\n\t\tvar accessor = false;\n\n\t\t//set column accessor\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Accessor.accessors[value]){\n\t\t\t\t\taccessor = Accessor.accessors[value];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\taccessor = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn accessor;\n\t}\n\n\t//apply accessor to row\n\ttransformRow(row, type){\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\trowComponent = row.getComponent();\n\n\t\t//clone data object with deep copy to isolate internal data from returned result\n\t\tvar data = Helpers.deepClone(row.data || {});\n\n\t\tthis.table.columnManager.traverse(function(column){\n\t\t\tvar value, accessor, params, colComponent;\n\n\t\t\tif(column.modules.accessor){\n\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tvalue = column.getFieldValue(data);\n\n\t\t\t\t\tif(value != \"undefined\"){\n\t\t\t\t\t\tcolComponent = column.getComponent();\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colComponent, rowComponent) : accessor.params;\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colComponent, rowComponent));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n}\n\n//load defaults\nAccessor.moduleName = \"accessor\";\nAccessor.accessors = defaultAccessors;\n\nvar defaultConfig = {\n\tmethod: \"GET\",\n};\n\nfunction generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else {\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nfunction serializeParams(params){\n\tvar output = generateParamsList(params),\n\tencoded = [];\n\n\toutput.forEach(function(item){\n\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n\t});\n\n\treturn encoded.join(\"&\");\n}\n\nfunction urlBuilder(url, config, params){\n\tif(url){\n\t\tif(params && Object.keys(params).length){\n\t\t\tif(!config.method || config.method.toLowerCase() == \"get\"){\n\t\t\t\tconfig.method = \"get\";\n\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + serializeParams(params);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn url;\n}\n\nfunction defaultLoaderPromise(url, config, params){\n\tvar contentType;\n\n\treturn new Promise((resolve, reject) => {\n\t\t//set url\n\t\turl = this.urlGenerator.call(this.table, url, config, params);\n\n\t\t//set body content if not GET request\n\t\tif(config.method.toUpperCase() != \"GET\"){\n\t\t\tcontentType = typeof this.table.options.ajaxContentType === \"object\" ?  this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\n\t\t\tif(contentType){\n\n\t\t\t\tfor(var key in contentType.headers){\n\t\t\t\t\tif(!config.headers){\n\t\t\t\t\t\tconfig.headers = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof config.headers[key] === \"undefined\"){\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconfig.body = contentType.body.call(this, url, config, params);\n\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\n\t\t\t}\n\t\t}\n\n\t\tif(url){\n\t\t\t//configure headers\n\t\t\tif(typeof config.headers === \"undefined\"){\n\t\t\t\tconfig.headers = {};\n\t\t\t}\n\n\t\t\tif(typeof config.headers.Accept === \"undefined\"){\n\t\t\t\tconfig.headers.Accept = \"application/json\";\n\t\t\t}\n\n\t\t\tif(typeof config.headers[\"X-Requested-With\"] === \"undefined\"){\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t}\n\n\t\t\tif(typeof config.mode === \"undefined\"){\n\t\t\t\tconfig.mode = \"cors\";\n\t\t\t}\n\n\t\t\tif(config.mode == \"cors\"){\n\t\t\t\tif(typeof config.headers[\"Origin\"] === \"undefined\"){\n\t\t\t\t\tconfig.headers[\"Origin\"] = window.location.origin;\n\t\t\t\t}\n        \n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'same-origin';\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'include';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//send request\n\t\t\tfetch(url, config)\n\t\t\t\t.then((response)=>{\n\t\t\t\t\tif(response.ok) {\n\t\t\t\t\t\tresponse.json()\n\t\t\t\t\t\t\t.then((data)=>{\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t}).catch((error)=>{\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error)=>{\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t}else {\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\n\t\t\tresolve([]);\n\t\t}\n\t});\n}\n\nfunction generateParamsList$1(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList$1(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList$1(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else {\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nvar defaultContentTypeFormatters = {\n\t\"json\":{\n\t\theaders:{\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody:function(url, config, params){\n\t\t\treturn JSON.stringify(params);\n\t\t},\n\t},\n\t\"form\":{\n\t\theaders:{\n\t\t},\n\t\tbody:function(url, config, params){\n\n\t\t\tvar output = generateParamsList$1(params),\n\t\t\tform = new FormData();\n\n\t\t\toutput.forEach(function(item){\n\t\t\t\tform.append(item.key, item.value);\n\t\t\t});\n\n\t\t\treturn form;\n\t\t},\n\t},\n};\n\nclass Ajax extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {}; //hold config object for ajax request\n\t\tthis.url = \"\"; //request URL\n\t\tthis.urlGenerator = false;\n\t\tthis.params = false; //request parameters\n\t\t\n\t\tthis.loaderPromise = false;\n\t\t\n\t\tthis.registerTableOption(\"ajaxURL\", false); //url for ajax loading\n\t\tthis.registerTableOption(\"ajaxURLGenerator\", false);\n\t\tthis.registerTableOption(\"ajaxParams\", {});  //params for ajax loading\n\t\tthis.registerTableOption(\"ajaxConfig\", \"get\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxContentType\", \"form\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxRequestFunc\", false); //promise function\n\t\t\n\t\tthis.registerTableOption(\"ajaxRequesting\", function(){});\n\t\tthis.registerTableOption(\"ajaxResponse\", false);\n\t\t\n\t\tthis.contentTypeFormatters = Ajax.contentTypeFormatters;\n\t}\n\t\n\t//initialize setup options\n\tinitialize(){\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\n\t\t\n\t\tif(this.table.options.ajaxURL){\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\n\t\t}\n\n\n\t\tthis.setDefaultConfig(this.table.options.ajaxConfig);\n\t\t\n\t\tthis.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this));\n\t\t\n\t\tthis.subscribe(\"data-loading\", this.requestDataCheck.bind(this));\n\t\tthis.subscribe(\"data-params\", this.requestParams.bind(this));\n\t\tthis.subscribe(\"data-load\", this.requestData.bind(this));\n\t}\n\t\n\trequestParams(data, config, silent, params){\n\t\tvar ajaxParams = this.table.options.ajaxParams;\n\t\t\n\t\tif(ajaxParams){\n\t\t\tif(typeof ajaxParams === \"function\"){\n\t\t\t\tajaxParams = ajaxParams.call(this.table);\n\t\t\t}\n\t\t\t\n\t\t\tparams = Object.assign(params, ajaxParams);\n\t\t}\t\t\n\t\t\n\t\treturn params;\n\t}\n\t\n\trequestDataCheck(data, params, config, silent){\n\t\treturn !!((!data && this.url) || typeof data === \"string\");\n\t}\n\t\n\trequestData(url, params, config, silent, previousData){\n\t\tvar ajaxConfig;\n\t\t\n\t\tif(!previousData && this.requestDataCheck(url)){\n\t\t\tif(url){\n\t\t\t\tthis.setUrl(url);\n\t\t\t}\n\t\t\t\n\t\t\tajaxConfig = this.generateConfig(config);\n\t\t\t\n\t\t\treturn this.sendRequest(this.url, params, ajaxConfig);\n\t\t}else {\n\t\t\treturn previousData;\n\t\t}\n\t}\n\t\n\tsetDefaultConfig(config = {}){\n\t\tthis.config = Object.assign({}, Ajax.defaultConfig);\n\n\t\tif(typeof config == \"string\"){\n\t\t\tthis.config.method = config;\n\t\t}else {\n\t\t\tObject.assign(this.config, config);\n\t\t}\n\t}\n\t\n\t//load config object\n\tgenerateConfig(config = {}){\n\t\tvar ajaxConfig = Object.assign({}, this.config);\n\t\t\n\t\tif(typeof config == \"string\"){\n\t\t\tajaxConfig.method = config;\n\t\t}else {\n\t\t\tObject.assign(ajaxConfig, config);\n\t\t}\n\t\t\n\t\treturn ajaxConfig;\n\t}\n\t\n\t//set request url\n\tsetUrl(url){\n\t\tthis.url = url;\n\t}\n\t\n\t//get request url\n\tgetUrl(){\n\t\treturn this.url;\n\t}\n\t\n\t//send ajax request\n\tsendRequest(url, params, config){\n\t\tif(this.table.options.ajaxRequesting.call(this.table, url, params) !== false){\n\t\t\treturn this.loaderPromise(url, config, params)\n\t\t\t\t.then((data)=>{\n\t\t\t\t\tif(this.table.options.ajaxResponse){\n\t\t\t\t\t\tdata = this.table.options.ajaxResponse.call(this.table, url, params, data);\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\treturn data;\n\t\t\t\t});\n\t\t}else {\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n}\n\nAjax.moduleName = \"ajax\";\n\n//load defaults\nAjax.defaultConfig = defaultConfig;\nAjax.defaultURLGenerator = urlBuilder;\nAjax.defaultLoaderPromise = defaultLoaderPromise;\nAjax.contentTypeFormatters = defaultContentTypeFormatters;\n\nvar defaultPasteActions = {\n\treplace:function(rows){\n\t\treturn this.table.setData(rows);\n\t},\n\tupdate:function(rows){\n\t\treturn this.table.updateOrAddData(rows);\n\t},\n\tinsert:function(rows){\n\t\treturn this.table.addData(rows);\n\t},\n};\n\nvar defaultPasteParsers = {\n\ttable:function(clipboard){\n\t\tvar data = [],\n\t\theaderFindSuccess = true,\n\t\tcolumns = this.table.columnManager.columns,\n\t\tcolumnMap = [],\n\t\trows = [];\n\n\t\t//get data from clipboard into array of columns and rows.\n\t\tclipboard = clipboard.split(\"\\n\");\n\n\t\tclipboard.forEach(function(row){\n\t\t\tdata.push(row.split(\"\\t\"));\n\t\t});\n\n\t\tif(data.length && !(data.length === 1 && data[0].length < 2)){\n\n\t\t\t//check if headers are present by title\n\t\t\tdata[0].forEach(function(value){\n\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n\t\t\t\t});\n\n\t\t\t\tif(column){\n\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t}else {\n\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//check if column headers are present by field\n\t\t\tif(!headerFindSuccess){\n\t\t\t\theaderFindSuccess = true;\n\t\t\t\tcolumnMap = [];\n\n\t\t\t\tdata[0].forEach(function(value){\n\t\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\n\t\t\t\t\t});\n\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t}else {\n\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(!headerFindSuccess){\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//remove header row if found\n\t\t\tif(headerFindSuccess){\n\t\t\t\tdata.shift();\n\t\t\t}\n\n\t\t\tdata.forEach(function(item){\n\t\t\t\tvar row = {};\n\n\t\t\t\titem.forEach(function(value, i){\n\t\t\t\t\tif(columnMap[i]){\n\t\t\t\t\t\trow[columnMap[i].field] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trows.push(row);\n\t\t\t});\n\n\t\t\treturn rows;\n\t\t}else {\n\t\t\treturn false;\n\t\t}\n\t}\n};\n\nclass Clipboard extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = true;\n\t\tthis.pasteParser = function(){};\n\t\tthis.pasteAction = function(){};\n\t\tthis.customSelection = false;\n\t\tthis.rowRange = false;\n\t\tthis.blocked = true; //block copy actions not originating from this command\n\n\t\tthis.registerTableOption(\"clipboard\", false); //enable clipboard\n\t\tthis.registerTableOption(\"clipboardCopyStyled\", true); //formatted table data\n\t\tthis.registerTableOption(\"clipboardCopyConfig\", false); //clipboard config\n\t\tthis.registerTableOption(\"clipboardCopyFormatter\", false); //DEPRECATED - REMOVE in 5.0\n\t\tthis.registerTableOption(\"clipboardCopyRowRange\", \"active\"); //restrict clipboard to visible rows only\n\t\tthis.registerTableOption(\"clipboardPasteParser\", \"table\"); //convert pasted clipboard data to rows\n\t\tthis.registerTableOption(\"clipboardPasteAction\", \"insert\"); //how to insert pasted data into the table\n\n\t\tthis.registerColumnOption(\"clipboard\");\n\t\tthis.registerColumnOption(\"titleClipboard\");\n\t}\n\n\tinitialize(){\n\t\tthis.mode = this.table.options.clipboard;\n\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\n\n\t\tif(this.mode === true || this.mode === \"copy\"){\n\t\t\tthis.table.element.addEventListener(\"copy\", (e) => {\n\t\t\t\tvar plain, html, list;\n\n\t\t\t\tif(!this.blocked){\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif(this.customSelection){\n\t\t\t\t\t\tplain = this.customSelection;\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\n\t\t\t\t\t\tlist = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\n\n\t\t\t\t\t\thtml = this.table.modules.export.generateHTMLTable(list);\n\t\t\t\t\t\tplain = html ? this.generatePlainContent(list) : \"\";\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t\thtml = this.table.options.clipboardCopyFormatter(\"html\", html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchExternal(\"clipboardCopied\", plain, html);\n\n\t\t\t\t\tthis.reset();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif(this.mode === true || this.mode === \"paste\"){\n\t\t\tthis.table.element.addEventListener(\"paste\", (e) => {\n\t\t\t\tthis.paste(e);\n\t\t\t});\n\t\t}\n\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\n\n\t\tthis.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\n\t}\n\n\treset(){\n\t\tthis.blocked = true;\n\t\tthis.customSelection = false;\n\t}\n\n\tgeneratePlainContent (list) {\n\t\tvar output = [];\n\n\t\tlist.forEach((row) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach((col) => {\n\t\t\t\tvar value = \"\";\n\n\t\t\t\tif(col){\n\n\t\t\t\t\tif(row.type === \"group\"){\n\t\t\t\t\t\tcol.value = col.component.getKey();\n\t\t\t\t\t}\n\n\t\t\t\t\tif(col.value === null){\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t}else {\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tvalue = col.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowData.push(value);\n\t\t\t});\n\n\t\t\toutput.push(rowData.join(\"\\t\"));\n\t\t});\n\n\t\treturn output.join(\"\\n\");\n\t}\n\n\tcopy (range, internal) {\n\t\tvar sel, textRange;\n\t\tthis.blocked = false;\n\t\tthis.customSelection = false;\n\n\t\tif (this.mode === true || this.mode === \"copy\") {\n\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNodeContents(this.table.element);\n\t\t\t\tsel = window.getSelection();\n\n\t\t\t\tif (sel.toString() && internal) {\n\t\t\t\t\tthis.customSelection = sel.toString();\n\t\t\t\t}\n\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n\t\t\t\ttextRange = document.body.createTextRange();\n\t\t\t\ttextRange.moveToElementText(this.table.element);\n\t\t\t\ttextRange.select();\n\t\t\t}\n\n\t\t\tdocument.execCommand('copy');\n\n\t\t\tif (sel) {\n\t\t\t\tsel.removeAllRanges();\n\t\t\t}\n\t\t}\n\t}\n\n\t//PASTE EVENT HANDLING\n\tsetPasteAction(action){\n\n\t\tswitch(typeof action){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteAction = Clipboard.pasteActions[action];\n\n\t\t\t\tif(!this.pasteAction){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteAction = action;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetPasteParser(parser){\n\t\tswitch(typeof parser){\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteParser = Clipboard.pasteParsers[parser];\n\n\t\t\t\tif(!this.pasteParser){\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteParser = parser;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaste(e){\n\t\tvar data, rowData, rows;\n\n\t\tif(this.checkPaseOrigin(e)){\n\n\t\t\tdata = this.getPasteData(e);\n\n\t\t\trowData = this.pasteParser.call(this, data);\n\n\t\t\tif(rowData){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif(this.table.modExists(\"mutator\")){\n\t\t\t\t\trowData = this.mutateData(rowData);\n\t\t\t\t}\n\n\t\t\t\trows = this.pasteAction.call(this, rowData);\n\n\t\t\t\tthis.dispatchExternal(\"clipboardPasted\", data, rowData, rows);\n\t\t\t}else {\n\t\t\t\tthis.dispatchExternal(\"clipboardPasteError\", data);\n\t\t\t}\n\t\t}\n\t}\n\n\tmutateData(data){\n\t\tvar output = [];\n\n\t\tif(Array.isArray(data)){\n\t\t\tdata.forEach((row) => {\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\n\t\t\t});\n\t\t}else {\n\t\t\toutput = data;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\n\tcheckPaseOrigin(e){\n\t\tvar valid = true;\n\n\t\tif(e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell){\n\t\t\tvalid = false;\n\t\t}\n\n\t\treturn valid;\n\t}\n\n\tgetPasteData(e){\n\t\tvar data;\n\n\t\tif (window.clipboardData && window.clipboardData.getData) {\n\t\t\tdata = window.clipboardData.getData('Text');\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tdata = e.clipboardData.getData('text/plain');\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\n\t\t}\n\n\t\treturn data;\n\t}\n}\n\nClipboard.moduleName = \"clipboard\";\n\n//load defaults\nClipboard.pasteActions = defaultPasteActions;\nClipboard.pasteParsers = defaultPasteParsers;\n\nclass CalcComponent{\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else {\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n}\n\n//public cell object\nclass CellComponent {\n\n\tconstructor (cell){\n\t\tthis._cell = cell;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else {\n\t\t\t\t\treturn target._cell.table.componentFunctionBinder.handle(\"cell\", target._cell, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetValue(){\n\t\treturn this._cell.getValue();\n\t}\n\n\tgetOldValue(){\n\t\treturn this._cell.getOldValue();\n\t}\n\n\tgetInitialValue(){\n\t\treturn this._cell.initialValue;\n\t}\n\n\tgetElement(){\n\t\treturn this._cell.getElement();\n\t}\n\n\tgetRow(){\n\t\treturn this._cell.row.getComponent();\n\t}\n\n\tgetData(transform){\n\t\treturn this._cell.row.getData(transform);\n\t}\n\tgetType(){\n\t\treturn \"cell\";\n\t}\n\tgetField(){\n\t\treturn this._cell.column.getField();\n\t}\n\n\tgetColumn(){\n\t\treturn this._cell.column.getComponent();\n\t}\n\n\tsetValue(value, mutate){\n\t\tif(typeof mutate == \"undefined\"){\n\t\t\tmutate = true;\n\t\t}\n\n\t\tthis._cell.setValue(value, mutate);\n\t}\n\n\trestoreOldValue(){\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\n\t}\n\n\trestoreInitialValue(){\n\t\tthis._cell.setValueActual(this._cell.initialValue);\n\t}\n\n\tcheckHeight(){\n\t\tthis._cell.checkHeight();\n\t}\n\n\tgetTable(){\n\t\treturn this._cell.table;\n\t}\n\n\t_getSelf(){\n\t\treturn this._cell;\n\t}\n}\n\nclass Cell extends CoreFeature{\n\tconstructor(column, row){\n\t\tsuper(column.table);\n\n\t\tthis.table = column.table;\n\t\tthis.column = column;\n\t\tthis.row = row;\n\t\tthis.element = null;\n\t\tthis.value = null;\n\t\tthis.initialValue;\n\t\tthis.oldValue = null;\n\t\tthis.modules = {};\n\n\t\tthis.height = null;\n\t\tthis.width = null;\n\t\tthis.minWidth = null;\n\n\t\tthis.component = null;\n\n\t\tthis.loaded = false; //track if the cell has been added to the DOM yet\n\n\t\tthis.build();\n\t}\n\n\t//////////////// Setup Functions /////////////////\n\t//generate element\n\tbuild(){\n\t\tthis.generateElement();\n\n\t\tthis.setWidth();\n\n\t\tthis._configureCell();\n\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\n\n\t\tthis.initialValue = this.value;\n\t}\n\n\tgenerateElement(){\n\t\tthis.element = document.createElement('div');\n\t\tthis.element.className = \"tabulator-cell\";\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\n\t}\n\n\t_configureCell(){\n\t\tvar element = this.element,\n\t\tfield = this.column.getField(),\n\t\tvertAligns = {\n\t\t\ttop:\"flex-start\",\n\t\t\tbottom:\"flex-end\",\n\t\t\tmiddle:\"center\",\n\t\t},\n\t\thozAligns = {\n\t\t\tleft:\"flex-start\",\n\t\t\tright:\"flex-end\",\n\t\t\tcenter:\"center\",\n\t\t};\n\n\t\t//set text alignment\n\t\telement.style.textAlign = this.column.hozAlign;\n\n\t\tif(this.column.vertAlign){\n\t\t\telement.style.display = \"inline-flex\";\n\n\t\t\telement.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\n\n\t\t\tif(this.column.hozAlign){\n\t\t\t\telement.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\n\t\t\t}\n\t\t}\n\n\t\tif(field){\n\t\t\telement.setAttribute(\"tabulator-field\", field);\n\t\t}\n\n\t\t//add class to cell if needed\n\t\tif(this.column.definition.cssClass){\n\t\t\tvar classNames = this.column.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\telement.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.dispatch(\"cell-init\", this);\n\n\t\t//hide cell if not visible\n\t\tif(!this.column.visible){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//generate cell contents\n\t_generateContents(){\n\t\tvar val;\n\n\t\tval = this.chain(\"cell-format\", this, null, () => {\n\t\t\treturn this.element.innerHTML = this.value;\n\t\t});\n\n\t\tswitch(typeof val){\n\t\t\tcase \"object\":\n\t\t\t\tif(val instanceof Node){\n\n\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\t\t\t\tthis.element.appendChild(val);\n\t\t\t\t}else {\n\t\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\t\tif(val != null){\n\t\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tthis.element.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.element.innerHTML = val;\n\t\t}\n\t}\n\n\tcellRendered(){\n\t\tthis.dispatch(\"cell-rendered\", this);\n\t}\n\n\t//////////////////// Getters ////////////////////\n\tgetElement(containerOnly){\n\t\tif(!this.loaded){\n\t\t\tthis.loaded = true;\n\t\t\tif(!containerOnly){\n\t\t\t\tthis.layoutElement();\n\t\t\t}\n\t\t}\n\n\t\treturn this.element;\n\t}\n\n\tgetValue(){\n\t\treturn this.value;\n\t}\n\n\tgetOldValue(){\n\t\treturn this.oldValue;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tsetValue(value, mutate, force){\n\t\tvar changed = this.setValueProcessData(value, mutate, force);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-updated\", this);\n\n\t\t\tthis.cellRendered();\n\n\t\t\tif(this.column.definition.cellEdited){\n\t\t\t\tthis.column.definition.cellEdited.call(this.table, this.getComponent());\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"cellEdited\", this.getComponent());\n\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValueProcessData(value, mutate, force){\n\t\tvar changed = false;\n\n\t\tif(this.value !== value || force){\n\n\t\t\tchanged = true;\n\n\t\t\tif(mutate){\n\t\t\t\tvalue = this.chain(\"cell-value-changing\", [this, value], null, value);\n\t\t\t}\n\t\t}\n\n\t\tthis.setValueActual(value);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-changed\", this);\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\tsetValueActual(value){\n\t\tthis.oldValue = this.value;\n\n\t\tthis.value = value;\n\n\t\tthis.dispatch(\"cell-value-save-before\", this);\n\n\t\tthis.column.setFieldValue(this.row.data, value);\n\n\t\tthis.dispatch(\"cell-value-save-after\", this);\n\n\t\tif(this.loaded){\n\t\t\tthis.layoutElement();\n\t\t}\n\t}\n\n\tlayoutElement(){\n\t\tthis._generateContents();\n\n\t\tthis.dispatch(\"cell-layout\", this);\n\t}\n\n\tsetWidth(){\n\t\tthis.width = this.column.width;\n\t\tthis.element.style.width = this.column.widthStyled;\n\t}\n\n\tclearWidth(){\n\t\tthis.width = \"\";\n\t\tthis.element.style.width = \"\";\n\t}\n\n\tgetWidth(){\n\t\treturn this.width || this.element.offsetWidth;\n\t}\n\n\tsetMinWidth(){\n\t\tthis.minWidth = this.column.minWidth;\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\n\t}\n\n\tsetMaxWidth(){\n\t\tthis.maxWidth = this.column.maxWidth;\n\t\tthis.element.style.maxWidth = this.column.maxWidthStyled;\n\t}\n\n\tcheckHeight(){\n\t\t// var height = this.element.css(\"height\");\n\t\tthis.row.reinitializeHeight();\n\t}\n\n\tclearHeight(){\n\t\tthis.element.style.height = \"\";\n\t\tthis.height = null;\n\n\t\tthis.dispatch(\"cell-height\", this, \"\");\n\t}\n\n\tsetHeight(){\n\t\tthis.height = this.row.height;\n\t\tthis.element.style.height = this.row.heightStyled;\n\n\t\tthis.dispatch(\"cell-height\", this, this.row.heightStyled);\n\t}\n\n\tgetHeight(){\n\t\treturn this.height || this.element.offsetHeight;\n\t}\n\n\tshow(){\n\t\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n\t}\n\n\thide(){\n\t\tthis.element.style.display = \"none\";\n\t}\n\n\tdelete(){\n\t\tthis.dispatch(\"cell-delete\", this);\n\n\t\tif(!this.table.rowManager.redrawBlock && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\n\t\tthis.element = false;\n\t\tthis.column.deleteCell(this);\n\t\tthis.row.deleteCell(this);\n\t\tthis.calcs = {};\n\t}\n\n\tgetIndex(){\n\t\treturn this.row.getCellIndex(this);\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new CellComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}\n\n//public column object\nclass ColumnComponent {\n\tconstructor (column){\n\t\tthis._column = column;\n\t\tthis.type = \"ColumnComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else {\n\t\t\t\t\treturn target._column.table.componentFunctionBinder.handle(\"column\", target._column, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetElement(){\n\t\treturn this._column.getElement();\n\t}\n\n\tgetDefinition(){\n\t\treturn this._column.getDefinition();\n\t}\n\n\tgetField(){\n\t\treturn this._column.getField();\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this._column.getTitleDownload();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._column.cells.forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tisVisible(){\n\t\treturn this._column.visible;\n\t}\n\n\tshow(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.show();\n\t\t\t});\n\t\t}else {\n\t\t\tthis._column.show();\n\t\t}\n\t}\n\n\thide(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.hide();\n\t\t\t});\n\t\t}else {\n\t\t\tthis._column.hide();\n\t\t}\n\t}\n\n\ttoggle(){\n\t\tif(this._column.visible){\n\t\t\tthis.hide();\n\t\t}else {\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tdelete(){\n\t\treturn this._column.delete();\n\t}\n\n\tgetSubColumns(){\n\t\tvar output = [];\n\n\t\tif(this._column.columns.length){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\toutput.push(column.getComponent());\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetParentColumn(){\n\t\treturn this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._column;\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column, position, ifVisible);\n\t}\n\n\tgetTable(){\n\t\treturn this._column.table;\n\t}\n\n\tmove(to, after){\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\n\n\t\tif(toColumn){\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after);\n\t\t}else {\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t}\n\t}\n\n\tgetNextColumn(){\n\t\tvar nextCol = this._column.nextColumn();\n\n\t\treturn nextCol ? nextCol.getComponent() : false;\n\t}\n\n\tgetPrevColumn(){\n\t\tvar prevCol = this._column.prevColumn();\n\n\t\treturn prevCol ? prevCol.getComponent() : false;\n\t}\n\n\tupdateDefinition(updates){\n\t\treturn this._column.updateDefinition(updates);\n\t}\n\n\tgetWidth(){\n\t\treturn this._column.getWidth();\n\t}\n\n\tsetWidth(width){\n\t\tvar result;\n\n\t\tif(width === true){\n\t\t\tresult =  this._column.reinitializeWidth(true);\n\t\t}else {\n\t\t\tresult =  this._column.setWidth(width);\n\t\t}\n\n\t\tthis._column.table.columnManager.rerenderColumns(true);\n\n\t\treturn result;\n\t}\n}\n\nvar defaultColumnOptions = {\n\t\"title\": undefined,\n\t\"field\": undefined,\n\t\"columns\": undefined,\n\t\"visible\": undefined,\n\t\"hozAlign\": undefined,\n\t\"vertAlign\": undefined,\n\t\"width\": undefined,\n\t\"minWidth\": 40,\n\t\"maxWidth\": undefined,\n\t\"maxInitialWidth\": undefined,\n\t\"cssClass\": undefined,\n\t\"variableHeight\": undefined,\n\t\"headerVertical\": undefined,\n\t\"headerHozAlign\": undefined,\n\t\"headerWordWrap\": false,\n\t\"editableTitle\": undefined,\n};\n\nclass Column extends CoreFeature{\n\n\tconstructor(def, parent){\n\t\tsuper(parent.table);\n\n\t\tthis.definition = def; //column definition\n\t\tthis.parent = parent; //hold parent object\n\t\tthis.type = \"column\"; //type of element\n\t\tthis.columns = []; //child columns\n\t\tthis.cells = []; //cells bound to this column\n\t\tthis.element = this.createElement(); //column header element\n\t\tthis.contentElement = false;\n\t\tthis.titleHolderElement = false;\n\t\tthis.titleElement = false;\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\n\t\tthis.isGroup = false;\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\n\t\tthis.vertAlign = \"\"; //vert text alignment\n\n\t\t//multi dimensional filed handling\n\t\tthis.field =\"\";\n\t\tthis.fieldStructure = \"\";\n\t\tthis.getFieldValue = \"\";\n\t\tthis.setFieldValue = \"\";\n\n\t\tthis.titleDownload = null;\n\t\tthis.titleFormatterRendered = false;\n\n\t\tthis.mapDefinitions();\n\n\t\tthis.setField(this.definition.field);\n\n\t\tthis.modules = {}; //hold module variables;\n\n\t\tthis.width = null; //column width\n\t\tthis.widthStyled = \"\"; //column width pre-styled to improve render efficiency\n\t\tthis.maxWidth = null; //column maximum width\n\t\tthis.maxWidthStyled = \"\"; //column maximum pre-styled to improve render efficiency\n\t\tthis.maxInitialWidth = null;\n\t\tthis.minWidth = null; //column minimum width\n\t\tthis.minWidthStyled = \"\"; //column minimum pre-styled to improve render efficiency\n\t\tthis.widthFixed = false; //user has specified a width for this column\n\n\t\tthis.visible = true; //default visible state\n\n\t\tthis.component = null;\n\n\t\t//initialize column\n\t\tif(this.definition.columns){\n\n\t\t\tthis.isGroup = true;\n\n\t\t\tthis.definition.columns.forEach((def, i) => {\n\t\t\t\tvar newCol = new Column(def, this);\n\t\t\t\tthis.attachColumn(newCol);\n\t\t\t});\n\n\t\t\tthis.checkColumnVisibility();\n\t\t}else {\n\t\t\tparent.registerColumnField(this);\n\t\t}\n\n\t\tthis._initialize();\n\t}\n\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.setAttribute(\"role\", \"columnheader\");\n\t\tel.setAttribute(\"aria-sort\", \"none\");\n\n\t\tswitch(this.table.options.columnHeaderVertAlign){\n\t\t\tcase \"middle\":\n\t\t\t\tel.style.justifyContent = \"center\";\n\t\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tel.style.justifyContent = \"flex-end\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn el;\n\t}\n\n\tcreateGroupElement (){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col-group-cols\");\n\n\t\treturn el;\n\t}\n\n\tmapDefinitions(){\n\t\tvar defaults = this.table.options.columnDefaults;\n\n\t\t//map columnDefaults onto column definitions\n\t\tif(defaults){\n\t\t\tfor(let key in defaults){\n\t\t\t\tif(typeof this.definition[key] === \"undefined\"){\n\t\t\t\t\tthis.definition[key] = defaults[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition);\n\t}\n\n\tcheckDefinition(){\n\t\tObject.keys(this.definition).forEach((key) => {\n\t\t\tif(Column.defaultOptionList.indexOf(key) === -1){\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetField(field){\n\t\tthis.field = field;\n\t\tthis.fieldStructure = field ? (this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field]) : [];\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n\t}\n\n\t//register column position with column manager\n\tregisterColumnPosition(column){\n\t\tthis.parent.registerColumnPosition(column);\n\t}\n\n\t//register column position with column manager\n\tregisterColumnField(column){\n\t\tthis.parent.registerColumnField(column);\n\t}\n\n\t//trigger position registration\n\treRegisterPosition(){\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolumn.reRegisterPosition();\n\t\t\t});\n\t\t}else {\n\t\t\tthis.registerColumnPosition(this);\n\t\t}\n\t}\n\n\t//build header element\n\t_initialize(){\n\t\tvar def = this.definition;\n\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\tif(def.headerVertical){\n\t\t\tthis.element.classList.add(\"tabulator-col-vertical\");\n\n\t\t\tif(def.headerVertical === \"flip\"){\n\t\t\t\tthis.element.classList.add(\"tabulator-col-vertical-flip\");\n\t\t\t}\n\t\t}\n\n\t\tthis.contentElement = this._buildColumnHeaderContent();\n\n\t\tthis.element.appendChild(this.contentElement);\n\n\t\tif(this.isGroup){\n\t\t\tthis._buildGroupHeader();\n\t\t}else {\n\t\t\tthis._buildColumnHeader();\n\t\t}\n\n\t\tthis.dispatch(\"column-init\", this);\n\t}\n\n\t//build header element for header\n\t_buildColumnHeader(){\n\t\tvar def = this.definition;\n\n\t\tthis.dispatch(\"column-layout\", this);\n\n\t\t//set column visibility\n\t\tif(typeof def.visible != \"undefined\"){\n\t\t\tif(def.visible){\n\t\t\t\tthis.show(true);\n\t\t\t}else {\n\t\t\t\tthis.hide(true);\n\t\t\t}\n\t\t}\n\n\t\t//assign additional css classes to column header\n\t\tif(def.cssClass){\n\t\t\tvar classNames = def.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tif(def.field){\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\n\t\t}\n\n\t\t//set min width if present\n\t\tthis.setMinWidth(parseInt(def.minWidth));\n\n\t\tif (def.maxInitialWidth) {\n\t\t\tthis.maxInitialWidth = parseInt(def.maxInitialWidth);\n\t\t}\n\t\t\n\t\tif(def.maxWidth){\n\t\t\tthis.setMaxWidth(parseInt(def.maxWidth));\n\t\t}\n\n\t\tthis.reinitializeWidth();\n\n\t\t//set horizontal text alignment\n\t\tthis.hozAlign = this.definition.hozAlign;\n\t\tthis.vertAlign = this.definition.vertAlign;\n\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\t}\n\n\t_buildColumnHeaderContent(){\n\t\tvar contentElement = document.createElement(\"div\");\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\n\n\t\tthis.titleHolderElement = document.createElement(\"div\");\n\t\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\n\n\t\tcontentElement.appendChild(this.titleHolderElement);\n\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\n\n\t\tthis.titleHolderElement.appendChild(this.titleElement);\n\n\t\treturn contentElement;\n\t}\n\n\t//build title element of column\n\t_buildColumnHeaderTitle(){\n\t\tvar def = this.definition;\n\n\t\tvar titleHolderElement = document.createElement(\"div\");\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\n\t\t\n\t\tif(def.headerWordWrap){\n\t\t\ttitleHolderElement.classList.add(\"tabulator-col-title-wrap\");\n\t\t}\n\n\t\tif(def.editableTitle){\n\t\t\tvar titleElement = document.createElement(\"input\");\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\n\n\t\t\ttitleElement.addEventListener(\"click\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\ttitleElement.focus();\n\t\t\t});\n\n\t\t\ttitleElement.addEventListener(\"change\", () => {\n\t\t\t\tdef.title = titleElement.value;\n\t\t\t\tthis.dispatchExternal(\"columnTitleChanged\", this.getComponent());\n\t\t\t});\n\n\t\t\ttitleHolderElement.appendChild(titleElement);\n\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\ttitleElement.value = text || (def.title || \"&nbsp;\");\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\ttitleElement.value  = def.title || \"&nbsp;\";\n\t\t\t}\n\n\t\t}else {\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, text || (def.title || \"&nbsp;\"));\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n\t\t\t}\n\t\t}\n\n\t\treturn titleHolderElement;\n\t}\n\n\t_formatColumnHeaderTitle(el, title){\n\t\tvar contents = this.chain(\"column-format\", [this, title, el], null, () => {\n\t\t\treturn title;\n\t\t});\n\n\t\tswitch(typeof contents){\n\t\t\tcase \"object\":\n\t\t\t\tif(contents instanceof Node){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else {\n\t\t\t\t\tel.innerHTML = \"\";\n\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\t\tel.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tel.innerHTML = contents;\n\t\t}\n\t}\n\n\t//build header element for column group\n\t_buildGroupHeader(){\n\t\tthis.element.classList.add(\"tabulator-col-group\");\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\n\n\t\t//asign additional css classes to column header\n\t\tif(this.definition.cssClass){\n\t\t\tvar classNames = this.definition.cssClass.split(\" \");\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\n\t\tthis.element.appendChild(this.groupElement);\n\t}\n\n\t//flat field lookup\n\t_getFlatData(data){\n\t\treturn data[this.field];\n\t}\n\n\t//nested field lookup\n\t_getNestedData(data){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length,\n\t\toutput;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tdataObj = dataObj[structure[i]];\n\n\t\t\toutput = dataObj;\n\n\t\t\tif(!dataObj){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//flat field set\n\t_setFlatData(data, value){\n\t\tif(this.field){\n\t\t\tdata[this.field] = value;\n\t\t}\n\t}\n\n\t//nested field set\n\t_setNestedData(data, value){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tif(i == length -1){\n\t\t\t\tdataObj[structure[i]] = value;\n\t\t\t}else {\n\t\t\t\tif(!dataObj[structure[i]]){\n\t\t\t\t\tif(typeof value !== \"undefined\"){\n\t\t\t\t\t\tdataObj[structure[i]] = {};\n\t\t\t\t\t}else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdataObj = dataObj[structure[i]];\n\t\t\t}\n\t\t}\n\t}\n\n\t//attach column to this group\n\tattachColumn(column){\n\t\tif(this.groupElement){\n\t\t\tthis.columns.push(column);\n\t\t\tthis.groupElement.appendChild(column.getElement());\n\n\t\t\tcolumn.columnRendered();\n\t\t}else {\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\n\t\t}\n\t}\n\n\t//vertically align header in column\n\tverticalAlign(alignment, height){\n\n\t\t//calculate height of column header and group holder element\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : (height || this.parent.getHeadersElement().clientHeight);\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n\t\tthis.element.style.height = parentHeight + \"px\";\n\n\t\tthis.dispatch(\"column-height\", this, this.element.style.height);\n\n\t\tif(this.isGroup){\n\t\t\tthis.groupElement.style.minHeight = (parentHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t}\n\n\t\t//vertically align cell contents\n\t\t// if(!this.isGroup && alignment !== \"top\"){\n\t\t// \tif(alignment === \"bottom\"){\n\t\t// \t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t// \t}else{\n\t\t// \t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\n\t\t// \t}\n\t\t// }\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.verticalAlign(alignment);\n\t\t});\n\t}\n\n\t//clear vertical alignment\n\tclearVerticalAlign(){\n\t\tthis.element.style.paddingTop = \"\";\n\t\tthis.element.style.height = \"\";\n\t\tthis.element.style.minHeight = \"\";\n\t\tthis.groupElement.style.minHeight = \"\";\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.clearVerticalAlign();\n\t\t});\n\n\t\tthis.dispatch(\"column-height\", this, \"\");\n\t}\n\n\t//// Retrieve Column Information ////\n\t//return column header element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\t//return column group element\n\tgetGroupElement(){\n\t\treturn this.groupElement;\n\t}\n\n\t//return field name\n\tgetField(){\n\t\treturn this.field;\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this.titleDownload;\n\t}\n\n\t//return the first column in a group\n\tgetFirstColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else {\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[0].getFirstColumn();\n\t\t\t}else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\t//return the last column in a group\n\tgetLastColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else {\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[this.columns.length -1].getLastColumn();\n\t\t\t}else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\t//return all columns in a group\n\tgetColumns(traverse){\n\t\tvar columns = [];\n\n\t\tif(traverse){\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumns.push(column);\n\t\t\t\t\t\n\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t});\n\t\t}else {\n\t\t\tcolumns = this.columns;\n\t\t}\n\t\t\n\t\treturn columns;\n\t}\n\n\t//return all columns in a group\n\tgetCells(){\n\t\treturn this.cells;\n\t}\n\n\t//retrieve the top column in a group of columns\n\tgetTopColumn(){\n\t\tif(this.parent.isGroup){\n\t\t\treturn this.parent.getTopColumn();\n\t\t}else {\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t//return column definition object\n\tgetDefinition(updateBranches){\n\t\tvar colDefs = [];\n\n\t\tif(this.isGroup && updateBranches){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolDefs.push(column.getDefinition(true));\n\t\t\t});\n\n\t\t\tthis.definition.columns = colDefs;\n\t\t}\n\n\t\treturn this.definition;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tcheckColumnVisibility(){\n\t\tvar visible = false;\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tif(column.visible){\n\t\t\t\tvisible = true;\n\t\t\t}\n\t\t});\n\n\t\tif(visible){\n\t\t\tthis.show();\n\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t}else {\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//show column\n\tshow(silent, responsiveToggle){\n\t\tif(!this.visible){\n\t\t\tthis.visible = true;\n\n\t\t\tthis.element.style.display = \"\";\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.show();\n\t\t\t});\n\n\t\t\tif(!this.isGroup && this.width === null){\n\t\t\t\tthis.reinitializeWidth();\n\t\t\t}\n\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\n\t\t\tthis.dispatch(\"column-show\", this, responsiveToggle);\n\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), true);\n\t\t\t}\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\n\t//hide column\n\thide(silent, responsiveToggle){\n\t\tif(this.visible){\n\t\t\tthis.visible = false;\n\n\t\t\tthis.element.style.display = \"none\";\n\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.hide();\n\t\t\t});\n\n\t\t\tthis.dispatch(\"column-hide\", this, responsiveToggle);\n\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t\t}\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\n\tmatchChildWidths(){\n\t\tvar childWidth = 0;\n\n\t\tif(this.contentElement && this.columns.length){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\tchildWidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.contentElement.style.maxWidth = (childWidth - 1) + \"px\";\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveChild(child){\n\t\tvar index = this.columns.indexOf(child);\n\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\n\t\tif(!this.columns.length){\n\t\t\tthis.delete();\n\t\t}\n\t}\n\n\tsetWidth(width){\n\t\tthis.widthFixed = true;\n\t\tthis.setWidthActual(width);\n\t}\n\n\tsetWidthActual(width){\n\t\tif(isNaN(width)){\n\t\t\twidth = Math.floor((this.table.element.clientWidth/100) * parseInt(width));\n\t\t}\n\n\t\twidth = Math.max(this.minWidth, width);\n\n\t\tif(this.maxWidth){\n\t\t\twidth = Math.min(this.maxWidth, width);\n\t\t}\n\n\t\tthis.width = width;\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\n\n\t\tthis.element.style.width = this.widthStyled;\n\n\t\tif(!this.isGroup){\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.setWidth();\n\t\t\t});\n\t\t}\n\n\t\tif(this.parent.isGroup){\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\n\t\tthis.dispatch(\"column-width\", this);\n\t}\n\n\tcheckCellHeights(){\n\t\tvar rows = [];\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tif(cell.row.heightInitialized){\n\t\t\t\tif(cell.row.getElement().offsetParent !== null){\n\t\t\t\t\trows.push(cell.row);\n\t\t\t\t\tcell.row.clearCellHeight();\n\t\t\t\t}else {\n\t\t\t\t\tcell.row.heightInitialized = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\trows.forEach(function(row){\n\t\t\trow.calcHeight();\n\t\t});\n\n\t\trows.forEach(function(row){\n\t\t\trow.setCellHeight();\n\t\t});\n\t}\n\n\tgetWidth(){\n\t\tvar width = 0;\n\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\twidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t}else {\n\t\t\twidth = this.width;\n\t\t}\n\n\t\treturn width;\n\t}\n\n\tgetLeftOffset(){\n\t\tvar offset = this.element.offsetLeft;\n\n\t\tif(this.parent.isGroup){\n\t\t\toffset += this.parent.getLeftOffset();\n\t\t}\n\n\t\treturn offset;\n\t}\n\n\tgetHeight(){\n\t\treturn Math.ceil(this.element.getBoundingClientRect().height);\n\t}\n\n\tsetMinWidth(minWidth){\n\t\tif(this.maxWidth && minWidth > this.maxWidth){\n\t\t\tminWidth = this.maxWidth;\n\n\t\t\tconsole.warn(\"the minWidth (\"+ minWidth + \"px) for column '\" + this.field + \"' cannot be bigger that its maxWidth (\"+ this.maxWidthStyled + \")\");\n\t\t}\n\n\t\tthis.minWidth = minWidth;\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n\n\t\tthis.element.style.minWidth = this.minWidthStyled;\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMinWidth();\n\t\t});\n\t}\n\n\tsetMaxWidth(maxWidth){\n\t\tif(this.minWidth && maxWidth < this.minWidth){\n\t\t\tmaxWidth = this.minWidth;\n\n\t\t\tconsole.warn(\"the maxWidth (\"+ maxWidth + \"px) for column '\" + this.field + \"' cannot be smaller that its minWidth (\"+ this.minWidthStyled + \")\");\n\t\t}\n\n\t\tthis.maxWidth = maxWidth;\n\t\tthis.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\n\n\t\tthis.element.style.maxWidth = this.maxWidthStyled;\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMaxWidth();\n\t\t});\n\t}\n\n\tdelete(){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(this.isGroup){\n\t\t\t\tthis.columns.forEach(function(column){\n\t\t\t\t\tcolumn.delete();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.dispatch(\"column-delete\", this);\n\n\t\t\tvar cellCount = this.cells.length;\n\n\t\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\t\tthis.cells[0].delete();\n\t\t\t}\n\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\n\t\t\tthis.element = false;\n\t\t\tthis.contentElement = false;\n\t\t\tthis.titleElement = false;\n\t\t\tthis.groupElement = false;\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.removeChild(this);\n\t\t\t}\n\n\t\t\tthis.table.columnManager.deregisterColumn(this);\n\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\n\t\t\tresolve();\n\t\t});\n\t}\n\n\tcolumnRendered(){\n\t\tif(this.titleFormatterRendered){\n\t\t\tthis.titleFormatterRendered();\n\t\t}\n\n\t\tthis.dispatch(\"column-rendered\", this);\n\t}\n\n\t//////////////// Cell Management /////////////////\n\t//generate cell for this column\n\tgenerateCell(row){\n\t\tvar cell = new Cell(this, row);\n\n\t\tthis.cells.push(cell);\n\n\t\treturn cell;\n\t}\n\n\tnextColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\n\t}\n\n\t_nextVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n\t}\n\n\tprevColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\n\t}\n\n\t_prevVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n\t}\n\n\treinitializeWidth(force){\n\t\tthis.widthFixed = false;\n\n\t\t//set width if present\n\t\tif(typeof this.definition.width !== \"undefined\" && !force){\n\t\t\t// maxInitialWidth ignored here as width specified\n\t\t\tthis.setWidth(this.definition.width);\n\t\t}\n\n\t\tthis.dispatch(\"column-width-fit-before\", this);\n\n\t\tthis.fitToData(force);\n\n\t\tthis.dispatch(\"column-width-fit-after\", this);\n\t}\n\n\t//set column width to maximum cell width for non group columns\n\tfitToData(force){\n\t\tif(this.isGroup){\n\t\t\treturn;\n\t\t}\n\n\t\tif(!this.widthFixed){\n\t\t\tthis.element.style.width = \"\";\n\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tcell.clearWidth();\n\t\t\t});\n\t\t}\n\n\t\tvar maxWidth = this.element.offsetWidth;\n\n\t\tif(!this.width || !this.widthFixed){\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tvar width = cell.getWidth();\n\n\t\t\t\tif(width > maxWidth){\n\t\t\t\t\tmaxWidth = width;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(maxWidth){\n\t\t\t\tvar setTo = maxWidth + 1;\n\t\t\t\tif (this.maxInitialWidth && !force) {\n\t\t\t\t\tsetTo = Math.min(setTo, this.maxInitialWidth);\n\t\t\t\t}\n\t\t\t\tthis.setWidthActual(setTo);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateDefinition(updates){\n\t\tvar definition;\n\n\t\tif(!this.isGroup){\n\t\t\tif(!this.parent.isGroup){\n\t\t\t\tdefinition = Object.assign({}, this.getDefinition());\n\t\t\t\tdefinition = Object.assign(definition, updates);\n\n\t\t\t\treturn this.table.columnManager.addColumn(definition, false, this)\n\t\t\t\t\t.then((column) => {\n\n\t\t\t\t\t\tif(definition.field == this.field){\n\t\t\t\t\t\t\tthis.field = false; //clear field name to prevent deletion of duplicate column from arrays\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this.delete()\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t}\n\t}\n\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new ColumnComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}\n\nColumn.defaultOptionList = defaultColumnOptions;\n\n//public row object\nclass RowComponent {\n\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else {\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\tgetIndex(){\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\n\t}\n\n\tgetPosition(){\n\t\treturn this._row.getPosition();\n\t}\n\n\twatchPosition(callback){\n\t\treturn this._row.watchPosition(callback);\n\t}\n\n\tdelete(){\n\t\treturn this._row.delete();\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._row.table.rowManager.scrollToRow(this._row, position, ifVisible);\n\t}\n\n\tmove(to, after){\n\t\tthis._row.moveToRow(to, after);\n\t}\n\n\tupdate(data){\n\t\treturn this._row.updateData(data);\n\t}\n\n\tnormalizeHeight(){\n\t\tthis._row.normalizeHeight(true);\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n\n\treformat(){\n\t\treturn this._row.reinitialize();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetNextRow(){\n\t\tvar row = this._row.nextRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n\n\tgetPrevRow(){\n\t\tvar row = this._row.prevRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n}\n\nclass Row extends CoreFeature{\n\tconstructor (data, parent, type = \"row\"){\n\t\tsuper(parent.table);\n\t\t\n\t\tthis.parent = parent;\n\t\tthis.data = {};\n\t\tthis.type = type; //type of element\n\t\tthis.element = false;\n\t\tthis.modules = {}; //hold module variables;\n\t\tthis.cells = [];\n\t\tthis.height = 0; //hold element height\n\t\tthis.heightStyled = \"\"; //hold element height pre-styled to improve render efficiency\n\t\tthis.manualHeight = false; //user has manually set row height\n\t\tthis.outerHeight = 0; //hold elements outer height\n\t\tthis.initialized = false; //element has been rendered\n\t\tthis.heightInitialized = false; //element has resized cells to fit\n\t\tthis.position = 0; //store position of element in row list\n\t\tthis.positionWatchers = [];\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.created = false;\n\t\t\n\t\tthis.setData(data);\n\t}\n\t\n\tcreate(){\n\t\tif(!this.created){\n\t\t\tthis.created = true;\n\t\t\tthis.generateElement();\n\t\t}\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\tthis.element = el;\n\t}\n\t\n\tgetElement(){\n\t\tthis.create();\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.createElement();\n\t\tthis.dispatch(\"row-init\", this);\n\t}\n\t\n\tgenerateCells(){\n\t\tthis.cells = this.table.columnManager.generateCells(this);\n\t}\n\t\n\t//functions to setup on first render\n\tinitialize(force, inFragment){\n\t\tthis.create();\n\t\t\n\t\tif(!this.initialized || force){\n\t\t\t\n\t\t\tthis.deleteCells();\n\t\t\t\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-before\", this);\n\t\t\t\n\t\t\tthis.generateCells();\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t\t\n\t\t\tthis.table.columnManager.renderer.renderRowCells(this, inFragment);\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.normalizeHeight();\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout\", this);\n\t\t\t\n\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-after\", this);\n\t\t}else {\n\t\t\tthis.table.columnManager.renderer.rerenderRowCells(this, inFragment);\n\t\t}\n\t}\n\n\trendered(){\n\t\tthis.cells.forEach((cell) => {\n\t\t\tcell.cellRendered();\n\t\t});\n\t}\n\t\n\treinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.normalizeHeight(true);\n\t\t}\n\t}\n\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tdeinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t}\n\t\n\treinitialize(children){\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(!this.manualHeight){\n\t\t\tthis.height = 0;\n\t\t\tthis.heightStyled = \"\";\n\t\t}\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.initialize(true);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"row-relayout\", this);\n\t}\n\t\n\t//get heights when doing bulk row style calcs in virtual DOM\n\tcalcHeight(force){\n\t\tvar maxHeight = 0,\n\t\tminHeight;\n\t\t\n\t\tif(this.table.options.rowHeight){\n\t\t\tthis.height = this.table.options.rowHeight;\n\t\t}else {\n\t\t\tminHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\n\t\t\t\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tvar height = cell.getHeight();\n\t\t\t\tif(height > maxHeight){\n\t\t\t\t\tmaxHeight = height;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.height = Math.max(maxHeight, minHeight);\n\t\t\t}else {\n\t\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\n\t\tthis.outerHeight = this.element.offsetHeight;\n\t}\n\t\n\t//set of cells\n\tsetCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setHeight();\n\t\t});\n\t\t\n\t\tthis.heightInitialized = true;\n\t}\n\t\n\tclearCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.clearHeight();\n\t\t});\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(force){\n\t\tif(force && !this.table.options.rowHeight){\n\t\t\tthis.clearCellHeight();\n\t\t}\n\t\t\n\t\tthis.calcHeight(force);\n\t\t\n\t\tthis.setCellHeight();\n\t}\n\t\n\t//set height of rows\n\tsetHeight(height, force){\n\t\tif(this.height != height || force){\n\t\t\t\n\t\t\tthis.manualHeight = true;\n\t\t\t\n\t\t\tthis.height = height;\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\n\t\t\t\n\t\t\tthis.setCellHeight();\n\t\t\t\n\t\t\t// this.outerHeight = this.element.outerHeight();\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\t//return rows outer Width\n\tgetWidth(){\n\t\treturn this.element.offsetWidth;\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\t\n\t//////////////// Data Management /////////////////\n\tsetData(data){\n\t\tthis.data = this.chain(\"row-data-init-before\", [this, data], undefined, data);\n\t\t\n\t\tthis.dispatch(\"row-data-init-after\", this);\n\t}\n\t\n\t//update the rows data\n\tupdateData(updatedData){\n\t\tvar visible = this.element && Helpers.elVisible(this.element),\n\t\ttempData = {},\n\t\tnewRowData;\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof updatedData === \"string\"){\n\t\t\t\tupdatedData = JSON.parse(updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-before\", this);\n\t\t\t\n\t\t\tif(this.subscribed(\"row-data-changing\")){\n\t\t\t\ttempData = Object.assign(tempData, this.data);\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tnewRowData = this.chain(\"row-data-changing\", [this, tempData, updatedData], null, updatedData);\n\t\t\t\n\t\t\t//set data\n\t\t\tfor (let attrname in newRowData) {\n\t\t\t\tthis.data[attrname] = newRowData[attrname];\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-after\", this);\n\t\t\t\n\t\t\t//update affected cells only\n\t\t\tfor (let attrname in updatedData) {\n\t\t\t\t\n\t\t\t\tlet columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\n\t\t\t\t\n\t\t\t\tcolumns.forEach((column) => {\n\t\t\t\t\tlet cell = this.getCell(column.getField());\n\t\t\t\t\t\n\t\t\t\t\tif(cell){\n\t\t\t\t\t\tlet value = column.getFieldValue(newRowData);\n\t\t\t\t\t\tif(cell.getValue() !== value){\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(visible){\n\t\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//Partial reinitialization if visible\n\t\t\tif(visible){\n\t\t\t\tthis.normalizeHeight(true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.initialized = false;\n\t\t\t\tthis.height = 0;\n\t\t\t\tthis.heightStyled = \"\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-changed\", this, visible, updatedData);\n\t\t\t\n\t\t\t//this.reinitialize();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"rowUpdated\", this.getComponent());\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\tgetData(transform){\n\t\tif(transform){\n\t\t\treturn this.chain(\"row-data-retrieve\", [this, transform], null, this.data);\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\tgetCell(column){\n\t\tvar match = false;\n\t\t\n\t\tcolumn = this.table.columnManager.findColumn(column);\n\t\t\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\tmatch = this.cells.find(function(cell){\n\t\t\treturn cell.column === column;\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetCellIndex(findCell){\n\t\treturn this.cells.findIndex(function(cell){\n\t\t\treturn cell === findCell;\n\t\t});\n\t}\n\t\n\tfindCell(subject){\n\t\treturn this.cells.find((cell) => {\n\t\t\treturn cell.element === subject;\n\t\t});\n\t}\n\t\n\tgetCells(){\n\t\tif(!this.initialized && this.cells.length === 0){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\treturn this.cells;\n\t}\n\t\n\tnextRow(){\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tprevRow(){\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tmoveToRow(to, before){\n\t\tvar toRow = this.table.rowManager.findRow(to);\n\t\t\n\t\tif(toRow){\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\n\t\t}else {\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\n\t\t}\n\t}\n\t\n\t///////////////////// Actions  /////////////////////\n\tdelete(){\n\t\tthis.dispatch(\"row-delete\", this);\n\t\t\n\t\tthis.deleteActual();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\tdeleteActual(blockRedraw){\n\t\tthis.detachModules();\n\t\t\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\n\t\t\n\t\tthis.deleteCells();\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\tthis.element = false;\n\t\t\n\t\tthis.dispatch(\"row-deleted\", this);\n\t}\n\t\n\tdetachModules(){\n\t\tthis.dispatch(\"row-deleting\", this);\n\t}\n\t\n\tdeleteCells(){\n\t\tvar cellCount = this.cells.length;\n\t\t\n\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\tthis.cells[0].delete();\n\t\t}\n\t}\n\t\n\twipe(){\n\t\tthis.detachModules();\n\t\tthis.deleteCells();\n\t\t\n\t\tif(this.element){\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.modules = {};\n\t}\n\n\tisDisplayed(){\n\t\treturn this.table.rowManager.getDisplayRows().includes(this);\n\t}\n\n\tgetPosition(){\n\t\treturn this.isDisplayed() ? this.position : false;\n\t}\n\n\tsetPosition(position){\n\t\tif(position != this.position){\n\t\t\tthis.position = position;\n\n\t\t\tthis.positionWatchers.forEach((callback) => {\n\t\t\t\tcallback(this.position);\n\t\t\t});\n\t\t}\n\t}\n\n\twatchPosition(callback){\n\t\tthis.positionWatchers.push(callback);\n\n\t\tcallback(this.position);\n\t}\n\t\n\tgetGroup(){\n\t\treturn this.modules.group || false;\n\t}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new RowComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}\n\nvar defaultCalculations = {\n\t\"avg\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn Number(sum) + Number(value);\n\t\t\t});\n\n\t\t\toutput = output / values.length;\n\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\n\t\t}\n\n\t\treturn parseFloat(output).toString();\n\t},\n\t\"max\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value > output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"min\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value < output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"sum\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\n\t\t\t});\n\t\t}\n\n\t\treturn precision !== false ? output.toFixed(precision) : output;\n\t},\n\t\"concat\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn String(sum) + String(value);\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"count\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tif(value){\n\t\t\t\t\toutput ++;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"unique\":function(values, data, calcParams){\n\t\tvar unique = values.filter((value, index) => {\n\t\t\treturn (values || value === 0) && values.indexOf(value) === index;\n\t\t});\n\n\t\treturn unique.length;\n\t},\n};\n\nclass ColumnCalcs extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.topCalcs = [];\n\t\tthis.botCalcs = [];\n\t\tthis.genColumn = false;\n\t\tthis.topElement = this.createElement();\n\t\tthis.botElement = this.createElement();\n\t\tthis.topRow = false;\n\t\tthis.botRow = false;\n\t\tthis.topInitialized = false;\n\t\tthis.botInitialized = false;\n\t\t\n\t\tthis.blocked = false;\n\t\tthis.recalcAfterBlock = false;\n\t\t\n\t\tthis.registerTableOption(\"columnCalcs\", true);\n\t\t\n\t\tthis.registerColumnOption(\"topCalc\");\n\t\tthis.registerColumnOption(\"topCalcParams\");\n\t\tthis.registerColumnOption(\"topCalcFormatter\");\n\t\tthis.registerColumnOption(\"topCalcFormatterParams\");\n\t\tthis.registerColumnOption(\"bottomCalc\");\n\t\tthis.registerColumnOption(\"bottomCalcParams\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatter\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatterParams\");\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-calcs-holder\");\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tthis.genColumn = new Column({field:\"value\"}, this);\n\t\t\n\t\tthis.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"column-moved\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"column-add\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.recalcActiveRowsRefresh.bind(this));\n\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t\t\n\t\tthis.subscribe(\"redraw-blocked\", this.blockRedraw.bind(this));\n\t\tthis.subscribe(\"redraw-restored\", this.restoreRedraw.bind(this));\n\n\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t\n\t\tthis.registerTableFunction(\"getCalcResults\", this.getResults.bind(this));\n\t\tthis.registerTableFunction(\"recalc\", this.userRecalc.bind(this));\n\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\t\n\ttableRedraw(force){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t\t\n\t\tif(force){\n\t\t\tthis.redraw();\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.blocked = true;\n\t\tthis.recalcAfterBlock = false;\n\t}\n\t\n\t\n\trestoreRedraw(){\n\t\tthis.blocked = false;\n\t\t\n\t\tif(this.recalcAfterBlock){\n\t\t\tthis.recalcAfterBlock = false;\n\t\t\tthis.recalcActiveRowsRefresh();\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tuserRecalc(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tblockCheck(){\n\t\tif(this.blocked){\n\t\t\tthis.recalcAfterBlock = true;\n\t\t}\n\t\t\n\t\treturn this.blocked;\n\t}\n\t\n\tvisibleRows(viewable, rows){\n\t\tif(this.topRow){\n\t\t\trows.unshift(this.topRow);\n\t\t}\n\t\t\n\t\tif(this.botRow){\n\t\t\trows.push(this.botRow);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.recalcRowGroup(row);\n\t\t}else {\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRowsRefresh(){\n\t\tif(this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree){\n\t\t\tthis.recalcAll();\n\t\t}else {\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\t\n\trecalcActiveRows(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\t\n\tcellValueChanged(cell){\n\t\tif(cell.column.definition.topCalc || cell.column.definition.bottomCalc){\n\t\t\tif(this.table.options.groupBy){\n\t\t\t\tif(this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\"){\n\t\t\t\t\tthis.recalcActiveRows();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.recalcRowGroup(cell.row);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinitializeColumnCheck(column){\n\t\tif(column.definition.topCalc || column.definition.bottomCalc){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//initialize column calcs\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\tvar config = {\n\t\t\ttopCalcParams:def.topCalcParams || {},\n\t\t\tbotCalcParams:def.bottomCalcParams || {},\n\t\t};\n\t\t\n\t\tif(def.topCalc){\n\t\t\t\n\t\t\tswitch(typeof def.topCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.topCalc]){\n\t\t\t\t\t\tconfig.topCalc = ColumnCalcs.calculations[def.topCalc];\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.topCalc = def.topCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.topCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.topCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeTopRow();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif(def.bottomCalc){\n\t\t\tswitch(typeof def.bottomCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(ColumnCalcs.calculations[def.bottomCalc]){\n\t\t\t\t\t\tconfig.botCalc = ColumnCalcs.calculations[def.bottomCalc];\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.botCalc = def.bottomCalc;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(config.botCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.botCalcs.push(column);\n\t\t\t\t\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeBottomRow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t//dummy functions to handle being mock column manager\n\tregisterColumnField(){}\n\t\n\tremoveCalcs(){\n\t\tvar changed = false;\n\t\t\n\t\tif(this.topInitialized){\n\t\t\tthis.topInitialized = false;\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(this.botInitialized){\n\t\t\tthis.botInitialized = false;\n\t\t\tthis.footerRemove(this.botElement);\n\t\t\tchanged = true;\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\treinitializeCalcs(){\n\t\tif(this.topCalcs.length){\n\t\t\tthis.initializeTopRow();\n\t\t}\n\n\t\tif(this.botCalcs.length){\n\t\t\tthis.initializeBottomRow();\n\t\t}\n\t}\n\t\n\tinitializeTopRow(){\n\t\tif(!this.topInitialized){\n\t\t\tthis.table.columnManager.getContentsElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\t\t\tthis.topInitialized = true;\n\t\t}\n\t}\n\t\n\tinitializeBottomRow(){\n\t\tif(!this.botInitialized){\n\t\t\tthis.footerPrepend(this.botElement);\n\t\t\tthis.botInitialized = true;\n\t\t}\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tif(this.botInitialized && this.botRow){\n\t\t\tthis.botElement.scrollLeft = left;\n\t\t}\n\t}\n\t\n\trecalc(rows){\n\t\tvar data, row;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(this.topInitialized || this.botInitialized){\n\t\t\t\tdata = this.rowsToData(rows);\n\t\t\t\t\n\t\t\t\tif(this.topInitialized){\n\t\t\t\t\tif(this.topRow){\n\t\t\t\t\t\tthis.topRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"top\", data);\n\t\t\t\t\tthis.topRow = row;\n\t\t\t\t\twhile(this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\n\t\t\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.botInitialized){\n\t\t\t\t\tif(this.botRow){\n\t\t\t\t\t\tthis.botRow.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trow = this.generateRow(\"bottom\", data);\n\t\t\t\t\tthis.botRow = row;\n\t\t\t\t\twhile(this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\n\t\t\t\t\tthis.botElement.appendChild(row.getElement());\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t\t\t\n\t\t\t\t//set resizable handles\n\t\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcRowGroup(row){\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n\t}\n\t\n\trecalcAll(){\n\t\tif(this.topCalcs.length || this.botCalcs.length){\n\t\t\tif(this.table.options.columnCalcs !== \"group\"){\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.groupBy && this.table.options.columnCalcs !== \"table\"){\n\t\t\t\t\n\t\t\t\tvar groups = this.table.modules.groupRows.getChildGroups();\n\t\t\t\t\n\t\t\t\tgroups.forEach((group) => {\n\t\t\t\t\tthis.recalcGroup(group);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\trecalcGroup(group){\n\t\tvar data, rowData;\n\t\t\n\t\tif(!this.blockCheck()){\n\t\t\tif(group){\n\t\t\t\tif(group.calcs){\n\t\t\t\t\tif(group.calcs.bottom){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.bottom.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(group.calcs.top){\n\t\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\t\trowData = this.generateRowData(\"top\", data);\n\t\t\t\t\t\t\n\t\t\t\t\t\tgroup.calcs.top.updateData(rowData);\n\t\t\t\t\t\tgroup.calcs.top.reinitialize();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//generate top stats row\n\tgenerateTopRow(rows){\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\n\t}\n\t//generate bottom stats row\n\tgenerateBottomRow(rows){\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\n\t}\n\t\n\trowsToData(rows){\n\t\tvar data = [];\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tdata.push(row.getData());\n\t\t\t\n\t\t\tif(this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs){\n\t\t\t\tif(row.modules.dataTree && row.modules.dataTree.open){\n\t\t\t\t\tvar children = this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(row));\n\t\t\t\t\tdata = data.concat(children);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\t//generate stats row\n\tgenerateRow(pos, data){\n\t\tvar rowData = this.generateRowData(pos, data),\n\t\trow;\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.disable();\n\t\t}\n\t\t\n\t\trow = new Row(rowData, this, \"calc\");\n\t\t\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.enable();\n\t\t}\n\t\t\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\t\t\n\t\trow.component = false;\n\t\t\n\t\trow.getComponent = () => {\n\t\t\tif(!row.component){\n\t\t\t\trow.component = new CalcComponent(row);\n\t\t\t}\n\t\t\t\n\t\t\treturn row.component;\n\t\t};\n\t\t\n\t\trow.generateCells = () => {\n\t\t\t\n\t\t\tvar cells = [];\n\t\t\t\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\t\n\t\t\t\t//set field name of mock column\n\t\t\t\tthis.genColumn.setField(column.getField());\n\t\t\t\tthis.genColumn.hozAlign = column.hozAlign;\n\t\t\t\t\n\t\t\t\tif(column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")){\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}else {\n\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(\"plaintext\"),\n\t\t\t\t\t\tparams:{}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//ensure css class definition is replicated to calculation cell\n\t\t\t\tthis.genColumn.definition.cssClass = column.definition.cssClass;\n\t\t\t\t\n\t\t\t\t//generate cell and assign to correct column\n\t\t\t\tvar cell = new Cell(this.genColumn, row);\n\t\t\t\tcell.getElement();\n\t\t\t\tcell.column = column;\n\t\t\t\tcell.setWidth();\n\t\t\t\t\n\t\t\t\tcolumn.cells.push(cell);\n\t\t\t\tcells.push(cell);\n\t\t\t\t\n\t\t\t\tif(!column.visible){\n\t\t\t\t\tcell.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\trow.cells = cells;\n\t\t};\n\t\t\n\t\treturn row;\n\t}\n\t\n\t//generate stats row\n\tgenerateRowData(pos, data){\n\t\tvar rowData = {},\n\t\tcalcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n\t\ttype = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n\t\tparams, paramKey;\n\t\t\n\t\tcalcs.forEach(function(column){\n\t\t\tvar values = [];\n\t\t\t\n\t\t\tif(column.modules.columnCalcs && column.modules.columnCalcs[type]){\n\t\t\t\tdata.forEach(function(item){\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tparamKey = type + \"Params\";\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n\t\t\t\t\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowData;\n\t}\n\t\n\thasTopCalcs(){\n\t\treturn\t!!(this.topCalcs.length);\n\t}\n\t\n\thasBottomCalcs(){\n\t\treturn\t!!(this.botCalcs.length);\n\t}\n\t\n\t//handle table redraw\n\tredraw(){\n\t\tif(this.topRow){\n\t\t\tthis.topRow.normalizeHeight(true);\n\t\t}\n\t\tif(this.botRow){\n\t\t\tthis.botRow.normalizeHeight(true);\n\t\t}\n\t}\n\t\n\t//return the calculated\n\tgetResults(){\n\t\tvar results = {},\n\t\tgroups;\n\t\t\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\n\t\t\t\n\t\t\tgroups.forEach((group) => {\n\t\t\t\tresults[group.getKey()] = this.getGroupResults(group);\n\t\t\t});\n\t\t}else {\n\t\t\tresults = {\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {},\n\t\t\t};\n\t\t}\n\t\t\n\t\treturn results;\n\t}\n\t\n\t//get results from a group\n\tgetGroupResults(group){\n\t\tvar groupObj = group._getSelf(),\n\t\tsubGroups = group.getSubGroups(),\n\t\tsubGroupResults = {},\n\t\tresults = {};\n\t\t\n\t\tsubGroups.forEach((subgroup) => {\n\t\t\tsubGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\n\t\t});\n\t\t\n\t\tresults = {\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n\t\t\tgroups: subGroupResults,\n\t\t};\n\t\t\n\t\treturn results;\n\t}\n\t\n\tadjustForScrollbar(width){\n\t\tif(this.botRow){\n\t\t\tif(this.table.rtl){\n\t\t\t\tthis.botElement.style.paddingLeft = width + \"px\";\n\t\t\t}else {\n\t\t\t\tthis.botElement.style.paddingRight = width + \"px\";\n\t\t\t}\n\t\t}\n\t}\n}\n\nColumnCalcs.moduleName = \"columnCalcs\";\n\n//load defaults\nColumnCalcs.calculations = defaultCalculations;\n\nclass DataTree extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.indent = 10;\n\t\tthis.field = \"\";\n\t\tthis.collapseEl = null;\n\t\tthis.expandEl = null;\n\t\tthis.branchEl = null;\n\t\tthis.elementField = false;\n\n\t\tthis.startOpen = function(){};\n\n\t\tthis.registerTableOption(\"dataTree\", false); //enable data tree\n\t\tthis.registerTableOption(\"dataTreeFilter\", true); //filter child rows\n\t\tthis.registerTableOption(\"dataTreeSort\", true); //sort child rows\n\t\tthis.registerTableOption(\"dataTreeElementColumn\", false);\n\t\tthis.registerTableOption(\"dataTreeBranchElement\", true);//show data tree branch element\n\t\tthis.registerTableOption(\"dataTreeChildIndent\", 9); //data tree child indent in px\n\t\tthis.registerTableOption(\"dataTreeChildField\", \"_children\");//data tre column field to look for child rows\n\t\tthis.registerTableOption(\"dataTreeCollapseElement\", false);//data tree row collapse element\n\t\tthis.registerTableOption(\"dataTreeExpandElement\", false);//data tree row expand element\n\t\tthis.registerTableOption(\"dataTreeStartExpanded\", false);\n\t\tthis.registerTableOption(\"dataTreeChildColumnCalcs\", false);//include visible data tree rows in column calculations\n\t\tthis.registerTableOption(\"dataTreeSelectPropagate\", false);//selecting a parent row selects its children\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isTreeExpanded\", this.isRowExpanded.bind(this));\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.dataTree){\n\t\t\tvar dummyEl = null,\n\t\t\toptions = this.table.options;\n\n\t\t\tthis.field = options.dataTreeChildField;\n\t\t\tthis.indent = options.dataTreeChildIndent;\n\n\t\t\tif(this.options(\"movableRows\")){\n\t\t\t\tconsole.warn(\"The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeBranchElement){\n\n\t\t\t\tif(options.dataTreeBranchElement === true){\n\t\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\n\t\t\t\t}else {\n\t\t\t\t\tif(typeof options.dataTreeBranchElement === \"string\"){\n\t\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\n\t\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch-empty\");\n\t\t\t}\n\n\t\t\tif(options.dataTreeCollapseElement){\n\t\t\t\tif(typeof options.dataTreeCollapseElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\n\t\t\t\t\tthis.collapseEl = dummyEl.firstChild;\n\t\t\t\t}else {\n\t\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.collapseEl = document.createElement(\"div\");\n\t\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.collapseEl.tabIndex = 0;\n\t\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n\t\t\t}\n\n\t\t\tif(options.dataTreeExpandElement){\n\t\t\t\tif(typeof options.dataTreeExpandElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\n\t\t\t\t\tthis.expandEl = dummyEl.firstChild;\n\t\t\t\t}else {\n\t\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.expandEl = document.createElement(\"div\");\n\t\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.expandEl.tabIndex = 0;\n\t\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n\t\t\t}\n\n\n\t\t\tswitch(typeof options.dataTreeStartExpanded){\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tthis.startOpen = options.dataTreeStartExpanded;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\t\treturn options.dataTreeStartExpanded[index];\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowDelete.bind(this),0);\n\t\t\tthis.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10);\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"column-moving-rows\", this.columnMoving.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.initializeElementField.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedrawing.bind(this));\n\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 30);\n\t\t}\n\t}\n\n\ttableRedrawing(force){\n\t\tvar rows;\n\n\t\tif(force){\n\t\t\trows = this.table.rowManager.getRows();\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.reinitializeRowChildren(row);\n\t\t\t});\n\t\t}\n\t}\n\n\tinitializeElementField(){\n\t\tvar firstCol = this.table.columnManager.getFirstVisibleColumn();\n\n\t\tthis.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\t}\n\t\n\tgetRowChildren(row){\n\t\treturn this.getTreeChildren(row, true);\n\t}\n\n\tcolumnMoving(){\n\t\tvar rows = [];\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trows = rows.concat(this.getTreeChildren(row, false, true));\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\trowDataChanged(row, visible, updatedData){\n\t\tif(this.redrawNeeded(updatedData)){\n\t\t\tthis.initializeRow(row);\n\n\t\t\tif(visible){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tcellValueChanged(cell){\n\t\tvar field = cell.column.getField();\n\n\t\tif(field === this.elementField){\n\t\t\tthis.layoutRow(cell.row);\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar childArray = row.getData()[this.field];\n\t\tvar isArray = Array.isArray(childArray);\n\n\t\tvar children = isArray || (!isArray && typeof childArray === \"object\" && childArray !== null);\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.branchEl){\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n\t\t}\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.controlEl){\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n\t\t}\n\n\t\trow.modules.dataTree = {\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\n\t\t\topen: children ? (row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0)) : false,\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n\t\t\tchildren:children,\n\t\t};\n\t}\n\n\treinitializeRowChildren(row){\n\t\tvar children = this.getTreeChildren(row, false, true);\n\n\t\tchildren.forEach(function(child){\n\t\t\tchild.reinitialize(true);\n\t\t});\n\t}\n\n\tlayoutRow(row){\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n\t\tel = cell.getElement(),\n\t\tconfig = row.modules.dataTree;\n\n\t\tif(config.branchEl){\n\t\t\tif(config.branchEl.parentNode){\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\n\t\t\t}\n\t\t\tconfig.branchEl = false;\n\t\t}\n\n\t\tif(config.controlEl){\n\t\t\tif(config.controlEl.parentNode){\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\n\t\t\t}\n\t\t\tconfig.controlEl = false;\n\t\t}\n\n\t\tthis.generateControlElement(row, el);\n\n\t\trow.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\n\n\t\tif(config.index){\n\t\t\tif(this.branchEl){\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tconfig.branchEl.style.marginRight = (((config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}else {\n\t\t\t\t\tconfig.branchEl.style.marginLeft = (((config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}\n\t\t\t}else {\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}else {\n\t\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateControlElement(row, el){\n\t\tvar config = row.modules.dataTree,\n\t\toldControl = config.controlEl;\n\n\t\tel = el || row.getCells()[0].getElement();\n\n\t\tif(config.children !== false){\n\n\t\t\tif(config.open){\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.collapseRow(row);\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.expandRow(row);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tif(oldControl && oldControl.parentNode === el){\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl,oldControl);\n\t\t\t}else {\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRows(rows){\n\t\tvar output = [];\n\n\t\trows.forEach((row, i) => {\n\t\t\tvar config, children;\n\n\t\t\toutput.push(row);\n\n\t\t\tif(row instanceof Row){\n\n\t\t\t\trow.create();\n\n\t\t\t\tconfig = row.modules.dataTree;\n\n\t\t\t\tif(!config.index && config.children !== false){\n\t\t\t\t\tchildren = this.getChildren(row);\n\n\t\t\t\t\tchildren.forEach((child) => {\n\t\t\t\t\t\tchild.create();\n\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tgetChildren(row, allChildren){\n\t\tvar config = row.modules.dataTree,\n\t\tchildren = [],\n\t\toutput = [];\n\n\t\tif(config.children !== false && (config.open || allChildren)){\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else {\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"sort\") && this.table.options.dataTreeSort){\n\t\t\t\tthis.table.modules.sort.sort(children);\n\t\t\t}\n\n\t\t\tchildren.forEach((child) => {\n\t\t\t\toutput.push(child);\n\n\t\t\t\tvar subChildren = this.getChildren(child);\n\n\t\t\t\tsubChildren.forEach((sub) => {\n\t\t\t\t\toutput.push(sub);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgenerateChildren(row){\n\t\tvar children = [];\n\n\t\tvar childArray = row.getData()[this.field];\n\n\t\tif(!Array.isArray(childArray)){\n\t\t\tchildArray = [childArray];\n\t\t}\n\n\t\tchildArray.forEach((childData) => {\n\t\t\tvar childRow = new Row(childData || {}, this.table.rowManager);\n\n\t\t\tchildRow.create();\n\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n\t\t\tchildRow.modules.dataTree.parent = row;\n\n\t\t\tif(childRow.modules.dataTree.children){\n\t\t\t\tchildRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n\t\t\t}\n\t\t\tchildren.push(childRow);\n\t\t});\n\n\t\treturn children;\n\t}\n\n\texpandRow(row, silent){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = true;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowExpanded\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\tcollapseRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = false;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowCollapsed\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\ttoggleRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tif(config.open){\n\t\t\t\tthis.collapseRow(row);\n\t\t\t}else {\n\t\t\t\tthis.expandRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowExpanded(row){\n\t\treturn row.modules.dataTree.open;\n\t}\n\n\tgetTreeParent(row){\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n\t}\n\n\tgetTreeParentRoot(row){\n\t\treturn row.modules.dataTree && row.modules.dataTree.parent ? this.getTreeParentRoot(row.modules.dataTree.parent) : row;\n\t}\n\n\tgetFilteredTreeChildren(row){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [], children;\n\n\t\tif(config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else {\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tchildren.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(childRow);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\trowDelete(row){\n\t\tvar parent = row.modules.dataTree.parent,\n\t\tchildIndex;\n\n\t\tif(parent){\n\t\t\tchildIndex = this.findChildIndex(row, parent);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\n\t\t\t}\n\n\t\t\tif(!parent.data[this.field].length){\n\t\t\t\tdelete parent.data[this.field];\n\t\t\t}\n\n\t\t\tthis.initializeRow(parent);\n\t\t\tthis.layoutRow(parent);\n\t\t}\n\n\t\tthis.refreshData(true);\n\t}\n\n\taddTreeChildRow(row, data, top, index){\n\t\tvar childIndex = false;\n\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif(!Array.isArray(row.data[this.field])){\n\t\t\trow.data[this.field] = [];\n\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tchildIndex = this.findChildIndex(index, row);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\trow.data[this.field].splice((top ? childIndex : childIndex + 1), 0, data);\n\t\t\t}\n\t\t}\n\n\t\tif(childIndex === false){\n\t\t\tif(top){\n\t\t\t\trow.data[this.field].unshift(data);\n\t\t\t}else {\n\t\t\t\trow.data[this.field].push(data);\n\t\t\t}\n\t\t}\n\n\t\tthis.initializeRow(row);\n\t\tthis.layoutRow(row);\n\n\t\tthis.refreshData(true);\n\t}\n\n\tfindChildIndex(subject, parent){\n\t\tvar match = false;\n\n\t\tif(typeof subject == \"object\"){\n\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\tmatch = subject.data;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\tmatch = subject._getSelf().data;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\tif(parent.modules.dataTree){\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find((childRow) => {\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\n\t\t\t\t\t});\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tmatch = match.data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else if(subject === null){\n\t\t\t\tmatch = false;\n\t\t\t}\n\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\tmatch = false;\n\t\t}else {\n\t\t\t//subject should be treated as the index of the row\n\t\t\tmatch = parent.data[this.field].find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t}\n\n\t\tif(match){\n\n\t\t\tif(Array.isArray(parent.data[this.field])){\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\n\t\t\t}\n\n\t\t\tif(match == -1){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\t\treturn match;\n\t}\n\n\tgetTreeChildren(row, component, recurse){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [];\n\n\t\tif(config && config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tconfig.children.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\n\n\t\t\t\t\tif(recurse){\n\t\t\t\t\t\toutput = output.concat(this.getTreeChildren(childRow, component, recurse));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetChildField(){\n\t\treturn this.field;\n\t}\n\n\tredrawNeeded(data){\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n\t}\n}\n\nDataTree.moduleName = \"dataTree\";\n\nfunction csv(list, options = {}, setFileContents){\n\tvar delimiter = options.delimiter ? options.delimiter : \",\",\n\tfileContents = [],\n\theaders = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = [];\n\n\t\tswitch(row.type){\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"header\":\n\t\t\t\trow.columns.forEach((col, i) => {\n\t\t\t\t\tif(col && col.depth === 1){\n\t\t\t\t\t\theaders[i] = typeof col.value == \"undefined\"  || col.value === null ? \"\" : ('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\n\t\t\t\t\tif(col){\n\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item.join(delimiter));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(headers.length){\n\t\tfileContents.unshift(headers.join(delimiter));\n\t}\n\n\tfileContents = fileContents.join(\"\\n\");\n\n\tif(options.bom){\n\t\tfileContents = \"\\ufeff\" + fileContents;\n\t}\n\n\tsetFileContents(fileContents, \"text/csv\");\n}\n\nfunction json(list, options, setFileContents){\n\tvar fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = {};\n\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif(col){\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(item);\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfileContents = JSON.stringify(fileContents, null, '\\t');\n\n\tsetFileContents(fileContents, \"application/json\");\n}\n\nfunction pdf(list, options = {}, setFileContents){\n\tvar header = [],\n\tbody = [],\n\tautoTableParams = {},\n\trowGroupStyles = options.rowGroupStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 12,\n\t\tcellPadding: 6,\n\t\tfillColor: 220,\n\t},\n\trowCalcStyles = options.rowCalcStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 10,\n\t\tcellPadding: 4,\n\t\tfillColor: 232,\n\t},\n\tjsPDFParams = options.jsPDF || {},\n\ttitle = options.title ? options.title : \"\";\n\n\tif(!jsPDFParams.orientation){\n\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\n\t}\n\n\tif(!jsPDFParams.unit){\n\t\tjsPDFParams.unit = \"pt\";\n\t}\n\n\t//parse row list\n\tlist.forEach((row) => {\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\t\theader.push(parseRow(row));\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tbody.push(parseRow(row, rowGroupStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tbody.push(parseRow(row, rowCalcStyles));\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\tbody.push(parseRow(row));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tfunction parseRow(row, styles){\n\t\tvar rowData = [];\n\n\t\trow.columns.forEach((col) =>{\n\t\t\tvar cell;\n\n\t\t\tif(col){\n\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tcol.value = col.value !== null ? JSON.stringify(col.value) : \"\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcell = {\n\t\t\t\t\tcontent:col.value,\n\t\t\t\t\tcolSpan:col.width,\n\t\t\t\t\trowSpan:col.height,\n\t\t\t\t};\n\n\t\t\t\tif(styles){\n\t\t\t\t\tcell.styles = styles;\n\t\t\t\t}\n\n\t\t\t\trowData.push(cell);\n\t\t\t}\n\t\t});\n\n\t\treturn rowData;\n\t}\n\n\n\t//configure PDF\n\tvar doc = new jspdf.jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n\tif(options.autoTable){\n\t\tif(typeof options.autoTable === \"function\"){\n\t\t\tautoTableParams = options.autoTable(doc) || {};\n\t\t}else {\n\t\t\tautoTableParams = options.autoTable;\n\t\t}\n\t}\n\n\tif(title){\n\t\tautoTableParams.didDrawPage = function(data) {\n\t\t\tdoc.text(title, 40, 30);\n\t\t};\n\t}\n\n\tautoTableParams.head = header;\n\tautoTableParams.body = body;\n\n\tdoc.autoTable(autoTableParams);\n\n\tif(options.documentProcessing){\n\t\toptions.documentProcessing(doc);\n\t}\n\n\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n}\n\nfunction xlsx(list, options, setFileContents){\n\tvar self = this,\n\tsheetName = options.sheetName || \"Sheet1\",\n\tworkbook = XLSX.utils.book_new(),\n\ttableFeatures = new CoreFeature(this),\n\tcompression =  'compress' in options ? options.compress : true,\n\twriteOptions = options.writeOptions || {bookType:'xlsx', bookSST:true, compression},\n\toutput;\n\n\twriteOptions.type = 'binary';\n\n\tworkbook.SheetNames = [];\n\tworkbook.Sheets = {};\n\n\tfunction generateSheet(){\n\t\tvar rows = [],\n\t\tmerges = [],\n\t\tworksheet = {},\n\t\trange = {s: {c:0, r:0}, e: {c:(list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0), r:list.length }};\n\n\t\t//parse row list\n\t\tlist.forEach((row, i) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach(function(col, j){\n\n\t\t\t\tif(col){\n\t\t\t\t\trowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\n\n\t\t\t\t\tif(col.width > 1 || col.height > -1){\n\t\t\t\t\t\tif(col.height > 1 || col.width > 1){\n\t\t\t\t\t\t\tmerges.push({s:{r:i,c:j},e:{r:i + col.height - 1,c:j + col.width - 1}});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\trowData.push(\"\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trows.push(rowData);\n\t\t});\n\n\t\t//convert rows to worksheet\n\t\tXLSX.utils.sheet_add_aoa(worksheet, rows);\n\n\t\tworksheet['!ref'] = XLSX.utils.encode_range(range);\n\n\t\tif(merges.length){\n\t\t\tworksheet[\"!merges\"] = merges;\n\t\t}\n\n\t\treturn worksheet;\n\t}\n\n\tif(options.sheetOnly){\n\t\tsetFileContents(generateSheet());\n\t\treturn;\n\t}\n\n\tif(options.sheets){\n\t\tfor(var sheet in options.sheets){\n\n\t\t\tif(options.sheets[sheet] === true){\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\n\t\t\t}else {\n\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\n\t\t\t\ttableFeatures.commsSend(options.sheets[sheet], \"download\", \"intercept\",{\n\t\t\t\t\ttype:\"xlsx\",\n\t\t\t\t\toptions:{sheetOnly:true},\n\t\t\t\t\tactive:self.active,\n\t\t\t\t\tintercept:function(data){\n\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}else {\n\t\tworkbook.SheetNames.push(sheetName);\n\t\tworkbook.Sheets[sheetName] = generateSheet();\n\t}\n\n\tif(options.documentProcessing){\n\t\tworkbook = options.documentProcessing(workbook);\n\t}\n\n\t//convert workbook to binary array\n\tfunction s2ab(s) {\n\t\tvar buf = new ArrayBuffer(s.length);\n\t\tvar view = new Uint8Array(buf);\n\t\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\n\t\treturn buf;\n\t}\n\n\toutput = XLSX.write(workbook, writeOptions);\n\n\tsetFileContents(s2ab(output), \"application/octet-stream\");\n}\n\nfunction html(list, options, setFileContents){\n\tif(this.modExists(\"export\", true)){\n\t\tsetFileContents(this.modules.export.generateHTMLTable(list), \"text/html\");\n\t}\n}\n\nfunction jsonLines (list, options, setFileContents) {\n\tconst fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tconst item = {};\n\n\t\tswitch (row.type) {\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif (col) {\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(JSON.stringify(item));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tsetFileContents(fileContents.join(\"\\n\"), \"application/x-ndjson\");\n}\n\nvar defaultDownloaders = {\n\tcsv:csv,\n\tjson:json,\n\tjsonLines:jsonLines,\n\tpdf:pdf,\n\txlsx:xlsx,\n\thtml:html,\n};\n\nclass Download extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.registerTableOption(\"downloadEncoder\", function(data, mimeType){\n\t\t\treturn new Blob([data],{type:mimeType});\n\t\t}); //function to manipulate download data\n\t\tthis.registerTableOption(\"downloadReady\", undefined); //warn of function deprecation\n\t\tthis.registerTableOption(\"downloadConfig\", {}); //download config\n\t\tthis.registerTableOption(\"downloadRowRange\", \"active\"); //restrict download to active rows only\n\n\t\tthis.registerColumnOption(\"download\");\n\t\tthis.registerColumnOption(\"titleDownload\");\n\t}\n\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\n\t\tthis.registerTableFunction(\"download\", this.download.bind(this));\n\t\tthis.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\n\t}\n\n\tdeprecatedOptionsCheck(){\n\t\tthis.deprecationCheck(\"downloadReady\", \"downloadEncoder\");\n\t}\t\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tdownloadToTab(type, filename, options, active){\n\t\tthis.download(type, filename, options, active, true);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//trigger file download\n\tdownload(type, filename, options, range, interceptCallback){\n\t\tvar downloadFunc = false;\n\n\t\tfunction buildLink(data, mime){\n\t\t\tif(interceptCallback){\n\t\t\t\tif(interceptCallback === true){\n\t\t\t\t\tthis.triggerDownload(data, mime, type, filename, true);\n\t\t\t\t}else {\n\t\t\t\t\tinterceptCallback(data);\n\t\t\t\t}\n\n\t\t\t}else {\n\t\t\t\tthis.triggerDownload(data, mime, type, filename);\n\t\t\t}\n\t\t}\n\n\t\tif(typeof type == \"function\"){\n\t\t\tdownloadFunc = type;\n\t\t}else {\n\t\t\tif(Download.downloaders[type]){\n\t\t\t\tdownloadFunc = Download.downloaders[type];\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\n\t\t\t}\n\t\t}\n\n\t\tif(downloadFunc){\n\t\t\tvar list = this.generateExportList(range);\n\n\t\t\tdownloadFunc.call(this.table, list , options || {}, buildLink.bind(this));\n\t\t}\n\t}\n\n\tgenerateExportList(range){\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\n\n\t\t//assign group header formatter\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\n\n\t\tif(groupHeader && !Array.isArray(groupHeader)){\n\t\t\tgroupHeader = [groupHeader];\n\t\t}\n\n\t\tlist.forEach((row) => {\n\t\t\tvar group;\n\n\t\t\tif(row.type === \"group\"){\n\t\t\t\tgroup = row.columns[0];\n\n\t\t\t\tif(groupHeader && groupHeader[row.indent]){\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn list;\n\t}\n\n\ttriggerDownload(data, mime, type, filename, newTab){\n\t\tvar element = document.createElement('a'),\n\t\tblob = this.table.options.downloadEncoder(data, mime);\n\n\t\tif(blob){\n\t\t\tif(newTab){\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\n\t\t\t}else {\n\t\t\t\tfilename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n\t\t\t\t\n\t\t\t\tif(navigator.msSaveOrOpenBlob){\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\n\t\t\t\t}else {\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\n\n\t\t\t\t\t//set file title\n\t\t\t\t\telement.setAttribute('download', filename);\n\n\t\t\t\t\t//trigger download\n\t\t\t\t\telement.style.display = 'none';\n\t\t\t\t\tdocument.body.appendChild(element);\n\t\t\t\t\telement.click();\n\n\t\t\t\t\t//remove temporary link element\n\t\t\t\t\tdocument.body.removeChild(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"downloadComplete\");\n\t\t}\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"intercept\":\n\t\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\nDownload.moduleName = \"download\";\n\n//load defaults\nDownload.downloaders = defaultDownloaders;\n\nfunction maskInput(el, options){\n\tvar mask = options.mask,\n\tmaskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n\tmaskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n\tmaskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\";\n\n\tfunction fillSymbols(index){\n\t\tvar symbol = mask[index];\n\t\tif(typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber){\n\t\t\tel.value = el.value + \"\" + symbol;\n\t\t\tfillSymbols(index+1);\n\t\t}\n\t}\n\n\tel.addEventListener(\"keydown\", (e) => {\n\t\tvar index = el.value.length,\n\t\tchar = e.key;\n\n\t\tif(e.keyCode > 46 && !e.ctrlKey && !e.metaKey){\n\t\t\tif(index >= mask.length){\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t}else {\n\t\t\t\tswitch(mask[index]){\n\t\t\t\t\tcase maskLetter:\n\t\t\t\t\t\tif(char.toUpperCase() == char.toLowerCase()){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskNumber:\n\t\t\t\t\t\tif(isNaN(char)){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskWildcard:\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(char !== mask[index]){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn;\n\t});\n\n\tel.addEventListener(\"keyup\", (e) => {\n\t\tif(e.keyCode > 46){\n\t\t\tif(options.maskAutoFill){\n\t\t\t\tfillSymbols(el.value.length);\n\t\t\t}\n\t\t}\n\t});\n\n\n\tif(!el.placeholder){\n\t\tel.placeholder = mask;\n\t}\n\n\tif(options.maskAutoFill){\n\t\tfillSymbols(el.value.length);\n\t}\n}\n\n//input element\nfunction input(cell, onRendered, success, cancel, editorParams){\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}\n\n//resizable text area element\nfunction textarea(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"hybrid\",\n\tvalue = String(cellValue !== null && typeof cellValue !== \"undefined\"  ? cellValue : \"\"),\n\tinput = document.createElement(\"textarea\"),\n\tscrollHeight = 0;\n\n\t//create and style input\n\tinput.style.display = \"block\";\n\tinput.style.padding = \"2px\";\n\tinput.style.height = \"100%\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\tinput.style.whiteSpace = \"pre-wrap\";\n\tinput.style.resize = \"none\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = value;\n\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\tinput.scrollHeight;\n\t\t\tinput.style.height = input.scrollHeight + \"px\";\n\t\t\tcell.getRow().normalizeHeight();\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t},300);\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\tinput.addEventListener(\"keyup\", function(){\n\n\t\tinput.style.height = \"\";\n\n\t\tvar heightNow = input.scrollHeight;\n\n\t\tinput.style.height = heightNow + \"px\";\n\n\t\tif(heightNow != scrollHeight){\n\t\t\tscrollHeight = heightNow;\n\t\t\tcell.getRow().normalizeHeight();\n\t\t}\n\t});\n\n\tinput.addEventListener(\"keydown\", function(e){\n\n\t\tswitch(e.keyCode){\n\n\t\t\tcase 13:\n\t\t\t\tif(e.shiftKey && editorParams.shiftEnterSubmit){\n\t\t\t\t\tonChange();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}\n\n//input element with type of number\nfunction number(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", \"number\");\n\n\tif(typeof editorParams.max != \"undefined\"){\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\n\tif(typeof editorParams.min != \"undefined\"){\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\n\tif(typeof editorParams.step != \"undefined\"){\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = cellValue;\n\n\tvar blurFunc = function(e){\n\t\tonChange();\n\t};\n\n\tonRendered(function () {\n\t\tif(cell.getType() === \"cell\"){\n\t\t\t//submit new value on blur\n\t\t\tinput.removeEventListener(\"blur\", blurFunc);\n\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\n\t\t\t//submit new value on blur\n\t\t\tinput.addEventListener(\"blur\", blurFunc);\n\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction onChange(){\n\t\tvar value = input.value;\n\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\n\t\tif(value !== cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n}\n\n//input element with type of number\nfunction range(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.setAttribute(\"type\", \"range\");\n\t\n\tif (typeof editorParams.max != \"undefined\") {\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\t\n\tif (typeof editorParams.min != \"undefined\") {\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\t\n\tif (typeof editorParams.step != \"undefined\") {\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\t\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function () {\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value;\n\t\t\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\t\t\n\t\tif(value != cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e){\n\t\tonChange();\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n\n//input element\nfunction date(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tfunction convertDate(value){\n\t\tvar newDatetime;\n\t\t\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else {\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\t\t\n\t\treturn newDatetime.toFormat(\"yyyy-MM-dd\");\n\t}\n\t\n\tinput.type = \"date\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.max){\n\t\tinput.setAttribute(\"max\", inputFormat ? convertDate(editorParams.max) : editorParams.max);\n\t}\n\n\tif(editorParams.min){\n\t\tinput.setAttribute(\"min\", inputFormat ? convertDate(editorParams.min) : editorParams.min);\n\t}\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\t\t\n\t\t\tcellValue = convertDate(cellValue);\t\t\t\n\t\t}else {\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDate;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDate = DT.fromFormat(String(value), \"yyyy-MM-dd\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDate;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDate.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDate.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n\n//input element\nfunction time(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"time\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else {\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"hh:mm\");\n\t\t\t\n\t\t}else {\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() == \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\t\t\t\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxTime = DT.fromFormat(String(value), \"hh:mm\");\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n\n//input element\nfunction datetime(cell, onRendered, success, cancel, editorParams){\n\tvar inputFormat = editorParams.format,\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tDT = inputFormat ? (window.DateTime || luxon.DateTime) : null, \n\tnewDatetime;\n\t\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\t\n\tinput.type = \"datetime-local\";\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcellValue = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\t\n\tif(inputFormat){\n\t\tif(DT){\n\t\t\tif(DT.isDateTime(cellValue)){\n\t\t\t\tnewDatetime = cellValue;\n\t\t\t}else if(inputFormat === \"iso\"){\n\t\t\t\tnewDatetime = DT.fromISO(String(cellValue));\n\t\t\t}else {\n\t\t\t\tnewDatetime = DT.fromFormat(String(cellValue), inputFormat);\n\t\t\t}\n\t\t\t\n\t\t\tcellValue = newDatetime.toFormat(\"yyyy-MM-dd\")  + \"T\" + newDatetime.toFormat(\"hh:mm\");\n\t\t}else {\n\t\t\tconsole.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\");\n\t\t}\n\t}\n\t\n\tinput.value = cellValue;\n\t\n\tonRendered(function(){\n\t\tif(cell.getType() === \"cell\"){\n\t\t\tinput.focus({preventScroll: true});\n\t\t\tinput.style.height = \"100%\";\n\t\t\t\n\t\t\tif(editorParams.selectContents){\n\t\t\t\tinput.select();\n\t\t\t}\n\t\t}\n\t});\n\t\n\tfunction onChange(){\n\t\tvar value = input.value,\n\t\tluxDateTime;\n\t\t\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && value !== \"\") || value !== cellValue){\n\n\t\t\tif(value && inputFormat){\n\t\t\t\tluxDateTime = DT.fromISO(String(value));\n\n\t\t\t\tswitch(inputFormat){\n\t\t\t\t\tcase true:\n\t\t\t\t\t\tvalue = luxDateTime;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"iso\":\n\t\t\t\t\t\tvalue = luxDateTime.toISO();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = luxDateTime.toFormat(inputFormat);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else {\n\t\t\tcancel();\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e) {\n\t\tif (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\n\t\t\tonChange(); // only on a \"true\" blur; not when focusing browser's date/time picker\n\t\t}\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\t\tonChange();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27:\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\t\te.stopPropagation();\n\t\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\t\tif(vertNav == \"editor\"){\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\treturn input;\n}\n\nclass Edit{\n\tconstructor(editor, cell, onRendered, success, cancel, editorParams){\n\t\tthis.edit = editor;\n\t\tthis.table = editor.table;\n\t\tthis.cell = cell;\n\t\tthis.params = this._initializeParams(editorParams);\n\t\t\n\t\tthis.data = [];\n\t\tthis.displayItems = [];\n\t\tthis.currentItems = [];\n\t\tthis.focusedItem = null;\n\t\t\n\t\tthis.input = this._createInputElement();\n\t\tthis.listEl = this._createListElement();\n\t\t\n\t\tthis.initialValues = null; \n\t\t\n\t\tthis.isFilter = cell.getType() === \"header\";\n\t\t\n\t\tthis.filterTimeout = null;\n\t\tthis.filtered = false;\n\t\tthis.typing = false;\n\t\t\n\t\tthis.values = []; \n\t\tthis.popup = null;  \n\t\t\n\t\tthis.listIteration = 0;\n\t\t\n\t\tthis.lastAction=\"\";\n\t\tthis.filterTerm=\"\";\n\t\t\n\t\tthis.blurable = true;\n\t\t\n\t\tthis.actions = {\n\t\t\tsuccess:success,\n\t\t\tcancel:cancel\n\t\t};\n\t\t\n\t\tthis._deprecatedOptionsCheck();\n\t\tthis._initializeValue();\n\t\t\n\t\tonRendered(this._onRendered.bind(this));\n\t}\n\t\n\t_deprecatedOptionsCheck(){\n\t\tif(this.params.listItemFormatter){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The listItemFormatter editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t\t\n\t\tif(this.params.sortValuesList){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The sortValuesList editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t\t\n\t\tif(this.params.searchFunc){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The searchFunc editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t\t\n\t\tif(this.params.searchingPlaceholder){\n\t\t\tthis.cell.getTable().deprecationAdvisor.msg(\"The searchingPlaceholder editor param has been deprecated, please see the latest editor documentation for updated options\");\n\t\t}\n\t}\n\t\n\t_initializeValue(){\n\t\tvar initialValue = this.cell.getValue();\n\t\t\n\t\tif(typeof initialValue === \"undefined\" && typeof this.params.defaultValue !== \"undefined\"){\n\t\t\tinitialValue = this.params.defaultValue;\n\t\t}\n\t\t\n\t\tthis.initialValues = this.params.multiselect ? initialValue : [initialValue];\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.input.value = this.initialValues ? this.initialValues.join(\",\") : \"\";\n\t\t\tthis.headerFilterInitialListGen();            \n\t\t}\n\t}\n\t\n\t_onRendered(){\n\t\tvar cellEl = this.cell.getElement();\n\t\t\n\t\tfunction clickStop(e){\n\t\t\te.stopPropagation();\n\t\t}\t\n\t\t\n\t\tif(!this.isFilter){\n\t\t\tthis.input.style.height = \"100%\";\n\t\t\tthis.input.focus({preventScroll: true});\n\t\t}\n\t\t\n\t\t\n\t\tcellEl.addEventListener(\"click\", clickStop);\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tcellEl.removeEventListener(\"click\", clickStop);\n\t\t}, 1000);\n\t\t\n\t\tthis.input.addEventListener(\"mousedown\", this._preventPopupBlur.bind(this));\n\t}\n\t\n\t_createListElement(){\n\t\tvar listEl = document.createElement(\"div\");\n\t\tlistEl.classList.add(\"tabulator-edit-list\");\n\t\t\n\t\tlistEl.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\tlistEl.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\t\n\t\treturn listEl;\n\t}\n\t\n\t_setListWidth(){\n\t\tvar element = this.isFilter ? this.input : this.cell.getElement();\n\t\t\n\t\tthis.listEl.style.minWidth = element.offsetWidth + \"px\";\n\t\t\n\t\tif(this.params.maxWidth){\n\t\t\tif(this.params.maxWidth === true){\n\t\t\t\tthis.listEl.style.maxWidth = element.offsetWidth + \"px\";\n\t\t\t}else if(typeof this.params.maxWidth === \"number\"){\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth + \"px\";\n\t\t\t}else {\n\t\t\t\tthis.listEl.style.maxWidth = this.params.maxWidth;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\t\n\t_createInputElement(){\n\t\tvar attribs = this.params.elementAttributes;\n\t\tvar input = document.createElement(\"input\");\n\t\t\n\t\tinput.setAttribute(\"type\", this.params.clearable ? \"search\" : \"text\");\n\t\t\n\t\tinput.style.padding = \"4px\";\n\t\tinput.style.width = \"100%\";\n\t\tinput.style.boxSizing = \"border-box\";\n\t\t\n\t\tif(!this.params.autocomplete){\n\t\t\tinput.style.cursor = \"default\";\n\t\t\tinput.style.caretColor = \"transparent\";\n\t\t\t// input.readOnly = (this.edit.currentCell != false);\n\t\t}\n\t\t\n\t\tif(attribs && typeof attribs == \"object\"){\n\t\t\tfor (let key in attribs){\n\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + attribs[\"+\" + key]);\n\t\t\t\t}else {\n\t\t\t\t\tinput.setAttribute(key, attribs[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(this.params.mask){\n\t\t\tmaskInput(input, this.params);\n\t\t}\n\t\t\n\t\tthis._bindInputEvents(input);\n\t\t\n\t\treturn input;\n\t}\n\t\n\t_initializeParams(params){\n\t\tvar valueKeys = [\"values\", \"valuesURL\", \"valuesLookup\"],\n\t\tvalueCheck;\n\t\t\n\t\tparams = Object.assign({}, params);\n\t\t\n\t\tparams.verticalNavigation = params.verticalNavigation || \"editor\";\n\t\tparams.placeholderLoading = typeof params.placeholderLoading === \"undefined\" ? \"Searching ...\" : params.placeholderLoading;\n\t\tparams.placeholderEmpty = typeof params.placeholderEmpty === \"undefined\" ? \"No Results Found\" : params.placeholderEmpty;\n\t\tparams.filterDelay = typeof params.filterDelay === \"undefined\" ? 300 : params.filterDelay;\n\t\t\n\t\tparams.emptyValue = Object.keys(params).includes(\"emptyValue\") ? params.emptyValue : \"\";\n\t\t\n\t\tvalueCheck = Object.keys(params).filter(key => valueKeys.includes(key)).length;\n\t\t\n\t\tif(!valueCheck){\n\t\t\tconsole.warn(\"list editor config error - either the values, valuesURL, or valuesLookup option must be set\");\n\t\t}else if(valueCheck > 1){\n\t\t\tconsole.warn(\"list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor\");\n\t\t}\n\t\t\n\t\tif(params.autocomplete){\n\t\t\tif(params.multiselect){\n\t\t\t\tparams.multiselect = false;\n\t\t\t\tconsole.warn(\"list editor config error - multiselect option is not available when autocomplete is enabled\");\n\t\t\t}\n\t\t}else {\n\t\t\tif(params.freetext){\n\t\t\t\tparams.freetext = false;\n\t\t\t\tconsole.warn(\"list editor config error - freetext option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterFunc){\n\t\t\t\tparams.filterFunc = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterFunc option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.filterRemote){\n\t\t\t\tparams.filterRemote = false;\n\t\t\t\tconsole.warn(\"list editor config error - filterRemote option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.mask){\n\t\t\t\tparams.mask = false;\n\t\t\t\tconsole.warn(\"list editor config error - mask option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.allowEmpty){\n\t\t\t\tparams.allowEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - allowEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t\t\n\t\t\tif(params.listOnEmpty){\n\t\t\t\tparams.listOnEmpty = false;\n\t\t\t\tconsole.warn(\"list editor config error - listOnEmpty option is only available when autocomplete is enabled\");\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(params.filterRemote && !(typeof params.valuesLookup === \"function\" || params.valuesURL)){\n\t\t\tparams.filterRemote = false;\n\t\t\tconsole.warn(\"list editor config error - filterRemote option should only be used when values list is populated from a remote source\");\n\t\t}\n\t\treturn params;\n\t}\n\t//////////////////////////////////////\n\t////////// Event Handling ////////////\n\t//////////////////////////////////////\n\t\n\t_bindInputEvents(input){\n\t\tinput.addEventListener(\"focus\", this._inputFocus.bind(this));\n\t\tinput.addEventListener(\"click\", this._inputClick.bind(this));\n\t\tinput.addEventListener(\"blur\", this._inputBlur.bind(this));\n\t\tinput.addEventListener(\"keydown\", this._inputKeyDown.bind(this));\n\t\tinput.addEventListener(\"search\", this._inputSearch.bind(this));\n\t\t\n\t\tif(this.params.autocomplete){\n\t\t\tinput.addEventListener(\"keyup\", this._inputKeyUp.bind(this));\n\t\t}\n\t}\n\t\n\t\n\t_inputFocus(e){\n\t\tthis.rebuildOptionsList();\n\t}\n\t\n\t_filter(){\n\t\tif(this.params.filterRemote){\n\t\t\tclearTimeout(this.filterTimeout);\n\t\t\t\n\t\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\t\tthis.rebuildOptionsList();\n\t\t\t}, this.params.filterDelay);\n\t\t}else {\n\t\t\tthis._filterList();\n\t\t}\n\t}\n\t\n\t_inputClick(e){\n\t\te.stopPropagation();\n\t}\n\t\n\t_inputBlur(e){\n\t\tif(this.blurable){\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.hide();\n\t\t\t}else {\n\t\t\t\tthis._resolveValue(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_inputSearch(){\n\t\tthis._clearChoices();\n\t}\n\t\n\t_inputKeyDown(e){\n\t\tswitch(e.keyCode){\n\t\t\t\n\t\t\tcase 38: //up arrow\n\t\t\t\tthis._keyUp(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 40: //down arrow\n\t\t\t\tthis._keyDown(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //right arrow\n\t\t\t\tthis._keySide(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 13: //enter\n\t\t\t\tthis._keyEnter();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 27: //escape\n\t\t\t\tthis._keyEsc();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 36: //home\n\t\t\tcase 35: //end\n\t\t\t\tthis._keyHomeEnd(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase 9: //tab\n\t\t\t\tthis._keyTab(e);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keySelectLetter(e);\n\t\t}\n\t}\n\t\n\t_inputKeyUp(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 38: //up arrow\n\t\t\tcase 37: //left arrow\n\t\t\tcase 39: //up arrow\n\t\t\tcase 40: //right arrow\n\t\t\tcase 13: //enter\n\t\t\tcase 27: //escape\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis._keyAutoCompLetter(e);\n\t\t}\n\t}\n\t\n\t_preventPopupBlur(){\n\t\tif(this.popup){\n\t\t\tthis.popup.blockHide();\n\t\t}\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tif(this.popup){\n\t\t\t\tthis.popup.restoreHide();\n\t\t\t}\n\t\t}, 10);\n\t}\n\t\n\t_preventBlur(){\n\t\tthis.blurable = false;\n\t\t\n\t\tsetTimeout(() =>{\n\t\t\tthis.blurable = true;\n\t\t}, 10);\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Keyboard Navigation /////////\n\t//////////////////////////////////////\n\t\n\t_keyTab(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else {\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyUp(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index > 0){\n\t\t\t\tthis._focusItem(this.displayItems[index - 1]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyDown(e){\n\t\tvar index = this.displayItems.indexOf(this.focusedItem);\n\t\t\n\t\tif(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index < this.displayItems.length - 1)){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tif(index < this.displayItems.length - 1){\n\t\t\t\tif(index == -1){\n\t\t\t\t\tthis._focusItem(this.displayItems[0]);\n\t\t\t\t}else {\n\t\t\t\t\tthis._focusItem(this.displayItems[index + 1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keySide(e){\n\t\tif(!this.params.autocomplete){\n\t\t\te.stopImmediatePropagation();\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\t\n\t_keyEnter(e){\n\t\tif(this.params.autocomplete && this.lastAction === \"typing\"){\n\t\t\tthis._resolveValue(true);\n\t\t}else {\n\t\t\tif(this.focusedItem){\n\t\t\t\tthis._chooseItem(this.focusedItem);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyEsc(e){\n\t\tthis._cancel();\n\t}\n\t\n\t_keyHomeEnd(e){\n\t\tif(this.params.autocomplete){\n\t\t\t//prevent table navigation while using input element\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t}\n\t\n\t_keySelectLetter(e){\n\t\tif(!this.params.autocomplete){\n\t\t\t// if(this.edit.currentCell === false){\n\t\t\te.preventDefault();\n\t\t\t// }\n\t\t\t\n\t\t\tif(e.keyCode >= 38 && e.keyCode <= 90){\n\t\t\t\tthis._scrollToValue(e.keyCode);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_keyAutoCompLetter(e){\n\t\tthis._filter();\n\t\tthis.lastAction = \"typing\";\n\t\tthis.typing = true;\n\t}\n\t\n\t\n\t_scrollToValue(char){\n\t\tclearTimeout(this.filterTimeout);\n\t\t\n\t\tvar character = String.fromCharCode(char).toLowerCase();\n\t\tthis.filterTerm += character.toLowerCase();\n\t\t\n\t\tvar match = this.displayItems.find((item) => {\n\t\t\treturn typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(this.filterTerm);\n\t\t});\n\t\t\n\t\tif(match){\n\t\t\tthis._focusItem(match);\n\t\t}\n\t\t\n\t\tthis.filterTimeout = setTimeout(() => {\n\t\t\tthis.filterTerm = \"\";\n\t\t}, 800);\n\t}\n\t\n\t_focusItem(item){\n\t\tthis.lastAction = \"focus\";\n\t\t\n\t\tif(this.focusedItem && this.focusedItem.element){\n\t\t\tthis.focusedItem.element.classList.remove(\"focused\");\n\t\t}\n\t\t\n\t\tthis.focusedItem = item;\n\t\t\n\t\tif(item && item.element){\n\t\t\titem.element.classList.add(\"focused\");\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\n\t\t}\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t/////// Data List Generation /////////\n\t//////////////////////////////////////\n\theaderFilterInitialListGen(){\n\t\tthis._generateOptions(true);\n\t}\n\t\n\trebuildOptionsList(){\n\t\tthis._generateOptions()\n\t\t\t.then(this._sortOptions.bind(this))\n\t\t\t.then(this._buildList.bind(this))\n\t\t\t.then(this._showList.bind(this))\n\t\t\t.catch((e) => {\n\t\t\t\tif(!Number.isInteger(e)){\n\t\t\t\t\tconsole.error(\"List generation error\", e);\n\t\t\t\t}\n\t\t\t});\n\t}\n\t\n\t_filterList(){\n\t\tthis._buildList(this._filterOptions());\n\t\tthis._showList();\n\t}\n\t\n\t_generateOptions(silent){\n\t\tvar values = [];\n\t\tvar iteration = ++ this.listIteration;\n\t\t\n\t\tthis.filtered = false;\n\t\t\n\t\tif(this.params.values){\n\t\t\tvalues = this.params.values;\n\t\t}else if (this.params.valuesURL){\n\t\t\tvalues = this._ajaxRequest(this.params.valuesURL, this.input.value);\n\t\t}else {\n\t\t\tif(typeof this.params.valuesLookup === \"function\"){\n\t\t\t\tvalues = this.params.valuesLookup(this.cell, this.input.value);\n\t\t\t}else if(this.params.valuesLookup){\n\t\t\t\tvalues = this._uniqueColumnValues(this.params.valuesLookupField);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(values instanceof Promise){\n\t\t\tif(!silent){\n\t\t\t\tthis._addPlaceholder(this.params.placeholderLoading);\n\t\t\t}\n\t\t\t\n\t\t\treturn values.then()\n\t\t\t\t.then((responseValues) => {\n\t\t\t\t\tif(this.listIteration === iteration){\n\t\t\t\t\t\treturn this._parseList(responseValues);\n\t\t\t\t\t}else {\n\t\t\t\t\t\treturn Promise.reject(iteration);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}else {\n\t\t\treturn Promise.resolve(this._parseList(values));\n\t\t}\n\t}\n\t\n\t_addPlaceholder(contents){\n\t\tvar placeholder = document.createElement(\"div\");\n\t\t\n\t\tif(typeof contents === \"function\"){\n\t\t\tcontents = contents(this.cell.getComponent(), this.listEl);\n\t\t}\n\t\t\n\t\tif(contents){\n\t\t\tthis._clearList();\n\t\t\t\n\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\tplaceholder = contents;\n\t\t\t}else {\n\t\t\t\tplaceholder.classList.add(\"tabulator-edit-list-placeholder\");\n\t\t\t\tplaceholder.innerHTML = contents;\n\t\t\t}\n\t\t\t\n\t\t\tthis.listEl.appendChild(placeholder);\n\t\t\t\n\t\t\tthis._showList();\n\t\t}\n\t}\n\t\n\t_ajaxRequest(url, term){\n\t\tvar params = this.params.filterRemote ? {term:term} : {};\n\t\turl = urlBuilder(url, {}, params);\n\t\t\n\t\treturn fetch(url)\n\t\t\t.then((response)=>{\n\t\t\t\tif(response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t\t\t.catch((error)=>{\n\t\t\t\t\t\t\tconsole.warn(\"List Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\treturn Promise.reject(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error)=>{\n\t\t\t\tconsole.error(\"List Ajax Load Error - Connection Error: \", error);\n\t\t\t\treturn Promise.reject(error);\n\t\t\t});\n\t}\n\t\n\t_uniqueColumnValues(field){\n\t\tvar output = {},\n\t\tdata = this.table.getData(this.params.valuesLookup),\n\t\tcolumn;\n\t\t\n\t\tif(field){\n\t\t\tcolumn = this.table.columnManager.getColumnByField(field);\n\t\t}else {\n\t\t\tcolumn = this.cell.getColumn()._getSelf();\n\t\t}\n\t\t\n\t\tif(column){\n\t\t\tdata.forEach((row) => {\n\t\t\t\tvar val = column.getFieldValue(row);\n\t\t\t\t\n\t\t\t\tif(val !== null && typeof val !== \"undefined\" && val !== \"\"){\n\t\t\t\t\toutput[val] = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else {\n\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\n\t\t\toutput = [];\n\t\t}\n\t\t\n\t\treturn Object.keys(output);\n\t}\n\t\n\t\n\t_parseList(inputValues){\n\t\tvar data = [];\n\t\t\n\t\tif(!Array.isArray(inputValues)){\n\t\t\tinputValues = Object.entries(inputValues).map(([key, value]) => {\n\t\t\t\treturn {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:key,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\t\n\t\tinputValues.forEach((value) => {\n\t\t\tif(typeof value !== \"object\"){\n\t\t\t\tvalue = {\n\t\t\t\t\tlabel:value,\n\t\t\t\t\tvalue:value,\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tthis._parseListItem(value, data, 0);\n\t\t});\n\t\t\n\t\tif(!this.currentItems.length && this.params.freetext){\n\t\t\tthis.input.value = this.initialValues;\n\t\t\tthis.typing = true;\n\t\t\tthis.lastAction = \"typing\";\n\t\t}\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\treturn data;    \n\t}\n\t\n\t_parseListItem(option, data, level){\n\t\tvar item = {};\n\t\t\n\t\tif(option.options){\n\t\t\titem = this._parseListGroup(option, level + 1);\n\t\t}else {\n\t\t\titem = {\n\t\t\t\tlabel:option.label,\n\t\t\t\tvalue:option.value,\n\t\t\t\titemParams:option.itemParams,\n\t\t\t\telementAttributes: option.elementAttributes,\n\t\t\t\telement:false,\n\t\t\t\tselected:false,\n\t\t\t\tvisible:true,\n\t\t\t\tlevel:level,\n\t\t\t\toriginal:option,\n\t\t\t};\n\t\t\t\n\t\t\tif(this.initialValues && this.initialValues.indexOf(option.value) > -1){\n\t\t\t\tthis._chooseItem(item, true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tdata.push(item);\n\t}\n\t\n\t_parseListGroup(option, level){\n\t\tvar item = {\n\t\t\tlabel:option.label,\n\t\t\tgroup:true,\n\t\t\titemParams:option.itemParams,\n\t\t\telementAttributes:option.elementAttributes,\n\t\t\telement:false,\n\t\t\tvisible:true,\n\t\t\tlevel:level,\n\t\t\toptions:[],\n\t\t\toriginal:option,\n\t\t};\n\t\t\n\t\toption.options.forEach((child) => {\n\t\t\tthis._parseListItem(child, item.options, level);\n\t\t});\n\t\t\n\t\treturn item;\n\t}\n\t\n\t_sortOptions(options){\n\t\tvar sorter;\n\t\t\n\t\tif(this.params.sort){\n\t\t\tsorter = typeof this.params.sort === \"function\" ? this.params.sort : this._defaultSortFunction.bind(this);\n\t\t\t\n\t\t\tthis._sortGroup(sorter, options);\n\t\t}\n\t\t\n\t\treturn options;\n\t}\n\t\n\t_sortGroup(sorter, options){\n\t\toptions.sort((a,b) => {\n\t\t\treturn sorter(a.label, b.label, a.value, b.value, a.original, b.original);\n\t\t});\n\t\t\n\t\toptions.forEach((option) => {\n\t\t\tif(option.group){\n\t\t\t\tthis._sortGroup(sorter, option.options);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_defaultSortFunction(as, bs){\n\t\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\t\tvar emptyAlign = 0;\n\t\t\n\t\tif(this.params.sort === \"desc\"){\n\t\t\t[as, bs] = [bs, as];\n\t\t}\n\t\t\n\t\t//handle empty values\n\t\tif(!as && as!== 0){\n\t\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t\t}else if(!bs && bs!== 0){\n\t\t\temptyAlign =  1;\n\t\t}else {\n\t\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\t\ta = String(as).toLowerCase();\n\t\t\tb = String(bs).toLowerCase();\n\t\t\tif(a === b) return 0;\n\t\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\t\ta = a.match(rx);\n\t\t\tb = b.match(rx);\n\t\t\tL = a.length > b.length ? b.length : a.length;\n\t\t\twhile(i < L){\n\t\t\t\ta1= a[i];\n\t\t\t\tb1= b[i++];\n\t\t\t\tif(a1 !== b1){\n\t\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\t\treturn a1 - b1;\n\t\t\t\t\t}\n\t\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn a.length > b.length;\n\t\t}\n\t\t\n\t\treturn emptyAlign;\n\t}\n\t\n\t_filterOptions(){\n\t\tvar filterFunc = this.params.filterFunc || this._defaultFilterFunc,\n\t\tterm = this.input.value;\n\t\t\n\t\tif(term){\n\t\t\tthis.filtered = true;\n\t\t\t\n\t\t\tthis.data.forEach((item) => {\n\t\t\t\tthis._filterItem(filterFunc, term, item);\n\t\t\t});\n\t\t}else {\n\t\t\tthis.filtered = false;\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\t_filterItem(func, term, item){\n\t\tvar matches = false;\n\t\t\n\t\tif(!item.group){\n\t\t\titem.visible = func(term, item.label, item.value, item.original);\n\t\t}else {\n\t\t\titem.options.forEach((option) => {\n\t\t\t\tif(this._filterItem(func, term, option)){\n\t\t\t\t\tmatches = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\titem.visible = matches;\n\t\t}\n\t\t\n\t\treturn item.visible;\n\t}\n\t\n\t_defaultFilterFunc(term, label, value, item){\n\t\tterm = String(term).toLowerCase();\n\t\t\n\t\tif(label !== null && typeof label !== \"undefined\"){\n\t\t\tif(String(label).toLowerCase().indexOf(term) > -1 || String(value).toLowerCase().indexOf(term) > -1){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\t//////////////////////////////////////\n\t/////////// Display List /////////////\n\t//////////////////////////////////////\n\t\n\t_clearList(){\n\t\twhile(this.listEl.firstChild) this.listEl.removeChild(this.listEl.firstChild);\n\t\t\n\t\tthis.displayItems = [];\n\t}\n\t\n\t_buildList(data){\n\t\tthis._clearList();\n\t\t\n\t\tdata.forEach((option) => {\n\t\t\tthis._buildItem(option);\n\t\t});\n\t\t\n\t\tif(!this.displayItems.length){\n\t\t\tthis._addPlaceholder(this.params.placeholderEmpty);\n\t\t}  \n\t}\n\t\n\t_buildItem(item){\n\t\tvar el = item.element,\n\t\tcontents;\n\t\t\n\t\tif(!this.filtered || item.visible){\n\t\t\t\n\t\t\tif(!el){\n\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\n\t\t\t\tcontents = this.params.itemFormatter ? this.params.itemFormatter(item.label, item.value, item.original, el) : item.label;\n\t\t\t\t\n\t\t\t\tif(contents instanceof HTMLElement){\n\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t}else {\n\t\t\t\t\tel.innerHTML = contents;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-group\");\n\t\t\t\t}else {\n\t\t\t\t\tel.classList.add(\"tabulator-edit-list-item\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.classList.add(\"tabulator-edit-list-group-level-\" + item.level);\n\t\t\t\t\n\t\t\t\tif(item.elementAttributes && typeof item.elementAttributes == \"object\"){\n\t\t\t\t\tfor (let key in item.elementAttributes){\n\t\t\t\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\t\tel.setAttribute(key, this.input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.group){\n\t\t\t\t\tel.addEventListener(\"click\", this._groupClick.bind(this, item));\n\t\t\t\t}else {\n\t\t\t\t\tel.addEventListener(\"click\", this._itemClick.bind(this, item));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tel.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n\t\t\t\t\n\t\t\t\titem.element = el;\n\t\t\t}\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tthis.listEl.appendChild(el);\n\t\t\t\n\t\t\tif(item.group){\n\t\t\t\titem.options.forEach((option) => {\n\t\t\t\t\tthis._buildItem(option);\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tthis.displayItems.push(item);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_showList(){\n\t\tvar startVis = this.popup && this.popup.isVisible();\n\t\t\n\t\tif(this.input.parentNode){\n\t\t\tif(this.params.autocomplete && this.input.value === \"\" && !this.params.listOnEmpty){\n\t\t\t\tif(this.popup){\n\t\t\t\t\tthis.popup.hide(true);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis._setListWidth();\n\t\t\t\n\t\t\tif(!this.popup){\n\t\t\t\tthis.popup = this.edit.popup(this.listEl);\n\t\t\t}\n\t\t\t\n\t\t\tthis.popup.show(this.cell.getElement(), \"bottom\");\n\t\t\t\n\t\t\tif(!startVis){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.popup.hideOnBlur(this._resolveValue.bind(this, true));\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_styleItem(item){\n\t\tif(item && item.element){\n\t\t\tif(item.selected){\n\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t}else {\n\t\t\t\titem.element.classList.remove(\"active\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// User Interaction ///////////\n\t//////////////////////////////////////\n\t\n\t_itemClick(item, e){\n\t\te.stopPropagation();\n\t\t\n\t\tthis._chooseItem(item);\n\t}\n\t\n\t_groupClick(item, e){\n\t\te.stopPropagation();\n\t}\n\t\n\t\n\t//////////////////////////////////////\n\t////// Current Item Management ///////\n\t//////////////////////////////////////\n\t\n\t_cancel(){\n\t\tthis.popup.hide(true);\n\t\tthis.actions.cancel();\n\t}\n\t\n\t_clearChoices(){\n\t\tthis.typing = true;\n\t\t\n\t\tthis.currentItems.forEach((item) => {\n\t\t\titem.selected = false;\n\t\t\tthis._styleItem(item);\n\t\t});\n\t\t\n\t\tthis.currentItems = [];\n\t\t\n\t\tthis.focusedItem = null;\n\t}\n\t\n\t_chooseItem(item, silent){\n\t\tvar index;\n\t\t\n\t\tthis.typing = false;\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\tindex = this.currentItems.indexOf(item);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.currentItems.splice(index, 1);\n\t\t\t\titem.selected = false;\n\t\t\t}else {\n\t\t\t\tthis.currentItems.push(item);\n\t\t\t\titem.selected = true;\n\t\t\t}\n\t\t\t\n\t\t\tthis.input.value = this.currentItems.map(item => item.label).join(\",\");\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t}else {\n\t\t\tthis.currentItems = [item];\n\t\t\titem.selected = true;\n\t\t\t\n\t\t\tthis.input.value = item.label;\n\t\t\t\n\t\t\tthis._styleItem(item);\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis._resolveValue();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis._focusItem(item);\n\t}\n\t\n\t_resolveValue(blur){\n\t\tvar output, initialValue;\n\t\t\n\t\tif(this.popup){\n\t\t\tthis.popup.hide(true);\n\t\t}\n\t\t\n\t\tif(this.params.multiselect){\n\t\t\toutput = this.currentItems.map(item => item.value);\n\t\t}else {\n\t\t\tif(blur && this.params.autocomplete && this.typing){\n\t\t\t\tif(this.params.freetext || (this.params.allowEmpty && this.input.value === \"\")){\n\t\t\t\t\toutput = this.input.value;\n\t\t\t\t}else {\n\t\t\t\t\tthis.actions.cancel();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(this.currentItems[0]){\n\t\t\t\t\toutput = this.currentItems[0].value;\n\t\t\t\t}else {\n\t\t\t\t\tinitialValue = Array.isArray(this.initialValues) ? this.initialValues[0] : this.initialValues;\n\t\t\t\t\t\n\t\t\t\t\tif(initialValue === null || typeof initialValue === \"undefined\" || initialValue === \"\"){\n\t\t\t\t\t\toutput = initialValue;\n\t\t\t\t\t}else {\n\t\t\t\t\t\toutput = this.params.emptyValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(output === \"\"){\n\t\t\toutput = this.params.emptyValue;\n\t\t}\n\t\t\n\t\tthis.actions.success(output);\n\t\t\n\t\tif(this.isFilter){\n\t\t\tthis.initialValues = output && !Array.isArray(output) ? [output] : output;\n\t\t\tthis.currentItems = [];\n\t\t}\n\t}\n\t\n}\n\nfunction select(cell, onRendered, success, cancel, editorParams){\n\n\tthis.deprecationMsg(\"The select editor has been deprecated, please use the new list editor\");\n\n\tvar list = new Edit(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}\n\nfunction list(cell, onRendered, success, cancel, editorParams){\n\tvar list = new Edit(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}\n\nfunction autocomplete(cell, onRendered, success, cancel, editorParams){\n\n\tthis.deprecationMsg(\"The autocomplete editor has been deprecated, please use the new list editor with the 'autocomplete' editorParam\");\n\n\teditorParams.autocomplete = true;\n\n\tvar list = new Edit(this, cell, onRendered, success, cancel, editorParams);\n\n\treturn list.input;\n}\n\n//star rating\nfunction star(cell, onRendered, success, cancel, editorParams){\n\tvar self = this,\n\telement = cell.getElement(),\n\tvalue = cell.getValue(),\n\tmaxStars = element.getElementsByTagName(\"svg\").length || 5,\n\tsize = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n\tstars = [],\n\tstarsHolder = document.createElement(\"div\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n\n\t//change star type\n\tfunction starChange(val){\n\t\tstars.forEach(function(star, i){\n\t\t\tif(i < val){\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\n\t\t\t\t}else {\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}else {\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\n\t\t\t\t}else {\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}\n\t\t});\n\t}\n\n\t//build stars\n\tfunction buildStar(i){\n\n\t\tvar starHolder =  document.createElement(\"span\");\n\t\tvar nextStar = star.cloneNode(true);\n\n\t\tstars.push(nextStar);\n\n\t\tstarHolder.addEventListener(\"mouseenter\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tstarChange(i);\n\t\t});\n\n\t\tstarHolder.addEventListener(\"mousemove\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t});\n\n\t\tstarHolder.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tsuccess(i);\n\t\t\telement.blur();\n\t\t});\n\n\t\tstarHolder.appendChild(nextStar);\n\t\tstarsHolder.appendChild(starHolder);\n\n\t}\n\n\t//handle keyboard navigation value change\n\tfunction changeValue(val){\n\t\tvalue = val;\n\t\tstarChange(val);\n\t}\n\n\t//style cell\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\t//style holding element\n\tstarsHolder.style.verticalAlign = \"middle\";\n\tstarsHolder.style.display = \"inline-block\";\n\tstarsHolder.style.padding = \"4px\";\n\n\t//style star\n\tstar.setAttribute(\"width\", size);\n\tstar.setAttribute(\"height\", size);\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//create correct number of stars\n\tfor(var i=1;i<= maxStars;i++){\n\t\tbuildStar(i);\n\t}\n\n\t//ensure value does not exceed number of stars\n\tvalue = Math.min(parseInt(value), maxStars);\n\n\t// set initial styling of stars\n\tstarChange(value);\n\n\tstarsHolder.addEventListener(\"mousemove\", function(e){\n\t\tstarChange(0);\n\t});\n\n\tstarsHolder.addEventListener(\"click\", function(e){\n\t\tsuccess(0);\n\t});\n\n\telement.addEventListener(\"blur\", function(e){\n\t\tcancel();\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\tchangeValue(value + 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\tchangeValue(value - 1);\n\t\t\t\tbreak;\n\n\t\t\tcase 13: //enter\n\t\t\t\tsuccess(value);\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\treturn starsHolder;\n}\n\n//draggable progress bar\nfunction progress(cell, onRendered, success, cancel, editorParams){\n\tvar element = cell.getElement(),\n\tmax = typeof editorParams.max === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"max\")) || 100) : editorParams.max,\n\tmin = typeof editorParams.min === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"min\")) || 0) : editorParams.min,\n\tpercent = (max - min) / 100,\n\tvalue = cell.getValue() || 0,\n\thandle = document.createElement(\"div\"),\n\tbar = document.createElement(\"div\"),\n\tmouseDrag, mouseDragWidth;\n\n\t//set new value\n\tfunction updateValue(){\n\t\tvar style = window.getComputedStyle(element, null);\n\n\t\tvar calcVal = (percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\")))/100))) + min;\n\t\tsuccess(calcVal);\n\t\telement.setAttribute(\"aria-valuenow\", calcVal);\n\t\telement.setAttribute(\"aria-label\", value);\n\t}\n\n\t//style handle\n\thandle.style.position = \"absolute\";\n\thandle.style.right = \"0\";\n\thandle.style.top = \"0\";\n\thandle.style.bottom = \"0\";\n\thandle.style.width = \"5px\";\n\thandle.classList.add(\"tabulator-progress-handle\");\n\n\t//style bar\n\tbar.style.display = \"inline-block\";\n\tbar.style.position = \"relative\";\n\t// bar.style.top = \"8px\";\n\t// bar.style.bottom = \"8px\";\n\t// bar.style.left = \"4px\";\n\t// bar.style.marginRight = \"4px\";\n\tbar.style.height = \"100%\";\n\tbar.style.backgroundColor = \"#488CE9\";\n\tbar.style.maxWidth = \"100%\";\n\tbar.style.minWidth = \"0%\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//style cell\n\telement.style.padding = \"4px 4px\";\n\n\t//make sure value is in range\n\tvalue = Math.min(parseFloat(value), max);\n\tvalue = Math.max(parseFloat(value), min);\n\n\t//workout percentage\n\tvalue = Math.round((value - min) / percent);\n\t// bar.style.right = value + \"%\";\n\tbar.style.width = value + \"%\";\n\n\telement.setAttribute(\"aria-valuemin\", min);\n\telement.setAttribute(\"aria-valuemax\", max);\n\n\tbar.appendChild(handle);\n\n\thandle.addEventListener(\"mousedown\", function(e){\n\t\tmouseDrag = e.screenX;\n\t\tmouseDragWidth = bar.offsetWidth;\n\t});\n\n\thandle.addEventListener(\"mouseover\", function(){\n\t\thandle.style.cursor = \"ew-resize\";\n\t});\n\n\telement.addEventListener(\"mousemove\", function(e){\n\t\tif(mouseDrag){\n\t\t\tbar.style.width = (mouseDragWidth + e.screenX - mouseDrag) + \"px\";\n\t\t}\n\t});\n\n\telement.addEventListener(\"mouseup\", function(e){\n\t\tif(mouseDrag){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\n\t\t\tmouseDrag = false;\n\t\t\tmouseDragWidth = false;\n\n\t\t\tupdateValue();\n\t\t}\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth + element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\t\te.preventDefault();\n\t\t\t\tbar.style.width = (bar.clientWidth - element.clientWidth/100) + \"px\";\n\t\t\t\tbreak;\n\n\t\t\tcase 9: //tab\n\t\t\tcase 13: //enter\n\t\t\t\tupdateValue();\n\t\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\t\tcancel();\n\t\t\t\tbreak;\n\n\t\t}\n\t});\n\n\telement.addEventListener(\"blur\", function(){\n\t\tcancel();\n\t});\n\n\treturn bar;\n}\n\n//checkbox\nfunction tickCross(cell, onRendered, success, cancel, editorParams){\n\tvar value = cell.getValue(),\n\tinput = document.createElement(\"input\"),\n\ttristate = editorParams.tristate,\n\tindetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n\tindetermState = false,\n\ttrueValueSet = Object.keys(editorParams).includes(\"trueValue\"),\n\tfalseValueSet = Object.keys(editorParams).includes(\"falseValue\");\n\t\n\tinput.setAttribute(\"type\", \"checkbox\");\n\tinput.style.marginTop = \"5px\";\n\tinput.style.boxSizing = \"border-box\";\n\t\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else {\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tinput.value = value;\n\t\n\tif(tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")){\n\t\tindetermState = true;\n\t\tinput.indeterminate = true;\n\t}\n\t\n\tif(this.table.browser != \"firefox\" && this.table.browser != \"safari\"){ //prevent blur issue on mac firefox\n\t\tonRendered(function(){\n\t\t\tif(cell.getType() === \"cell\"){\n\t\t\t\tinput.focus({preventScroll: true});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tinput.checked = trueValueSet ? value === editorParams.trueValue : (value === true || value === \"true\" || value === \"True\" || value === 1);\n\t\n\tfunction setValue(blur){\n\t\tvar checkedValue = input.checked;\n\t\t\n\t\tif(trueValueSet && checkedValue){\n\t\t\tcheckedValue = editorParams.trueValue;\n\t\t}else if(falseValueSet && !checkedValue){\n\t\t\tcheckedValue = editorParams.falseValue;\n\t\t}\n\t\t\n\t\tif(tristate){\n\t\t\tif(!blur){\n\t\t\t\tif(input.checked && !indetermState){\n\t\t\t\t\tinput.checked = false;\n\t\t\t\t\tinput.indeterminate = true;\n\t\t\t\t\tindetermState = true;\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else {\n\t\t\t\t\tindetermState = false;\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(indetermState){\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else {\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\treturn checkedValue;\n\t\t}\n\t}\n\t\n\t//submit new value on blur\n\tinput.addEventListener(\"change\", function(e){\n\t\tsuccess(setValue());\n\t});\n\n\tinput.addEventListener(\"blur\", function(e){\n\t\tsuccess(setValue(true));\n\t});\n\t\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tif(e.keyCode == 13){\n\t\t\tsuccess(setValue());\n\t\t}\n\t\tif(e.keyCode == 27){\n\t\t\tcancel();\n\t\t}\n\t});\n\t\n\treturn input;\n}\n\nvar defaultEditors = {\n\tinput:input,\n\ttextarea:textarea,\n\tnumber:number,\n\trange:range,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tselect:select,\n\tlist:list,\n\tautocomplete:autocomplete,\n\tstar:star,\n\tprogress:progress,\n\ttickCross:tickCross,\n};\n\nclass Edit$1 extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.currentCell = false; //hold currently editing cell\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overridden by editor opening\n\t\tthis.recursionBlock = false; //prevent focus recursion\n\t\tthis.invalidEdit = false;\n\t\tthis.editedCells = [];\n\t\t\n\t\tthis.editors = Edit$1.editors;\n\t\t\n\t\tthis.registerColumnOption(\"editable\");\n\t\tthis.registerColumnOption(\"editor\");\n\t\tthis.registerColumnOption(\"editorParams\");\n\t\t\n\t\tthis.registerColumnOption(\"cellEditing\");\n\t\tthis.registerColumnOption(\"cellEdited\");\n\t\tthis.registerColumnOption(\"cellEditCancelled\");\n\t\t\n\t\tthis.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this));\n\t\tthis.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isEdited\", this.cellIsEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-init\", this.bindEditor.bind(this));\n\t\tthis.subscribe(\"cell-delete\", this.clearEdited.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.updateCellClass.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-layout\", this.rowEditableCheck.bind(this));\n\t\tthis.subscribe(\"data-refreshing\", this.cancelEdit.bind(this));\n\t\t\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this));\n\t\tthis.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this, undefined));\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t////// Keybinding Functions ///////\n\t///////////////////////////////////\n\t\n\tkeybindingNavigateNext(e){\n\t\tvar cell = this.currentCell,\n\t\tnewRow = this.options(\"tabEndNewRow\");\n\t\t\n\t\tif(cell){\n\t\t\tif(!this.navigateNext(cell, e)){\n\t\t\t\tif(newRow){\n\t\t\t\t\tcell.getElement().firstChild.blur();\n\t\t\t\t\t\n\t\t\t\t\tif(newRow === true){\n\t\t\t\t\t\tnewRow = this.table.addRow({});\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(typeof newRow == \"function\"){\n\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()));\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tnewRow.then(() => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tcell.getComponent().navigateNext();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Cell Functions //////////\n\t///////////////////////////////////\n\t\n\tcellIsEdited(cell){\n\t\treturn !! cell.modules.edit && cell.modules.edit.edited;\n\t}\n\t\n\tcellCancelEdit(cell){\n\t\tif(cell === this.currentCell){\n\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t}else {\n\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n\t\t}\n\t}\n\t\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tupdateCellClass(cell){\n\t\tif(this.allowEdit(cell)) {\n\t\t\tcell.getElement().classList.add(\"tabulator-editable\");\n\t\t}\n\t\telse {\n\t\t\tcell.getElement().classList.remove(\"tabulator-editable\");\n\t\t}\n\t}\n\t\n\tclearCellEdited(cells){\n\t\tif(!cells){\n\t\t\tcells = this.table.modules.edit.getEditedCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.table.modules.edit.clearEdited(cell._getSelf());\n\t\t});\n\t}\n\t\n\tnavigatePrev(cell = this.currentCell, e){\n\t\tvar nextCell, prevRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateLeft();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else {\n\t\t\t\tprevRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(prevRow){\n\t\t\t\t\tnextCell = this.findPrevEditableCell(prevRow, prevRow.cells.length);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateNext(cell = this.currentCell, e){\n\t\tvar nextCell, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tnextCell = this.navigateRight();\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else {\n\t\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\t\n\t\t\t\tif(nextRow){\n\t\t\t\t\tnextCell = this.findNextEditableCell(nextRow, -1);\n\t\t\t\t\t\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateLeft(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findPrevEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateRight(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findNextEditableCell(cell.row, index);\n\t\t\t\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateUp(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tnavigateDown(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\t\t\n\t\tif(cell){\n\t\t\t\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\t\t\t\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tfindNextEditableCell(row, index){\n\t\tvar nextCell = false;\n\t\t\n\t\tif(index < row.cells.length-1){\n\t\t\tfor(var i = index+1; i < row.cells.length; i++){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tnextCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn nextCell;\n\t}\n\t\n\tfindPrevEditableCell(row, index){\n\t\tvar prevCell = false;\n\t\t\n\t\tif(index > 0){\n\t\t\tfor(var i = index-1; i >= 0; i--){\n\t\t\t\tlet cell = row.cells[i];\n\t\t\t\t\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = this.allowEdit(cell);\n\t\t\t\t\t\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tprevCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn prevCell;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.editor !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\tcolumnDeleteCheck(column){\n\t\tif(this.currentCell && this.currentCell.column === column){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\t\n\trowDeleteCheck(row){\n\t\tif(this.currentCell && this.currentCell.row === row){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\n\trowEditableCheck(row){\n\t\trow.getCells().forEach((cell) => {\n\t\t\tif(cell.column.modules.edit && typeof cell.column.modules.edit.check === \"function\"){\n\t\t\t\tthis.updateCellClass(cell);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//initialize column editor\n\tinitializeColumn(column){\n\t\tvar config = {\n\t\t\teditor:false,\n\t\t\tblocked:false,\n\t\t\tcheck:column.definition.editable,\n\t\t\tparams:column.definition.editorParams || {}\n\t\t};\n\t\t\n\t\t//set column editor\n\t\tswitch(typeof column.definition.editor){\n\t\t\tcase \"string\":\n\t\t\t\tif(this.editors[column.definition.editor]){\n\t\t\t\t\tconfig.editor = this.editors[column.definition.editor];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tconfig.editor = column.definition.editor;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"boolean\":\n\t\t\t\tif(column.definition.editor === true){\n\t\t\t\t\tif(typeof column.definition.formatter !== \"function\"){\n\t\t\t\t\t\tif(this.editors[column.definition.formatter]){\n\t\t\t\t\t\t\tconfig.editor = this.editors[column.definition.formatter];\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tconfig.editor = this.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\tif(config.editor){\n\t\t\tcolumn.modules.edit = config;\n\t\t}\n\t}\n\t\n\tgetCurrentCell(){\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\n\t}\n\t\n\tclearEditor(cancel){\n\t\tvar cell = this.currentCell,\n\t\tcellEl;\n\t\t\n\t\tthis.invalidEdit = false;\n\t\t\n\t\tif(cell){\n\t\t\tthis.currentCell = false;\n\t\t\t\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tthis.dispatch(\"edit-editor-clear\", cell, cancel);\n\t\t\t\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\twhile(cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\n\t\t\t\n\t\t\tcell.row.getElement().classList.remove(\"tabulator-editing\");\n\t\t\t\n\t\t\tcell.table.element.classList.remove(\"tabulator-editing\");\n\t\t}\n\t}\n\t\n\tcancelEdit(){\n\t\tif(this.currentCell){\n\t\t\tvar cell = this.currentCell;\n\t\t\tvar component = this.currentCell.getComponent();\n\t\t\t\n\t\t\tthis.clearEditor(true);\n\t\t\tcell.setValueActual(cell.getValue());\n\t\t\tcell.cellRendered();\n\t\t\t\n\t\t\tif(cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight){\n\t\t\t\tcell.row.normalizeHeight(true);\n\t\t\t}\n\t\t\t\n\t\t\tif(cell.column.definition.cellEditCancelled){\n\t\t\t\tcell.column.definition.cellEditCancelled.call(this.table, component);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"edit-cancelled\", cell);\n\t\t\tthis.dispatchExternal(\"cellEditCancelled\", component);\n\t\t}\n\t}\n\t\n\t//return a formatted value for a cell\n\tbindEditor(cell){\n\t\tif(cell.column.modules.edit){\n\t\t\tvar self = this,\n\t\t\telement = cell.getElement(true);\n\t\t\t\n\t\t\tthis.updateCellClass(cell);\n\t\t\telement.setAttribute(\"tabindex\", 0);\n\t\t\t\n\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\n\t\t\t\t\telement.focus({preventScroll: true});\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif (e.button === 2) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}else {\n\t\t\t\t\tself.mouseClick = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\telement.addEventListener(\"focus\", function(e){\n\t\t\t\tif(!self.recursionBlock){\n\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tfocusCellNoEvent(cell, block){\n\t\tthis.recursionBlock = true;\n\t\t\n\t\tif(!(block && this.table.browser === \"ie\")){\n\t\t\tcell.getElement().focus({preventScroll: true});\n\t\t}\n\t\t\n\t\tthis.recursionBlock = false;\n\t}\n\t\n\teditCell(cell, forceEdit){\n\t\tthis.focusCellNoEvent(cell);\n\t\tthis.edit(cell, false, forceEdit);\n\t}\n\t\n\tfocusScrollAdjust(cell){\n\t\tif(this.table.rowManager.getRenderMode() == \"virtual\"){\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\n\t\t\tbottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n\t\t\trowEl = cell.row.getElement();\n\t\t\t\n\t\t\tif(rowEl.offsetTop < topEdge){\n\t\t\t\tthis.table.rowManager.element.scrollTop -= (topEdge - rowEl.offsetTop);\n\t\t\t}else {\n\t\t\t\tif(rowEl.offsetTop + rowEl.offsetHeight  > bottomEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += (rowEl.offsetTop + rowEl.offsetHeight - bottomEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\n\t\t\trightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n\t\t\tcellEl = cell.getElement();\n\t\t\t\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin || 0);\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin || 0);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t\trightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t}\n\t\t\t\n\t\t\tif(cellEl.offsetLeft < leftEdge){\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= (leftEdge - cellEl.offsetLeft);\n\t\t\t}else {\n\t\t\t\tif(cellEl.offsetLeft + cellEl.offsetWidth  > rightEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += (cellEl.offsetLeft + cellEl.offsetWidth - rightEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tallowEdit(cell) {\n\t\tvar check = cell.column.modules.edit ? true : false;\n\n\t\tif(cell.column.modules.edit){\n\t\t\tswitch(typeof cell.column.modules.edit.check){\n\t\t\t\tcase \"function\":\n\t\t\t\t\tif(cell.row.initialized){\n\t\t\t\t\t\tcheck = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"string\":\n\t\t\t\t\tcheck = !!cell.row.data[cell.column.modules.edit.check];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tcheck = cell.column.modules.edit.check;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn check;\n\t}\n\t\n\tedit(cell, e, forceEdit){\n\t\tvar self = this,\n\t\tallowEdit = true,\n\t\trendered = function(){},\n\t\telement = cell.getElement(),\n\t\tcellEditor, component, params;\n\t\t\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\n\t\tif(this.currentCell){\n\t\t\tif(!this.invalidEdit && this.currentCell !== cell){\n\t\t\t\tthis.cancelEdit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t//handle successful value change\n\t\tfunction success(value){\n\t\t\tif(self.currentCell === cell){\n\t\t\t\tvar valid = self.chain(\"edit-success\", [cell, value], true, true);\n\t\t\t\t\n\t\t\t\tif(valid === true || self.table.options.validationMode === \"highlight\"){\n\t\t\t\t\tself.clearEditor();\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif(!cell.modules.edit){\n\t\t\t\t\t\tcell.modules.edit = {};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcell.modules.edit.edited = true;\n\t\t\t\t\t\n\t\t\t\t\tif(self.editedCells.indexOf(cell) == -1){\n\t\t\t\t\t\tself.editedCells.push(cell);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcell.setValue(value, true);\n\t\t\t\t\t\n\t\t\t\t\treturn valid === true;\n\t\t\t\t}else {\n\t\t\t\t\tself.invalidEdit = true;\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\n\t\t\t\t\trendered();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t//handle aborted edit\n\t\tfunction cancel(){\n\t\t\tif(self.currentCell === cell){\n\t\t\t\tself.cancelEdit();\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\trendered = callback;\n\t\t}\n\t\t\n\t\tif(!cell.column.modules.edit.blocked){\n\t\t\tif(e){\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t\t\n\t\t\tallowEdit = this.allowEdit(cell);\n\t\t\t\n\t\t\tif(allowEdit || forceEdit){\n\t\t\t\t\n\t\t\t\tself.cancelEdit();\n\t\t\t\t\n\t\t\t\tself.currentCell = cell;\n\t\t\t\t\n\t\t\t\tthis.focusScrollAdjust(cell);\n\t\t\t\t\n\t\t\t\tcomponent = cell.getComponent();\n\t\t\t\t\n\t\t\t\tif(this.mouseClick){\n\t\t\t\t\tthis.mouseClick = false;\n\t\t\t\t\t\n\t\t\t\t\tif(cell.column.definition.cellClick){\n\t\t\t\t\t\tcell.column.definition.cellClick.call(this.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(cell.column.definition.cellEditing){\n\t\t\t\t\tcell.column.definition.cellEditing.call(this.table, component);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"cell-editing\", cell);\n\t\t\t\tthis.dispatchExternal(\"cellEditing\", component);\n\t\t\t\t\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n\t\t\t\t\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\t\t\t\t\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\n\t\t\t\tif(this.currentCell && cellEditor !== false){\n\t\t\t\t\tif(cellEditor instanceof Node){\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.table.element.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\t\t\t\telement.appendChild(cellEditor);\n\t\t\t\t\t\t\n\t\t\t\t\t\t//trigger onRendered Callback\n\t\t\t\t\t\trendered();\n\t\t\t\t\t\t\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\n\t\t\t\t\t\tvar children = element.children;\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function(e){\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n\t\t\t\t\t\telement.blur();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\telement.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn true;\n\t\t\t}else {\n\t\t\t\tthis.mouseClick = false;\n\t\t\t\telement.blur();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else {\n\t\t\tthis.mouseClick = false;\n\t\t\telement.blur();\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tgetEditedCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.editedCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearEdited(cell){\n\t\tvar editIndex;\n\t\t\n\t\tif(cell.modules.edit && cell.modules.edit.edited){\n\t\t\tcell.modules.edit.edited = false;\n\t\t\t\n\t\t\tthis.dispatch(\"edit-edited-clear\", cell);\n\t\t}\n\t\t\n\t\teditIndex = this.editedCells.indexOf(cell);\n\t\t\n\t\tif(editIndex > -1){\n\t\t\tthis.editedCells.splice(editIndex, 1);\n\t\t}\n\t}\n}\n\nEdit$1.moduleName = \"edit\";\n\n//load defaults\nEdit$1.editors = defaultEditors;\n\nclass ExportRow{\n\tconstructor(type, columns, component, indent){\n\t\tthis.type = type;\n\t\tthis.columns = columns;\n\t\tthis.component = component || false;\n\t\tthis.indent = indent || 0;\n\t}\n}\n\nclass ExportColumn{\n\tconstructor(value, component, width, height, depth){\n\t\tthis.value = value;\n\t\tthis.component = component || false;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = depth;\n\t}\n}\n\nclass Export extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {};\n\t\tthis.cloneTableStyle = true;\n\t\tthis.colVisProp = \"\";\n\t\t\n\t\tthis.registerTableOption(\"htmlOutputConfig\", false); //html output config\n\t\t\n\t\tthis.registerColumnOption(\"htmlOutput\");\n\t\tthis.registerColumnOption(\"titleHtmlOutput\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tgenerateExportList(config, style, range, colVisProp){\n\t\tthis.cloneTableStyle = style;\n\t\tthis.config = config || {};\n\t\tthis.colVisProp = colVisProp;\n\t\t\n\t\tvar headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\n\t\tvar body = this.bodyToExportRows(this.rowLookup(range));\n\t\t\n\t\treturn headers.concat(body);\n\t}\n\t\n\tgenerateTable(config, style, range, colVisProp){\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\n\t\t\n\t\treturn this.generateTableElement(list);\n\t}\n\t\n\trowLookup(range){\n\t\tvar rows = [];\n\t\t\n\t\tif(typeof range == \"function\"){\n\t\t\trange.call(this.table).forEach((row) =>{\n\t\t\t\trow = this.table.rowManager.findRow(row);\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trows.push(row);\n\t\t\t\t}\n\t\t\t});\n\t\t}else {\n\t\t\tswitch(range){\n\t\t\t\tcase true:\n\t\t\t\tcase \"visible\":\n\t\t\t\t\trows = this.table.rowManager.getVisibleRows(false, true);\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"all\":\n\t\t\t\t\trows = this.table.rowManager.rows;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"selected\":\n\t\t\t\t\trows = this.table.modules.selectRow.selectedRows;\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"active\":\n\t\t\t\tdefault:\n\t\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\t\trows = this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length - 2);\n\t\t\t\t\t}else {\n\t\t\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Object.assign([], rows);\n\t}\n\t\n\tgenerateColumnGroupHeaders(){\n\t\tvar output = [];\n\t\t\n\t\tvar columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\tvar colData = this.processColumnGroup(column);\n\t\t\t\n\t\t\tif(colData){\n\t\t\t\toutput.push(colData);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tprocessColumnGroup(column){\n\t\tvar subGroups = column.columns,\n\t\tmaxDepth = 0,\n\t\ttitle = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\n\t\t\n\t\tvar groupData = {\n\t\t\ttitle:title,\n\t\t\tcolumn:column,\n\t\t\tdepth:1,\n\t\t};\n\t\t\n\t\tif(subGroups.length){\n\t\t\tgroupData.subGroups = [];\n\t\t\tgroupData.width = 0;\n\t\t\t\n\t\t\tsubGroups.forEach((subGroup) => {\n\t\t\t\tvar subGroupData = this.processColumnGroup(subGroup);\n\t\t\t\t\n\t\t\t\tif(subGroupData){\n\t\t\t\t\tgroupData.width += subGroupData.width;\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\n\t\t\t\t\t\n\t\t\t\t\tif(subGroupData.depth > maxDepth){\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tgroupData.depth += maxDepth;\n\t\t\t\n\t\t\tif(!groupData.width){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else {\n\t\t\tif(this.columnVisCheck(column)){\n\t\t\t\tgroupData.width = 1;\n\t\t\t}else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn groupData;\n\t}\n\t\n\tcolumnVisCheck(column){\n\t\tvar visProp = column.definition[this.colVisProp];\n\t\t\n\t\tif(typeof visProp === \"function\"){\n\t\t\tvisProp = visProp.call(this.table, column.getComponent());\n\t\t}\n\t\t\n\t\treturn visProp !== false && (column.visible || (!column.visible && visProp));\n\t}\n\t\n\theadersToExportRows(columns){\n\t\tvar headers = [],\n\t\theaderDepth = 0,\n\t\texportRows = [];\n\t\t\n\t\tfunction parseColumnGroup(column, level){\n\t\t\t\n\t\t\tvar depth = headerDepth - level;\n\t\t\t\n\t\t\tif(typeof headers[level] === \"undefined\"){\n\t\t\t\theaders[level] = [];\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.height = column.subGroups ? 1 : (depth - column.depth) + 1;\n\t\t\t\n\t\t\theaders[level].push(column);\n\t\t\t\n\t\t\tif(column.height > 1){\n\t\t\t\tfor(let i = 1; i < column.height; i ++){\n\t\t\t\t\t\n\t\t\t\t\tif(typeof headers[level + i] === \"undefined\"){\n\t\t\t\t\t\theaders[level + i] = [];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\theaders[level + i].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.width > 1){\n\t\t\t\tfor(let i = 1; i < column.width; i ++){\n\t\t\t\t\theaders[level].push(false);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(column.subGroups){\n\t\t\t\tcolumn.subGroups.forEach(function(subGroup){\n\t\t\t\t\tparseColumnGroup(subGroup, level+1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\t//calculate maximum header depth\n\t\tcolumns.forEach(function(column){\n\t\t\tif(column.depth > headerDepth){\n\t\t\t\theaderDepth = column.depth;\n\t\t\t}\n\t\t});\n\t\t\n\t\tcolumns.forEach(function(column){\n\t\t\tparseColumnGroup(column,0);\n\t\t});\n\t\t\n\t\theaders.forEach((header) => {\n\t\t\tvar columns = [];\n\t\t\t\n\t\t\theader.forEach((col) => {\n\t\t\t\tif(col){\n\t\t\t\t\tlet title = typeof col.title === \"undefined\" ? \"\" : col.title;\n\t\t\t\t\tcolumns.push(new ExportColumn(title, col.column.getComponent(), col.width, col.height, col.depth));\n\t\t\t\t}else {\n\t\t\t\t\tcolumns.push(null);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tbodyToExportRows(rows){\n\t\t\n\t\tvar columns = [];\n\t\tvar exportRows = [];\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif (this.columnVisCheck(column)) {\n\t\t\t\tcolumns.push(column.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized){\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized){\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t}\n\t\t\n\t\trows = rows.filter((row) => {\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn this.config.rowGroups !== false;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\treturn this.config.columnCalcs !== false;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\treturn !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\n\t\t\t}\n\t\t\t\n\t\t\treturn true;\n\t\t});\n\t\t\n\t\trows.forEach((row, i) => {\n\t\t\tvar rowData = row.getData(this.colVisProp);\n\t\t\tvar exportCols = [];\n\t\t\tvar indent = 0;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\tindent = row.level;\n\t\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\" :\n\t\t\t\tcase \"row\" :\n\t\t\t\t\tcolumns.forEach((col) => {\n\t\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n\t\t\t\t\t});\n\t\t\t\t\n\t\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\t\tindent = row.modules.dataTree.index;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n\t\t});\n\t\t\n\t\treturn exportRows;\n\t}\n\t\n\tgenerateTableElement(list){\n\t\tvar table = document.createElement(\"table\"),\n\t\theaderEl = document.createElement(\"thead\"),\n\t\tbodyEl = document.createElement(\"tbody\"),\n\t\tstyles = this.lookupTableStyles(),\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\n\t\tsetup = {};\n\t\t\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\t\t\n\t\tif(this.table.options.dataTree &&this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\n\t\t}\n\t\t\n\t\t//assign group header formatter\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\n\t\t\n\t\tif(setup.groupHeader && !Array.isArray(setup.groupHeader)){\n\t\t\tsetup.groupHeader = [setup.groupHeader];\n\t\t}\n\t\t\n\t\ttable.classList.add(\"tabulator-print-table\");\n\t\t\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\n\t\t\n\t\tif(list.length > 1000){\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n\t\t}\n\t\t\n\t\tlist.forEach((row, i) => {\n\t\t\tlet rowEl;\n\t\t\t\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"header\":\n\t\t\t\t\theaderEl.appendChild(this.generateHeaderElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"group\":\n\t\t\t\t\tbodyEl.appendChild(this.generateGroupElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"calc\":\n\t\t\t\t\tbodyEl.appendChild(this.generateCalcElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"row\":\n\t\t\t\t\trowEl = this.generateRowElement(row, setup, styles);\n\t\t\t\t\n\t\t\t\t\tthis.mapElementStyles(((i % 2) && styles.evenRow) ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\t\t\tbodyEl.appendChild(rowEl);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(headerEl.innerHTML){\n\t\t\ttable.appendChild(headerEl);\n\t\t}\n\t\t\n\t\ttable.appendChild(bodyEl);\n\t\t\n\t\t\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n\t\treturn table;\n\t}\n\t\n\tlookupTableStyles(){\n\t\tvar styles = {};\n\t\t\n\t\t//lookup row styles\n\t\tif(this.cloneTableStyle && window.getComputedStyle){\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\t\t\t\n\t\t\tif(styles.firstRow){\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn styles;\n\t}\n\t\n\tgenerateHeaderElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trow.columns.forEach((column) => {\n\t\t\tif(column){\n\t\t\t\tvar cellEl = document.createElement(\"th\");\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tcellEl.colSpan = column.width;\n\t\t\t\tcellEl.rowSpan = column.height;\n\t\t\t\t\n\t\t\t\tcellEl.innerHTML = column.value;\n\t\t\t\t\n\t\t\t\tif(this.cloneTableStyle){\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\t\tthis.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\t\t\n\t\t\t\tif(column.component._column.visible){\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n\t\t\t\t}else {\n\t\t\t\t\tif(column.component._column.definition.width){\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.component._column.parent){\n\t\t\t\t\tthis.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateGroupElement(row, setup, styles){\n\t\t\n\t\tvar rowEl = document.createElement(\"tr\"),\n\t\tcellEl = document.createElement(\"td\"),\n\t\tgroup = row.columns[0];\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\tif(setup.groupHeader && setup.groupHeader[row.indent]){\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t}else {\n\t\t\tif(setup.groupHeader !== false){\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t}\n\t\t}\n\t\t\n\t\tcellEl.colSpan = group.width;\n\t\tcellEl.innerHTML = group.value;\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n\t\t\n\t\tif(group.component.isVisible()){\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\t\t\n\t\trowEl.appendChild(cellEl);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateCalcElement(row, setup, styles){\n\t\tvar rowEl = this.generateRowElement(row, setup, styles);\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateRowElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\t\t\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\t\t\n\t\trow.columns.forEach((col, i) => {\n\t\t\tif(col){\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\n\t\t\t\tcolumn = col.component._column,\n\t\t\t\tindex = this.table.columnManager.findColumnIndex(column),\n\t\t\t\tvalue = col.value,\n\t\t\t\tcellStyle;\n\t\t\t\t\n\t\t\t\tvar cellWrapper = {\n\t\t\t\t\tmodules:{},\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn cellEl;\n\t\t\t\t\t},\n\t\t\t\t\tgetType:function(){\n\t\t\t\t\t\treturn \"cell\";\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\treturn row.component.getData();\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn row.component;\n\t\t\t\t\t},\n\t\t\t\t\tgetComponent:function(){\n\t\t\t\t\t\treturn cellWrapper;\n\t\t\t\t\t},\n\t\t\t\t\tcolumn:column,\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n\t\t\t\t\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(this.table.modExists(\"format\") && this.config.formatCells !== false){\n\t\t\t\t\tvalue = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\n\t\t\t\t}else {\n\t\t\t\t\tswitch(typeof value){\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tvalue = value !== null ? JSON.stringify(value) : \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(value instanceof Node){\n\t\t\t\t\tcellEl.appendChild(value);\n\t\t\t\t}else {\n\t\t\t\t\tcellEl.innerHTML = value;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcellStyle = styles.styleCells && styles.styleCells[index] ? styles.styleCells[index] : styles.firstCell;\n\t\t\t\t\n\t\t\t\tif(cellStyle){\n\t\t\t\t\tthis.mapElementStyles(cellStyle, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"text-align\"]);\n\t\t\t\t\t\n\t\t\t\t\tif(column.definition.align){\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\tif((setup.treeElementField && setup.treeElementField == column.field) || (!setup.treeElementField && i == 0)){\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.controlEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.branchEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t\t\n\t\t\t\tif(cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback){\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(setup.rowFormatter && row.type === \"row\" && this.config.formatCells !== false){\n\t\t\tlet formatComponent = Object.assign(row.component);\n\n\t\t\tformatComponent.getElement = function(){return rowEl;};\n\n\t\t\tsetup.rowFormatter(row.component);\n\t\t}\n\t\t\n\t\treturn rowEl;\n\t}\n\t\n\tgenerateHTMLTable(list){\n\t\tvar holder = document.createElement(\"div\");\n\t\t\n\t\tholder.appendChild(this.generateTableElement(list));\n\t\t\n\t\treturn holder.innerHTML;\n\t}\n\t\n\tgetHtml(visible, style, config, colVisProp){\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n\t\t\n\t\treturn this.generateHTMLTable(list);\n\t}\n\t\n\tmapElementStyles(from, to, props){\n\t\tif(this.cloneTableStyle && from && to){\n\t\t\t\n\t\t\tvar lookup = {\n\t\t\t\t\"background-color\" : \"backgroundColor\",\n\t\t\t\t\"color\" : \"fontColor\",\n\t\t\t\t\"width\" : \"width\",\n\t\t\t\t\"font-weight\" : \"fontWeight\",\n\t\t\t\t\"font-family\" : \"fontFamily\",\n\t\t\t\t\"font-size\" : \"fontSize\",\n\t\t\t\t\"text-align\" : \"textAlign\",\n\t\t\t\t\"border-top\" : \"borderTop\",\n\t\t\t\t\"border-left\" : \"borderLeft\",\n\t\t\t\t\"border-right\" : \"borderRight\",\n\t\t\t\t\"border-bottom\" : \"borderBottom\",\n\t\t\t\t\"padding-top\" : \"paddingTop\",\n\t\t\t\t\"padding-left\" : \"paddingLeft\",\n\t\t\t\t\"padding-right\" : \"paddingRight\",\n\t\t\t\t\"padding-bottom\" : \"paddingBottom\",\n\t\t\t};\n\t\t\t\n\t\t\tif(window.getComputedStyle){\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\n\t\t\t\t\n\t\t\t\tprops.forEach(function(prop){\n\t\t\t\t\tif(!to.style[lookup[prop]]){\n\t\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nExport.moduleName = \"export\";\n\nvar defaultFilters = {\n\n\t//equal to\n\t\"=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal == filterVal ? true : false;\n\t},\n\n\t//less than\n\t\"<\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal < filterVal ? true : false;\n\t},\n\n\t//less than or equal to\n\t\"<=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal <= filterVal ? true : false;\n\t},\n\n\t//greater than\n\t\">\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal > filterVal ? true : false;\n\t},\n\n\t//greater than or equal to\n\t\">=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal >= filterVal ? true : false;\n\t},\n\n\t//not equal to\n\t\"!=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal != filterVal ? true : false;\n\t},\n\n\t\"regex\":function(filterVal, rowVal, rowData, filterParams){\n\n\t\tif(typeof filterVal == \"string\"){\n\t\t\tfilterVal = new RegExp(filterVal);\n\t\t}\n\n\t\treturn filterVal.test(rowVal);\n\t},\n\n\t//contains the string\n\t\"like\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else {\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//contains the keywords\n\t\"keywords\":function(filterVal, rowVal, rowData, filterParams){\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n\t\tvalue = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n\t\tmatches = [];\n\n\t\tkeywords.forEach((keyword) =>{\n\t\t\tif(value.includes(keyword)){\n\t\t\t\tmatches.push(true);\n\t\t\t}\n\t\t});\n\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n\t},\n\n\t//starts with the string\n\t\"starts\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else {\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//ends with the string\n\t\"ends\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else {\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//in array\n\t\"in\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(Array.isArray(filterVal)){\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n\t\t}else {\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\n\t\t\treturn false;\n\t\t}\n\t},\n};\n\nclass Filter extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.filterList = []; //hold filter list\n\t\tthis.headerFilters = {}; //hold column filters\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\n\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.changed = false; //has filtering changed since last render\n\t\tthis.tableInitialized = false;\n\n\t\tthis.registerTableOption(\"filterMode\", \"local\"); //local or remote filtering\n\n\t\tthis.registerTableOption(\"initialFilter\", false); //initial filtering criteria\n\t\tthis.registerTableOption(\"initialHeaderFilter\", false); //initial header filtering criteria\n\t\tthis.registerTableOption(\"headerFilterLiveFilterDelay\", 300); //delay before updating column after user types in header filter\n\t\tthis.registerTableOption(\"placeholderHeaderFilter\", false); //placeholder when header filter is empty\n\n\t\tthis.registerColumnOption(\"headerFilter\");\n\t\tthis.registerColumnOption(\"headerFilterPlaceholder\");\n\t\tthis.registerColumnOption(\"headerFilterParams\");\n\t\tthis.registerColumnOption(\"headerFilterEmptyCheck\");\n\t\tthis.registerColumnOption(\"headerFilterFunc\");\n\t\tthis.registerColumnOption(\"headerFilterFuncParams\");\n\t\tthis.registerColumnOption(\"headerFilterLiveFilter\");\n\n\t\tthis.registerTableFunction(\"searchRows\", this.searchRows.bind(this));\n\t\tthis.registerTableFunction(\"searchData\", this.searchData.bind(this));\n\n\t\tthis.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this));\n\t\tthis.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this));\n\t\tthis.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this));\n\t\tthis.registerTableFunction(\"getFilters\", this.getFilters.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this));\n\t\tthis.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this));\n\n\t\tthis.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this));\n\t\tthis.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.subscribe(\"placeholder\", this.generatePlaceholder.bind(this));\n\n\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteFilterParams.bind(this));\n\t\t}\n\n\t\tthis.registerDataHandler(this.filter.bind(this), 10);\n\t}\n\n\ttableBuilt(){\n\t\tif(this.table.options.initialFilter){\n\t\t\tthis.setFilter(this.table.options.initialFilter);\n\t\t}\n\n\t\tif(this.table.options.initialHeaderFilter){\n\t\t\tthis.table.options.initialHeaderFilter.forEach((item) => {\n\n\t\t\t\tvar column = this.table.columnManager.findColumn(item.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.setHeaderFilterValue(column, item.value);\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.tableInitialized = true;\n\t}\n\n\tremoteFilterParams(data, config, silent, params){\n\t\tparams.filter = this.getFilters(true, true);\n\t\treturn params;\n\t}\n\n\tgeneratePlaceholder(text){\n\t\tif(this.table.options.placeholderHeaderFilter && Object.keys(this.headerFilters).length){\n\t\t\treturn this.table.options.placeholderHeaderFilter;\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t//set standard filters\n\tuserSetFilter(field, type, value, params){\n\t\tthis.setFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\t//set standard filters\n\tuserRefreshFilter(){\n\t\tthis.refreshFilter();\n\t}\n\n\t//add filter to array\n\tuserAddFilter(field, type, value, params){\n\t\tthis.addFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\tuserSetHeaderFilterFocus(field){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterFocus(column);\n\t\t}else {\n\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tuserGetHeaderFilterValue(field) {\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\treturn this.getHeaderFilterValue(column);\n\t\t}else {\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t}\n\t}\n\n\tuserSetHeaderFilterValue(field, value){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterValue(column, value);\n\t\t}else {\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//remove filter from array\n\tuserRemoveFilter(field, type, value){\n\t\tthis.removeFilter(field, type, value);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear filters\n\tuserClearFilter(all){\n\t\tthis.clearFilter(all);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear header filters\n\tuserClearHeaderFilter(){\n\t\tthis.clearHeaderFilter();\n\t\tthis.refreshFilter();\n\t}\n\n\n\t//search for specific row components\n\tsearchRows(field, type, value){\n\t\treturn this.search(\"rows\", field, type, value);\n\t}\n\n\t//search for specific data\n\tsearchData(field, type, value){\n\t\treturn this.search(\"data\", field, type, value);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumnHeaderFilter(column){\n\t\tvar def = column.definition;\n\n\t\tif(def.headerFilter){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\n\t//initialize column header filter\n\tinitializeColumn(column, value){\n\t\tvar self = this,\n\t\tfield = column.getField();\n\n\t\t//handle successfully value change\n\t\tfunction success(value){\n\t\t\tvar filterType = (column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\") || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n\t\t\ttype = \"\",\n\t\t\tfilterChangeCheck = \"\",\n\t\t\tfilterFunc;\n\n\t\t\tif(typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value){\n\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\n\n\t\t\t\tif(!column.modules.filter.emptyFunc(value)){\n\t\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\t\tswitch(typeof column.definition.headerFilterFunc){\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\tif(Filter.filters[column.definition.headerFilterFunc]){\n\t\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\t\treturn Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\ttype = filterFunc;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!filterFunc){\n\t\t\t\t\t\tswitch(filterType){\n\t\t\t\t\t\t\tcase \"partial\":\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tif(typeof colVal !== 'undefined' && colVal !== null){\n\t\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n\t\t\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"like\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself.headerFilters[field] = {value:value, func:filterFunc, type:type};\n\t\t\t\t}else {\n\t\t\t\t\tdelete self.headerFilters[field];\n\t\t\t\t}\n\n\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\n\n\t\t\t\tif(self.prevHeaderFilterChangeCheck !== filterChangeCheck){\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\n\n\t\t\t\t\tself.trackChanges();\n\t\t\t\t\tself.refreshFilter();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tcolumn.modules.filter = {\n\t\t\tsuccess:success,\n\t\t\tattrType:false,\n\t\t\ttagType:false,\n\t\t\temptyFunc:false,\n\t\t};\n\n\t\tthis.generateHeaderFilterElement(column);\n\t}\n\n\tgenerateHeaderFilterElement(column, initialValue, reinitialize){\n\t\tvar self = this,\n\t\tsuccess = column.modules.filter.success,\n\t\tfield = column.getField(),\n\t\tfilterElement, editor, editorElement, cellWrapper, typingTimer, searchTrigger, params, onRenderedCallback;\n\n\t\tcolumn.modules.filter.value = initialValue;\n\n\t\t//handle aborted edit\n\t\tfunction cancel(){}\n\n\t\tfunction onRendered(callback){\n\t\t\tonRenderedCallback = callback;\n\t\t}\n\n\t\tif(column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode){\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n\t\t}\n\n\t\tif(field){\n\n\t\t\t//set empty value function\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function(value){\n\t\t\t\treturn !value && value !== 0;\n\t\t\t};\n\n\t\t\tfilterElement = document.createElement(\"div\");\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\n\n\t\t\t//set column editor\n\t\t\tswitch(typeof column.definition.headerFilter){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(self.table.modules.edit.editors[column.definition.headerFilter]){\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n\t\t\t\t\t\tif((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\teditor = column.definition.headerFilter;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tif(column.modules.edit && column.modules.edit.editor){\n\t\t\t\t\t\teditor = column.modules.edit.editor;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]){\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\n\n\t\t\t\t\t\t\tif((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(editor){\n\n\t\t\t\tcellWrapper = {\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn filterElement;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t},\n\t\t\t\t\tgetType:() => {\n\t\t\t\t\t\treturn \"header\";\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tnormalizeHeight:function(){\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tparams = column.definition.headerFilterParams || {};\n\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table, cellWrapper) : params;\n\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, onRendered, success, cancel, params);\n\n\t\t\t\tif(!editorElement){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(!(editorElement instanceof Node)){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//set Placeholder Text\n\t\t\t\tself.langBind(\"headerFilters|columns|\" + column.definition.field, function(value){\n\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : (column.definition.headerFilterPlaceholder || self.langText(\"headerFilters|default\")));\n\t\t\t\t});\n\n\t\t\t\t//focus on element on click\n\t\t\t\teditorElement.addEventListener(\"click\", function(e){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\teditorElement.focus();\n\t\t\t\t});\n\n\t\t\t\teditorElement.addEventListener(\"focus\", (e) => {\n\t\t\t\t\tvar left = this.table.columnManager.contentsElement.scrollLeft;\n\n\t\t\t\t\tvar headerPos = this.table.rowManager.element.scrollLeft;\n\n\t\t\t\t\tif(left !== headerPos){\n\t\t\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//live update filters as user types\n\t\t\t\ttypingTimer = false;\n\n\t\t\t\tsearchTrigger = function(e){\n\t\t\t\t\tif(typingTimer){\n\t\t\t\t\t\tclearTimeout(typingTimer);\n\t\t\t\t\t}\n\n\t\t\t\t\ttypingTimer = setTimeout(function(){\n\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t},self.table.options.headerFilterLiveFilterDelay);\n\t\t\t\t};\n\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\" ;\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n\t\t\t\tif(column.definition.headerFilterLiveFilter !== false){\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'autocomplete' ||\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'tickCross' ||\n\t\t\t\t\t\t\t((column.definition.editor === 'autocomplete' ||\n\t\t\t\t\t\t\t\tcolumn.definition.editor === 'tickCross') &&\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === true)\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\n\t\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\n\n\n\t\t\t\t\t\t//update number filtered columns on change\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"number\"){\n\t\t\t\t\t\t\teditorElement.addEventListener(\"change\", function(e){\n\t\t\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\n\t\t\t\t\t\tif(column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\"){\n\t\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//prevent input and select elements from propagating click to column sorters etc\n\t\t\t\t\tif(column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\"){\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\",function(e){\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfilterElement.appendChild(editorElement);\n\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\n\n\t\t\t\tif(!reinitialize){\n\t\t\t\t\tself.headerFilterColumns.push(column);\n\t\t\t\t}\n\n\t\t\t\tif(onRenderedCallback){\n\t\t\t\t\tonRenderedCallback();\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n\t\t}\n\t}\n\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\thideHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\n\t\t\t}\n\t\t});\n\t}\n\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\tshowHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\n\t\t\t}\n\t\t});\n\t}\n\n\t//programmatically set focus of header filter\n\tsetHeaderFilterFocus(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\tcolumn.modules.filter.headerElement.focus();\n\t\t}else {\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically get value of header filter\n\tgetHeaderFilterValue(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\treturn column.modules.filter.value;\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically set value of header filter\n\tsetHeaderFilterValue(column, value){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\n\t\t\t\tcolumn.modules.filter.success(value);\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\treloadHeaderFilter(column){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshFilter(){\n\t\tif(this.tableInitialized){\n\t\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\t\tthis.reloadData(null, false, false);\n\t\t\t}else {\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the filters has changed since last use\n\ttrackChanges(){\n\t\tthis.changed = true;\n\t\tthis.dispatch(\"filter-changed\");\n\t}\n\n\t//check if the filters has changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//set standard filters\n\tsetFilter(field, type, value, params){\n\t\tthis.filterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tthis.addFilter(field);\n\t}\n\n\t//add filter to array\n\taddFilter(field, type, value, params){\n\t\tvar changed = false;\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tthis.filterList.push(filter);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\n\t\tif(changed){\n\t\t\tthis.trackChanges();\n\t\t}\n\t}\n\n\tfindFilter(filter){\n\t\tvar column;\n\n\t\tif(Array.isArray(filter)){\n\t\t\treturn this.findSubFilters(filter);\n\t\t}\n\n\t\tvar filterFunc = false;\n\n\t\tif(typeof filter.field == \"function\"){\n\t\t\tfilterFunc = function(data){\n\t\t\t\treturn filter.field(data, filter.type || {});// pass params to custom filter function\n\t\t\t};\n\t\t}else {\n\n\t\t\tif(Filter.filters[filter.type]){\n\n\t\t\t\tcolumn = this.table.columnManager.getColumnByField(filter.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}else {\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}\n\n\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t}\n\n\t\tfilter.func = filterFunc;\n\n\t\treturn filter.func ? filter : false;\n\t}\n\n\tfindSubFilters(filters){\n\t\tvar output = [];\n\n\t\tfilters.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\toutput.push(filter);\n\t\t\t}\n\t\t});\n\n\t\treturn output.length ? output : false;\n\t}\n\n\t//get all filters\n\tgetFilters(all, ajax){\n\t\tvar output = [];\n\n\t\tif(all){\n\t\t\toutput = this.getHeaderFilters();\n\t\t}\n\n\t\tif(ajax){\n\t\t\toutput.forEach(function(item){\n\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\titem.type = \"function\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\n\n\t\treturn output;\n\t}\n\n\t//filter to Object\n\tfiltersToArray(filterList, ajax){\n\t\tvar output = [];\n\n\t\tfilterList.forEach((filter) => {\n\t\t\tvar item;\n\n\t\t\tif(Array.isArray(filter)){\n\t\t\t\toutput.push(this.filtersToArray(filter, ajax));\n\t\t\t}else {\n\t\t\t\titem = {field:filter.field, type:filter.type, value:filter.value};\n\n\t\t\t\tif(ajax){\n\t\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\t\titem.type = \"function\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toutput.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//get all filters\n\tgetHeaderFilters(){\n\t\tvar output = [];\n\n\t\tfor(var key in this.headerFilters){\n\t\t\toutput.push({field:key, type:this.headerFilters[key].type, value:this.headerFilters[key].value});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//remove filter from array\n\tremoveFilter(field, type, value){\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tvar index = -1;\n\n\t\t\tif(typeof filter.field == \"object\"){\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter === element;\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type  && filter.value === element.value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.filterList.splice(index, 1);\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear filters\n\tclearFilter(all){\n\t\tthis.filterList = [];\n\n\t\tif(all){\n\t\t\tthis.clearHeaderFilter();\n\t\t}\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear header filters\n\tclearHeaderFilter(){\n\t\tthis.headerFilters = {};\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.headerFilterColumns.forEach((column) => {\n\t\t\tif(typeof column.modules.filter.value !== \"undefined\"){\n\t\t\t\tdelete column.modules.filter.value;\n\t\t\t}\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\n\t\t\tthis.reloadHeaderFilter(column);\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//search data and return matching rows\n\tsearch (searchType, field, type, value){\n\t\tvar activeRows = [],\n\t\tfilterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tfilterList.push(filter);\n\t\t\t}\n\t\t});\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\tvar match = true;\n\n\t\t\tfilterList.forEach((filter) => {\n\t\t\t\tif(!this.filterRecurse(filter, row.getData())){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n\t\t\t}\n\n\t\t});\n\n\t\treturn activeRows;\n\t}\n\n\t//filter row array\n\tfilter(rowList, filters){\n\t\tvar activeRows = [],\n\t\tactiveRowComponents = [];\n\n\t\tif(this.subscribedExternal(\"dataFiltering\")){\n\t\t\tthis.dispatchExternal(\"dataFiltering\", this.getFilters(true));\n\t\t}\n\n\t\tif(this.table.options.filterMode !== \"remote\" && (this.filterList.length || Object.keys(this.headerFilters).length)){\n\n\t\t\trowList.forEach((row) => {\n\t\t\t\tif(this.filterRow(row)){\n\t\t\t\t\tactiveRows.push(row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t}else {\n\t\t\tactiveRows = rowList.slice(0);\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataFiltered\")){\n\n\t\t\tactiveRows.forEach((row) => {\n\t\t\t\tactiveRowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataFiltered\", this.getFilters(true), activeRowComponents);\n\t\t}\n\n\t\treturn activeRows;\n\t}\n\n\t//filter individual row\n\tfilterRow(row, filters){\n\t\tvar match = true,\n\t\tdata = row.getData();\n\n\t\tthis.filterList.forEach((filter) => {\n\t\t\tif(!this.filterRecurse(filter, data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\n\n\t\tfor(var field in this.headerFilters){\n\t\t\tif(!this.headerFilters[field].func(data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t}\n\n\tfilterRecurse(filter, data){\n\t\tvar match = false;\n\n\t\tif(Array.isArray(filter)){\n\t\t\tfilter.forEach((subFilter) => {\n\t\t\t\tif(this.filterRecurse(subFilter, data)){\n\t\t\t\t\tmatch = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else {\n\t\t\tmatch = filter.func(data);\n\t\t}\n\n\t\treturn match;\n\t}\n}\n\nFilter.moduleName = \"filter\";\n\n//load defaults\nFilter.filters = defaultFilters;\n\nfunction plaintext(cell, formatterParams, onRendered){\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}\n\nfunction html$1(cell, formatterParams, onRendered){\n\treturn cell.getValue();\n}\n\nfunction textarea$1(cell, formatterParams, onRendered){\n\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n}\n\nfunction money(cell, formatterParams, onRendered){\n\tvar floatVal = parseFloat(cell.getValue()),\n\tsign = \"\",\n\tnumber, integer, decimal, rgx, value;\n\n\tvar decimalSym = formatterParams.decimal || \".\";\n\tvar thousandSym = formatterParams.thousand || \",\";\n\tvar negativeSign = formatterParams.negativeSign || \"-\";\n\tvar symbol = formatterParams.symbol || \"\";\n\tvar after = !!formatterParams.symbolAfter;\n\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n\tif(isNaN(floatVal)){\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t}\n\n\tif(floatVal < 0){\n\t\tfloatVal = Math.abs(floatVal);\n\t\tsign = negativeSign;\n\t}\n\n\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\n\tnumber = String(number).split(\".\");\n\n\tinteger = number[0];\n\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\n\n\tif (formatterParams.thousand !== false) {\n\t\trgx = /(\\d+)(\\d{3})/;\n\n\t\twhile (rgx.test(integer)){\n\t\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n\t\t}\n\t}\n\n\tvalue = integer + decimal;\n\t\n\tif(sign === true){\n\t\tvalue = \"(\" + value  + \")\";\n\t\treturn after ? value + symbol : symbol + value;\n\t}else {\n\t\treturn after ? sign + value + symbol : sign + symbol + value;\n\t}\n}\n\nfunction link(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\turlPrefix = formatterParams.urlPrefix || \"\",\n\tdownload = formatterParams.download,\n\tlabel = value,\n\tel = document.createElement(\"a\"),\n\tdata;\n\n\tfunction labelTraverse(path, data){\n\t\tvar item = path.shift(),\n\t\tvalue = data[item];\n\t\t\n\t\tif(path.length && typeof value === \"object\"){\n\t\t\treturn labelTraverse(path, value);\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tif(formatterParams.labelField){\n\t\tdata = cell.getData();\n\t\tlabel = labelTraverse(formatterParams.labelField.split(this.table.options.nestedFieldSeparator), data);\n\t}\n\n\tif(formatterParams.label){\n\t\tswitch(typeof formatterParams.label){\n\t\t\tcase \"string\":\n\t\t\t\tlabel = formatterParams.label;\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tlabel = formatterParams.label(cell);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(label){\n\t\tif(formatterParams.urlField){\n\t\t\tdata = cell.getData();\n\t\t\tvalue = data[formatterParams.urlField];\n\t\t}\n\n\t\tif(formatterParams.url){\n\t\t\tswitch(typeof formatterParams.url){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tvalue = formatterParams.url;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tvalue = formatterParams.url(cell);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tel.setAttribute(\"href\", urlPrefix + value);\n\n\t\tif(formatterParams.target){\n\t\t\tel.setAttribute(\"target\", formatterParams.target);\n\t\t}\n\n\t\tif(formatterParams.download){\n\n\t\t\tif(typeof download == \"function\"){\n\t\t\t\tdownload = download(cell);\n\t\t\t}else {\n\t\t\t\tdownload = download === true ? \"\" : download;\n\t\t\t}\n\n\t\t\tel.setAttribute(\"download\", download);\n\t\t}\n\n\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n\n\t\treturn el;\n\t}else {\n\t\treturn \"&nbsp;\";\n\t}\n}\n\nfunction image(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"img\"),\n\tsrc = cell.getValue();\n\n\tif(formatterParams.urlPrefix){\n\t\tsrc = formatterParams.urlPrefix + cell.getValue();\n\t}\n\n\tif(formatterParams.urlSuffix){\n\t\tsrc = src + formatterParams.urlSuffix;\n\t}\n\n\tel.setAttribute(\"src\", src);\n\n\tswitch(typeof formatterParams.height){\n\t\tcase \"number\":\n\t\t\tel.style.height = formatterParams.height + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.height = formatterParams.height;\n\t\t\tbreak;\n\t}\n\n\tswitch(typeof formatterParams.width){\n\t\tcase \"number\":\n\t\t\tel.style.width = formatterParams.width + \"px\";\n\t\t\tbreak;\n\n\t\tcase \"string\":\n\t\t\tel.style.width = formatterParams.width;\n\t\t\tbreak;\n\t}\n\n\tel.addEventListener(\"load\", function(){\n\t\tcell.getRow().normalizeHeight();\n\t});\n\n\treturn el;\n}\n\nfunction tickCross$1(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tempty = formatterParams.allowEmpty,\n\ttruthy = formatterParams.allowTruthy,\n\ttrueValueSet = Object.keys(formatterParams).includes(\"trueValue\"),\n\ttick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n\tcross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n\tif((trueValueSet && value === formatterParams.trueValue) || (!trueValueSet && ((truthy && value) || (value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")))){\n\t\telement.setAttribute(\"aria-checked\", true);\n\t\treturn tick || \"\";\n\t}else {\n\t\tif(empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")){\n\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\n\t\t\treturn \"\";\n\t\t}else {\n\t\t\telement.setAttribute(\"aria-checked\", false);\n\t\t\treturn cross || \"\";\n\t\t}\n\t}\n}\n\nfunction datetime$1(cell, formatterParams, onRendered){\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar\toutputFormat = formatterParams.outputFormat || \"dd/MM/yyyy HH:mm:ss\";\n\tvar\tinvalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else {\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif(newDatetime.isValid){\n\t\t\tif(formatterParams.timezone){\n\t\t\t\tnewDatetime = newDatetime.setZone(formatterParams.timezone);\n\t\t\t}\n\n\t\t\treturn newDatetime.toFormat(outputFormat);\n\t\t}else {\n\t\t\tif(invalid === true || !value){\n\t\t\t\treturn value;\n\t\t\t}else if(typeof invalid === \"function\"){\n\t\t\t\treturn invalid(value);\n\t\t\t}else {\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else {\n\t\tconsole.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\n\t}\n}\n\nfunction datetimediff (cell, formatterParams, onRendered) {\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : \"days\";\n\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : DT.now();\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\tnewDatetime = value;\n\t\t}else if(inputFormat === \"iso\"){\n\t\t\tnewDatetime = DT.fromISO(String(value));\n\t\t}else {\n\t\t\tnewDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t}\n\n\t\tif (newDatetime.isValid){\n\t\t\tif(humanize){\n\t\t\t\treturn newDatetime.diff(date, unit).toHuman()  + (suffix ? \" \" + suffix : \"\");\n\t\t\t}else {\n\t\t\t\treturn parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? \" \" + suffix : \"\");\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (invalid === true) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\treturn invalid(value);\n\t\t\t} else {\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else {\n\t\tconsole.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\n\t}\n}\n\nfunction lookup (cell, formatterParams, onRendered) {\n\tvar value = cell.getValue();\n\n\tif (typeof formatterParams[value] === \"undefined\") {\n\t\tconsole.warn('Missing display value for ' + value);\n\t\treturn value;\n\t}\n\n\treturn formatterParams[value];\n}\n\nfunction star$1(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tmaxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n\tstars = document.createElement(\"span\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n\tstarActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n\tstarInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n\t//style stars holder\n\tstars.style.verticalAlign = \"middle\";\n\n\t//style star\n\tstar.setAttribute(\"width\", \"14\");\n\tstar.setAttribute(\"height\", \"14\");\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\n\n\tvalue = Math.max(0, Math.min(value, maxStars));\n\n\tfor(var i=1;i<= maxStars;i++){\n\t\tvar nextStar = star.cloneNode(true);\n\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\n\n\t\tstars.appendChild(nextStar);\n\t}\n\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\telement.setAttribute(\"aria-label\", value);\n\n\treturn stars;\n}\n\nfunction traffic(cell, formatterParams, onRendered){\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\tel = document.createElement(\"span\"),\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\tcolors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n\tcolor = \"#666666\",\n\tpercent, percentValue;\n\n\tif(isNaN(value) || typeof cell.getValue() === \"undefined\"){\n\t\treturn;\n\t}\n\n\tel.classList.add(\"tabulator-traffic-light\");\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set color\n\tswitch(typeof colors){\n\t\tcase \"string\":\n\t\t\tcolor = colors;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = colors(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(colors)){\n\t\t\t\tvar unit = 100 / colors.length;\n\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, colors.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = colors[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t}\n\n\tel.style.backgroundColor = color;\n\n\treturn el;\n}\n\nfunction progress$1(cell, formatterParams = {}, onRendered){ //progress bar\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\telement = cell.getElement(),\n\tmax = formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams.min ? formatterParams.min : 0,\n\tlegendAlign = formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n\tpercent, percentValue, color, legend, legendColor;\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set bar color\n\tswitch(typeof formatterParams.color){\n\t\tcase \"string\":\n\t\t\tcolor = formatterParams.color;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tcolor = formatterParams.color(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.color)){\n\t\t\t\tlet unit = 100 / formatterParams.color.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tcolor = formatterParams.color[index];\n\t\t\t\tbreak;\n\t\t\t}\n\t\tdefault:\n\t\t\tcolor = \"#2DC214\";\n\t}\n\n\t//generate legend\n\tswitch(typeof formatterParams.legend){\n\t\tcase \"string\":\n\t\t\tlegend = formatterParams.legend;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegend = formatterParams.legend(value);\n\t\t\tbreak;\n\t\tcase \"boolean\":\n\t\t\tlegend = value;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegend = false;\n\t}\n\n\t//set legend color\n\tswitch(typeof formatterParams.legendColor){\n\t\tcase \"string\":\n\t\t\tlegendColor = formatterParams.legendColor;\n\t\t\tbreak;\n\t\tcase \"function\":\n\t\t\tlegendColor = formatterParams.legendColor(value);\n\t\t\tbreak;\n\t\tcase \"object\":\n\t\t\tif(Array.isArray(formatterParams.legendColor)){\n\t\t\t\tlet unit = 100 / formatterParams.legendColor.length;\n\t\t\t\tlet index = Math.floor(percentValue / unit);\n\n\t\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\n\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\tlegendColor = formatterParams.legendColor[index];\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlegendColor = \"#000\";\n\t}\n\n\telement.style.minWidth = \"30px\";\n\telement.style.position = \"relative\";\n\n\telement.setAttribute(\"aria-label\", percentValue);\n\n\tvar barEl = document.createElement(\"div\");\n\tbarEl.style.display = \"inline-block\";\n\tbarEl.style.width = percentValue + \"%\";\n\tbarEl.style.backgroundColor = color;\n\tbarEl.style.height = \"100%\";\n\n\tbarEl.setAttribute('data-max', max);\n\tbarEl.setAttribute('data-min', min);\n\n\tvar barContainer = document.createElement(\"div\");\n\tbarContainer.style.position = \"relative\";\n\tbarContainer.style.width = \"100%\";\n\tbarContainer.style.height = \"100%\";\n\n\tif(legend){\n\t\tvar legendEl = document.createElement(\"div\");\n\t\tlegendEl.style.position = \"absolute\";\n\t\tlegendEl.style.top = 0;\n\t\tlegendEl.style.left = 0;\n\t\tlegendEl.style.textAlign = legendAlign;\n\t\tlegendEl.style.width = \"100%\";\n\t\tlegendEl.style.color = legendColor;\n\t\tlegendEl.innerHTML = legend;\n\t}\n\n\tonRendered(function(){\n\n\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\n\t\tif(!(cell instanceof CellComponent)){\n\t\t\tvar holderEl = document.createElement(\"div\");\n\t\t\tholderEl.style.position = \"absolute\";\n\t\t\tholderEl.style.top = \"4px\";\n\t\t\tholderEl.style.bottom = \"4px\";\n\t\t\tholderEl.style.left = \"4px\";\n\t\t\tholderEl.style.right = \"4px\";\n\n\t\t\telement.appendChild(holderEl);\n\n\t\t\telement = holderEl;\n\t\t}\n\n\t\telement.appendChild(barContainer);\n\t\tbarContainer.appendChild(barEl);\n\n\t\tif(legend){\n\t\t\tbarContainer.appendChild(legendEl);\n\t\t}\n\t});\n\n\treturn \"\";\n}\n\nfunction color(cell, formatterParams, onRendered){\n\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n\treturn \"\";\n}\n\nfunction buttonTick(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n}\n\nfunction buttonCross(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n}\n\nfunction rownum(cell, formatterParams, onRendered){\n\tvar content = document.createElement(\"span\");\n\tvar row = cell.getRow();\n\n\trow.watchPosition((position) => {\n\t\tcontent.innerText = position;\n\t});\n\t\n\treturn content;\n}\n\nfunction handle(cell, formatterParams, onRendered){\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n}\n\nfunction responsiveCollapse(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"div\"),\n\tconfig = cell.getRow()._row.modules.responsiveLayout;\n\n\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\n\t\n\tel.innerHTML = `<svg class='tabulator-responsive-collapse-toggle-open' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n  <line y1=\"7\" x1=\"12\" y2=\"17\" x2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>\n\n<svg class='tabulator-responsive-collapse-toggle-close' viewbox=\"0 0 24 24\">\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\"  fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\n</svg>`;\n\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\n\tfunction toggleList(isOpen){\n\t\tvar collapseEl = config.element;\n\n\t\tconfig.open = isOpen;\n\n\t\tif(collapseEl){\n\n\t\t\tif(config.open){\n\t\t\t\tel.classList.add(\"open\");\n\t\t\t\tcollapseEl.style.display = '';\n\t\t\t}else {\n\t\t\t\tel.classList.remove(\"open\");\n\t\t\t\tcollapseEl.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tel.addEventListener(\"click\", function(e){\n\t\te.stopImmediatePropagation();\n\t\ttoggleList(!config.open);\n\t\tcell.getTable().rowManager.adjustTableSize();\n\t});\n\n\ttoggleList(config.open);\n\n\treturn el;\n}\n\nfunction rowSelection(cell, formatterParams, onRendered){\n\tvar checkbox = document.createElement(\"input\");\n\tvar blocked = false;\n\n\tcheckbox.type = 'checkbox';\n\n\tcheckbox.setAttribute(\"aria-label\", \"Select Row\");\n\t\n\tif(this.table.modExists(\"selectRow\", true)){\n\n\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(typeof cell.getRow == 'function'){\n\t\t\tvar row = cell.getRow();\n\n\t\t\tif(row instanceof RowComponent){\n\n\t\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\t\tif(this.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\t\tif(!blocked){\n\t\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tblocked = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(this.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\tblocked = true;\n\t\t\t\t\t\tthis.table.modules.selectRow.handleComplexRowClick(row._row, e);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\n\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n\t\t\t}else {\n\t\t\t\tcheckbox = \"\";\n\t\t\t}\n\t\t}else {\n\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\tif(this.table.modules.selectRow.selectedRows.length){\n\t\t\t\t\tthis.table.deselectRow();\n\t\t\t\t}else {\n\t\t\t\t\tthis.table.selectRow(formatterParams.rowRange);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n\t\t}\n\t}\n\n\treturn checkbox;\n}\n\nvar defaultFormatters = {\n\tplaintext:plaintext,\n\thtml:html$1,\n\ttextarea:textarea$1,\n\tmoney:money,\n\tlink:link,\n\timage:image,\n\ttickCross:tickCross$1,\n\tdatetime:datetime$1,\n\tdatetimediff:datetimediff,\n\tlookup:lookup,\n\tstar:star$1,\n\ttraffic:traffic,\n\tprogress:progress$1,\n\tcolor:color,\n\tbuttonTick:buttonTick,\n\tbuttonCross:buttonCross,\n\trownum:rownum,\n\thandle:handle,\n\tresponsiveCollapse:responsiveCollapse,\n\trowSelection:rowSelection,\n};\n\nclass Format extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.registerColumnOption(\"formatter\");\n\t\tthis.registerColumnOption(\"formatterParams\");\n\t\t\n\t\tthis.registerColumnOption(\"formatterPrint\");\n\t\tthis.registerColumnOption(\"formatterPrintParams\");\n\t\tthis.registerColumnOption(\"formatterClipboard\");\n\t\tthis.registerColumnOption(\"formatterClipboardParams\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutput\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutputParams\");\n\t\tthis.registerColumnOption(\"titleFormatter\");\n\t\tthis.registerColumnOption(\"titleFormatterParams\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-format\", this.formatValue.bind(this));\n\t\tthis.subscribe(\"cell-rendered\", this.cellRendered.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-format\", this.formatHeader.bind(this));\n\t}\n\t\n\t//initialize column formatter\n\tinitializeColumn(column){\n\t\tcolumn.modules.format = this.lookupFormatter(column, \"\");\n\t\t\n\t\tif(typeof column.definition.formatterPrint !== \"undefined\"){\n\t\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterClipboard !== \"undefined\"){\n\t\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n\t\t}\n\t\t\n\t\tif(typeof column.definition.formatterHtmlOutput !== \"undefined\"){\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n\t\t}\n\t}\n\t\n\tlookupFormatter(column, type){\n\t\tvar config = {params:column.definition[\"formatter\" + type + \"Params\"] || {}},\n\t\tformatter = column.definition[\"formatter\" + type];\n\t\t\n\t\t//set column formatter\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Format.formatters[formatter]){\n\t\t\t\t\tconfig.formatter = Format.formatters[formatter];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tconfig.formatter = Format.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\tconfig.formatter = formatter;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tconfig.formatter = Format.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn config;\n\t}\n\t\n\tcellRendered(cell){\n\t\tif(cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered){\n\t\t\tcell.modules.format.renderedCallback();\n\t\t\tcell.modules.format.rendered = true;\n\t\t}\n\t}\n\t\n\t//return a formatted value for a column header\n\tformatHeader(column, title, el){\n\t\tvar formatter, params, onRendered, mockCell;\n\t\t\n\t\tif(column.definition.titleFormatter){\n\t\t\tformatter = this.getFormatter(column.definition.titleFormatter);\n\t\t\t\n\t\t\tonRendered = (callback) => {\n\t\t\t\tcolumn.titleFormatterRendered = callback;\n\t\t\t};\n\t\t\t\n\t\t\tmockCell = {\n\t\t\t\tgetValue:function(){\n\t\t\t\t\treturn title;\n\t\t\t\t},\n\t\t\t\tgetElement:function(){\n\t\t\t\t\treturn el;\n\t\t\t\t},\n\t\t\t\tgetType:function(){\n\t\t\t\t\treturn \"header\";\n\t\t\t\t},\n\t\t\t\tgetColumn:function(){\n\t\t\t\t\treturn column.getComponent();\n\t\t\t\t},\n\t\t\t\tgetTable:() => {\n\t\t\t\t\treturn this.table;\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tparams = column.definition.titleFormatterParams || {};\n\t\t\t\n\t\t\tparams = typeof params === \"function\" ? params() : params;\n\t\t\t\n\t\t\treturn formatter.call(this, mockCell, params, onRendered);\n\t\t}else {\n\t\t\treturn title;\n\t\t}\n\t}\n\t\n\t\n\t//return a formatted value for a cell\n\tformatValue(cell){\n\t\tvar component = cell.getComponent(),\n\t\tparams = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\t\t\n\t\tfunction onRendered(callback){\n\t\t\tif(!cell.modules.format){\n\t\t\t\tcell.modules.format = {};\n\t\t\t}\n\t\t\t\n\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\tcell.modules.format.rendered = false;\n\t\t}\n\t\t\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\n\t}\n\t\n\tformatExportValue(cell, type){\n\t\tvar formatter = cell.column.modules.format[type],\n\t\tparams;\n\t\t\n\t\tif(formatter){\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(cell.getComponent()) : formatter.params;\n\t\t\t\n\t\t\tfunction onRendered(callback){\n\t\t\t\tif(!cell.modules.format){\n\t\t\t\t\tcell.modules.format = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\t\tcell.modules.format.rendered = false;\n\t\t\t}\n\t\t\t\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n\t\t\t\n\t\t}else {\n\t\t\treturn this.formatValue(cell);\n\t\t}\n\t}\n\t\n\tsanitizeHTML(value){\n\t\tif(value){\n\t\t\tvar entityMap = {\n\t\t\t\t'&': '&amp;',\n\t\t\t\t'<': '&lt;',\n\t\t\t\t'>': '&gt;',\n\t\t\t\t'\"': '&quot;',\n\t\t\t\t\"'\": '&#39;',\n\t\t\t\t'/': '&#x2F;',\n\t\t\t\t'`': '&#x60;',\n\t\t\t\t'=': '&#x3D;'\n\t\t\t};\n\t\t\t\n\t\t\treturn String(value).replace(/[&<>\"'`=/]/g, function (s) {\n\t\t\t\treturn entityMap[s];\n\t\t\t});\n\t\t}else {\n\t\t\treturn value;\n\t\t}\n\t}\n\t\n\temptyToSpace(value){\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n\t}\n\t\n\t//get formatter for cell\n\tgetFormatter(formatter){\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Format.formatters[formatter]){\n\t\t\t\t\tformatter = Format.formatters[formatter];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tformatter = Format.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t//Custom formatter Function, do nothing\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tformatter = Format.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\treturn formatter;\n\t}\n}\n\nFormat.moduleName = \"format\";\n\n//load defaults\nFormat.formatters = defaultFormatters;\n\nclass FrozenColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.initializationMode = \"left\";\n\t\tthis.active = false;\n\t\tthis.blocked = true;\n\t\t\n\t\tthis.registerColumnOption(\"frozen\");\n\t}\n\t\n\t//reset initial state\n\treset(){\n\t\tthis.initializationMode = \"left\";\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.active = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-layout\", this.layoutCell.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-width\", this.layout.bind(this));\n\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\tthis.subscribe(\"table-layout\", this.layout.bind(this));\n\t\tthis.subscribe(\"columns-loading\", this.reset.bind(this));\n\t\t\n\t\tthis.subscribe(\"column-add\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.reinitializeColumns.bind(this));\n\t\t\n\t\tthis.subscribe(\"table-redraw\", this.layout.bind(this));\n\t\tthis.subscribe(\"layout-refreshing\", this.blockLayout.bind(this));\n\t\tthis.subscribe(\"layout-refreshed\", this.unblockLayout.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.adjustForScrollbar.bind(this));\n\t}\n\t\n\tblockLayout(){\n\t\tthis.blocked = true;\n\t}\n\t\n\tunblockLayout(){\n\t\tthis.blocked = false;\n\t}\n\t\n\tlayoutCell(cell){\n\t\tthis.layoutElement(cell.element, cell.column);\n\t}\n\t\n\treinitializeColumns(){\n\t\tthis.reset();\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tthis.initializeColumn(column);\n\t\t});\n\t}\n\t\n\t//initialize specific column\n\tinitializeColumn(column){\n\t\tvar config = {margin:0, edge:false};\n\t\t\n\t\tif(!column.isGroup){\n\t\t\t\n\t\t\tif(this.frozenCheck(column)){\n\t\t\t\t\n\t\t\t\tconfig.position = this.initializationMode;\n\t\t\t\t\n\t\t\t\tif(this.initializationMode == \"left\"){\n\t\t\t\t\tthis.leftColumns.push(column);\n\t\t\t\t}else {\n\t\t\t\t\tthis.rightColumns.unshift(column);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.active = true;\n\t\t\t\t\n\t\t\t\tcolumn.modules.frozen = config;\n\t\t\t}else {\n\t\t\t\tthis.initializationMode = \"right\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfrozenCheck(column){\n\t\tif(column.parent.isGroup && column.definition.frozen){\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n\t\t}\n\t\t\n\t\tif(column.parent.isGroup){\n\t\t\treturn this.frozenCheck(column.parent);\n\t\t}else {\n\t\t\treturn column.definition.frozen;\n\t\t}\n\t}\n\t\n\t//layout calculation rows\n\tlayoutCalcRows(){\n\t\tif(this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modExists(\"groupRows\")){\n\t\t\t\tthis.layoutGroupCalcs(this.table.modules.groupRows.getGroups());\n\t\t\t}\n\t\t}\n\t}\n\t\n\tlayoutGroupCalcs(groups){\n\t\tgroups.forEach((group) => {\n\t\t\tif(group.calcs.top){\n\t\t\t\tthis.layoutRow(group.calcs.top);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.calcs.bottom){\n\t\t\t\tthis.layoutRow(group.calcs.bottom);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.groupList && group.groupList.length){\n\t\t\t\tthis.layoutGroupCalcs(group.groupList);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//calculate column positions and layout headers\n\tlayoutColumnPosition(allCells){\n\t\tvar leftParents = [];\n\t\t\n\t\tvar leftMargin = 0;\n\t\tvar rightMargin = 0;\n\t\t\n\t\tthis.leftColumns.forEach((column, i) => {\t\n\t\t\tcolumn.modules.frozen.marginValue = leftMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tleftMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.leftColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else {\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tvar parentEl = this.getColGroupParentElement(column);\n\t\t\t\tif(!leftParents.includes(parentEl)){\n\t\t\t\t\tthis.layoutElement(parentEl, column);\n\t\t\t\t\tleftParents.push(parentEl);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.modules.frozen.edge){\n\t\t\t\t\tparentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column, i) => {\n\t\t\t\n\t\t\tcolumn.modules.frozen.marginValue = rightMargin;\n\t\t\tcolumn.modules.frozen.margin = column.modules.frozen.marginValue + \"px\";\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\trightMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.rightColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else {\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tthis.layoutElement(this.getColGroupParentElement(column), column);\n\t\t\t}else {\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tgetColGroupParentElement(column){\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n\t}\n\t\n\t//layout columns appropriately\n\tlayout(){\t\n\t\tif(this.active && !this.blocked){\n\t\t\n\t\t\t//calculate left columns\n\t\t\tthis.layoutColumnPosition();\n\t\t\t\n\t\t\tthis.reinitializeRows();\n\t\t\t\n\t\t\tthis.layoutCalcRows();\n\t\t}\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.table.rowManager.getVisibleRows(true);\n\t\tvar otherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\t\t\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t\t\n\t\tvisibleRows.forEach((row) =>{\n\t\t\tif(row.type === \"row\"){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutRow(row){\n\t\tif(this.table.options.layout === \"fitDataFill\" && this.rightColumns.length){\n\t\t\tthis.table.rowManager.getTableElement().style.minWidth = \"calc(100% - \" + this.rightMargin + \")\";\n\t\t}\n\t\t\n\t\tthis.leftColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutElement(element, column){\n\t\tvar position;\n\t\t\n\t\tif(column.modules.frozen && element){\n\t\t\telement.style.position = \"sticky\";\n\n\t\t\tif(this.table.rtl){\n\t\t\t\tposition = column.modules.frozen.position === \"left\" ? \"right\" : \"left\";\n\t\t\t}else {\n\t\t\t\tposition = column.modules.frozen.position;\n\t\t\t}\n\t\t\n\t\t\telement.style[position] = column.modules.frozen.margin;\n\n\t\t\telement.classList.add(\"tabulator-frozen\");\n\t\t\t\n\t\t\tif(column.modules.frozen.edge){\n\t\t\t\telement.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t}\n\t\t}\n\t}\n\n\tadjustForScrollbar(width){\n\t\tif(this.rightColumns.length){\n\t\t\tthis.table.columnManager.getContentsElement().style.width = \"calc(100% - \" + width + \"px)\";\n\t\t}\n\t}\n\t\n\t_calcSpace(columns, index){\n\t\tvar width = 0;\n\t\t\n\t\tfor (let i = 0; i < index; i++){\n\t\t\tif(columns[i].visible){\n\t\t\t\twidth += columns[i].getWidth();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn width;\n\t}\n}\n\nFrozenColumns.moduleName = \"frozenColumns\";\n\nclass FrozenRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.topElement = document.createElement(\"div\");\n\t\tthis.rows = [];\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this));\n\n\t\t//register table options\n\t\tthis.registerTableOption(\"frozenRowsField\", \"id\"); //field to choose frozen rows by\n\t\tthis.registerTableOption(\"frozenRows\", false); //holder for frozen row identifiers\n\t}\n\n\tinitialize(){\n\t\tthis.rows = [];\n\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n\n\t\t// this.table.columnManager.element.append(this.topElement);\n\t\tthis.table.columnManager.getContentsElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\n\t\tthis.subscribe(\"row-deleting\", this.detachRow.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\n\t\tthis.registerDisplayHandler(this.getRows.bind(this), 10);\n\n\t\tif(this.table.options.frozenRows){\n\t\t\tthis.subscribe(\"data-processed\", this.initializeRows.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"table-redrawing\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-resized\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.resizeHolderWidth.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.resizeHolderWidth.bind(this));\n\t\t}\n\n\t\tthis.resizeHolderWidth();\n\t}\n\n\tresizeHolderWidth(){\n\t\tthis.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + \"px\";\n\t}\n\n\tinitializeRows(){\n\t\tthis.table.rowManager.getRows().forEach((row) => {\n\t\t\tthis.initializeRow(row);\n\t\t});\n\t}\n\n\tinitializeRow(row){\n\t\tvar frozenRows = this.table.options.frozenRows,\n\t\trowType = typeof frozenRows;\n\n\t\tif(rowType === \"number\"){\n\t\t\tif(row.getPosition() && (row.getPosition() + this.rows.length) <= frozenRows){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(rowType === \"function\"){\n\t\t\tif(frozenRows.call(this.table, row.getComponent())){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}else if(Array.isArray(frozenRows)){\n\t\t\tif(frozenRows.includes(row.data[this.options(\"frozenRowsField\")])){\n\t\t\t\tthis.freezeRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowFrozen(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\treturn index > -1;\n\t}\n\n\tisFrozen(){\n\t\treturn !!this.rows.length;\n\t}\n\n\tvisibleRows(viewable, rows){\n\t\tthis.rows.forEach((row) => {\n\t\t\trows.push(row);\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\t//filter frozen rows out of display data\n\tgetRows(rows){\n\t\tvar output = rows.slice(0);\n\n\t\tthis.rows.forEach(function(row){\n\t\t\tvar index = output.indexOf(row);\n\n\t\t\tif(index > -1){\n\t\t\t\toutput.splice(index, 1);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tfreezeRow(row){\n\t\tif(!row.modules.frozen){\n\t\t\trow.modules.frozen = true;\n\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\trow.initialize();\n\t\t\trow.normalizeHeight();\n\t\t\n\t\t\tthis.rows.push(row);\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.styleRows();\n\n\t\t}else {\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\n\t\t}\n\t}\n\n\tunfreezeRow(row){\n\t\tif(row.modules.frozen){\n\n\t\t\trow.modules.frozen = false;\n\n\t\t\tthis.detachRow(row);\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.refreshData(false, \"display\");\n\n\t\t\tif(this.rows.length){\n\t\t\t\tthis.styleRows();\n\t\t\t}\n\n\t\t}else {\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\n\t\t}\n\t}\n\n\tdetachRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t}\n\n\tstyleRows(row){\n\t\tthis.rows.forEach((row, i) => {\n\t\t\tthis.table.rowManager.styleRow(row, i);\n\t\t});\n\t}\n}\n\nFrozenRows.moduleName = \"frozenRows\";\n\n//public group object\nclass GroupComponent {\n\tconstructor (group){\n\t\tthis._group = group;\n\t\tthis.type = \"GroupComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else {\n\t\t\t\t\treturn target._group.groupManager.table.componentFunctionBinder.handle(\"group\", target._group, name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetKey(){\n\t\treturn this._group.key;\n\t}\n\n\tgetField(){\n\t\treturn this._group.field;\n\t}\n\n\tgetElement(){\n\t\treturn this._group.element;\n\t}\n\n\tgetRows(){\n\t\treturn this._group.getRows(true);\n\t}\n\n\tgetSubGroups(){\n\t\treturn this._group.getSubGroups(true);\n\t}\n\n\tgetParentGroup(){\n\t\treturn this._group.parent ? this._group.parent.getComponent() : false;\n\t}\n\n\tisVisible(){\n\t\treturn this._group.visible;\n\t}\n\n\tshow(){\n\t\tthis._group.show();\n\t}\n\n\thide(){\n\t\tthis._group.hide();\n\t}\n\n\ttoggle(){\n\t\tthis._group.toggleVisibility();\n\t}\n\n\tscrollTo(position, ifVisible){\n\t\treturn this._group.groupManager.table.rowManager.scrollToRow(this._group, position, ifVisible);\n\t}\n\n\t_getSelf(){\n\t\treturn this._group;\n\t}\n\n\tgetTable(){\n\t\treturn this._group.groupManager.table;\n\t}\n}\n\n//Group functions\nclass Group{\n\t\n\tconstructor(groupManager, parent, level, key, field, generator, oldGroup){\n\t\tthis.groupManager = groupManager;\n\t\tthis.parent = parent;\n\t\tthis.key = key;\n\t\tthis.level = level;\n\t\tthis.field = field;\n\t\tthis.hasSubGroups = level < (groupManager.groupIDLookups.length - 1);\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n\t\tthis.type = \"group\"; //type of element\n\t\tthis.old = oldGroup;\n\t\tthis.rows = [];\n\t\tthis.groups = [];\n\t\tthis.groupList = [];\n\t\tthis.generator = generator;\n\t\tthis.element = false;\n\t\tthis.elementContents = false;\n\t\tthis.height = 0;\n\t\tthis.outerHeight = 0;\n\t\tthis.initialized = false;\n\t\tthis.calcs = {};\n\t\tthis.initialized = false;\n\t\tthis.modules = {};\n\t\tthis.arrowElement = false;\n\t\t\n\t\tthis.visible = oldGroup ? oldGroup.visible : (typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0]);\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.createElements();\n\t\tthis.addBindings();\n\t\t\n\t\tthis.createValueGroups();\n\t}\n\t\n\twipe(elementsOnly){\n\t\tif(!elementsOnly){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\tgroup.wipe();\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tif(row.modules){\n\t\t\t\t\t\tdelete row.modules.group;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.arrowElement = false;\n\t\tthis.elementContents = false;\n\t}\n\t\n\tcreateElements(){\n\t\tvar arrow = document.createElement(\"div\");\n\t\tarrow.classList.add(\"tabulator-arrow\");\n\t\t\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-row\");\n\t\tthis.element.classList.add(\"tabulator-group\");\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tthis.arrowElement = document.createElement(\"div\");\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\n\t\tthis.arrowElement.appendChild(arrow);\n\t\t\n\t\t//setup movable rows\n\t\tif(this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")){\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n\t\t}\n\t}\n\t\n\tcreateValueGroups(){\n\t\tvar level = this.level + 1;\n\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\tthis.groupManager.allowedValues[level].forEach((value) => {\n\t\t\t\tthis._createGroup(value, level);\n\t\t\t});\n\t\t}\n\t}\n\t\n\taddBindings(){\n\t\tvar toggleElement;\n\t\t\n\t\tif(this.groupManager.table.options.groupToggleElement){\n\t\t\ttoggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\n\t\t\t\n\t\t\ttoggleElement.addEventListener(\"click\", (e) => {\n\t\t\t\tif(this.groupManager.table.options.groupToggleElement === \"arrow\"){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t}\n\n\t\t\t\t//allow click event to propagate before toggling visibility\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.toggleVisibility();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\t\n\t_createGroup(groupID, level){\n\t\tvar groupKey = level + \"_\" + groupID;\n\t\tvar group = new Group(this.groupManager, this, level, groupID,  this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\t_addRowToGroup(row){\n\t\t\n\t\tvar level = this.level + 1;\n\t\t\n\t\tif(this.hasSubGroups){\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n\t\t\tgroupKey = level + \"_\" + groupID;\n\t\t\t\n\t\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\t\tif(this.groups[groupKey]){\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(!this.groups[groupKey]){\n\t\t\t\t\tthis._createGroup(groupID, level);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_addRow(row){\n\t\tthis.rows.push(row);\n\t\trow.modules.group = this;\n\t}\n\t\n\tinsertRow(row, to, after){\n\t\tvar data = this.conformRowData({});\n\t\t\n\t\trow.updateData(data);\n\t\t\n\t\tvar toIndex = this.rows.indexOf(to);\n\t\t\n\t\tif(toIndex > -1){\n\t\t\tif(after){\n\t\t\t\tthis.rows.splice(toIndex+1, 0, row);\n\t\t\t}else {\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\n\t\t\t}\n\t\t}else {\n\t\t\tif(after){\n\t\t\t\tthis.rows.push(row);\n\t\t\t}else {\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\trow.modules.group = this;\n\t\t\n\t\t// this.generateGroupHeaderContents();\n\t\t\n\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t}\n\t\t\n\t\tthis.groupManager.updateGroupRows(true);\n\t}\n\t\n\tscrollHeader(left){\n\t\tif(this.arrowElement){\n\t\t\tthis.arrowElement.style.marginLeft = left;\n\t\t\t\n\t\t\tthis.groupList.forEach(function(child){\n\t\t\t\tchild.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tgetRowIndex(row){}\n\t\n\t//update row data to match grouping constraints\n\tconformRowData(data){\n\t\tif(this.field){\n\t\t\tdata[this.field] = this.key;\n\t\t}else {\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n\t\t}\n\t\t\n\t\tif(this.parent){\n\t\t\tdata = this.parent.conformRowData(data);\n\t\t}\n\t\t\n\t\treturn data;\n\t}\n\t\n\tremoveRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\tvar el = row.getElement();\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t\t\n\t\tif(!this.groupManager.table.options.groupValues && !this.rows.length){\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t}else {\n\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t}\t\t\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else {\n\t\t\t\n\t\t\tif(el.parentNode){\n\t\t\t\tel.parentNode.removeChild(el);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupManager.blockRedraw){\n\t\t\t\tthis.generateGroupHeaderContents();\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupList.length){\n\t\t\t\tif(this.parent){\n\t\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t\t}else {\n\t\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetHeadersAndRows(){\n\t\tvar output = [];\n\t\t\n\t\toutput.push(this);\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\t\n\t\tif(this.calcs.top){\n\t\t\tthis.calcs.top.detachElement();\n\t\t\tthis.calcs.top.deleteCells();\n\t\t}\n\t\t\n\t\tif(this.calcs.bottom){\n\t\t\tthis.calcs.bottom.detachElement();\n\t\t\tthis.calcs.bottom.deleteCells();\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\tif(this.visible){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\toutput = output.concat(this.rows);\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.options.columnCalcs != \"table\" &&  this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\tif(!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\")){\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetData(visible, transform){\n\t\tvar output = [];\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(!visible || (visible && this.visible)){\n\t\t\tthis.rows.forEach((row) => {\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRowCount(){\n\t\tvar count = 0;\n\t\t\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tcount += group.getRowCount();\n\t\t\t});\n\t\t}else {\n\t\t\tcount = this.rows.length;\n\t\t}\n\t\treturn count;\n\t}\n\n\t\n\ttoggleVisibility(){\n\t\tif(this.visible){\n\t\t\tthis.hide();\n\t\t}else {\n\t\t\tthis.show();\n\t\t}\n\t}\n\t\n\thide(){\n\t\tthis.visible = false;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\t\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\trow.detachElement();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t\t\n\t\t}else {\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), false);\n\t}\n\t\n\tshow(){\n\t\tthis.visible = true;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"basic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tvar prev = this.generateElement();\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\t\trow.initialize();\n\t\t\t\t\t\tprev = rowEl;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\trow.initialize();\n\t\t\t\t\tprev = rowEl;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}else {\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), true);\n\t}\n\t\n\t_visSet(){\n\t\tvar data = [];\n\t\t\n\t\tif(typeof this.visible == \"function\"){\n\t\t\t\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\tdata.push(row.getData());\n\t\t\t});\n\t\t\t\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n\t\t}\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\t\n\t\t\t\tif(result){\n\t\t\t\t\tmatch = result;\n\t\t\t\t}\n\t\t\t});\n\t\t}else {\n\t\t\tif(this.rows.find(function(item){\n\t\t\t\treturn item === row;\n\t\t\t})){\n\t\t\t\tmatch = this;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetSubGroups(component){\n\t\tvar output = [];\n\t\t\n\t\tthis.groupList.forEach(function(child){\n\t\t\toutput.push(component ? child.getComponent() : child);\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRows(component, includeChildren){\n\t\tvar output = [];\n\t\t\n\t\tif(includeChildren && this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getRows(component, includeChildren));\n\t\t\t});\n\t\t}else {\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\toutput.push(component ? row.getComponent() : row);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgenerateGroupHeaderContents(){\n\t\tvar data = [];\n\t\t\n\t\tvar rows = this.getRows(false, true);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\t\t\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\n\t\tif(typeof this.elementContents === \"string\"){\n\t\t\tthis.element.innerHTML = this.elementContents;\n\t\t}else {\n\t\t\tthis.element.appendChild(this.elementContents);\n\t\t}\n\t\t\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\n\t}\n\t\n\tgetPath(path = []) {\n\t\tpath.unshift(this.key);\n\t\tif(this.parent) {\n\t\t\tthis.parent.getPath(path);\n\t\t}\n\t\treturn path;\n\t}\n\t\n\t////////////// Standard Row Functions //////////////\n\t\n\tgetElement(){\n\t\treturn this.elementContents ? this.element : this.generateElement();\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.addBindings = false;\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(this.visible){\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t}else {\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tfor(var i = 0; i < this.element.childNodes.length; ++i){\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n\t\t}\n\t\t\n\t\tthis.generateGroupHeaderContents();\n\t\t\n\t\t// this.addBindings();\n\t\t\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(){\n\t\tthis.setHeight(this.element.clientHeight);\n\t}\n\t\n\tinitialize(force){\n\t\tif(!this.initialized || force){\n\t\t\tthis.normalizeHeight();\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\treinitialize(){\n\t\tthis.initialized = false;\n\t\tthis.height = 0;\n\t\t\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.initialize(true);\n\t\t}\n\t}\n\t\n\tsetHeight(height){\n\t\tif(this.height != height){\n\t\t\tthis.height = height;\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\tgetGroup(){\n\t\treturn this;\n\t}\n\t\n\treinitializeHeight(){}\n\t\n\tcalcHeight(){}\n\t\n\tsetCellHeight(){}\n\t\n\tclearCellHeight(){}\n\t\n\tdeinitializeHeight(){}\n\n\trendered(){}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new GroupComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}\n\nclass GroupRows extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\tthis.groupList = []; //ordered list of groups\n\t\tthis.allowedValues = false;\n\t\tthis.groups = {}; //hold row groups\n\t\t\n\t\tthis.displayHandler = this.getRows.bind(this);\n\n\t\tthis.blockRedraw = false;\n\t\t\n\t\t//register table options\n\t\tthis.registerTableOption(\"groupBy\", false); //enable table grouping and set field to group by\n\t\tthis.registerTableOption(\"groupStartOpen\", true); //starting state of group\n\t\tthis.registerTableOption(\"groupValues\", false);\n\t\tthis.registerTableOption(\"groupUpdateOnCellEdit\", false);\n\t\tthis.registerTableOption(\"groupHeader\", false); //header generation function\n\t\tthis.registerTableOption(\"groupHeaderPrint\", null);\n\t\tthis.registerTableOption(\"groupHeaderClipboard\", null);\n\t\tthis.registerTableOption(\"groupHeaderHtmlOutput\", null);\n\t\tthis.registerTableOption(\"groupHeaderDownload\", null);\n\t\tthis.registerTableOption(\"groupToggleElement\", \"arrow\");\n\t\tthis.registerTableOption(\"groupClosedShowCalcs\", false);\n\t\t\n\t\t//register table functions\n\t\tthis.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this));\n\t\tthis.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this));\n\t\tthis.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this));\n\t\tthis.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this));\n\t\tthis.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this));\n\t\tthis.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\n\t}\n\t\n\t//initialize group configuration\n\tinitialize(){\n\t\tthis.subscribe(\"table-destroy\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wipe\", this._blockRedrawing.bind(this));\n\t\tthis.subscribe(\"rows-wiped\", this._restore_redrawing.bind(this));\n\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.groupUpdateOnCellEdit){\n\t\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-built\", this.configureGroupSetup.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.wipe.bind(this));\n\t\t\tthis.subscribe(\"rows-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-moving\", this.rowMoving.bind(this));\n\t\t\tthis.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"rows-sample\", this.rowSample.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this));\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.displayHandler, 20);\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t_blockRedrawing(){\n\t\tthis.blockRedraw = true;\n\t}\n\n\t_restore_redrawing(){\n\t\tthis.blockRedraw = false;\n\t}\n\n\tconfigureGroupSetup(){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar groupBy = this.table.options.groupBy,\n\t\t\tstartOpen = this.table.options.groupStartOpen,\n\t\t\tgroupHeader = this.table.options.groupHeader;\n\t\t\t\n\t\t\tthis.allowedValues = this.table.options.groupValues;\n\t\t\t\n\t\t\tif(Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length){\n\t\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\t\t\n\t\t\tthis.langBind(\"groups|item\", (langValue, lang) => {\n\t\t\t\tthis.headerGenerator[0] = (value, count, data) => { //header layout function\n\t\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + ((count === 1) ? langValue : lang.groups.items) + \")</span>\";\n\t\t\t\t};\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupIDLookups = [];\n\t\t\t\n\t\t\tif(groupBy){\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\"){\n\t\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\t\n\t\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\n\t\t\t\t\t\n\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\tif(col.definition.topCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeTopRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(col.definition.bottomCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeBottomRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(!Array.isArray(groupBy)){\n\t\t\t\tgroupBy = [groupBy];\n\t\t\t}\n\t\t\t\n\t\t\tgroupBy.forEach((group, i) => {\n\t\t\t\tvar lookupFunc, column;\n\t\t\t\t\n\t\t\t\tif(typeof group == \"function\"){\n\t\t\t\t\tlookupFunc = group;\n\t\t\t\t}else {\n\t\t\t\t\tcolumn = this.table.columnManager.getColumnByField(group);\n\t\t\t\t\t\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn column.getFieldValue(data);\n\t\t\t\t\t\t};\n\t\t\t\t\t}else {\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn data[group];\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groupIDLookups.push({\n\t\t\t\t\tfield: typeof group === \"function\" ? false : group,\n\t\t\t\t\tfunc:lookupFunc,\n\t\t\t\t\tvalues:this.allowedValues ? this.allowedValues[i] : false,\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tif(startOpen){\n\t\t\t\tif(!Array.isArray(startOpen)){\n\t\t\t\t\tstartOpen = [startOpen];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tstartOpen.forEach((level) => {\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.startOpen = startOpen;\n\t\t\t}\n\t\t\t\n\t\t\tif(groupHeader){\n\t\t\t\tthis.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n\t\t\t}\n\t\t}else {\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\trowSample(rows, prevValue){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar group = this.getGroups(false)[0];\n\t\t\t\n\t\t\tprevValue.push(group.getRows(false)[0]);\n\t\t}\n\t\t\n\t\treturn prevValue;\n\t}\n\t\n\tvirtualRenderFill(){\n\t\tvar el = this.table.rowManager.tableElement;\n\t\tvar rows = this.table.rowManager.getVisibleRows();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\trows = rows.filter((row) => {\n\t\t\t\treturn row.type !== \"group\";\n\t\t\t});\n\t\t\t\n\t\t\tel.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + \"px\" : \"\";\n\t\t}else {\n\t\t\treturn rows;\n\t\t}\n\t}\n\t\n\trowAddingIndex(row, index, top){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.assignRowToGroup(row);\n\t\t\t\n\t\t\tvar groupRows = row.modules.group.rows;\n\t\t\t\n\t\t\tif(groupRows.length > 1){\n\t\t\t\tif(!index || (index && groupRows.indexOf(index) == -1)){\n\t\t\t\t\tif(top){\n\t\t\t\t\t\tif(groupRows[0] !== row){\n\t\t\t\t\t\t\tindex = groupRows[0];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(groupRows[groupRows.length -1] !== row){\n\t\t\t\t\t\t\tindex = groupRows[groupRows.length -1];\n\t\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn index;\n\t\t}\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"group-changed\");\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tsetGroupBy(groups){\n\t\tthis.table.options.groupBy = groups;\n\t\t\n\t\tif(!this.initialized){\n\t\t\tthis.initialize();\n\t\t}\n\t\t\n\t\tthis.configureGroupSetup();\n\n\t\tif(!groups && this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs === true){\n\t\t\tthis.table.modules.columnCalcs.reinitializeCalcs();\n\t\t}\n\t\t\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupValues(groupValues){\n\t\tthis.table.options.groupValues = groupValues;\n\t\tthis.configureGroupSetup();\n\t\tthis.refreshData();\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\tsetGroupStartOpen(values){\n\t\tthis.table.options.groupStartOpen = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else {\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tsetGroupHeader(values){\n\t\tthis.table.options.groupHeader = values;\n\t\tthis.configureGroupSetup();\n\t\t\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t}else {\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\t\n\tuserGetGroups(values){\n\t\treturn this.getGroups(true);\n\t}\n\t\n\t// get grouped table data in the same format as getData()\n\tuserGetGroupedData(){\n\t\treturn this.table.options.groupBy ? this.getGroupedData() : this.getData();\n\t}\n\t\n\t\n\t///////////////////////////////////////\n\t///////// Component Functions /////////\n\t///////////////////////////////////////\n\t\n\trowGetGroup(row){\n\t\treturn row.modules.group ? row.modules.group.getComponent() : false;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\trowMoving(from, to, after){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(!after && to instanceof Group){\n\t\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\n\t\t\t}\n\t\t\t\n\t\t\tvar toGroup = to instanceof Group ? to : to.modules.group;\n\t\t\tvar fromGroup = from instanceof Group ? from : from.modules.group;\n\t\t\t\n\t\t\tif(toGroup === fromGroup){\n\t\t\t\tthis.table.rowManager.moveRowInArray(toGroup.rows, from, to, after);\n\t\t\t}else {\n\t\t\t\tif(fromGroup){\n\t\t\t\t\tfromGroup.removeRow(from);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttoGroup.insertRow(from, to, after);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\trowDeleting(row){\n\t\t//remove from group\n\t\tif(this.table.options.groupBy && row.modules.group){\n\t\t\trow.modules.group.removeRow(row);\n\t\t}\n\t}\n\t\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.updateGroupRows(true);\n\t\t}\t\n\t}\n\t\n\tcellUpdated(cell){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.reassignRowToGroup(cell.row);\n\t\t}\n\t}\n\t\n\t//return appropriate rows with group headers\n\tgetRows(rows){\n\t\tif(this.table.options.groupBy && this.groupIDLookups.length){\n\t\t\t\n\t\t\tthis.dispatchExternal(\"dataGrouping\");\n\t\t\t\n\t\t\tthis.generateGroups(rows);\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataGrouped\")){\n\t\t\t\tthis.dispatchExternal(\"dataGrouped\", this.getGroups(true));\n\t\t\t}\n\t\t\t\n\t\t\treturn this.updateGroupRows();\n\t\t\t\n\t\t}else {\n\t\t\treturn rows.slice(0);\n\t\t}\n\t}\n\t\n\tgetGroups(component){\n\t\tvar groupComponents = [];\n\t\t\n\t\tthis.groupList.forEach(function(group){\n\t\t\tgroupComponents.push(component ? group.getComponent() : group);\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\tgetChildGroups(group){\n\t\tvar groupComponents = [];\n\t\t\n\t\tif(!group){\n\t\t\tgroup = this;\n\t\t}\n\t\t\n\t\tgroup.groupList.forEach((child) => {\n\t\t\tif(child.groupList.length){\n\t\t\t\tgroupComponents = groupComponents.concat(this.getChildGroups(child));\n\t\t\t}else {\n\t\t\t\tgroupComponents.push(child);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupComponents;\n\t}\n\t\n\twipe(){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tgroup.wipe();\n\t\t\t});\n\t\t\t\n\t\t\tthis.groupList = [];\n\t\t\tthis.groups = {};\n\t\t}\n\t}\n\t\n\tpullGroupListData(groupList) {\n\t\tvar groupListData = [];\n\t\t\n\t\tgroupList.forEach((group) => {\n\t\t\tvar groupHeader = {};\n\t\t\tgroupHeader.level = 0;\n\t\t\tgroupHeader.rowCount = 0;\n\t\t\tgroupHeader.headerContent = \"\";\n\t\t\tvar childData = [];\n\t\t\t\n\t\t\tif (group.hasSubGroups) {\n\t\t\t\tchildData = this.pullGroupListData(group.groupList);\n\t\t\t\t\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\tgroupListData = groupListData.concat(childData);\n\t\t\t}\n\t\t\t\n\t\t\telse {\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\n\t\t\t\t\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\t\n\t\t\t\tgroup.getRows().forEach((row) => {\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn groupListData;\n\t}\n\t\n\tgetGroupedData(){\n\t\t\n\t\treturn this.pullGroupListData(this.groupList);\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\t\n\t\tif(this.options(\"dataTree\")){\n\t\t\trow = this.table.modules.dataTree.getTreeParentRoot(row);\n\t\t}\n\t\t\n\t\tthis.groupList.forEach((group) => {\n\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\n\t\t\tif(result){\n\t\t\t\tmatch = result;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tcountGroups(){\n\t\treturn this.groupList.length;\n\t}\n\t\n\tgenerateGroups(rows){\n\t\tvar oldGroups = this.groups;\n\t\t\n\t\tthis.groups = {};\n\t\tthis.groupList = [];\n\t\t\n\t\tif(this.allowedValues && this.allowedValues[0]){\n\t\t\tthis.allowedValues[0].forEach((value) => {\n\t\t\t\tthis.createGroup(value, 0, oldGroups);\n\t\t\t});\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToExistingGroup(row, oldGroups);\n\t\t\t});\n\t\t}else {\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToGroup(row, oldGroups);\n\t\t\t});\n\t\t}\n\t\t\n\t\tObject.values(oldGroups).forEach((group) => {\n\t\t\tgroup.wipe(true);\n\t\t});\t\n\t}\n\t\n\t\n\tcreateGroup(groupID, level, oldGroups){\n\t\tvar groupKey = level + \"_\" + groupID,\n\t\tgroup;\n\t\t\n\t\toldGroups = oldGroups || [];\n\t\t\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\tassignRowToExistingGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tgroupKey = \"0_\" + groupID;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tthis.groups[groupKey].addRow(row);\n\t\t}\n\t}\n\t\n\tassignRowToGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tnewGroupNeeded = !this.groups[\"0_\" + groupID];\n\t\t\n\t\tif(newGroupNeeded){\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\n\t\t}\n\t\t\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\n\t\t\n\t\treturn !newGroupNeeded;\n\t}\n\t\n\treassignRowToGroup(row){\n\t\tif(row.type === \"row\"){\n\t\t\tvar oldRowGroup = row.modules.group,\n\t\t\toldGroupPath = oldRowGroup.getPath(),\n\t\t\tnewGroupPath = this.getExpectedPath(row),\n\t\t\tsamePath;\n\t\t\t\n\t\t\t// figure out if new group path is the same as old group path\n\t\t\tsamePath = (oldGroupPath.length == newGroupPath.length) && oldGroupPath.every((element, index) => {\n\t\t\t\treturn element === newGroupPath[index];\n\t\t\t});\n\t\t\t\n\t\t\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\n\t\t\tif(!samePath) {\n\t\t\t\toldRowGroup.removeRow(row);\n\t\t\t\tthis.assignRowToGroup(row, this.groups);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetExpectedPath(row) {\n\t\tvar groupPath = [], rowData = row.getData();\n\t\t\n\t\tthis.groupIDLookups.forEach((groupId) => {\n\t\t\tgroupPath.push(groupId.func(rowData));\n\t\t});\n\t\t\n\t\treturn groupPath;\n\t}\n\t\n\tupdateGroupRows(force){\n\t\tvar output = [];\n\n\t\tif(!this.blockRedraw){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t\t});\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tscrollHeaders(left){\n\t\tif(this.table.options.groupBy){\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleft -= this.table.columnManager.renderer.vDomPadLeft;\n\t\t\t}\n\t\t\t\n\t\t\tleft = left + \"px\";\n\t\t\t\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tgroup.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcheckBasicModeGroupHeaderWidth(){\n\t\tvar element = this.table.rowManager.tableElement,\n\t\tonlyGroupHeaders = true;\n\t\t\n\t\tthis.table.rowManager.getDisplayRows().forEach((row, index) =>{\n\t\t\tthis.table.rowManager.styleRow(row, index);\n\t\t\telement.appendChild(row.getElement());\n\t\t\trow.initialize(true);\n\t\t\t\n\t\t\tif(row.type !== \"group\"){\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else {\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n}\n\nGroupRows.moduleName = \"groupRows\";\n\nvar defaultUndoers = {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.oldValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\taction.component.deleteActual();\n\t},\n\n\trowDelete: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\t},\n\n\trowMove: function(action){\n\t\tvar after = (action.data.posFrom  - action.data.posTo) > 0;\n\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posFrom), after);\n\n\t\tthis.table.rowManager.regenerateRowPositions();\n\t\tthis.table.rowManager.reRenderInPosition();\n\t},\n};\n\nvar defaultRedoers = {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.newValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\t},\n\n\trowDelete:function(action){\n\t\taction.component.deleteActual();\n\t},\n\n\trowMove: function(action){\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.getRowFromPosition(action.data.posTo), action.data.after);\n\t\t\n\t\tthis.table.rowManager.regenerateRowPositions();\n\t\tthis.table.rowManager.reRenderInPosition();\n\t},\n};\n\nclass History extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\n\t\tthis.registerTableOption(\"history\", false); //enable edit history\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.history){\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this));\n\t\t\tthis.subscribe(\"row-delete\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clear.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowAdded.bind(this));\n\t\t\tthis.subscribe(\"row-move\", this.rowMoved.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"undo\", this.undo.bind(this));\n\t\tthis.registerTableFunction(\"redo\", this.redo.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this));\n\t\tthis.registerTableFunction(\"clearHistory\", this.clear.bind(this));\n\t}\n\n\trowMoved(from, to, after){\n\t\tthis.action(\"rowMove\", from, {posFrom:from.getPosition(), posTo:to.getPosition(), to:to, after:after});\n\t}\n\n\trowAdded(row, data, pos, index){\n\t\tthis.action(\"rowAdd\", row, {data:data, pos:pos, index:index});\n\t}\n\n\trowDeleted(row){\n\t\tvar index, rows;\n\n\t\tif(this.table.options.groupBy){\n\n\t\t\trows = row.getComponent().getGroup()._getSelf().rows;\n\t\t\tindex = rows.indexOf(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = rows[index-1];\n\t\t\t}\n\t\t}else {\n\t\t\tindex = row.table.rowManager.getRowIndex(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = row.table.rowManager.rows[index-1];\n\t\t\t}\n\t\t}\n\n\t\tthis.action(\"rowDelete\", row, {data:row.getData(), pos:!index, index:index});\n\t}\n\n\tcellUpdated(cell){\n\t\tthis.action(\"cellEdit\", cell, {oldValue:cell.oldValue, newValue:cell.value});\n\t}\n\n\tclear(){\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\t}\n\n\taction(type, component, data){\n\t\tthis.history = this.history.slice(0, this.index + 1);\n\n\t\tthis.history.push({\n\t\t\ttype:type,\n\t\t\tcomponent:component,\n\t\t\tdata:data,\n\t\t});\n\n\t\tthis.index ++;\n\t}\n\n\tgetHistoryUndoSize(){\n\t\treturn this.index + 1;\n\t}\n\n\tgetHistoryRedoSize(){\n\t\treturn this.history.length - (this.index + 1);\n\t}\n\n\tclearComponentHistory(component){\n\t\tvar index = this.history.findIndex(function(item){\n\t\t\treturn item.component === component;\n\t\t});\n\n\t\tif(index > -1){\n\t\t\tthis.history.splice(index, 1);\n\t\t\tif(index <= this.index){\n\t\t\t\tthis.index--;\n\t\t\t}\n\n\t\t\tthis.clearComponentHistory(component);\n\t\t}\n\t}\n\n\tundo(){\n\t\tif(this.index > -1){\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.undoers[action.type].call(this, action);\n\n\t\t\tthis.index--;\n\n\t\t\tthis.dispatchExternal(\"historyUndo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else {\n\t\t\tconsole.warn(\"History Undo Error - No more history to undo\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tredo(){\n\t\tif(this.history.length-1 > this.index){\n\n\t\t\tthis.index++;\n\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.redoers[action.type].call(this, action);\n\n\t\t\tthis.dispatchExternal(\"historyRedo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else {\n\t\t\tconsole.warn(\"History Redo Error - No more history to redo\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//rebind rows to new element after deletion\n\t_rebindRow(oldRow, newRow){\n\t\tthis.history.forEach(function(action){\n\t\t\tif(action.component instanceof Row){\n\t\t\t\tif(action.component === oldRow){\n\t\t\t\t\taction.component = newRow;\n\t\t\t\t}\n\t\t\t}else if(action.component instanceof Cell){\n\t\t\t\tif(action.component.row === oldRow){\n\t\t\t\t\tvar field = action.component.column.getField();\n\n\t\t\t\t\tif(field){\n\t\t\t\t\t\taction.component = newRow.getCell(field);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nHistory.moduleName = \"history\";\n\n//load defaults\nHistory.undoers = defaultUndoers;\nHistory.redoers = defaultRedoers;\n\nclass HtmlTableImport extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.fieldIndex = [];\n\t\tthis.hasIndex = false;\n\t}\n\n\tinitialize(){\n\t\tthis.tableElementCheck();\n\t}\n\n\ttableElementCheck(){\n\t\tif(this.table.originalElement && this.table.originalElement.tagName === \"TABLE\"){\n\t\t\tif(this.table.originalElement.childNodes.length){\n\t\t\t\tthis.parseTable();\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.\");\n\t\t\t}\n\t\t}\n\t}\n\n\tparseTable(){\n\t\tvar element = this.table.originalElement,\n\t\toptions = this.table.options,\n\t\theaders = element.getElementsByTagName(\"th\"),\n\t\trows = element.getElementsByTagName(\"tbody\")[0],\n\t\tdata = [];\n\n\t\tthis.hasIndex = false;\n\n\t\tthis.dispatchExternal(\"htmlImporting\");\n\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n\t\t//check for Tabulator inline options\n\t\tthis._extractOptions(element, options);\n\n\t\tif(headers.length){\n\t\t\tthis._extractHeaders(headers, rows);\n\t\t}else {\n\t\t\tthis._generateBlankHeaders(headers, rows);\n\t\t}\n\n\t\t//iterate through table rows and build data set\n\t\tfor(var index = 0; index < rows.length; index++){\n\t\t\tvar row = rows[index],\n\t\t\tcells = row.getElementsByTagName(\"td\"),\n\t\t\titem = {};\n\n\t\t\t//create index if the don't exist in table\n\t\t\tif(!this.hasIndex){\n\t\t\t\titem[options.index] = index;\n\t\t\t}\n\n\t\t\tfor(var i = 0; i < cells.length; i++){\n\t\t\t\tvar cell = cells[i];\n\t\t\t\tif(typeof this.fieldIndex[i] !== \"undefined\"){\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//add row data to item\n\t\t\tdata.push(item);\n\t\t}\n\n\t\toptions.data = data;\n\n\t\tthis.dispatchExternal(\"htmlImported\");\n\t}\n\n\t//extract tabulator attribute options\n\t_extractOptions(element, options, defaultOptions){\n\t\tvar attributes = element.attributes;\n\t\tvar optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options);\n\t\tvar optionsList = {};\n\n\t\toptionsArr.forEach((item) => {\n\t\t\toptionsList[item.toLowerCase()] = item;\n\t\t});\n\n\t\tfor(var index in attributes){\n\t\t\tvar attrib = attributes[index];\n\t\t\tvar name;\n\n\t\t\tif(attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0){\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\n\n\t\t\t\tif(typeof optionsList[name] !== \"undefined\"){\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//get value of attribute\n\t_attribValue(value){\n\t\tif(value === \"true\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(value === \"false\"){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t//find column if it has already been defined\n\t_findCol(title){\n\t\tvar match = this.table.options.columns.find((column) => {\n\t\t\treturn column.title === title;\n\t\t});\n\n\t\treturn match || false;\n\t}\n\n\t//extract column from headers\n\t_extractHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\texists = false,\n\t\t\tcol = this._findCol(header.textContent),\n\t\t\twidth;\n\n\t\t\tif(col){\n\t\t\t\texists = true;\n\t\t\t}else {\n\t\t\t\tcol = {title:header.textContent.trim()};\n\t\t\t}\n\n\t\t\tif(!col.field) {\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\n\t\t\t}\n\n\t\t\twidth = header.getAttribute(\"width\");\n\n\t\t\tif(width && !col.width)\t{\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\t//check for Tabulator inline options\n\t\t\tthis._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults);\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tif(col.field == this.table.options.index){\n\t\t\t\tthis.hasIndex = true;\n\t\t\t}\n\n\t\t\tif(!exists){\n\t\t\t\tthis.table.options.columns.push(col);\n\t\t\t}\n\n\t\t}\n\t}\n\n\t//generate blank headers\n\t_generateBlankHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\tcol = {title:\"\", field:\"col\" + index};\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tvar width = header.getAttribute(\"width\");\n\n\t\t\tif(width){\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\tthis.table.options.columns.push(col);\n\t\t}\n\t}\n}\n\nHtmlTableImport.moduleName = \"htmlTableImport\";\n\nfunction csvImporter(input){\n\tvar data = [],\n\trow = 0, \n\tcol = 0,\n\tinQuote = false;\n    \n\t//Iterate over each character\n\tfor (let index = 0; index < input.length; index++) {\n\t\tlet char = input[index], \n\t\tnextChar = input[index+1];      \n        \n\t\t//Initialize empty row\n\t\tif(!data[row]){\n\t\t\tdata[row] = [];\n\t\t}\n\n\t\t//Initialize empty column\n\t\tif(!data[row][col]){\n\t\t\tdata[row][col] = \"\";\n\t\t}\n        \n\t\t//Handle quotation mark inside string\n\t\tif (char == '\"' && inQuote && nextChar == '\"') { \n\t\t\tdata[row][col] += char; \n\t\t\tindex++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//Begin / End Quote\n\t\tif (char == '\"') { \n\t\t\tinQuote = !inQuote;\n\t\t\tcontinue;\n\t\t}\n        \n\t\t//Next column (if not in quote)\n\t\tif (char == ',' && !inQuote) { \n\t\t\tcol++;\n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CRLF) \n\t\tif (char == '\\r' && nextChar == '\\n' && !inQuote) { \n\t\t\tcol = 0; \n\t\t\trow++; \n\t\t\tindex++; \n\t\t\tcontinue; \n\t\t}\n        \n\t\t//New row if new line and not in quote (CR or LF) \n\t\tif ((char == '\\r' || char == '\\n') && !inQuote) { \n\t\t\tcol = 0;\n\t\t\trow++;\n\t\t\tcontinue; \n\t\t}\n\n\t\t//Normal Character, append to column\n\t\tdata[row][col] += char;\n\t}\n\n\treturn data;\n}\n\nfunction json$1(input){\n\ttry {\n\t\treturn JSON.parse(input);\n\t} catch(e) {\n\t\tconsole.warn(\"JSON Import Error - File contents is invalid JSON\", e);\n\t\treturn Promise.reject();\n\t}\n}\n\nfunction arrayImporter(input){\n\treturn input;\n}\n\nvar defaultImporters = {\n\tcsv:csvImporter,\n\tjson:json$1,\n\tarray:arrayImporter,\n};\n\nclass Import extends Module{\n    \n\tconstructor(table){\n\t\tsuper(table);\n        \n\t\tthis.registerTableOption(\"importFormat\");\n\t\tthis.registerTableOption(\"importReader\", \"text\");\n\t}\n    \n\tinitialize(){\n\t\tthis.registerTableFunction(\"import\", this.importFromFile.bind(this));\n\n\t\tif(this.table.options.importFormat){\n\t\t\tthis.subscribe(\"data-loading\", this.loadDataCheck.bind(this), 10);\n\t\t\tthis.subscribe(\"data-load\", this.loadData.bind(this), 10);\n\t\t}\n\t}\n\n\tloadDataCheck(data){\n\t\treturn this.table.options.importFormat && (typeof data === \"string\" || (Array.isArray(data) && data.length && Array.isArray(data)));\n\t}\n\n\tloadData(data, params, config, silent, previousData){\n\t\treturn this.importData(this.lookupImporter(), data)\n\t\t\t.then(this.structureData.bind(this))\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import data\");\n\t\t\t\treturn Promise.reject(err);\n\t\t\t});\n\t}\n\n\tlookupImporter(importFormat){\n\t\tvar importer;\n        \n\t\tif(!importFormat){\n\t\t\timportFormat = this.table.options.importFormat;\n\t\t}\n        \n\t\tif(typeof importFormat === \"string\"){\n\t\t\timporter = Import.importers[importFormat];\n\t\t}else {\n\t\t\timporter = importFormat;\n\t\t}\n\n\t\tif(!importer){\n\t\t\tconsole.error(\"Import Error - Importer not found:\", importFormat);\n\t\t}\n        \n\t\treturn importer;\n\t}\n    \n\timportFromFile(importFormat, extension){\n\t\tvar importer = this.lookupImporter(importFormat);\n        \n\t\tif(importer){\n\t\t\treturn this.pickFile(extension)\n\t\t\t\t.then(this.importData.bind(this, importer))\n\t\t\t\t.then(this.structureData.bind(this))\n\t\t\t\t.then(this.setData.bind(this))\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.error(\"Import Error:\", err || \"Unable to import file\");\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t});\n\t\t}\n\t}\n    \n\tpickFile(extensions){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.type = \"file\";\n\t\t\tinput.accept = extensions;\n            \n\t\t\tinput.addEventListener(\"change\", (e) => {\n\t\t\t\tvar file = input.files[0],\n\t\t\t\treader = new FileReader();\n                \n\t\t\t\tswitch(this.table.options.importReader){\n\t\t\t\t\tcase \"buffer\":\n\t\t\t\t\t\treader.readAsArrayBuffer(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"binary\":\n\t\t\t\t\t\treader.readAsBinaryString(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"url\":\n\t\t\t\t\t\treader.readAsDataURL(file);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treader.readAsText(file);\n\t\t\t\t}\n                  \n\t\t\t\treader.onload = (e) => {\n\t\t\t\t\tresolve(reader.result);\n\t\t\t\t};\n                \n\t\t\t\treader.onerror = (e) => {\n\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\n\t\t\t\t\treject();\n\t\t\t\t};\n\t\t\t});\n            \n\t\t\tinput.click();\n\t\t});\n\t}\n    \n\timportData(importer, fileContents){\n\t\tvar data = importer.call(this.table, fileContents);\n        \n\t\tif(data instanceof Promise){\n\t\t\treturn data;\n\t\t}else {\n\t\t\treturn data ? Promise.resolve(data) : Promise.reject();\n\t\t}\n\t}\n\n\tstructureData(parsedData){\n\t\tvar data = [];\n        \n\t\tif(Array.isArray(parsedData) && parsedData.length && Array.isArray(parsedData[0])){\n\t\t\tif(this.table.options.autoColumns){\n\t\t\t\tdata = this.structureArrayToObject(parsedData);\n\t\t\t}else {\n\t\t\t\tdata = this.structureArrayToColumns(parsedData);\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}else {\n\t\t\treturn parsedData;\n\t\t}\n\t}\n\n\tstructureArrayToObject(parsedData){\n\t\tvar columns = parsedData.shift();\n\n\t\tvar data = parsedData.map((values) => {\n\t\t\tvar row = {};\n\n\t\t\tcolumns.forEach((key, i) => {\n\t\t\t\trow[key] = values[i];\n\t\t\t});\n\n\t\t\treturn row;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tstructureArrayToColumns(parsedData){\n\t\tvar data = [],\n\t\tcolumns = this.table.getColumns();\n\n\t\t//remove first row if it is the column names\n\t\tif(columns[0] && parsedData[0][0]){\n\t\t\tif(columns[0].getDefinition().title === parsedData[0][0]){\n\t\t\t\tparsedData.shift();\n\t\t\t}\n\t\t}\n        \n\t\t//convert row arrays to objects\n\t\tparsedData.forEach((rowData) => {\n\t\t\tvar row = {};\n\n\t\t\trowData.forEach((value, index) => {\n\t\t\t\tvar column = columns[index];\n\n\t\t\t\tif(column){\n\t\t\t\t\trow[column.getField()] = value;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdata.push(row);\n\t\t});\n\n\t\treturn data;\n\t}\n    \n\tsetData(data){\n\t\treturn this.table.setData(data);\n\t}\n}\n\nImport.moduleName = \"import\";\n\n//load defaults\nImport.importers = defaultImporters;\n\nclass Interaction extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.eventMap = {\n\t\t\t//row events\n\t\t\trowClick:\"row-click\",\n\t\t\trowDblClick:\"row-dblclick\",\n\t\t\trowContext:\"row-contextmenu\",\n\t\t\trowMouseEnter:\"row-mouseenter\",\n\t\t\trowMouseLeave:\"row-mouseleave\",\n\t\t\trowMouseOver:\"row-mouseover\",\n\t\t\trowMouseOut:\"row-mouseout\",\n\t\t\trowMouseMove:\"row-mousemove\",\n\t\t\trowMouseDown:\"row-mousedown\",\n\t\t\trowMouseUp:\"row-mouseup\",\n\t\t\trowTap:\"row\",\n\t\t\trowDblTap:\"row\",\n\t\t\trowTapHold:\"row\",\n\n\t\t\t//cell events\n\t\t\tcellClick:\"cell-click\",\n\t\t\tcellDblClick:\"cell-dblclick\",\n\t\t\tcellContext:\"cell-contextmenu\",\n\t\t\tcellMouseEnter:\"cell-mouseenter\",\n\t\t\tcellMouseLeave:\"cell-mouseleave\",\n\t\t\tcellMouseOver:\"cell-mouseover\",\n\t\t\tcellMouseOut:\"cell-mouseout\",\n\t\t\tcellMouseMove:\"cell-mousemove\",\n\t\t\tcellMouseDown:\"cell-mousedown\",\n\t\t\tcellMouseUp:\"cell-mouseup\",\n\t\t\tcellTap:\"cell\",\n\t\t\tcellDblTap:\"cell\",\n\t\t\tcellTapHold:\"cell\",\n\n\t\t\t//column header events\n\t\t\theaderClick:\"column-click\",\n\t\t\theaderDblClick:\"column-dblclick\",\n\t\t\theaderContext:\"column-contextmenu\",\n\t\t\theaderMouseEnter:\"column-mouseenter\",\n\t\t\theaderMouseLeave:\"column-mouseleave\",\n\t\t\theaderMouseOver:\"column-mouseover\",\n\t\t\theaderMouseOut:\"column-mouseout\",\n\t\t\theaderMouseMove:\"column-mousemove\",\n\t\t\theaderMouseDown:\"column-mousedown\",\n\t\t\theaderMouseUp:\"column-mouseup\",\n\t\t\theaderTap:\"column\",\n\t\t\theaderDblTap:\"column\",\n\t\t\theaderTapHold:\"column\",\n\n\t\t\t//group header\n\t\t\tgroupClick:\"group-click\",\n\t\t\tgroupDblClick:\"group-dblclick\",\n\t\t\tgroupContext:\"group-contextmenu\",\n\t\t\tgroupMouseEnter:\"group-mouseenter\",\n\t\t\tgroupMouseLeave:\"group-mouseleave\",\n\t\t\tgroupMouseOver:\"group-mouseover\",\n\t\t\tgroupMouseOut:\"group-mouseout\",\n\t\t\tgroupMouseMove:\"group-mousemove\",\n\t\t\tgroupMouseDown:\"group-mousedown\",\n\t\t\tgroupMouseUp:\"group-mouseup\",\n\t\t\tgroupTap:\"group\",\n\t\t\tgroupDblTap:\"group\",\n\t\t\tgroupTapHold:\"group\",\n\t\t};\n\n\t\tthis.subscribers = {};\n\n\t\tthis.touchSubscribers = {};\n\n\t\tthis.columnSubscribers = {};\n\n\t\tthis.touchWatchers = {\n\t\t\trow:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcell:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcolumn:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tgroup:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t}\n\t\t};\n\n\t\tthis.registerColumnOption(\"headerClick\");\n\t\tthis.registerColumnOption(\"headerDblClick\");\n\t\tthis.registerColumnOption(\"headerContext\");\n\t\tthis.registerColumnOption(\"headerMouseEnter\");\n\t\tthis.registerColumnOption(\"headerMouseLeave\");\n\t\tthis.registerColumnOption(\"headerMouseOver\");\n\t\tthis.registerColumnOption(\"headerMouseOut\");\n\t\tthis.registerColumnOption(\"headerMouseMove\");\n\t\tthis.registerColumnOption(\"headerMouseDown\");\n\t\tthis.registerColumnOption(\"headerMouseUp\");\n\t\tthis.registerColumnOption(\"headerTap\");\n\t\tthis.registerColumnOption(\"headerDblTap\");\n\t\tthis.registerColumnOption(\"headerTapHold\");\n\n\t\tthis.registerColumnOption(\"cellClick\");\n\t\tthis.registerColumnOption(\"cellDblClick\");\n\t\tthis.registerColumnOption(\"cellContext\");\n\t\tthis.registerColumnOption(\"cellMouseEnter\");\n\t\tthis.registerColumnOption(\"cellMouseLeave\");\n\t\tthis.registerColumnOption(\"cellMouseOver\");\n\t\tthis.registerColumnOption(\"cellMouseOut\");\n\t\tthis.registerColumnOption(\"cellMouseMove\");\n\t\tthis.registerColumnOption(\"cellMouseDown\");\n\t\tthis.registerColumnOption(\"cellMouseUp\");\n\t\tthis.registerColumnOption(\"cellTap\");\n\t\tthis.registerColumnOption(\"cellDblTap\");\n\t\tthis.registerColumnOption(\"cellTapHold\");\n\n\t}\n\n\tinitialize(){\n\t\tthis.initializeExternalEvents();\n\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.clearTouchWatchers.bind(this));\n\t\tthis.subscribe(\"scroll-vertical\", this.clearTouchWatchers.bind(this));\n\t}\n\n\tclearTouchWatchers(){\n\t\tvar types = Object.values(this.touchWatchers);\n\n\t\ttypes.forEach((type) => {\n\t\t\tfor(let key in type){\n\t\t\t\ttype[key] = null;\n\t\t\t}\n\t\t});\n\t}\n\t\t\n\tcellContentsSelectionFixer(e, cell){\n\t\tvar range;\n\n\t\tif(this.table.modExists(\"edit\")){\n\t\t\tif (this.table.modules.edit.currentCell === cell){\n\t\t\t\treturn; //prevent instant selection of editor content\n\t\t\t}\n\t\t}\n\n\t\te.preventDefault();\n\n\t\ttry{\n\t\t\tif (document.selection) { // IE\n\t\t\t\trange = document.body.createTextRange();\n\t\t\t\trange.moveToElementText(cell.getElement());\n\t\t\t\trange.select();\n\t\t\t} else if (window.getSelection) {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNode(cell.getElement());\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t}\n\t\t}catch(e){}\n\t}\n\n\tinitializeExternalEvents(){\n\t\tfor(let key in this.eventMap){\n\t\t\tthis.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key));\n\t\t}\n\t}\n\n\tsubscriptionChanged(key, added){\n\t\tif(added){\n\t\t\tif(!this.subscribers[key]){\n\t\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\t\tthis.subscribers[key] = this.handle.bind(this, key);\n\t\t\t\t\tthis.subscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t}else {\n\t\t\t\t\tthis.subscribeTouchEvents(key);\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\tif(this.subscribers[key] && !this.columnSubscribers[key]  && !this.subscribedExternal(key)){\n\t\t\t\t\tthis.unsubscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t\tdelete this.subscribers[key];\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.unsubscribeTouchEvents(key);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tsubscribeTouchEvents(key){\n\t\tvar type = this.eventMap[key];\n\n\t\tif(!this.touchSubscribers[type + \"-touchstart\"]){\n\t\t\tthis.touchSubscribers[type + \"-touchstart\"] = this.handleTouch.bind(this, type, \"start\");\n\t\t\tthis.touchSubscribers[type + \"-touchend\"] = this.handleTouch.bind(this, type, \"end\");\n\n\t\t\tthis.subscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\tthis.subscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\t\t}\n\n\t\tthis.subscribers[key] = true;\n\t}\n\n\tunsubscribeTouchEvents(key){\n\t\tvar noTouch = true,\n\t\ttype = this.eventMap[key];\n\n\t\tif(this.subscribers[key] && !this.subscribedExternal(key)){\n\t\t\tdelete this.subscribers[key];\n\n\t\t\tfor(let i in this.eventMap){\n\t\t\t\tif(this.eventMap[i] === type){\n\t\t\t\t\tif(this.subscribers[i]){\n\t\t\t\t\t\tnoTouch = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(noTouch){\n\t\t\t\tthis.unsubscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\t\tthis.unsubscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchstart\"];\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchend\"];\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\n\t\tfor(let key in this.eventMap){\n\t\t\tif(def[key]){\n\t\t\t\tthis.subscriptionChanged(key, true);\n\n\t\t\t\tif(!this.columnSubscribers[key]){\n\t\t\t\t\tthis.columnSubscribers[key] = [];\n\t\t\t\t}\n\n\t\t\t\tthis.columnSubscribers[key].push(column);\n\t\t\t}\n\t\t}\n\t}\n\n\thandle(action, e, component){\n\t\tthis.dispatchEvent(action, e, component);\n\t}\n\n\thandleTouch(type, action, e, component){\n\t\tvar watchers = this.touchWatchers[type];\n\n\t\tif(type === \"column\"){\n\t\t\ttype = \"header\";\n\t\t}\n\n\t\tswitch(action){\n\t\t\tcase \"start\":\n\t\t\t\twatchers.tap = true;\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\n\t\t\t\twatchers.tapHold = setTimeout(() => {\n\t\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\t\twatchers.tapHold = null;\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"TapHold\", e,  component);\n\t\t\t\t}, 1000);\n\t\t\t\tbreak;\n\n\t\t\tcase \"end\":\n\t\t\t\tif(watchers.tap){\n\n\t\t\t\t\twatchers.tap = null;\n\t\t\t\t\tthis.dispatchEvent(type + \"Tap\", e,  component);\n\t\t\t\t}\n\n\t\t\t\tif(watchers.tapDbl){\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\t\tthis.dispatchEvent(type + \"DblTap\", e,  component);\n\t\t\t\t}else {\n\t\t\t\t\twatchers.tapDbl = setTimeout(() => {\n\t\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\t\twatchers.tapDbl = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\n\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\twatchers.tapHold = null;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tdispatchEvent(action, e, component){\n\t\tvar componentObj = component.getComponent(),\n\t\tcallback;\n\n\t\tif(this.columnSubscribers[action]){\n\n\t\t\tif(component instanceof Cell){\n\t\t\t\tcallback = component.column.definition[action];\n\t\t\t}else if(component instanceof Column){\n\t\t\t\tcallback = component.definition[action];\n\t\t\t}\n\n\t\t\tif(callback){\n\t\t\t\tcallback(e, componentObj);\n\t\t\t}\n\t\t}\n\n\t\tthis.dispatchExternal(action, e, componentObj);\n\t}\n}\n\nInteraction.moduleName = \"interaction\";\n\nvar defaultBindings = {\n\tnavPrev:\"shift + 9\",\n\tnavNext:9,\n\tnavUp:38,\n\tnavDown:40,\n\tscrollPageUp:33,\n\tscrollPageDown:34,\n\tscrollToStart:36,\n\tscrollToEnd:35,\n\tundo:[\"ctrl + 90\", \"meta + 90\"],\n\tredo:[\"ctrl + 89\", \"meta + 89\"],\n\tcopyToClipboard:[\"ctrl + 67\", \"meta + 89\"],\n};\n\nvar defaultActions = {\n\tkeyBlock:function(e){\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t},\n\tscrollPageUp:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop - rowManager.element.clientHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos >= 0){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else {\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollPageDown:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop + rowManager.element.clientHeight,\n\t\tscrollMax = rowManager.element.scrollHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos <= scrollMax){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else {\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\n\t},\n\tscrollToStart:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollToEnd:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tnavPrev:function(e){\n\t\tthis.dispatch(\"keybinding-nav-prev\", e);\n\t},\n\n\tnavNext:function(e){\n\t\tthis.dispatch(\"keybinding-nav-next\", e);\n\t},\n\n\tnavLeft:function(e){\n\t\tthis.dispatch(\"keybinding-nav-left\", e);\n\t},\n\n\tnavRight:function(e){\n\t\tthis.dispatch(\"keybinding-nav-right\", e);\n\t},\n\n\tnavUp:function(e){\n\t\tthis.dispatch(\"keybinding-nav-up\", e);\n\t},\n\n\tnavDown:function(e){\n\t\tthis.dispatch(\"keybinding-nav-down\", e);\n\t},\n\n\tundo:function(e){\n\t\tvar cell = false;\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\n\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif(!cell){\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.table.modules.history.undo();\n\t\t\t}\n\t\t}\n\t},\n\n\tredo:function(e){\n\t\tvar cell = false;\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\n\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif(!cell){\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.table.modules.history.redo();\n\t\t\t}\n\t\t}\n\t},\n\n\tcopyToClipboard:function(e){\n\t\tif(!this.table.modules.edit.currentCell){\n\t\t\tif(this.table.modExists(\"clipboard\", true)){\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\n\t\t\t}\n\t\t}\n\t},\n};\n\nclass Keybindings extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.watchKeys = null;\n\t\tthis.pressedKeys = null;\n\t\tthis.keyupBinding = false;\n\t\tthis.keydownBinding = false;\n\n\t\tthis.registerTableOption(\"keybindings\", {}); //array for keybindings\n\t\tthis.registerTableOption(\"tabEndNewRow\", false); //create new row when tab to end of table\n\t}\n\n\tinitialize(){\n\t\tvar bindings = this.table.options.keybindings,\n\t\tmergedBindings = {};\n\n\t\tthis.watchKeys = {};\n\t\tthis.pressedKeys = [];\n\n\t\tif(bindings !== false){\n\t\t\tObject.assign(mergedBindings, Keybindings.bindings);\n\t\t\tObject.assign(mergedBindings, bindings);\n\n\t\t\tthis.mapBindings(mergedBindings);\n\t\t\tthis.bindEvents();\n\t\t}\n\n\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t}\n\n\tmapBindings(bindings){\n\t\tfor(let key in bindings){\n\t\t\tif(Keybindings.actions[key]){\n\t\t\t\tif(bindings[key]){\n\t\t\t\t\tif(typeof bindings[key] !== \"object\"){\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\n\t\t\t\t\t}\n\n\t\t\t\t\tbindings[key].forEach((binding) => {\n\t\t\t\t\t\tvar bindingList = Array.isArray(binding) ?  binding : [binding];\n\t\t\t\t\t\t\n\t\t\t\t\t\tbindingList.forEach((item) => {\n\t\t\t\t\t\t\tthis.mapBinding(key, item);\n\t\t\t\t\t\t});\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\n\t\t\t}\n\t\t}\n\t}\n\n\tmapBinding(action, symbolsList){\n\t\tvar binding = {\n\t\t\taction: Keybindings.actions[action],\n\t\t\tkeys: [],\n\t\t\tctrl: false,\n\t\t\tshift: false,\n\t\t\tmeta: false,\n\t\t};\n\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n\n\t\tsymbols.forEach((symbol) => {\n\t\t\tswitch(symbol){\n\t\t\t\tcase \"ctrl\":\n\t\t\t\t\tbinding.ctrl = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"shift\":\n\t\t\t\t\tbinding.shift = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"meta\":\n\t\t\t\t\tbinding.meta = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tsymbol = isNaN(symbol) ? symbol.toUpperCase().charCodeAt(0) : parseInt(symbol);\n\t\t\t\t\tbinding.keys.push(symbol);\n\n\t\t\t\t\tif(!this.watchKeys[symbol]){\n\t\t\t\t\t\tthis.watchKeys[symbol] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.watchKeys[symbol].push(binding);\n\t\t\t}\n\t\t});\n\t}\n\n\tbindEvents(){\n\t\tvar self = this;\n\n\t\tthis.keyupBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tself.pressedKeys.push(code);\n\n\t\t\t\tbindings.forEach(function(binding){\n\t\t\t\t\tself.checkBinding(e, binding);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tthis.keydownBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\n\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\n\t}\n\n\tclearBindings(){\n\t\tif(this.keyupBinding){\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n\t\t}\n\n\t\tif(this.keydownBinding){\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n\t\t}\n\t}\n\n\tcheckBinding(e, binding){\n\t\tvar match = true;\n\n\t\tif(e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta){\n\t\t\tbinding.keys.forEach((key) => {\n\t\t\t\tvar index = this.pressedKeys.indexOf(key);\n\n\t\t\t\tif(index == -1){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tbinding.action.call(this, e);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\nKeybindings.moduleName = \"keybindings\";\n\n//load defaults\nKeybindings.bindings = defaultBindings;\nKeybindings.actions = defaultActions;\n\nclass Menu extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.menuContainer = null;\n\t\tthis.nestedMenuBlock = false;\n\t\t\n\t\tthis.currentComponent = null;\n\t\tthis.rootPopup = null;\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"menuContainer\", undefined); //deprecated\n\t\t\n\t\tthis.registerTableOption(\"rowContextMenu\", false);\n\t\tthis.registerTableOption(\"rowClickMenu\", false);\n\t\tthis.registerTableOption(\"rowDblClickMenu\", false);\n\t\tthis.registerTableOption(\"groupContextMenu\", false);\n\t\tthis.registerTableOption(\"groupClickMenu\", false);\n\t\tthis.registerTableOption(\"groupDblClickMenu\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextMenu\");\n\t\tthis.registerColumnOption(\"headerClickMenu\");\n\t\tthis.registerColumnOption(\"headerDblClickMenu\");\n\t\tthis.registerColumnOption(\"headerMenu\");\n\t\tthis.registerColumnOption(\"headerMenuIcon\");\n\t\tthis.registerColumnOption(\"contextMenu\");\n\t\tthis.registerColumnOption(\"clickMenu\");\n\t\tthis.registerColumnOption(\"dblClickMenu\");\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\tif(!this.deprecationCheck(\"menuContainer\", \"popupContainer\")){\n\t\t\tthis.table.options.popupContainer = this.table.options.menuContainer;\n\t\t}\n\t}\t\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextMenu){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickMenu){\n\t\t\tthis.subscribe(\"row-click\", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowDblClickMenu){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadMenuEvent.bind(this, this.table.options.rowDblClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextMenu){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickMenu){\n\t\t\tthis.subscribe(\"group-click\", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupDblClickMenu){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadMenuEvent.bind(this, this.table.options.groupDblClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar\tdef = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextMenu && !this.columnSubscribers.headerContextMenu){\n\t\t\tthis.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextMenu);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickMenu && !this.columnSubscribers.headerClickMenu){\n\t\t\tthis.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerClickMenu\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerDblClickMenu && !this.columnSubscribers.headerDblClickMenu){\n\t\t\tthis.columnSubscribers.headerDblClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerDblClickMenu\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerMenu){\n\t\t\tthis.initializeColumnHeaderMenu(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextMenu && !this.columnSubscribers.contextMenu){\n\t\t\tthis.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, \"contextMenu\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextMenu);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadMenuTableCellEvent.bind(this, \"contextMenu\"));\n\t\t}\n\t\t\n\t\tif(def.clickMenu && !this.columnSubscribers.clickMenu){\n\t\t\tthis.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, \"clickMenu\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickMenu);\n\t\t}\n\t\t\n\t\tif(def.dblClickMenu && !this.columnSubscribers.dblClickMenu){\n\t\t\tthis.columnSubscribers.dblClickMenu = this.loadMenuTableCellEvent.bind(this, \"dblClickMenu\");\n\t\t\tthis.subscribe(\"cell-dblclick\", this.columnSubscribers.dblClickMenu);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderMenu(column){\n\t\tvar icon = column.definition.headerMenuIcon,\n\t\theaderMenuEl;\n\t\t\n\t\theaderMenuEl = document.createElement(\"span\");\n\t\theaderMenuEl.classList.add(\"tabulator-header-popup-button\");\n\t\t\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderMenuEl.appendChild(icon);\n\t\t\t}else {\n\t\t\t\theaderMenuEl.innerHTML = icon;\n\t\t\t}\n\t\t}else {\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderMenuEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadMenuEvent(column.definition.headerMenu, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadMenuTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadMenuEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadMenuTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadMenuEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadMenuEvent(menu, e, component){\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tmenu = typeof menu == \"function\" ? menu.call(this.table, e, component.getComponent()) : menu;\n\t\t\n\t\tthis.loadMenu(e, component, menu);\n\t}\n\t\n\tloadMenu(e, component, menu, parentEl, parentPopup){\n\t\tvar touch = !(e instanceof MouseEvent),\t\t\n\t\tmenuEl = document.createElement(\"div\"),\n\t\tpopup;\n\t\t\n\t\tmenuEl.classList.add(\"tabulator-menu\");\n\t\t\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\t//abort if no menu set\n\t\tif(!menu || !menu.length){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(!parentEl){\n\t\t\tif(this.nestedMenuBlock){\n\t\t\t\t//abort if child menu already open\n\t\t\t\tif(this.rootPopup){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.nestedMenuBlock = setTimeout(() => {\n\t\t\t\t\tthis.nestedMenuBlock = false;\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.rootPopup = popup = this.popup(menuEl);\n\t\t\t\n\t\t}else {\n\t\t\tpopup = parentPopup.child(menuEl);\n\t\t}\n\t\t\n\t\tmenu.forEach((item) => {\n\t\t\tvar itemEl = document.createElement(\"div\"),\n\t\t\tlabel = item.label,\n\t\t\tdisabled = item.disabled;\n\t\t\t\n\t\t\tif(item.separator){\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\n\t\t\t}else {\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\n\t\t\t\t\n\t\t\t\tif(typeof label == \"function\"){\n\t\t\t\t\tlabel = label.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(label instanceof Node){\n\t\t\t\t\titemEl.appendChild(label);\n\t\t\t\t}else {\n\t\t\t\t\titemEl.innerHTML = label;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(typeof disabled == \"function\"){\n\t\t\t\t\tdisabled = disabled.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(disabled){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\n\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tthis.loadMenu(e, component, item.menu, itemEl, popup);\n\t\t\t\t\t\t});\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(item.action){\n\t\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\t\titem.action(e, component.getComponent());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-submenu\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tmenuEl.appendChild(itemEl);\n\t\t});\n\t\t\n\t\tmenuEl.addEventListener(\"click\", (e) => {\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\n\t\t\t}\n\t\t});\n\t\t\n\t\tpopup.show(parentEl || e);\n\t\t\n\t\tif(popup === this.rootPopup){\n\t\t\tthis.rootPopup.hideOnBlur(() => {\n\t\t\t\tthis.rootPopup = null;\n\t\t\t\t\n\t\t\t\tif(this.currentComponent){\n\t\t\t\t\tthis.dispatchExternal(\"menuClosed\", this.currentComponent.getComponent());\n\t\t\t\t\tthis.currentComponent = null;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.currentComponent = component;\n\t\t\t\n\t\t\tthis.dispatchExternal(\"menuOpened\", component.getComponent());\n\t\t}\n\t}\n}\n\nMenu.moduleName = \"menu\";\n\nclass MoveColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating column header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving column\n\t\tthis.toCol = false; //destination column\n\t\tthis.toColAfter = false; //position of moving column relative to the destination column\n\t\tthis.startX = 0; //starting position within header element\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\n\t\tthis.touchMove = false;\n\t\t\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\t\n\t\tthis.registerTableOption(\"movableColumns\", false); //enable movable columns\n\t}\n\t\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.classList.add(\"tabulator-col-placeholder\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.movableColumns){\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\tcolEl;\n\t\t\n\t\tif(!column.modules.frozen && !column.isGroup){\n\t\t\tcolEl = column.getElement();\n\t\t\t\n\t\t\tconfig.mousemove = function(e){\n\t\t\t\tif(column.parent === self.moving.parent){\n\t\t\t\t\tif((((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left) + self.table.columnManager.contentsElement.scrollLeft) > (column.getWidth() / 2)){\n\t\t\t\t\t\tif(self.toCol !== column || !self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n\t\t\t\t\t\t\tself.moveColumn(column, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(self.toCol !== column || self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\n\t\t\t\t\t\t\tself.moveColumn(column, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(self);\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tself.touchMove = false;\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, column);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tself.bindTouchEvents(column);\n\t\t}\n\t\t\n\t\tcolumn.modules.moveColumn = config;\n\t}\n\t\n\tbindTouchEvents(column){\n\t\tvar colEl = column.getElement(),\n\t\tstartXMove = false, //shifting center position of the cell\n\t\tnextCol, prevCol, nextColWidth, prevColWidth, nextColWidthLast, prevColWidthLast;\n\t\t\n\t\tcolEl.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextCol = column.nextColumn();\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth()/2 : 0;\n\t\t\t\tprevCol = column.prevColumn();\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth()/2 : 0;\n\t\t\t\tnextColWidthLast = 0;\n\t\t\t\tprevColWidthLast = 0;\n\t\t\t\tstartXMove = false;\n\t\t\t\t\n\t\t\t\tthis.startMove(e, column);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchmove\", (e) => {\n\t\t\tvar diff, moveToCol;\n\t\t\t\n\t\t\tif(this.moving){\n\t\t\t\tthis.moveHover(e);\n\t\t\t\t\n\t\t\t\tif(!startXMove){\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\n\t\t\t\t\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextCol && diff - nextColWidthLast > nextColWidth){\n\t\t\t\t\t\tmoveToCol = nextCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tif(prevCol && -diff - prevColWidthLast >  prevColWidth){\n\t\t\t\t\t\tmoveToCol = prevCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(moveToCol){\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\n\t\t\t\t\tnextColWidthLast = nextColWidth;\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\n\t\t\t\t\tprevColWidthLast = prevColWidth;\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tstartMove(e, column){\n\t\tvar element = column.getElement(),\n\t\theaderElement = this.table.columnManager.getContentsElement(),\n\t\theadersElement = this.table.columnManager.getHeadersElement();\n\t\t\n\t\tthis.moving = column;\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\n\t\t\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\n\t\t\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\telement.parentNode.removeChild(element);\n\t\t\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\t\t\n\t\theaderElement.appendChild(this.hoverElement);\n\t\t\n\t\tthis.hoverElement.style.left = \"0\";\n\t\tthis.hoverElement.style.bottom = (headerElement.clientHeight - headersElement.offsetHeight) + \"px\";\n\t\t\n\t\tif(!this.touchMove){\n\t\t\tthis._bindMouseMove();\n\t\t\t\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\t\t}\n\t\t\n\t\tthis.moveHover(e);\n\t}\n\t\n\t_bindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_unbindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tmoveColumn(column, after){\n\t\tvar movingCells = this.moving.getCells();\n\t\t\n\t\tthis.toCol = column;\n\t\tthis.toColAfter = after;\n\t\t\n\t\tif(after){\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n\t\t\t\t}\n\t\t\t});\n\t\t}else {\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tendMove(e){\n\t\tif(e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\t\t\t\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\t\t\t\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(this.toCol){\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n\t\t\t}\n\t\t\t\n\t\t\tthis.moving = false;\n\t\t\tthis.toCol = false;\n\t\t\tthis.toColAfter = false;\n\t\t\t\n\t\t\tif(!this.touchMove){\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmoveHover(e){\n\t\tvar columnHolder = this.table.columnManager.getContentsElement(),\n\t\tscrollLeft = columnHolder.scrollLeft,\n\t\txPos = ((this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left) + scrollLeft,\n\t\tscrollPos;\n\t\t\n\t\tthis.hoverElement.style.left = (xPos - this.startX) + \"px\";\n\t\t\n\t\tif(xPos - scrollLeft < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.max(0,scrollLeft-5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft+5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nMoveColumns.moduleName = \"moveColumn\";\n\nclass MoveRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating row header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving row\n\t\tthis.toRow = false; //destination row\n\t\tthis.toRowAfter = false; //position of moving row relative to the destination row\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\n\t\tthis.startY = 0; //starting Y position within header element\n\t\tthis.startX = 0; //starting X position within header element\n\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\tthis.tableRowDropEvent = false;\n\n\t\tthis.touchMove = false;\n\n\t\tthis.connection = false;\n\t\tthis.connectionSelectorsTables = false;\n\t\tthis.connectionSelectorsElements = false;\n\t\tthis.connectionElements = [];\n\t\tthis.connections = [];\n\n\t\tthis.connectedTable = false;\n\t\tthis.connectedRow = false;\n\n\t\tthis.registerTableOption(\"movableRows\", false); //enable movable rows\n\t\tthis.registerTableOption(\"movableRowsConnectedTables\", false); //tables for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsConnectedElements\", false); //other elements for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsSender\", false);\n\t\tthis.registerTableOption(\"movableRowsReceiver\", \"insert\");\n\n\t\tthis.registerColumnOption(\"rowHandle\");\n\t}\n\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.classList.add(\"tabulator-row-placeholder\");\n\n\t\treturn el;\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.movableRows){\n\t\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n\t\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n\n\t\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n\n\t\t\tthis.subscribe(\"cell-init\", this.initializeCell.bind(this));\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeGroupHeader(group){\n\t\tvar self = this,\n\t\tconfig = {};\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, group);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl;\n\n\t\t\tif(((e.pageY - Helpers.elOffset(group.element).top) + self.table.rowManager.element.scrollTop) > (group.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== group || !self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(group, true);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(self.toRow !== group || self.toRowAfter){\n\t\t\t\t\trowEl = group.getElement();\n\t\t\t\t\tif(rowEl.previousSibling){\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\t\tself.moveRow(group, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tgroup.modules.moveRow = config;\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\trowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(((e.pageY - Helpers.elOffset(rowEl).top) + self.table.rowManager.element.scrollTop) > (row.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== row || !self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(row, true);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(self.toRow !== row || self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\tself.moveRow(row, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\n\t\tif(!this.hasHandle){\n\n\t\t\trowEl = row.getElement();\n\n\t\t\trowEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trowEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(row, row.getElement());\n\t\t}\n\n\t\trow.modules.moveRow = config;\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tthis.hasHandle = true;\n\t\t}\n\t}\n\n\tinitializeCell(cell){\n\t\tif(cell.column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tvar self = this,\n\t\t\tcellEl = cell.getElement(true);\n\n\t\t\tcellEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, cell.row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcellEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(cell.row, cellEl);\n\t\t}\n\t}\n\n\tbindTouchEvents(row, element){\n\t\tvar startYMove = false, //shifting center position of the cell\n\t\tnextRow, prevRow, nextRowHeight, prevRowHeight, nextRowHeightLast, prevRowHeightLast;\n\n\t\telement.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tnextRow = row.nextRow();\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight()/2 : 0;\n\t\t\t\tprevRow = row.prevRow();\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight()/2 : 0;\n\t\t\t\tnextRowHeightLast = 0;\n\t\t\t\tprevRowHeightLast = 0;\n\t\t\t\tstartYMove = false;\n\n\t\t\t\tthis.startMove(e, row);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\tthis.moving, this.toRow, this.toRowAfter;\n\t\telement.addEventListener(\"touchmove\", (e) => {\n\n\t\t\tvar diff, moveToRow;\n\n\t\t\tif(this.moving){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthis.moveHover(e);\n\n\t\t\t\tif(!startYMove){\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t}\n\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\n\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextRow && diff - nextRowHeightLast > nextRowHeight){\n\t\t\t\t\t\tmoveToRow = nextRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tif(prevRow && -diff - prevRowHeightLast >  prevRowHeight){\n\t\t\t\t\t\tmoveToRow = prevRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(moveToRow){\n\t\t\t\t\tnextRow = moveToRow.nextRow();\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\t\tprevRow = moveToRow.prevRow();\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t\tthis.touchMove = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t_bindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\t_unbindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\tstartMove(e, row){\n\t\tvar element = row.getElement();\n\n\t\tthis.setStartPosition(e, row);\n\n\t\tthis.moving = row;\n\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\n\n\t\tif(!this.connection){\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\t\telement.parentNode.removeChild(element);\n\t\t}else {\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\n\t\t\tthis.connectToTables(row);\n\t\t}\n\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\t\tif(this.connection){\n\t\t\tdocument.body.appendChild(this.hoverElement);\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\n\t\t}else {\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\n\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\n\t\t\tthis._bindMouseMove();\n\t\t}\n\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\n\t\tthis.dispatchExternal(\"rowMoving\", row.getComponent());\n\n\t\tthis.moveHover(e);\n\t}\n\n\tsetStartPosition(e, row){\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n\t\tpageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n\t\telement, position;\n\n\t\telement = row.getElement();\n\t\tif(this.connection){\n\t\t\tposition = element.getBoundingClientRect();\n\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\n\t\t}else {\n\t\t\tthis.startY = (pageY - element.getBoundingClientRect().top);\n\t\t}\n\t}\n\n\tendMove(e){\n\t\tif(!e || e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\n\t\t\tif(!this.connection){\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\t}\n\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif(this.toRow){\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n\t\t\t}else {\n\t\t\t\tthis.dispatchExternal(\"rowMoveCancelled\", this.moving.getComponent());\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toRow = false;\n\t\t\tthis.toRowAfter = false;\n\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\n\t\t\tif(this.connection){\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\n\t\t\t\tthis.disconnectFromTables();\n\t\t\t}\n\t\t}\n\t}\n\n\tmoveRow(row, after){\n\t\tthis.toRow = row;\n\t\tthis.toRowAfter = after;\n\t}\n\n\tmoveHover(e){\n\t\tif(this.connection){\n\t\t\tthis.moveHoverConnections.call(this, e);\n\t\t}else {\n\t\t\tthis.moveHoverTable.call(this, e);\n\t\t}\n\t}\n\n\tmoveHoverTable(e){\n\t\tvar rowHolder = this.table.rowManager.getElement(),\n\t\tscrollTop = rowHolder.scrollTop,\n\t\tyPos = ((this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top) + scrollTop;\n\t\t\n\t\tthis.hoverElement.style.top = Math.min(yPos - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + \"px\";\n\t}\n\n\tmoveHoverConnections(e){\n\t\tthis.hoverElement.style.left = (this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX)) + \"px\";\n\t\tthis.hoverElement.style.top = (this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY)) + \"px\";\n\t}\n\n\telementRowDrop(e, element, row){\n\t\tthis.dispatchExternal(\"movableRowsElementDrop\", e, element, row ? row.getComponent() : false);\n\t}\n\n\t//establish connection with other tables\n\tconnectToTables(row){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStart\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n\t\t\t\trow:row,\n\t\t\t});\n\t\t}\n\n\t\tif(this.connectionSelectorsElements){\n\n\t\t\tthis.connectionElements = [];\n\n\t\t\tif(!Array.isArray(this.connectionSelectorsElements)){\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\n\t\t\t}\n\n\t\t\tthis.connectionSelectorsElements.forEach((query) => {\n\t\t\t\tif(typeof query === \"string\"){\n\t\t\t\t\tthis.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n\t\t\t\t}else {\n\t\t\t\t\tthis.connectionElements.push(query);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.connectionElements.forEach((element) => {\n\t\t\t\tvar dropEvent = (e) => {\n\t\t\t\t\tthis.elementRowDrop(e, element, this.moving);\n\t\t\t\t};\n\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\n\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\n\t\t\t});\n\t\t}\n\t}\n\n\t//disconnect from other tables\n\tdisconnectFromTables(){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStop\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n\t\t}\n\n\t\tthis.connectionElements.forEach((element) => {\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n\t\t\tdelete element.tabulatorElementDropEvent;\n\t\t});\n\t}\n\n\t//accept incomming connection\n\tconnect(table, row){\n\t\tif(!this.connectedTable){\n\t\t\tthis.connectedTable = table;\n\t\t\tthis.connectedRow = row;\n\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.tableRowDropEvent = this.tableRowDrop.bind(this);\n\n\t\t\tthis.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStart\", row, table);\n\n\t\t\treturn true;\n\t\t}else {\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//close incoming connection\n\tdisconnect(table){\n\t\tif(table === this.connectedTable){\n\t\t\tthis.connectedTable = false;\n\t\t\tthis.connectedRow = false;\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStop\", table);\n\t\t}else {\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\");\n\t\t}\n\t}\n\n\tdropComplete(table, row, success){\n\t\tvar sender = false;\n\n\t\tif(success){\n\n\t\t\tswitch(typeof this.table.options.movableRowsSender){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tsender = this.senders[this.table.options.movableRowsSender];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tsender = this.table.options.movableRowsSender;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(sender){\n\t\t\t\tsender.call(this, this.moving ? this.moving.getComponent() : undefined, row ? row.getComponent() : undefined, table);\n\t\t\t}else {\n\t\t\t\tif(this.table.options.movableRowsSender){\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}else {\n\t\t\tthis.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}\n\n\t\tthis.endMove();\n\t}\n\n\ttableRowDrop(e, row){\n\t\tvar receiver = false,\n\t\tsuccess = false;\n\n\t\te.stopImmediatePropagation();\n\n\t\tswitch(typeof this.table.options.movableRowsReceiver){\n\t\t\tcase \"string\":\n\t\t\t\treceiver = this.receivers[this.table.options.movableRowsReceiver];\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\treceiver = this.table.options.movableRowsReceiver;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(receiver){\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else {\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n\t\t}\n\n\t\tif(success){\n\t\t\tthis.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else {\n\t\t\tthis.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}\n\n\t\tthis.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n\t\t\trow:row,\n\t\t\tsuccess:success,\n\t\t});\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"connect\":\n\t\t\t\treturn this.connect(table, data.row);\n\n\t\t\tcase \"disconnect\":\n\t\t\t\treturn this.disconnect(table);\n\n\t\t\tcase \"dropcomplete\":\n\t\t\t\treturn this.dropComplete(table, data.row, data.success);\n\t\t}\n\t}\n}\n\nMoveRows.prototype.receivers = {\n\tinsert:function(fromRow, toRow, fromTable){\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\treturn true;\n\t},\n\n\tadd:function(fromRow, toRow, fromTable){\n\t\tthis.table.addRow(fromRow.getData());\n\t\treturn true;\n\t},\n\n\tupdate:function(fromRow, toRow, fromTable){\n\t\tif(toRow){\n\t\t\ttoRow.update(fromRow.getData());\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\treplace:function(fromRow, toRow, fromTable){\n\t\tif(toRow){\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\t\ttoRow.delete();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n};\n\nMoveRows.prototype.senders = {\n\tdelete:function(fromRow, toRow, toTable){\n\t\tfromRow.delete();\n\t}\n};\n\nMoveRows.moduleName = \"moveRow\";\n\nvar defaultMutators = {};\n\nclass Mutator extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of mutation types\n\t\tthis.enabled = true;\n\n\t\tthis.registerColumnOption(\"mutator\");\n\t\tthis.registerColumnOption(\"mutatorParams\");\n\t\tthis.registerColumnOption(\"mutatorData\");\n\t\tthis.registerColumnOption(\"mutatorDataParams\");\n\t\tthis.registerColumnOption(\"mutatorEdit\");\n\t\tthis.registerColumnOption(\"mutatorEditParams\");\n\t\tthis.registerColumnOption(\"mutatorClipboard\");\n\t\tthis.registerColumnOption(\"mutatorClipboardParams\");\n\t\tthis.registerColumnOption(\"mutateLink\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"cell-value-changing\", this.transformCell.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.mutateLink.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this));\n\t\tthis.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\n\t}\n\n\trowDataChanged(row, tempData, updatedData){\n\t\treturn this.transformRow(tempData, \"data\", updatedData);\n\t}\n\n\t//initialize column mutator\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\tmutator;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\tmutator = this.lookupMutator(column.definition[key]);\n\n\t\t\t\tif(mutator){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\tmutator:mutator,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.mutate = config;\n\t\t}\n\t}\n\n\tlookupMutator(value){\n\t\tvar mutator = false;\n\n\t\t//set column mutator\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tif(Mutator.mutators[value]){\n\t\t\t\t\tmutator = Mutator.mutators[value];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tmutator = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn mutator;\n\t}\n\n\t//apply mutator to row\n\ttransformRow(data, type, updatedData){\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\tvalue;\n\n\t\tif(this.enabled){\n\n\t\t\tthis.table.columnManager.traverse((column) => {\n\t\t\t\tvar mutator, params, component;\n\n\t\t\t\tif(column.modules.mutate){\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n\t\t\t\t\tif(mutator){\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n\t\t\t\t\t\tif((type == \"data\" && !updatedData)|| typeof value !== \"undefined\"){\n\t\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//apply mutator to new cell value\n\ttransformCell(cell, value){\n\t\tif(cell.column.modules.mutate){\n\t\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n\t\t\ttempData = {};\n\n\t\t\tif(mutator){\n\t\t\t\ttempData = Object.assign(tempData, cell.row.getData());\n\t\t\t\tcell.column.setFieldValue(tempData, value);\n\t\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tmutateLink(cell){\n\t\tvar links = cell.column.definition.mutateLink;\n\n\t\tif(links){\n\t\t\tif(!Array.isArray(links)){\n\t\t\t\tlinks = [links];\n\t\t\t}\n\n\t\t\tlinks.forEach((link) => {\n\t\t\t\tvar linkCell = cell.row.getCell(link);\n\n\t\t\t\tif(linkCell){\n\t\t\t\t\tlinkCell.setValue(linkCell.getValue(), true, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tenable(){\n\t\tthis.enabled = true;\n\t}\n\n\tdisable(){\n\t\tthis.enabled = false;\n\t}\n}\n\nMutator.moduleName = \"mutator\";\n\n//load defaults\nMutator.mutators = defaultMutators;\n\nfunction rows(pageSize, currentRow, currentPage, totalRows, totalPages){\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|rows\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\n\tif(totalRows){\n\t\tvalueEl.innerHTML = \" \" + currentRow + \"-\" + Math.min((currentRow + pageSize - 1), totalRows) + \" \";\n\t\t\n\t\ttotalEl.innerHTML = \" \" + totalRows + \" \";\n\t\t\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(ofEl);\n\t\tel.appendChild(totalEl);\n\t\tel.appendChild(rowsEl);\n\t}else {\n\t\tvalueEl.innerHTML = \" 0 \";\n\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(rowsEl);\n\t}\n\t\n\treturn el;\n}\n\nfunction pages(pageSize, currentRow, currentPage, totalRows, totalPages){\n\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\t\n\tvalueEl.innerHTML = \" \" + currentPage + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\t\n\ttotalEl.innerHTML = \" \" + totalPages + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|pages\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\t\n\tel.appendChild(showingEl);\n\tel.appendChild(valueEl);\n\tel.appendChild(ofEl);\n\tel.appendChild(totalEl);\n\tel.appendChild(rowsEl);\n\t\n\treturn el;\n}\n\nvar defaultPageCounters = {\n\trows:rows,\n\tpages:pages,\n};\n\nclass Page extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.mode = \"local\";\n\t\tthis.progressiveLoad = false;\n\t\t\n\t\tthis.element = null;\n\t\tthis.pageCounterElement = null;\n\t\tthis.pageCounter = null;\n\t\t\n\t\tthis.size = 0;\n\t\tthis.page = 1;\n\t\tthis.count = 5;\n\t\tthis.max = 1;\n\n\t\tthis.remoteRowCountEstimate = null;\n\t\t\n\t\tthis.initialLoad = true;\n\t\tthis.dataChanging = false; //flag to check if data is being changed by this module\n\t\t\n\t\tthis.pageSizes = [];\n\t\t\n\t\tthis.registerTableOption(\"pagination\", false); //set pagination type\n\t\tthis.registerTableOption(\"paginationMode\", \"local\"); //local or remote pagination\n\t\tthis.registerTableOption(\"paginationSize\", false); //set number of rows to a page\n\t\tthis.registerTableOption(\"paginationInitialPage\", 1); //initial page to show on load\n\t\tthis.registerTableOption(\"paginationCounter\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationCounterElement\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationButtonCount\", 5);  // set count of page button\n\t\tthis.registerTableOption(\"paginationSizeSelector\", false); //add pagination size selector element\n\t\tthis.registerTableOption(\"paginationElement\", false); //element to hold pagination numbers\n\t\t// this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\n\t\t// this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\n\t\tthis.registerTableOption(\"paginationAddRow\", \"page\"); //add rows on table or page\n\t\t\n\t\tthis.registerTableOption(\"progressiveLoad\", false); //progressive loading\n\t\tthis.registerTableOption(\"progressiveLoadDelay\", 0); //delay between requests\n\t\tthis.registerTableOption(\"progressiveLoadScrollMargin\", 0); //margin before scroll begins\n\t\t\n\t\tthis.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this));\n\t\tthis.registerTableFunction(\"setPage\", this.setPage.bind(this));\n\t\tthis.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this));\n\t\tthis.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this));\n\t\tthis.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this));\n\t\tthis.registerTableFunction(\"previousPage\", this.previousPage.bind(this));\n\t\tthis.registerTableFunction(\"nextPage\", this.nextPage.bind(this));\n\t\tthis.registerTableFunction(\"getPage\", this.getPage.bind(this));\n\t\tthis.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"footer-redraw\", this.footerRedraw.bind(this));\n\n\t\t\tif(this.table.options.paginationAddRow == \"page\"){\n\t\t\t\tthis.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.paginationMode === \"remote\"){\n\t\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad){\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40);\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 50);\n\t\t\t\n\t\t\tthis.createElements();\n\t\t\tthis.initializePageCounter();\n\t\t\tthis.initializePaginator();\n\t\t}else if(this.table.options.progressiveLoad){\n\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\t\n\t\t\tthis.initializeProgressive(this.table.options.progressiveLoad);\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad === \"scroll\"){\n\t\t\t\tthis.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowAddingPosition(row, top){\n\t\tvar rowManager = this.table.rowManager,\n\t\tdisplayRows = rowManager.getDisplayRows(),\n\t\tindex;\n\t\t\n\t\tif(top){\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[0];\n\t\t\t}else {\n\t\t\t\tif(rowManager.activeRows.length){\n\t\t\t\t\tindex = rowManager.activeRows[rowManager.activeRows.length-1];\n\t\t\t\t\ttop = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\tif(displayRows.length){\n\t\t\t\tindex = displayRows[displayRows.length - 1];\n\t\t\t\ttop = displayRows.length < this.size ? false : true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn {index, top};\n\t}\n\t\n\tcalculatePageSizes(){\n\t\tvar testElRow, testElCell;\n\t\t\n\t\tif(this.table.options.paginationSize){\n\t\t\tthis.size = this.table.options.paginationSize;\n\t\t}else {\n\t\t\ttestElRow = document.createElement(\"div\");\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\n\t\t\ttestElRow.style.visibility = \"hidden\";\n\t\t\t\n\t\t\ttestElCell = document.createElement(\"div\");\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\n\t\t\t\n\t\t\ttestElRow.appendChild(testElCell);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().appendChild(testElRow);\n\t\t\t\n\t\t\tthis.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().removeChild(testElRow);\n\t\t}\n\n\t\tthis.dispatchExternal(\"pageSizeChanged\", this.size);\n\t\t\n\t\tthis.generatePageSizeSelectList();\n\t}\n\t\n\tinitialLoadComplete(){\n\t\tthis.initialLoad = false;\n\t}\n\t\n\tremotePageParams(data, config, silent, params){\n\t\tif(!this.initialLoad){\n\t\t\tif((this.progressiveLoad && !silent) || (!this.progressiveLoad && !this.dataChanging)){\n\t\t\t\tthis.reset(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//configure request params\n\t\tparams.page = this.page;\n\t\t\n\t\t//set page size if defined\n\t\tif(this.size){\n\t\t\tparams.size = this.size;\n\t\t}\n\t\t\n\t\treturn params;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tuserSetPageToRow(row){\n\t\tif(this.table.options.pagination){\n\t\t\trow = this.rowManager.findRow(row);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\treturn this.setPageToRow(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Promise.reject();\n\t}\n\t\n\tuserSetPageSize(size){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.setPageSize(size);\n\t\t\treturn this.setPage(1);\n\t\t}else {\n\t\t\treturn false;\n\t\t}\n\t}\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tscrollVertical(top, dir){\n\t\tvar element, diff, margin;\n\t\tif(!dir && !this.table.dataLoader.loading){\n\t\t\telement = this.table.rowManager.getElement();\n\t\t\tdiff = element.scrollHeight - element.clientHeight - top;\n\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (element.clientHeight * 2);\n\t\t\t\n\t\t\tif(diff < margin){\n\t\t\t\tthis.nextPage()\n\t\t\t\t\t.catch(() => {}); //consume the exception thrown when on the last page\n\t\t\t}\n\t\t}\n\t}\n\t\n\trestOnRenderBefore(rows, renderInPosition){\n\t\tif(!renderInPosition){\n\t\t\tif(this.mode === \"local\"){\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(){\n\t\tthis.refreshData(true, \"all\");\n\t}\n\t\n\tcreateElements(){\n\t\tvar button;\n\t\t\n\t\tthis.element = document.createElement(\"span\");\n\t\tthis.element.classList.add(\"tabulator-paginator\");\n\t\t\n\t\tthis.pagesElement = document.createElement(\"span\");\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\n\t\t\n\t\tbutton = document.createElement(\"button\");\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\tbutton.setAttribute(\"aria-label\", \"\");\n\t\tbutton.setAttribute(\"title\", \"\");\n\t\t\n\t\tthis.firstBut = button.cloneNode(true);\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\n\t\t\n\t\tthis.prevBut = button.cloneNode(true);\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\n\t\t\n\t\tthis.nextBut = button.cloneNode(true);\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\n\t\t\n\t\tthis.lastBut = button.cloneNode(true);\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\n\t\t\n\t\tif(this.table.options.paginationSizeSelector){\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\n\t\t}\n\t}\n\t\n\tgeneratePageSizeSelectList(){\n\t\tvar pageSizes = [];\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t\n\t\t\tif(Array.isArray(this.table.options.paginationSizeSelector)){\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\n\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes.unshift(this.size);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes = [];\n\t\t\t\t\t\n\t\t\t\t\tfor (let i = 1; i < 5; i++){\n\t\t\t\t\t\tpageSizes.push(this.size * i);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t}else {\n\t\t\t\t\tpageSizes = this.pageSizes;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\twhile(this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n\t\t\t\n\t\t\tpageSizes.forEach((item) => {\n\t\t\t\tvar itemEl = document.createElement(\"option\");\n\t\t\t\titemEl.value = item;\n\t\t\t\t\n\t\t\t\tif(item === true){\n\t\t\t\t\tthis.langBind(\"pagination|all\", function(value){\n\t\t\t\t\t\titemEl.innerHTML = value;\n\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\titemEl.innerHTML = item;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.appendChild(itemEl);\n\t\t\t});\n\t\t\t\n\t\t\tthis.pageSizeSelect.value = this.size;\n\t\t}\n\t}\n\t\n\tinitializePageCounter(){\n\t\tvar counter = this.table.options.paginationCounter,\n\t\tpageCounter = null;\n\t\t\n\t\tif(counter){\n\t\t\tif(typeof counter === \"function\"){\n\t\t\t\tpageCounter = counter;\n\t\t\t}else {\n\t\t\t\tpageCounter = Page.pageCounters[counter];\n\t\t\t}\n\t\t\t\n\t\t\tif(pageCounter){\n\t\t\t\tthis.pageCounter = pageCounter;\n\t\t\t\t\n\t\t\t\tthis.pageCounterElement = document.createElement(\"span\");\n\t\t\t\tthis.pageCounterElement.classList.add(\"tabulator-page-counter\");\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Pagination Error - No such page counter found: \", counter);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup pagination\n\tinitializePaginator(hidden){\n\t\tvar pageSelectLabel, paginationCounterHolder;\n\t\t\n\t\tif(!hidden){\n\t\t\t//build pagination element\n\t\t\t\n\t\t\t//bind localizations\n\t\t\tthis.langBind(\"pagination|first\", (value) => {\n\t\t\t\tthis.firstBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|first_title\", (value) => {\n\t\t\t\tthis.firstBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.firstBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev\", (value) => {\n\t\t\t\tthis.prevBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev_title\", (value) => {\n\t\t\t\tthis.prevBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.prevBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next\", (value) => {\n\t\t\t\tthis.nextBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next_title\", (value) => {\n\t\t\t\tthis.nextBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.nextBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last\", (value) => {\n\t\t\t\tthis.lastBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last_title\", (value) => {\n\t\t\t\tthis.lastBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.lastBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\t//click bindings\n\t\t\tthis.firstBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(1);\n\t\t\t});\n\t\t\t\n\t\t\tthis.prevBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.previousPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.nextBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.nextPage();\n\t\t\t});\n\t\t\t\n\t\t\tthis.lastBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(this.max);\n\t\t\t});\n\t\t\t\n\t\t\tif(this.table.options.paginationElement){\n\t\t\t\tthis.element = this.table.options.paginationElement;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.pageSizeSelect){\n\t\t\t\tpageSelectLabel = document.createElement(\"label\");\n\t\t\t\t\n\t\t\t\tthis.langBind(\"pagination|page_size\", (value) => {\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"aria-label\", value);\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"title\", value);\n\t\t\t\t\tpageSelectLabel.innerHTML = value;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.element.appendChild(pageSelectLabel);\n\t\t\t\tthis.element.appendChild(this.pageSizeSelect);\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.addEventListener(\"change\", (e) => {\n\t\t\t\t\tthis.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\n\t\t\t\t\tthis.setPage(1);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//append to DOM\n\t\t\tthis.element.appendChild(this.firstBut);\n\t\t\tthis.element.appendChild(this.prevBut);\n\t\t\tthis.element.appendChild(this.pagesElement);\n\t\t\tthis.element.appendChild(this.nextBut);\n\t\t\tthis.element.appendChild(this.lastBut);\n\t\t\t\n\t\t\tif(!this.table.options.paginationElement){\n\t\t\t\tif(this.table.options.paginationCounter){\n\n\t\t\t\t\tif(this.table.options.paginationCounterElement){\n\t\t\t\t\t\tif(this.table.options.paginationCounterElement instanceof HTMLElement){\n\t\t\t\t\t\t\tthis.table.options.paginationCounterElement.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t}else if(typeof this.table.options.paginationCounterElement === \"string\"){\n\t\t\t\t\t\t\tpaginationCounterHolder = document.querySelector(this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(paginationCounterHolder){\n\t\t\t\t\t\t\t\tpaginationCounterHolder.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tconsole.warn(\"Pagination Error - Unable to find element matching paginationCounterElement selector:\", this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.footerAppend(this.pageCounterElement);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.footerAppend(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.page = this.table.options.paginationInitialPage;\n\t\t\tthis.count = this.table.options.paginationButtonCount;\n\t\t}\n\t\t\n\t\t//set default values\n\t\tthis.mode = this.table.options.paginationMode;\n\t}\n\t\n\tinitializeProgressive(mode){\n\t\tthis.initializePaginator(true);\n\t\tthis.mode = \"progressive_\" + mode;\n\t\tthis.progressiveLoad = true;\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"page-changed\");\n\t}\n\t\n\t//calculate maximum page from number of rows\n\tsetMaxRows(rowCount){\n\t\tif(!rowCount){\n\t\t\tthis.max = 1;\n\t\t}else {\n\t\t\tthis.max = this.size === true ?  1 : Math.ceil(rowCount/this.size);\n\t\t}\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t}\n\t}\n\t\n\t//reset to first page without triggering action\n\treset(force){\n\t\tif(!this.initialLoad){\n\t\t\tif(this.mode == \"local\" || force){\n\t\t\t\tthis.page = 1;\n\t\t\t\tthis.trackChanges();\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//set the maximum page\n\tsetMaxPage(max){\n\t\t\n\t\tmax = parseInt(max);\n\t\t\n\t\tthis.max = max || 1;\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t\tthis.trigger();\n\t\t}\n\t}\n\t\n\t//set current page number\n\tsetPage(page){\n\t\tswitch(page){\n\t\t\tcase \"first\":\n\t\t\t\treturn this.setPage(1);\n\t\n\t\t\tcase \"prev\":\n\t\t\t\treturn this.previousPage();\n\t\t\t\n\t\t\tcase \"next\":\n\t\t\t\treturn this.nextPage();\n\t\t\t\n\t\t\tcase \"last\":\n\t\t\t\treturn this.setPage(this.max);\n\t\t}\n\t\t\n\t\tpage = parseInt(page);\n\t\t\n\t\tif((page > 0 && page <= this.max) || this.mode !== \"local\"){\n\t\t\tthis.page = page;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t}else {\n\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageToRow(row){\n\t\tvar rows = this.displayRows(-1);\n\t\tvar index = rows.indexOf(row);\n\t\n\t\tif(index > -1){\n\t\t\tvar page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\n\t\t\t\n\t\t\treturn this.setPage(page);\n\t\t}else {\n\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageSize(size){\n\t\tif(size !== true){\n\t\t\tsize = parseInt(size);\n\t\t}\n\n\t\tif(size > 0){\n\t\t\tthis.size = size;\n\t\t\tthis.dispatchExternal(\"pageSizeChanged\", size);\n\t\t}\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t// this.pageSizeSelect.value = size;\n\t\t\tthis.generatePageSizeSelectList();\n\t\t}\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\t_setPageCounter(totalRows, size, currentRow){\n\t\tvar content;\n\t\t\n\t\tif(this.pageCounter){\n\n\t\t\tif(this.mode === \"remote\"){\n\t\t\t\tsize = this.size;\n\t\t\t\tcurrentRow = ((this.page - 1) * this.size) + 1;\n\t\t\t\ttotalRows = this.remoteRowCountEstimate;\n\t\t\t}\n\n\t\t\tcontent = this.pageCounter.call(this, size, currentRow, this.page, totalRows, this.max);\n\t\t\t\n\t\t\tswitch(typeof content){\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif(content instanceof Node){\n\t\t\t\t\t\n\t\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\t\twhile(this.pageCounterElement.firstChild) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.pageCounterElement.appendChild(content);\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\t\n\t\t\t\t\t\tif(content != null){\n\t\t\t\t\t\t\tconsole.warn(\"Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:\", content);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"undefined\":\n\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.pageCounterElement.innerHTML = content;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup the pagination buttons\n\t_setPageButtons(){\n\t\tlet leftSize = Math.floor((this.count-1) / 2);\n\t\tlet rightSize = Math.ceil((this.count-1) / 2);\n\t\tlet min = this.max - this.page + leftSize + 1 < this.count ? this.max-this.count+1: Math.max(this.page-leftSize,1);\n\t\tlet max = this.page <= rightSize? Math.min(this.count, this.max) :Math.min(this.page+rightSize, this.max);\n\t\t\n\t\twhile(this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\n\t\t\n\t\tif(this.page == 1){\n\t\t\tthis.firstBut.disabled = true;\n\t\t\tthis.prevBut.disabled = true;\n\t\t}else {\n\t\t\tthis.firstBut.disabled = false;\n\t\t\tthis.prevBut.disabled = false;\n\t\t}\n\t\t\n\t\tif(this.page == this.max){\n\t\t\tthis.lastBut.disabled = true;\n\t\t\tthis.nextBut.disabled = true;\n\t\t}else {\n\t\t\tthis.lastBut.disabled = false;\n\t\t\tthis.nextBut.disabled = false;\n\t\t}\n\t\t\n\t\tfor(let i = min; i <= max; i++){\n\t\t\tif(i>0 && i <= this.max){\n\t\t\t\tthis.pagesElement.appendChild(this._generatePageButton(i));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.footerRedraw();\n\t}\n\t\n\t_generatePageButton(page){\n\t\tvar button = document.createElement(\"button\");\n\t\t\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tif(page == this.page){\n\t\t\tbutton.classList.add(\"active\");\n\t\t}\n\t\t\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\t\n\t\tthis.langBind(\"pagination|page_title\", (value) => {\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\n\t\t});\n\t\t\n\t\tbutton.setAttribute(\"data-page\", page);\n\t\tbutton.textContent = page;\n\t\t\n\t\tbutton.addEventListener(\"click\", (e) => {\n\t\t\tthis.setPage(page);\n\t\t});\n\t\t\n\t\treturn button;\n\t}\n\t\n\t//previous page\n\tpreviousPage(){\n\t\tif(this.page > 1){\n\t\t\tthis.page--;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else {\n\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//next page\n\tnextPage(){\n\t\tif(this.page < this.max){\n\t\t\tthis.page++;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else {\n\t\t\tif(!this.progressiveLoad){\n\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\n\t\t\t}\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//return current page number\n\tgetPage(){\n\t\treturn this.page;\n\t}\n\t\n\t//return max page number\n\tgetPageMax(){\n\t\treturn this.max;\n\t}\n\t\n\tgetPageSize(size){\n\t\treturn this.size;\n\t}\n\t\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\t\n\t//return appropriate rows for current page\n\tgetRows(data){\n\t\tvar actualRowPageSize = 0,\n\t\toutput, start, end, actualStartRow;\n\n\t\tvar actualRows = data.filter((row) => {\n\t\t\treturn row.type === \"row\";\n\t\t});\n\t\t\n\t\tif(this.mode == \"local\"){\n\t\t\toutput = [];\n\t\t\t\n\t\t\tthis.setMaxRows(data.length);\n\t\t\t\n\t\t\tif(this.size === true){\n\t\t\t\tstart = 0;\n\t\t\t\tend = data.length;\n\t\t\t}else {\n\t\t\t\tstart = this.size * (this.page - 1);\n\t\t\t\tend = start + parseInt(this.size);\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageButtons();\n\t\t\t\n\t\t\tfor(let i = start; i < end; i++){\n\t\t\t\tlet row = data[i];\n\n\t\t\t\tif(row){\n\t\t\t\t\toutput.push(row);\n\n\t\t\t\t\tif(row.type === \"row\"){\n\t\t\t\t\t\tif(!actualStartRow){\n\t\t\t\t\t\t\tactualStartRow = row;\n\t\t\t\t\t\t}\t\n\n\t\t\t\t\t\tactualRowPageSize++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageCounter(actualRows.length, actualRowPageSize, actualStartRow ? (actualRows.indexOf(actualStartRow) + 1) : 0);\n\t\t\t\n\t\t\treturn output;\n\t\t}else {\n\t\t\tthis._setPageButtons();\n\t\t\tthis._setPageCounter(actualRows.length);\n\t\t\t\n\t\t\treturn data.slice(0);\n\t\t}\n\t}\n\t\n\ttrigger(){\n\t\tvar left;\n\t\t\n\t\tswitch(this.mode){\n\t\t\tcase \"local\":\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\n\t\t\t\n\t\t\t\tthis.refreshData();\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\", this.getPage());\n\t\t\t\n\t\t\t\treturn Promise.resolve();\n\t\t\t\n\t\t\tcase \"remote\":\n\t\t\t\tthis.dataChanging = true;\n\t\t\t\treturn this.reloadData(null)\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.dataChanging = false;\n\t\t\t\t\t});\n\t\t\t\n\t\t\tcase \"progressive_load\":\n\t\t\tcase \"progressive_scroll\":\n\t\t\t\treturn this.reloadData(null, true);\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", this.mode);\n\t\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t_parseRemoteData(data){\n\t\tvar margin;\n\t\t\n\t\tif(typeof data.last_page === \"undefined\"){\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\");\n\t\t}\n\t\t\n\t\tif(data.data){\n\t\t\tthis.max = parseInt(data.last_page) || 1;\n\n\t\t\tthis.remoteRowCountEstimate = typeof data.last_row !== \"undefined\" ? data.last_row : (data.last_page * this.size - (this.page == data.last_page ? (this.size - data.data.length) : 0));\n\t\t\t\n\t\t\tif(this.progressiveLoad){\n\t\t\t\tswitch(this.mode){\n\t\t\t\t\tcase \"progressive_load\":\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page == 1){\n\t\t\t\t\t\t\tthis.table.rowManager.setData(data.data, false, this.page == 1);\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tthis.table.rowManager.addRows(data.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t}, this.table.options.progressiveLoadDelay);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\t\tdata = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data);\n\t\t\t\t\t\n\t\t\t\t\t\tthis.table.rowManager.setData(data, this.page !== 1, this.page == 1);\n\t\t\t\t\t\n\t\t\t\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (this.table.rowManager.element.clientHeight * 2);\n\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.rowManager.element.scrollHeight <= (this.table.rowManager.element.clientHeight + margin)){\n\t\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn false;\n\t\t\t}else {\n\t\t\t\t// left = this.table.rowManager.scrollLeft;\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\",  this.getPage());\n\t\t\t\t// this.table.rowManager.scrollHorizontal(left);\n\t\t\t\t// this.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t\t\n\t\t}else {\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\n\t\t}\n\t\t\n\t\treturn data.data;\n\t}\n\t\n\t//handle the footer element being redrawn\n\tfooterRedraw(){\n\t\tvar footer = this.table.footerManager.containerElement;\n\n\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\tthis.pagesElement.style.display = 'none';\n\t\t}else {\n\t\t\tthis.pagesElement.style.display = '';\n\t\t\t\n\t\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\t\tthis.pagesElement.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n}\n\nPage.moduleName = \"page\";\n\n//load defaults\nPage.pageCounters = defaultPageCounters;\n\n// read persistance information from storage\nvar defaultReaders = {\n\tlocal:function(id, type){\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\n\n\t\treturn data ? JSON.parse(data) : false;\n\t},\n\tcookie:function(id, type){\n\t\tvar cookie = document.cookie,\n\t\tkey = id + \"-\" + type,\n\t\tcookiePos = cookie.indexOf(key + \"=\"),\n\t\tend, data;\n\n\t\t//if cookie exists, decode and load column data into tabulator\n\t\tif(cookiePos > -1){\n\t\t\tcookie = cookie.slice(cookiePos);\n\n\t\t\tend = cookie.indexOf(\";\");\n\n\t\t\tif(end > -1){\n\t\t\t\tcookie = cookie.slice(0, end);\n\t\t\t}\n\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\n\t\t}\n\n\t\treturn data ? JSON.parse(data) : false;\n\t}\n};\n\n//write persistence information to storage\nvar defaultWriters = {\n\tlocal:function(id, type, data){\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n\t},\n\tcookie:function(id, type, data){\n\t\tvar expireDate = new Date();\n\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\n\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n\t}\n};\n\nclass Persistence extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = \"\";\n\t\tthis.id = \"\";\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\n\t\tthis.defWatcherBlock = false;\n\t\tthis.config = {};\n\t\tthis.readFunc = false;\n\t\tthis.writeFunc = false;\n\n\t\tthis.registerTableOption(\"persistence\", false);\n\t\tthis.registerTableOption(\"persistenceID\", \"\"); //key for persistent storage\n\t\tthis.registerTableOption(\"persistenceMode\", true); //mode for storing persistence information\n\t\tthis.registerTableOption(\"persistenceReaderFunc\", false); //function for handling persistence data reading\n\t\tthis.registerTableOption(\"persistenceWriterFunc\", false); //function for handling persistence data writing\n\t}\n\n\t// Test for whether localStorage is available for use.\n\tlocalStorageTest() {\n\t\tvar  testKey =  \"_tabulator_test\";\n\n\t\ttry {\n\t\t\twindow.localStorage.setItem( testKey, testKey);\n\t\t\twindow.localStorage.removeItem( testKey );\n\t\t\treturn true;\n\t\t} catch(e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//setup parameters\n\tinitialize(){\n\t\tif(this.table.options.persistence){\n\t\t\t//determine persistent layout storage type\n\t\t\tvar mode = this.table.options.persistenceMode,\n\t\t\tid = this.table.options.persistenceID,\n\t\t\tretrievedData;\n\n\t\t\tthis.mode = mode !== true ?  mode : (this.localStorageTest() ? \"local\" : \"cookie\");\n\n\t\t\tif(this.table.options.persistenceReaderFunc){\n\t\t\t\tif(typeof this.table.options.persistenceReaderFunc === \"function\"){\n\t\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\n\t\t\t\t}else {\n\t\t\t\t\tif(Persistence.readers[this.table.options.persistenceReaderFunc]){\n\t\t\t\t\t\tthis.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(Persistence.readers[this.mode]){\n\t\t\t\t\tthis.readFunc = Persistence.readers[this.mode];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.table.options.persistenceWriterFunc){\n\t\t\t\tif(typeof this.table.options.persistenceWriterFunc === \"function\"){\n\t\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\n\t\t\t\t}else {\n\t\t\t\t\tif(Persistence.writers[this.table.options.persistenceWriterFunc]){\n\t\t\t\t\t\tthis.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(Persistence.writers[this.mode]){\n\t\t\t\t\tthis.writeFunc = Persistence.writers[this.mode];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//set storage tag\n\t\t\tthis.id = \"tabulator-\" + (id || (this.table.element.getAttribute(\"id\") || \"\"));\n\n\t\t\tthis.config = {\n\t\t\t\tsort:this.table.options.persistence === true || this.table.options.persistence.sort,\n\t\t\t\tfilter:this.table.options.persistence === true || this.table.options.persistence.filter,\n\t\t\t\theaderFilter:this.table.options.persistence === true || this.table.options.persistence.headerFilter,\n\t\t\t\tgroup:this.table.options.persistence === true || this.table.options.persistence.group,\n\t\t\t\tpage:this.table.options.persistence === true || this.table.options.persistence.page,\n\t\t\t\tcolumns:this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns,\n\t\t\t};\n\n\t\t\t//load pagination data if needed\n\t\t\tif(this.config.page){\n\t\t\t\tretrievedData = this.retrieveData(\"page\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)){\n\t\t\t\t\t\tthis.table.options.paginationSize = retrievedData.paginationSize;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof retrievedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)){\n\t\t\t\t\t\tthis.table.options.paginationInitialPage = retrievedData.paginationInitialPage;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//load group data if needed\n\t\t\tif(this.config.group){\n\t\t\t\tretrievedData = this.retrieveData(\"group\");\n\n\t\t\t\tif(retrievedData){\n\t\t\t\t\tif(typeof retrievedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)){\n\t\t\t\t\t\tthis.table.options.groupBy = retrievedData.groupBy;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)){\n\t\t\t\t\t\tthis.table.options.groupStartOpen = retrievedData.groupStartOpen;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retrievedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)){\n\t\t\t\t\t\tthis.table.options.groupHeader = retrievedData.groupHeader;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.config.columns){\n\t\t\t\tthis.table.options.columns = this.load(\"columns\", this.table.options.columns);\n\t\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\t\tthis.subscribe(\"column-show\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-hide\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-moved\", this.save.bind(this, \"columns\"));\n\t\t\t}\n\n\t\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this), 0);\n\n\t\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\"));\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"headerFilter\"));\n\t\t\tthis.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\"));\n\t\t\tthis.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\"));\n\t\t\tthis.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\"));\n\t\t\tthis.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"column-width\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\n\t\t}\n\n\t\tthis.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this));\n\t\tthis.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\n\t}\n\n\teventSave(type){\n\t\tif(this.config[type]){\n\t\t\tthis.save(type);\n\t\t}\n\t}\n\n\ttableBuilt(){\n\t\tvar sorters, filters, headerFilters;\n\n\t\tif(this.config.sort){\n\t\t\tsorters = this.load(\"sort\");\n\n\t\t\tif(!sorters === false){\n\t\t\t\tthis.table.options.initialSort = sorters;\n\t\t\t}\n\t\t}\n\n\t\tif(this.config.filter){\n\t\t\tfilters = this.load(\"filter\");\n\n\t\t\tif(!filters === false){\n\t\t\t\tthis.table.options.initialFilter = filters;\n\t\t\t}\n\t\t}\n\t\tif(this.config.headerFilter){\n\t\t\theaderFilters = this.load(\"headerFilter\");\n\n\t\t\tif(!headerFilters === false){\n\t\t\t\tthis.table.options.initialHeaderFilter = headerFilters;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\n\ttableRedraw(force){\n\t\tif(force && this.config.columns){\n\t\t\tthis.save(\"columns\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tgetColumnLayout(){\n\t\treturn this.parseColumns(this.table.columnManager.getColumns());\n\t}\n\n\tsetColumnLayout(layout){\n\t\tthis.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout));\n\t\treturn true;\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumn(column){\n\t\tvar def, keys;\n\n\t\tif(this.config.columns){\n\t\t\tthis.defWatcherBlock = true;\n\n\t\t\tdef = column.getDefinition();\n\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n\n\t\t\tkeys.forEach((key)=>{\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\n\t\t\t\tvar value = def[key];\n\n\t\t\t\tif(props){\n\t\t\t\t\tObject.defineProperty(def, key, {\n\t\t\t\t\t\tset: (newValue) => {\n\t\t\t\t\t\t\tvalue = newValue;\n\n\t\t\t\t\t\t\tif(!this.defWatcherBlock){\n\t\t\t\t\t\t\t\tthis.save(\"columns\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(props.set){\n\t\t\t\t\t\t\t\tprops.set(newValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget:() => {\n\t\t\t\t\t\t\tif(props.get){\n\t\t\t\t\t\t\t\tprops.get();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.defWatcherBlock = false;\n\t\t}\n\t}\n\n\t//load saved definitions\n\tload(type, current){\n\t\tvar data = this.retrieveData(type);\n\n\t\tif(current){\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//retrieve data from memory\n\tretrieveData(type){\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\n\t}\n\n\t//merge old and new column definitions\n\tmergeDefinition(oldCols, newCols){\n\t\tvar output = [];\n\n\t\tnewCols = newCols || [];\n\n\t\tnewCols.forEach((column, to) => {\n\t\t\tvar from = this._findColumn(oldCols, column),\n\t\t\tkeys;\n\n\t\t\tif(from){\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(from);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t}else {\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tif(key !== \"columns\" && typeof column[key] !== \"undefined\"){\n\t\t\t\t\t\tfrom[key] = column[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(from.columns){\n\t\t\t\t\tfrom.columns = this.mergeDefinition(from.columns, column.columns);\n\t\t\t\t}\n\n\t\t\t\toutput.push(from);\n\t\t\t}\n\t\t});\n\n\t\toldCols.forEach((column, i) => {\n\t\t\tvar from = this._findColumn(newCols, column);\n\n\t\t\tif (!from) {\n\t\t\t\tif(output.length>i){\n\t\t\t\t\toutput.splice(i, 0, column);\n\t\t\t\t}else {\n\t\t\t\t\toutput.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//find matching columns\n\t_findColumn(columns, subject){\n\t\tvar type = subject.columns ? \"group\" : (subject.field ? \"field\" : \"object\");\n\n\t\treturn columns.find(function(col){\n\t\t\tswitch(type){\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\n\n\t\t\t\tcase \"field\":\n\t\t\t\t\treturn col.field === subject.field;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\treturn col === subject;\n\t\t\t}\n\t\t});\n\t}\n\n\t//save data\n\tsave(type){\n\t\tvar data = {};\n\n\t\tswitch(type){\n\t\t\tcase \"columns\":\n\t\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns());\n\t\t\t\tbreak;\n\n\t\t\tcase \"filter\":\n\t\t\t\tdata = this.table.modules.filter.getFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"headerFilter\":\n\t\t\t\tdata = this.table.modules.filter.getHeaderFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"sort\":\n\t\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tdata = this.getGroupConfig();\n\t\t\t\tbreak;\n\n\t\t\tcase \"page\":\n\t\t\t\tdata = this.getPageConfig();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(this.writeFunc){\n\t\t\tthis.writeFunc(this.id, type, data);\n\t\t}\n\n\t}\n\n\t//ensure sorters contain no function data\n\tvalidateSorters(data){\n\t\tdata.forEach(function(item){\n\t\t\titem.column = item.field;\n\t\t\tdelete item.field;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tgetGroupConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.group){\n\t\t\tif(this.config.group === true || this.config.group.groupBy){\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupStartOpen){\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupHeader){\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tgetPageConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.page){\n\t\t\tif(this.config.page === true || this.config.page.size){\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\n\t\t\t}\n\n\t\t\tif(this.config.page === true || this.config.page.page){\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\n\t//parse columns for data to store\n\tparseColumns(columns){\n\t\tvar definitions = [],\n\t\texcludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n\n\t\tcolumns.forEach((column) => {\n\t\t\tvar defStore = {},\n\t\t\tcolDef = column.getDefinition(),\n\t\t\tkeys;\n\n\t\t\tif(column.isGroup){\n\t\t\t\tdefStore.title = colDef.title;\n\t\t\t\tdefStore.columns = this.parseColumns(column.getColumns());\n\t\t\t}else {\n\t\t\t\tdefStore.field = column.getField();\n\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(colDef);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t\tkeys.push(\"visible\");\n\t\t\t\t}else {\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tswitch(key){\n\t\t\t\t\t\tcase \"width\":\n\t\t\t\t\t\t\tdefStore.width = column.getWidth();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"visible\":\n\t\t\t\t\t\t\tdefStore.visible = column.visible;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif(typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1){\n\t\t\t\t\t\t\t\tdefStore[key] = colDef[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdefinitions.push(defStore);\n\t\t});\n\n\t\treturn definitions;\n\t}\n}\n\nPersistence.moduleName = \"persistence\";\n\nPersistence.moduleInitOrder = -10;\n\n//load defaults\nPersistence.readers = defaultReaders;\nPersistence.writers = defaultWriters;\n\nclass Popup$1 extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"rowContextPopup\", false);\n\t\tthis.registerTableOption(\"rowClickPopup\", false);\n\t\tthis.registerTableOption(\"rowDblClickPopup\", false);\n\t\tthis.registerTableOption(\"groupContextPopup\", false);\n\t\tthis.registerTableOption(\"groupClickPopup\", false);\n\t\tthis.registerTableOption(\"groupDblClickPopup\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextPopup\");\n\t\tthis.registerColumnOption(\"headerClickPopup\");\n\t\tthis.registerColumnOption(\"headerDblClickPopup\");\n\t\tthis.registerColumnOption(\"headerPopup\");\n\t\tthis.registerColumnOption(\"headerPopupIcon\");\n\t\tthis.registerColumnOption(\"contextPopup\");\n\t\tthis.registerColumnOption(\"clickPopup\");\n\t\tthis.registerColumnOption(\"dblClickPopup\");\n\n\t\tthis.registerComponentFunction(\"cell\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"popup\", this._componentPopupCall.bind(this));\n\t\tthis.registerComponentFunction(\"group\", \"popup\", this._componentPopupCall.bind(this));\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\t_componentPopupCall(component, contents, position){\n\t\tthis.loadPopupEvent(contents, null, component, position);\n\t}\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextPopup){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickPopup){\n\t\t\tthis.subscribe(\"row-click\", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup));\n\t\t}\n\n\t\tif(this.table.options.rowDblClickPopup){\n\t\t\tthis.subscribe(\"row-dblclick\", this.loadPopupEvent.bind(this, this.table.options.rowDblClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextPopup){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickPopup){\n\t\t\tthis.subscribe(\"group-click\", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup));\n\t\t}\n\n\t\tif(this.table.options.groupDblClickPopup){\n\t\t\tthis.subscribe(\"group-dblclick\", this.loadPopupEvent.bind(this, this.table.options.groupDblClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextPopup && !this.columnSubscribers.headerContextPopup){\n\t\t\tthis.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextPopup);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.headerClickPopup && !this.columnSubscribers.headerClickPopup){\n\t\t\tthis.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerClickPopup\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickPopup);\n\t\t\n\t\t\n\t\t}if(def.headerDblClickPopup && !this.columnSubscribers.headerDblClickPopup){\n\t\t\tthis.columnSubscribers.headerDblClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerDblClickPopup\");\n\t\t\tthis.subscribe(\"column-dblclick\", this.columnSubscribers.headerDblClickPopup);\n\t\t}\n\t\t\n\t\tif(def.headerPopup){\n\t\t\tthis.initializeColumnHeaderPopup(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextPopup && !this.columnSubscribers.contextPopup){\n\t\t\tthis.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, \"contextPopup\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextPopup);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadPopupTableCellEvent.bind(this, \"contextPopup\"));\n\t\t}\n\t\t\n\t\tif(def.clickPopup && !this.columnSubscribers.clickPopup){\n\t\t\tthis.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, \"clickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickPopup);\n\t\t}\n\n\t\tif(def.dblClickPopup && !this.columnSubscribers.dblClickPopup){\n\t\t\tthis.columnSubscribers.dblClickPopup = this.loadPopupTableCellEvent.bind(this, \"dblClickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.dblClickPopup);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderPopup(column){\n\t\tvar icon = column.definition.headerPopupIcon,\n\t\theaderPopupEl;\n\t\t\n\t\theaderPopupEl = document.createElement(\"span\");\n\t\theaderPopupEl.classList.add(\"tabulator-header-popup-button\");\n\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderPopupEl.appendChild(icon);\n\t\t\t}else {\n\t\t\t\theaderPopupEl.innerHTML = icon;\n\t\t\t}\n\t\t}else {\n\t\t\theaderPopupEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderPopupEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadPopupEvent(column.definition.headerPopup, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerPopupEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadPopupTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadPopupEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadPopupTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadPopupEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadPopupEvent(contents, e, component, position){\n\t\tvar renderedCallback;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tcontents = typeof contents == \"function\" ? contents.call(this.table, e, component.getComponent(),  onRendered) : contents;\n\t\t\n\t\tthis.loadPopup(e, component, contents, renderedCallback, position);\n\t}\n\t\n\tloadPopup(e, component, contents, renderedCallback, position){\n\t\tvar touch = !(e instanceof MouseEvent),\n\t\tcontentsEl, popup;\n\t\t\n\t\tif(contents instanceof HTMLElement){\n\t\t\tcontentsEl = contents;\n\t\t}else {\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\tcontentsEl.innerHTML = contents;\n\t\t}\n\t\t\n\t\tcontentsEl.classList.add(\"tabulator-popup\");\n\n\t\tcontentsEl.addEventListener(\"click\", (e) =>{\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\tpopup = this.popup(contentsEl);\n\n\t\tif(typeof renderedCallback === \"function\"){\n\t\t\tpopup.renderCallback(renderedCallback);\n\t\t}\n\n\t\tif(e){\n\t\t\tpopup.show(e);\n\t\t}else {\n\t\t\tpopup.show(component.getElement(), position || \"center\");\n\t\t}\n\n\t\t\n\t\tpopup.hideOnBlur(() => {\n\t\t\tthis.dispatchExternal(\"popupClosed\", component.getComponent());\n\t\t});\n\n\n\n\t\tthis.dispatchExternal(\"popupOpened\", component.getComponent());\n\t}\n}\n\nPopup$1.moduleName = \"popup\";\n\nclass Print extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.element = false;\n\t\tthis.manualBlock = false;\n\t\tthis.beforeprintEventHandler = null;\n\t\tthis.afterprintEventHandler = null;\n\n\t\tthis.registerTableOption(\"printAsHtml\", false); //enable print as html\n\t\tthis.registerTableOption(\"printFormatter\", false); //printing page formatter\n\t\tthis.registerTableOption(\"printHeader\", false); //page header contents\n\t\tthis.registerTableOption(\"printFooter\", false); //page footer contents\n\t\tthis.registerTableOption(\"printStyled\", true); //enable print as html styling\n\t\tthis.registerTableOption(\"printRowRange\", \"visible\"); //restrict print to visible rows only\n\t\tthis.registerTableOption(\"printConfig\", {}); //print config options\n\n\t\tthis.registerColumnOption(\"print\");\n\t\tthis.registerColumnOption(\"titlePrint\");\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\tthis.beforeprintEventHandler = this.replaceTable.bind(this);\n\t\t\tthis.afterprintEventHandler = this.cleanup.bind(this);\n\n\t\t\twindow.addEventListener(\"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.addEventListener(\"afterprint\", this.afterprintEventHandler);\n\t\t\tthis.subscribe(\"table-destroy\", this.destroy.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"print\", this.printFullscreen.bind(this));\n\t}\n\n\tdestroy(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\twindow.removeEventListener( \"beforeprint\", this.beforeprintEventHandler );\n\t\t\twindow.removeEventListener( \"afterprint\", this.afterprintEventHandler );\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\treplaceTable(){\n\t\tif(!this.manualBlock){\n\t\t\tthis.element = document.createElement(\"div\");\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\n\n\t\t\tthis.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n\n\t\t\tthis.table.element.style.display = \"none\";\n\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\n\t\t}\n\t}\n\n\tcleanup(){\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n\t\tif(this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\tthis.table.element.style.display = \"\";\n\t\t}\n\t}\n\n\tprintFullscreen(visible, style, config){\n\t\tvar scrollX = window.scrollX,\n\t\tscrollY = window.scrollY,\n\t\theaderEl = document.createElement(\"div\"),\n\t\tfooterEl = document.createElement(\"div\"),\n\t\ttableEl = this.table.modules.export.generateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\n\t\theaderContent, footerContent;\n\n\t\tthis.manualBlock = true;\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\n\n\t\tif(this.table.options.printHeader){\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\n\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n\t\t\tif(typeof headerContent == \"string\"){\n\t\t\t\theaderEl.innerHTML = headerContent;\n\t\t\t}else {\n\t\t\t\theaderEl.appendChild(headerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(headerEl);\n\t\t}\n\n\t\tthis.element.appendChild(tableEl);\n\n\t\tif(this.table.options.printFooter){\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\n\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n\n\t\t\tif(typeof footerContent == \"string\"){\n\t\t\t\tfooterEl.innerHTML = footerContent;\n\t\t\t}else {\n\t\t\t\tfooterEl.appendChild(footerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(footerEl);\n\t\t}\n\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\n\t\tdocument.body.appendChild(this.element);\n\n\t\tif(this.table.options.printFormatter){\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\n\t\t}\n\n\t\twindow.print();\n\n\t\tthis.cleanup();\n\n\t\twindow.scrollTo(scrollX, scrollY);\n\n\t\tthis.manualBlock = false;\n\t}\n}\n\nPrint.moduleName = \"print\";\n\nclass ReactiveData extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.data = false;\n\t\tthis.blocked = false; //block reactivity while performing update\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\t\tthis.currentVersion = 0;\n\t\t\n\t\tthis.registerTableOption(\"reactiveData\", false); //enable data reactivity\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.reactiveData){\n\t\t\tthis.subscribe(\"cell-value-save-before\", this.block.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"cell-value-save-after\", this.unblock.bind(this, \"cellsave\"));\n\t\t\tthis.subscribe(\"row-data-save-before\", this.block.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-save-after\", this.unblock.bind(this, \"rowsave\"));\n\t\t\tthis.subscribe(\"row-data-init-after\", this.watchRow.bind(this));\n\t\t\tthis.subscribe(\"data-processing\", this.watchData.bind(this));\n\t\t\tthis.subscribe(\"table-destroy\", this.unwatchData.bind(this));\n\t\t}\n\t}\n\t\n\twatchData(data){\n\t\tvar self = this,\n\t\tversion;\n\t\t\n\t\tthis.currentVersion ++;\n\t\t\n\t\tversion = this.currentVersion;\n\t\t\n\t\tthis.unwatchData();\n\t\t\n\t\tthis.data = data;\n\t\t\n\t\t//override array push function\n\t\tthis.origFuncs.push = data.push;\n\t\t\n\t\tObject.defineProperty(this.data, \"push\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\t\n\t\t\t\t\tself.block(\"data-push\");\n\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.push.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-push\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array unshift function\n\t\tthis.origFuncs.unshift = data.unshift;\n\t\t\n\t\tObject.defineProperty(this.data, \"unshift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tresult;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-unshift\");\n\t\t\t\t\t\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresult = self.origFuncs.unshift.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-unshift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array shift function\n\t\tthis.origFuncs.shift = data.shift;\n\t\t\n\t\tObject.defineProperty(this.data, \"shift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-shift\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.shift.call(data);\n\n\t\t\t\t\tself.unblock(\"data-shift\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t//override array pop function\n\t\tthis.origFuncs.pop = data.pop;\n\t\t\n\t\tObject.defineProperty(this.data, \"pop\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row, result;\n\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-pop\");\n\t\t\t\t\t\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.pop.call(data);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-pop\");\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t//override array splice function\n\t\tthis.origFuncs.splice = data.splice;\n\t\t\n\t\tObject.defineProperty(this.data, \"splice\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tstart = args[0] < 0 ? data.length + args[0] : args[0],\n\t\t\t\tend = args[1],\n\t\t\t\tnewRows = args[2] ? args.slice(2) : false,\n\t\t\t\tstartRow, result;\n\t\t\t\t\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"data-splice\");\n\t\t\t\t\t//add new rows\n\t\t\t\t\tif(newRows){\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(startRow){\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t//delete removed rows\n\t\t\t\t\tif(end !== 0){\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n\t\t\t\t\t\t\n\t\t\t\t\t\toldRows.forEach((rowData, i) => {\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(newRows || end !== 0){\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = self.origFuncs.splice.apply(data, arguments);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"data-splice\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn result ;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchData(){\n\t\tif(this.data !== false){\n\t\t\tfor(var key in this.origFuncs){\n\t\t\t\tObject.defineProperty(this.data, key, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable:true,\n\t\t\t\t\twritable:true,\n\t\t\t\t\tvalue: this.origFuncs.key,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\twatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tthis.watchKey(row, data, key);\n\t\t}\n\t\t\n\t\tif(this.table.options.dataTree){\n\t\t\tthis.watchTreeChildren(row);\n\t\t}\n\t}\n\t\n\twatchTreeChildren (row){\n\t\tvar self = this,\n\t\tchildField = row.getData()[this.table.options.dataTreeChildField],\n\t\torigFuncs = {};\n\t\t\n\t\tif(childField){\n\t\t\t\n\t\t\torigFuncs.push = childField.push;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"push\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-push\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-push\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.unshift = childField.unshift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"unshift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-unshift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.unshift.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-unshift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.shift = childField.shift;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"shift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-shift\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.shift.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-shift\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.pop = childField.pop;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"pop\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-pop\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.pop.call(childField);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-pop\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\torigFuncs.splice = childField.splice;\n\t\t\t\n\t\t\tObject.defineProperty(childField, \"splice\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tif(!self.blocked){\n\t\t\t\t\t\tself.block(\"tree-splice\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar result =  origFuncs.splice.apply(childField, arguments);\n\t\t\t\t\t\tthis.rebuildTree(row);\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.unblock(\"tree-splice\");\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\trebuildTree(row){\n\t\tthis.table.modules.dataTree.initializeRow(row);\n\t\tthis.table.modules.dataTree.layoutRow(row);\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t}\n\t\n\twatchKey(row, data, key){\n\t\tvar self = this,\n\t\tprops = Object.getOwnPropertyDescriptor(data, key),\n\t\tvalue = data[key],\n\t\tversion = this.currentVersion;\n\t\t\n\t\tObject.defineProperty(data, key, {\n\t\t\tset: (newValue) => {\n\t\t\t\tvalue = newValue;\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tself.block(\"key\");\n\t\t\t\t\t\n\t\t\t\t\tvar update = {};\n\t\t\t\t\tupdate[key] = newValue;\n\t\t\t\t\trow.updateData(update);\n\t\t\t\t\t\n\t\t\t\t\tself.unblock(\"key\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(props.set){\n\t\t\t\t\tprops.set(newValue);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget:() => {\n\t\t\t\t\n\t\t\t\tif(props.get){\n\t\t\t\t\tprops.get();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tunwatchRow(row){\n\t\tvar data = row.getData();\n\t\t\n\t\tfor(var key in data){\n\t\t\tObject.defineProperty(data, key, {\n\t\t\t\tvalue:data[key],\n\t\t\t});\n\t\t}\n\t}\n\t\n\tblock(key){\n\t\tif(!this.blocked){\n\t\t\tthis.blocked = key;\n\t\t}\n\t}\n\t\n\tunblock(key){\n\t\tif(this.blocked === key){\n\t\t\tthis.blocked = false;\n\t\t}\n\t}\n}\n\nReactiveData.moduleName = \"reactiveData\";\n\nclass ResizeColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.startColumn = false;\n\t\tthis.startX = false;\n\t\tthis.startWidth = false;\n\t\tthis.latestX = false;\n\t\tthis.handle = null;\n\t\tthis.initialNextColumn = null;\n\t\tthis.nextColumn = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.registerColumnOption(\"resizable\", true);\n\t\tthis.registerTableOption(\"resizableColumnFit\", false);\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"column-rendered\", this.layoutColumnHeader.bind(this));\n\t}\n\t\n\tinitializeEventWatchers(){\n\t\tif(!this.initialized){\n\t\t\t\n\t\t\tthis.subscribe(\"cell-rendered\", this.layoutCellHandles.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.deInitializeComponent.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"cell-height\", this.resizeHandle.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.columnLayoutUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-hide\", this.deInitializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.columnLayoutUpdated.bind(this));\n\t\t\tthis.subscribe(\"column-width\", this.columnWidthUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-delete\", this.deInitializeComponent.bind(this));\n\t\t\tthis.subscribe(\"column-height\", this.resizeHandle.bind(this));\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t\n\tlayoutCellHandles(cell){\n\t\tif(cell.row.type === \"row\"){\n\t\t\tthis.deInitializeComponent(cell);\n\t\t\tthis.initializeColumn(\"cell\", cell, cell.column, cell.element);\n\t\t}\n\t}\n\t\n\tlayoutColumnHeader(column){\n\t\tif(column.definition.resizable){\n\t\t\tthis.initializeEventWatchers();\n\t\t\tthis.deInitializeComponent(column);\n\t\t\tthis.initializeColumn(\"header\", column, column, column.element);\n\t\t}\n\t}\n\t\n\tcolumnLayoutUpdated(column){\n\t\tvar prev = column.prevColumn();\n\t\t\n\t\tthis.reinitializeColumn(column);\n\t\t\n\t\tif(prev){\n\t\t\tthis.reinitializeColumn(prev);\n\t\t}\n\t}\n\t\n\tcolumnWidthUpdated(column){\n\t\tif(column.modules.frozen){\n\t\t\tif(this.table.modules.frozenColumns.leftColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}else if(this.table.modules.frozenColumns.rightColumns.includes(column)){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((col) => {\n\t\t\t\t\tthis.reinitializeColumn(col);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tfrozenColumnOffset(column){\n\t\tvar offset = false;\n\n\t\tif(column.modules.frozen){\n\t\t\toffset = column.modules.frozen.marginValue; \n\n\t\t\tif(column.modules.frozen.position === \"left\"){\n\t\t\t\toffset += column.getWidth() - 3;\n\t\t\t}else {\n\t\t\t\tif(offset){\n\t\t\t\t\toffset -= 3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn offset !== false ? offset + \"px\" : false;\n\t}\n\t\n\treinitializeColumn(column){\n\t\tvar frozenOffset = this.frozenColumnOffset(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(cell.modules.resize && cell.modules.resize.handleEl){\n\t\t\t\tif(frozenOffset){\n\t\t\t\t\tcell.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcell.element.after(cell.modules.resize.handleEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(column.modules.resize && column.modules.resize.handleEl){\n\t\t\tif(frozenOffset){\n\t\t\t\tcolumn.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset;\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.element.after(column.modules.resize.handleEl);\n\t\t}\n\t}\n\t\n\tinitializeColumn(type, component, column, element){\n\t\tvar self = this,\n\t\tvariableHeight = false,\n\t\tmode = column.definition.resizable,\n\t\tconfig = {},\n\t\tnearestColumn = column.getLastColumn();\n\t\t\n\t\t//set column resize mode\n\t\tif(type === \"header\"){\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n\t\t\tconfig = {variableHeight:variableHeight};\n\t\t}\n\t\t\n\t\tif((mode === true || mode == type) && this._checkResizability(nearestColumn)){\n\t\t\t\n\t\t\tvar handle = document.createElement('span');\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\n\t\t\t\n\t\t\thandle.addEventListener(\"click\", function(e){\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t\t\n\t\t\tvar handleDown = function(e){\n\t\t\t\tself.startColumn = column;\n\t\t\t\tself.initialNextColumn = self.nextColumn = nearestColumn.nextColumn();\n\t\t\t\tself._mouseDown(e, nearestColumn, handle);\n\t\t\t};\n\t\t\t\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\t\t\t\n\t\t\t//resize column on  double click\n\t\t\thandle.addEventListener(\"dblclick\", (e) => {\n\t\t\t\tvar oldWidth = nearestColumn.getWidth();\n\t\t\t\t\n\t\t\t\te.stopPropagation();\n\t\t\t\tnearestColumn.reinitializeWidth(true);\n\t\t\t\t\n\t\t\t\tif(oldWidth !== nearestColumn.getWidth()){\n\t\t\t\t\tself.dispatch(\"column-resized\", nearestColumn);\n\t\t\t\t\tself.table.externalEvents.dispatch(\"columnResized\", nearestColumn.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(column.modules.frozen){\n\t\t\t\thandle.style.position = \"sticky\";\n\t\t\t\thandle.style[column.modules.frozen.position] = this.frozenColumnOffset(column);\n\t\t\t}\n\t\t\t\n\t\t\tconfig.handleEl = handle;\n\t\t\t\n\t\t\tif(element.parentNode && column.visible){\n\t\t\t\telement.after(handle);\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tcomponent.modules.resize = config;\n\t}\n\t\n\tdeInitializeColumn(column){\n\t\tthis.deInitializeComponent(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tthis.deInitializeComponent(cell);\n\t\t});\n\t}\n\t\n\tdeInitializeComponent(component){\n\t\tvar handleEl;\n\t\t\n\t\tif(component.modules.resize){\n\t\t\thandleEl = component.modules.resize.handleEl;\n\t\t\t\n\t\t\tif(handleEl && handleEl.parentElement){\n\t\t\t\thandleEl.parentElement.removeChild(handleEl);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tresizeHandle(component, height){\n\t\tif(component.modules.resize && component.modules.resize.handleEl){\n\t\t\tcomponent.modules.resize.handleEl.style.height = height;\n\t\t}\n\t}\n\t\n\t_checkResizability(column){\n\t\treturn column.definition.resizable;\n\t}\n\t\n\t_mouseDown(e, column, handle){\n\t\tvar self = this;\n\t\t\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tfunction mouseMove(e){\n\t\t\tvar x = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX,\n\t\t\tstartDiff = x - self.startX,\n\t\t\tmoveDiff = x - self.latestX,\n\t\t\tblockedBefore, blockedAfter;\n\t\t\t\n\t\t\tself.latestX = x;\n\t\t\t\n\t\t\tif(self.table.rtl){\n\t\t\t\tstartDiff = -startDiff;\n\t\t\t\tmoveDiff = -moveDiff;\n\t\t\t}\n\t\t\t\n\t\t\tblockedBefore = column.width == column.minWidth || column.width == column.maxWidth;\n\t\t\t\n\t\t\tcolumn.setWidth(self.startWidth + startDiff);\n\t\t\t\n\t\t\tblockedAfter = column.width == column.minWidth || column.width == column.maxWidth;\n\t\t\t\n\t\t\tif(moveDiff < 0){\n\t\t\t\tself.nextColumn = self.initialNextColumn;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.options.resizableColumnFit && self.nextColumn && !(blockedBefore && blockedAfter)){\n\t\t\t\tlet colWidth = self.nextColumn.getWidth();\n\t\t\t\t\n\t\t\t\tif(moveDiff > 0){\n\t\t\t\t\tif(colWidth <= self.nextColumn.minWidth){\n\t\t\t\t\t\tself.nextColumn = self.nextColumn.nextColumn();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(self.nextColumn){\n\t\t\t\t\tself.nextColumn.setWidth(self.nextColumn.getWidth() - moveDiff);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself.table.columnManager.rerenderColumns(true);\n\t\t\t\n\t\t\tif(!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction mouseUp(e){\n\t\t\t\n\t\t\t//block editor from taking action while resizing is taking place\n\t\t\tif(self.startColumn.modules.edit){\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\t\t\t\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\t\t\t\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(self.startWidth !== column.getWidth()){\n\t\t\t\tself.table.columnManager.verticalAlignHeaders();\n\n\t\t\t\tself.dispatch(\"column-resized\", column);\n\t\t\t\tself.table.externalEvents.dispatch(\"columnResized\", column.getComponent());\n\t\t\t}\n\t\t}\n\t\t\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\t\t\n\t\t//block editor from taking action while resizing is taking place\n\t\tif(self.startColumn.modules.edit){\n\t\t\tself.startColumn.modules.edit.blocked = true;\n\t\t}\n\t\t\n\t\tself.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\n\t\tself.latestX = self.startX;\n\t\tself.startWidth = column.getWidth();\n\t\t\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}\n\nResizeColumns.moduleName = \"resizeColumns\";\n\nclass ResizeRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.startColumn = false;\n\t\tthis.startY = false;\n\t\tthis.startHeight = false;\n\t\tthis.handle = null;\n\t\tthis.prevHandle = null;\n\n\t\tthis.registerTableOption(\"resizableRows\", false); //resizable rows\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.resizableRows){\n\t\t\tthis.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\trowEl = row.getElement();\n\n\t\tvar handle = document.createElement('div');\n\t\thandle.className = \"tabulator-row-resize-handle\";\n\n\t\tvar prevHandle = document.createElement('div');\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\n\n\t\thandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar handleDown = function(e){\n\t\t\tself.startRow = row;\n\t\t\tself._mouseDown(e, row, handle);\n\t\t};\n\n\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\n\t\tprevHandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar prevHandleDown =  function(e){\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\n\n\t\t\tif(prevRow){\n\t\t\t\tself.startRow = prevRow;\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\n\t\t\t}\n\t\t};\n\n\t\tprevHandle.addEventListener(\"mousedown\",prevHandleDown);\n\t\tprevHandle.addEventListener(\"touchstart\",prevHandleDown, {passive: true});\n\n\t\trowEl.appendChild(handle);\n\t\trowEl.appendChild(prevHandle);\n\t}\n\n\t_mouseDown(e, row, handle){\n\t\tvar self = this;\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e){\n\t\t\trow.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\n\t\t}\n\n\t\tfunction mouseUp(e){\n\n\t\t\t// //block editor from taking action while resizing is taking place\n\t\t\t// if(self.startColumn.modules.edit){\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\n\t\t\t// }\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tself.dispatchExternal(\"rowResized\", row.getComponent());\n\t\t}\n\n\t\te.stopPropagation(); //prevent resize from interfering with movable columns\n\n\t\t//block editor from taking action while resizing is taking place\n\t\t// if(self.startColumn.modules.edit){\n\t\t// \tself.startColumn.modules.edit.blocked = true;\n\t\t// }\n\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n\t\tself.startHeight = row.getHeight();\n\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}\n\nResizeRows.moduleName = \"resizeRows\";\n\nclass ResizeTable extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.binding = false;\n\t\tthis.visibilityObserver = false;\n\t\tthis.resizeObserver = false;\n\t\tthis.containerObserver = false;\n\t\t\n\t\tthis.tableHeight = 0;\n\t\tthis.tableWidth = 0;\n\t\tthis.containerHeight = 0;\n\t\tthis.containerWidth = 0;\n\t\t\n\t\tthis.autoResize = false;\n\t\t\n\t\tthis.visible = false;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.initialRedraw = false;\n\t\t\n\t\tthis.registerTableOption(\"autoResize\", true); //auto resize table\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.autoResize){\n\t\t\tvar table = this.table,\n\t\t\ttableStyle;\n\t\t\t\n\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\n\t\t\tif(table.element.parentNode){\n\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof IntersectionObserver !== \"undefined\" && typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\"){\n\t\t\t\t\n\t\t\t\tthis.initializeVisibilityObserver();\n\t\t\t\t\n\t\t\t\tthis.autoResize = true;\n\t\t\t\t\n\t\t\t\tthis.resizeObserver = new ResizeObserver((entry) => {\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.tableHeight != nodeHeight || this.tableWidth != nodeWidth){\n\t\t\t\t\t\t\tthis.tableHeight = nodeHeight;\n\t\t\t\t\t\t\tthis.tableWidth = nodeWidth;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(table.element.parentNode){\n\t\t\t\t\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.resizeObserver.observe(table.element);\n\t\t\t\t\n\t\t\t\ttableStyle = window.getComputedStyle(table.element);\n\t\t\t\t\n\t\t\t\tif(this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))){\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver = new ResizeObserver((entry) => {\n\t\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(this.containerHeight != nodeHeight || this.containerWidth != nodeWidth){\n\t\t\t\t\t\t\t\tthis.containerHeight = nodeHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = nodeWidth;\n\t\t\t\t\t\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\t\t\t\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.redrawTable();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.subscribe(\"table-resize\", this.tableResized.bind(this));\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\tthis.binding = function(){\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && !table.modules.edit.currentCell)){\n\t\t\t\t\t\ttable.columnManager.rerenderColumns(true);\n\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\twindow.addEventListener(\"resize\", this.binding);\n\t\t\t}\n\t\t\t\n\t\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t\t}\n\t}\n\t\n\tinitializeVisibilityObserver(){\n\t\tthis.visibilityObserver = new IntersectionObserver((entries) => {\n\t\t\tthis.visible = entries[0].isIntersecting;\n\t\t\t\n\t\t\tif(!this.initialized){\n\t\t\t\tthis.initialized = true;\n\t\t\t\tthis.initialRedraw = !this.visible;\n\t\t\t}else {\n\t\t\t\tif(this.visible){\n\t\t\t\t\tthis.redrawTable(this.initialRedraw);\n\t\t\t\t\tthis.initialRedraw = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.visibilityObserver.observe(this.table.element);\n\t}\n\t\n\tredrawTable(force){\n\t\tif(this.initialized && this.visible){\n\t\t\tthis.table.columnManager.rerenderColumns(true);\n\t\t\tthis.table.redraw(force);\n\t\t}\n\t}\n\t\n\ttableResized(){\n\t\tthis.table.rowManager.redraw();\n\t}\n\t\n\tclearBindings(){\n\t\tif(this.binding){\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\n\t\t}\n\t\t\n\t\tif(this.resizeObserver){\n\t\t\tthis.resizeObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.visibilityObserver){\n\t\t\tthis.visibilityObserver.unobserve(this.table.element);\n\t\t}\n\t\t\n\t\tif(this.containerObserver){\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\n\t\t}\n\t}\n}\n\nResizeTable.moduleName = \"resizeTable\";\n\nclass ResponsiveLayout extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.columns = [];\n\t\tthis.hiddenColumns = [];\n\t\tthis.mode = \"\";\n\t\tthis.index = 0;\n\t\tthis.collapseFormatter = [];\n\t\tthis.collapseStartOpen = true;\n\t\tthis.collapseHandleColumn = false;\n\n\t\tthis.registerTableOption(\"responsiveLayout\", false); //responsive layout flags\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseStartOpen\", true); //start showing collapsed data\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", true); //responsive layout collapse formatter\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseFormatter\", false); //responsive layout collapse formatter\n\n\t\tthis.registerColumnOption(\"responsive\");\n\t}\n\n\t//generate responsive columns list\n\tinitialize(){\n\t\tif(this.table.options.responsiveLayout){\n\t\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-add\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-delete\", this.initializeResponsivity.bind(this));\n\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedraw.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.responsiveLayout === \"collapse\"){\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.generateCollapsedRowContent.bind(this));\n\t\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\t\tthis.subscribe(\"row-layout\", this.layoutRow.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\ttableRedraw(force){\n\t\tif([\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) === -1){\n\t\t\tif(!force){\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeResponsivity(){\n\t\tvar columns = [];\n\n\t\tthis.mode = this.table.options.responsiveLayout;\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n\t\tthis.hiddenColumns = [];\n\n\t\t//determine level of responsivity for each column\n\t\tthis.table.columnManager.columnsByIndex.forEach((column, i) => {\n\t\t\tif(column.modules.responsive){\n\t\t\t\tif(column.modules.responsive.order && column.modules.responsive.visible){\n\t\t\t\t\tcolumn.modules.responsive.index = i;\n\t\t\t\t\tcolumns.push(column);\n\n\t\t\t\t\tif(!column.visible && this.mode === \"collapse\"){\n\t\t\t\t\t\tthis.hiddenColumns.push(column);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//sort list by responsivity\n\t\tcolumns = columns.reverse();\n\t\tcolumns = columns.sort((a, b) => {\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\n\t\t\treturn diff || (b.modules.responsive.index - a.modules.responsive.index);\n\t\t});\n\n\t\tthis.columns = columns;\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.generateCollapsedContent();\n\t\t}\n\n\t\t//assign collapse column\n\t\tfor (let col of this.table.columnManager.columnsByIndex){\n\t\t\tif(col.definition.formatter == \"responsiveCollapse\"){\n\t\t\t\tthis.collapseHandleColumn = col;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(this.collapseHandleColumn){\n\t\t\tif(this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}else {\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//define layout information\n\tinitializeColumn(column){\n\t\tvar def = column.getDefinition();\n\n\t\tcolumn.modules.responsive = {order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible:def.visible === false ? false : true};\n\t}\n\n\tinitializeRow(row){\n\t\tvar el;\n\n\t\tif(row.type !== \"calc\"){\n\t\t\tel = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\n\n\t\t\trow.modules.responsiveLayout = {\n\t\t\t\telement:el,\n\t\t\t\topen:this.collapseStartOpen,\n\t\t\t};\n\n\t\t\tif(!this.collapseStartOpen){\n\t\t\t\tel.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tlayoutRow(row){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t}\n\t}\n\n\t//update column visibility\n\tupdateColumnVisibility(column, responsiveToggle){\n\t\tif(!responsiveToggle && column.modules.responsive){\n\t\t\tcolumn.modules.responsive.visible = column.visible;\n\t\t\tthis.initializeResponsivity();\n\t\t}\n\t}\n\n\thideColumn(column){\n\t\tvar colCount = this.hiddenColumns.length;\n\n\t\tcolumn.hide(false, true);\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.hiddenColumns.unshift(column);\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !colCount){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tshowColumn(column){\n\t\tvar index;\n\n\t\tcolumn.show(false, true);\n\t\t//set column width to prevent calculation loops on uninitialized columns\n\t\tcolumn.setWidth(column.getWidth());\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tindex = this.hiddenColumns.indexOf(column);\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\n\t\t\t}\n\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//redraw columns to fit space\n\tupdate(){\n\t\tvar working = true;\n\n\t\twhile(working){\n\n\t\t\tlet width = this.table.modules.layout.getMode() == \"fitColumns\" ? this.table.columnManager.getFlexBaseWidth() : this.table.columnManager.getWidth();\n\n\t\t\tlet diff = (this.table.options.headerVisible ? this.table.columnManager.element.clientWidth : this.table.element.clientWidth) - width;\n\n\t\t\tif(diff < 0){\n\t\t\t\t//table is too wide\n\t\t\t\tlet column = this.columns[this.index];\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.hideColumn(column);\n\t\t\t\t\tthis.index ++;\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else {\n\n\t\t\t\t//table has spare space\n\t\t\t\tlet column = this.columns[this.index -1];\n\n\t\t\t\tif(column){\n\t\t\t\t\tif(diff > 0){\n\t\t\t\t\t\tif(diff >= column.getWidth()){\n\t\t\t\t\t\t\tthis.showColumn(column);\n\t\t\t\t\t\t\tthis.index --;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tworking = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!this.table.rowManager.activeRowsCount){\n\t\t\t\tthis.table.rowManager.renderEmptyScroll();\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedContent(){\n\t\tvar rows = this.table.rowManager.getDisplayRows();\n\n\t\trows.forEach((row) => {\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t});\n\t}\n\n\tgenerateCollapsedRowContent(row){\n\t\tvar el, contents;\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\tel = row.modules.responsiveLayout.element;\n\n\t\t\twhile(el.firstChild) el.removeChild(el.firstChild);\n\n\t\t\tcontents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\t\t\tif(contents){\n\t\t\t\tel.appendChild(contents);\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedRowData(row){\n\t\tvar data = row.getData(),\n\t\toutput = [],\n\t\tmockCellComponent;\n\n\t\tthis.hiddenColumns.forEach((column) => {\n\t\t\tvar value = column.getFieldValue(data);\n\n\t\t\tif(column.definition.title && column.field){\n\t\t\t\tif(column.modules.format && this.table.options.responsiveLayoutCollapseUseFormatters){\n\n\t\t\t\t\tmockCellComponent = {\n\t\t\t\t\t\tvalue:false,\n\t\t\t\t\t\tdata:{},\n\t\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetType:function(){\n\t\t\t\t\t\t\treturn \"cell\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetTable:() => {\n\t\t\t\t\t\t\treturn this.table;\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction onRendered(callback){\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(this.table.modules.format, mockCellComponent, column.modules.format.params, onRendered)\n\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tformatCollapsedData(data){\n\t\tvar list = document.createElement(\"table\");\n\n\t\tdata.forEach(function(item){\n\t\t\tvar row = document.createElement(\"tr\");\n\t\t\tvar titleData = document.createElement(\"td\");\n\t\t\tvar valueData = document.createElement(\"td\");\n\t\t\tvar node_content;\n\n\t\t\tvar titleHighlight = document.createElement(\"strong\");\n\t\t\ttitleData.appendChild(titleHighlight);\n\t\t\tthis.langBind(\"columns|\" + item.field, function(text){\n\t\t\t\ttitleHighlight.innerHTML = text || item.title;\n\t\t\t});\n\n\t\t\tif(item.value instanceof Node){\n\t\t\t\tnode_content = document.createElement(\"div\");\n\t\t\t\tnode_content.appendChild(item.value);\n\t\t\t\tvalueData.appendChild(node_content);\n\t\t\t}else {\n\t\t\t\tvalueData.innerHTML = item.value;\n\t\t\t}\n\n\t\t\trow.appendChild(titleData);\n\t\t\trow.appendChild(valueData);\n\t\t\tlist.appendChild(row);\n\t\t}, this);\n\n\t\treturn Object.keys(data).length ? list : \"\";\n\t}\n}\n\nResponsiveLayout.moduleName = \"responsiveLayout\";\n\nclass SelectRow extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.selecting = false; //flag selecting in progress\n\t\tthis.lastClickedRow = false; //last clicked row\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\n\t\tthis.selectedRows = []; //hold selected rows\n\t\tthis.headerCheckboxElement = null; // hold header select element\n\t\t\n\t\tthis.registerTableOption(\"selectable\", \"highlight\"); //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRangeMode\", \"drag\");  //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRollingSelection\", true); //roll selection once maximum number of selectable rows is reached\n\t\tthis.registerTableOption(\"selectablePersistence\", true); // maintain selection when table view is updated\n\t\tthis.registerTableOption(\"selectableCheck\", function(data, row){return true;}); //check whether row is selectable\n\t\t\n\t\tthis.registerTableFunction(\"selectRow\", this.selectRows.bind(this));\n\t\tthis.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this));\n\t\tthis.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.selectable !== false){\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this));\n\t\t\tthis.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.selectable && !this.table.options.selectablePersistence){\n\t\t\t\tthis.subscribe(\"data-refreshing\", this.deselectRows.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowRetrieve(type, prevValue){\n\t\treturn type === \"selected\" ? this.selectedRows : prevValue;\n\t}\n\t\n\trowDeleted(row){\n\t\tthis._deselectRow(row, true);\n\t}\n\t\n\tclearSelectionData(silent){\n\t\tvar prevSelected = this.selectedRows.length;\n\n\t\tthis.selecting = false;\n\t\tthis.lastClickedRow = false;\n\t\tthis.selectPrev = [];\n\t\tthis.selectedRows = [];\n\t\t\n\t\tif(prevSelected && silent !== true){\n\t\t\tthis._rowSelectionChanged();\n\t\t}\n\t}\n\t\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\telement = row.getElement();\n\t\t\n\t\t// trigger end of row selection\n\t\tvar endSelect = function(){\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tself.selecting = false;\n\t\t\t}, 50);\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\n\t\t};\n\t\t\n\t\trow.modules.select = {selected:false};\n\t\t\n\t\t//set row selection class\n\t\tif(self.checkRowSelectability(row)){\n\t\t\telement.classList.add(\"tabulator-selectable\");\n\t\t\telement.classList.remove(\"tabulator-unselectable\");\n\t\t\t\n\t\t\tif(self.table.options.selectable && self.table.options.selectable != \"highlight\"){\n\t\t\t\tif(self.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\telement.addEventListener(\"click\", this.handleComplexRowClick.bind(this, row));\n\t\t\t\t}else {\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\t\t\tif(!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!self.selecting){\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\t\t\tif(e.shiftKey){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selecting = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selectPrev = [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(self.selectPrev[1] == row){\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseout\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}else {\n\t\t\telement.classList.add(\"tabulator-unselectable\");\n\t\t\telement.classList.remove(\"tabulator-selectable\");\n\t\t}\n\t}\n\t\n\thandleComplexRowClick(row, e){\n\t\tif(e.shiftKey){\n\t\t\tthis.table._clearSelection();\n\t\t\tthis.lastClickedRow = this.lastClickedRow || row;\n\t\t\t\n\t\t\tvar lastClickedRowIdx = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow);\n\t\t\tvar rowIdx = this.table.rowManager.getDisplayRowIndex(row);\n\t\t\t\n\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\t\n\t\t\tvar rows = this.table.rowManager.getDisplayRows().slice(0);\n\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\t\t\t\n\t\t\tif(e.ctrlKey || e.metaKey){\n\t\t\t\ttoggledRows.forEach((toggledRow)=>{\n\t\t\t\t\tif(toggledRow !== this.lastClickedRow){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.options.selectable !== true && !this.isRowSelected(row)){\n\t\t\t\t\t\t\tif(this.selectedRows.length < this.table.options.selectable){\n\t\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.lastClickedRow = row;\n\t\t\t}else {\n\t\t\t\tthis.deselectRows(undefined, true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.selectable !== true){\n\t\t\t\t\tif(toggledRows.length > this.table.options.selectable){\n\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, this.table.options.selectable);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectRows(toggledRows);\n\t\t\t}\n\t\t\tthis.table._clearSelection();\n\t\t}\n\t\telse if(e.ctrlKey || e.metaKey){\n\t\t\tthis.toggleRow(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}else {\n\t\t\tthis.deselectRows(undefined, true);\n\t\t\tthis.selectRows(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}\n\t}\n\n\tcheckRowSelectability(row){\n\t\tif(row && row.type === \"row\"){\n\t\t\treturn this.table.options.selectableCheck.call(this.table, row.getComponent());\n\t\t}\n\n\t\treturn false;\n\t}\n\t\n\t//toggle row selection\n\ttoggleRow(row){\n\t\tif(this.checkRowSelectability(row)){\n\t\t\tif(row.modules.select && row.modules.select.selected){\n\t\t\t\tthis._deselectRow(row);\n\t\t\t}else {\n\t\t\t\tthis._selectRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//select a number of rows\n\tselectRows(rows){\n\t\tvar changes = [], \n\t\trowMatch, change;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\trowMatch = this.table.rowManager.rows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(!rowMatch){\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trowMatch = rows;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(Array.isArray(rowMatch)){\n\t\t\tif(rowMatch.length){\n\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\tchange = this._selectRow(row, true, true);\n\n\t\t\t\t\tif(change){\n\t\t\t\t\t\tchanges.push(change);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged(false, changes);\n\t\t\t}\n\t\t}else {\n\t\t\tif(rowMatch){\n\t\t\t\tthis._selectRow(rowMatch, false, true);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\t//select an individual row\n\t_selectRow(rowInfo, silent, force){\n\t\t//handle max row count\n\t\tif(!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force){\n\t\t\tif(this.selectedRows.length >= this.table.options.selectable){\n\t\t\t\tif(this.table.options.selectableRollingSelection){\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\n\t\t\t\t}else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\n\t\t\n\t\tif(row){\n\t\t\tif(this.selectedRows.indexOf(row) == -1){\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = true;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectedRows.push(row);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowSelected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tthis._rowSelectionChanged(silent, row);\n\n\t\t\t\treturn row;\n\t\t\t}\n\t\t}else {\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisRowSelected(row){\n\t\treturn this.selectedRows.indexOf(row) !== -1;\n\t}\n\t\n\t//deselect a number of rows\n\tdeselectRows(rows, silent){\n\t\tvar changes = [], \n\t\trowMatch, change;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\t\trowMatch = Object.assign([], this.selectedRows);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\t\tif(!rowMatch){\n\t\t\t\t\trowMatch = this.table.rowManager.getRows(rows);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trowMatch = rows;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(Array.isArray(rowMatch)){\n\t\t\tif(rowMatch.length){\n\t\t\t\trowMatch.forEach((row) => {\n\t\t\t\t\tchange = this._deselectRow(row, true, true);\n\n\t\t\t\t\tif(change){\n\t\t\t\t\t\tchanges.push(change);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged(silent, [], changes);\n\t\t\t}\n\t\t}else {\n\t\t\tif(rowMatch){\n\t\t\t\tthis._deselectRow(rowMatch, silent, true);\n\t\t\t}\n\t\t}\t\n\t}\n\t\n\t//deselect an individual row\n\t_deselectRow(rowInfo, silent){\n\t\tvar self = this,\n\t\trow = self.table.rowManager.findRow(rowInfo),\n\t\tindex, element;\n\t\t\n\t\tif(row){\n\t\t\tindex = self.selectedRows.findIndex(function(selectedRow){\n\t\t\t\treturn selectedRow == row;\n\t\t\t});\n\t\t\t\n\t\t\tif(index > -1){\n\n\t\t\t\telement = row.getElement();\n\t\t\t\t\n\t\t\t\tif(element){\n\t\t\t\t\telement.classList.remove(\"tabulator-selected\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = false;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\n\t\t\t\t}\n\t\t\t\tself.selectedRows.splice(index, 1);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowDeselected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tself._rowSelectionChanged(silent, undefined, row);\n\n\t\t\t\treturn row;\n\t\t\t}\n\t\t}else {\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetSelectedData(){\n\t\tvar data = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tgetSelectedRows(){\n\t\tvar rows = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\trows.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t_rowSelectionChanged(silent, selected = [], deselected = []){\n\t\tif(this.headerCheckboxElement){\n\t\t\tif(this.selectedRows.length === 0){\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else if(this.table.rowManager.rows.length === this.selectedRows.length){\n\t\t\t\tthis.headerCheckboxElement.checked = true;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else {\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(!silent){\n\t\t\tif(!Array.isArray(selected)){\n\t\t\t\tselected = [selected];\n\t\t\t}\n\n\t\t\tselected = selected.map(row => row.getComponent());\n\n\t\t\tif(!Array.isArray(deselected)){\n\t\t\t\tdeselected = [deselected];\n\t\t\t}\n\n\t\t\tdeselected = deselected.map(row => row.getComponent());\n\n\t\t\tthis.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows(), selected, deselected);\n\t\t}\n\t}\n\t\n\tregisterRowSelectCheckbox (row, element) {\n\t\tif(!row._row.modules.select){\n\t\t\trow._row.modules.select = {};\n\t\t}\n\t\t\n\t\trow._row.modules.select.checkboxEl = element;\n\t}\n\t\n\tregisterHeaderSelectCheckbox (element) {\n\t\tthis.headerCheckboxElement = element;\n\t}\n\t\n\tchildRowSelection(row, select){\n\t\tvar children = this.table.modules.dataTree.getChildren(row, true);\n\t\t\n\t\tif(select){\n\t\t\tfor(let child of children){\n\t\t\t\tthis._selectRow(child, true);\n\t\t\t}\n\t\t}else {\n\t\t\tfor(let child of children){\n\t\t\t\tthis._deselectRow(child, true);\n\t\t\t}\n\t\t}\n\t}\n}\n\nSelectRow.moduleName = \"selectRow\";\n\n//sort numbers\nfunction number$1(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar decimal = params.decimalSeparator;\n\tvar thousand = params.thousandSeparator;\n\tvar emptyAlign = 0;\n\n\ta = String(a);\n\tb = String(b);\n\n\tif(thousand){\n\t\ta = a.split(thousand).join(\"\");\n\t\tb = b.split(thousand).join(\"\");\n\t}\n\n\tif(decimal){\n\t\ta = a.split(decimal).join(\".\");\n\t\tb = b.split(decimal).join(\".\");\n\t}\n\n\ta = parseFloat(a);\n\tb = parseFloat(b);\n\n\t//handle non numeric values\n\tif(isNaN(a)){\n\t\temptyAlign =  isNaN(b) ? 0 : -1;\n\t}else if(isNaN(b)){\n\t\temptyAlign =  1;\n\t}else {\n\t\t//compare valid values\n\t\treturn a - b;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}\n\n//sort strings\nfunction string(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\tvar locale;\n\n\t//handle empty values\n\tif(!a){\n\t\temptyAlign =  !b ? 0 : -1;\n\t}else if(!b){\n\t\temptyAlign =  1;\n\t}else {\n\t\t//compare valid values\n\t\tswitch(typeof params.locale){\n\t\t\tcase \"boolean\":\n\t\t\t\tif(params.locale){\n\t\t\t\t\tlocale = this.langLocale();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"string\":\n\t\t\t\tlocale = params.locale;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}\n\n//sort datetime\nfunction datetime$2(a, b, aRow, bRow, column, dir, params){\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar format = params.format || \"dd/MM/yyyy HH:mm:ss\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tif(typeof DT != \"undefined\"){\n\t\tif(!DT.isDateTime(a)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\ta = DT.fromISO(String(a));\n\t\t\t}else {\n\t\t\t\ta = DT.fromFormat(String(a), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!DT.isDateTime(b)){\n\t\t\tif(format === \"iso\"){\n\t\t\t\tb = DT.fromISO(String(b));\n\t\t\t}else {\n\t\t\t\tb = DT.fromFormat(String(b), format);\n\t\t\t}\n\t\t}\n\n\t\tif(!a.isValid){\n\t\t\temptyAlign = !b.isValid ? 0 : -1;\n\t\t}else if(!b.isValid){\n\t\t\temptyAlign =  1;\n\t\t}else {\n\t\t\t//compare valid values\n\t\t\treturn a - b;\n\t\t}\n\n\t\t//fix empty values in position\n\t\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\t\temptyAlign *= -1;\n\t\t}\n\n\t\treturn emptyAlign;\n\n\t}else {\n\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\n\t}\n}\n\n//sort date\nfunction date$1(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"dd/MM/yyyy\";\n\t}\n\n\treturn datetime$2.call(this, a, b, aRow, bRow, column, dir, params);\n}\n\n//sort times\nfunction time$1(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"HH:mm\";\n\t}\n\n\treturn datetime$2.call(this, a, b, aRow, bRow, column, dir, params);\n}\n\n//sort booleans\nfunction boolean(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n\n\treturn el1 - el2;\n}\n\n//sort if element contains any data\nfunction array(a, b, aRow, bRow, column, dir, params){\n\tvar type = params.type || \"length\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tfunction calc(value){\n\t\tvar result;\n\n\t\tswitch(type){\n\t\t\tcase \"length\":\n\t\t\t\tresult = value.length;\n\t\t\t\tbreak;\n\n\t\t\tcase \"sum\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"max\":\n\t\t\t\tresult = Math.max.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"min\":\n\t\t\t\tresult = Math.min.apply(null, value) ;\n\t\t\t\tbreak;\n\n\t\t\tcase \"avg\":\n\t\t\t\tresult = value.reduce(function(c, d){\n\t\t\t\t\treturn c + d;\n\t\t\t\t}) / value.length;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t//handle non array values\n\tif(!Array.isArray(a)){\n\t\temptyAlign = !Array.isArray(b) ? 0 : -1;\n\t}else if(!Array.isArray(b)){\n\t\temptyAlign = 1;\n\t}else {\n\t\treturn calc(b) - calc(a);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}\n\n//sort if element contains any data\nfunction exists(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\n\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\n\n\treturn el1 - el2;\n}\n\n//sort alpha numeric strings\nfunction alphanum(as, bs, aRow, bRow, column, dir, params){\n\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\n\t//handle empty values\n\tif(!as && as!== 0){\n\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t}else if(!bs && bs!== 0){\n\t\temptyAlign =  1;\n\t}else {\n\n\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\ta = String(as).toLowerCase();\n\t\tb = String(bs).toLowerCase();\n\t\tif(a === b) return 0;\n\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\ta = a.match(rx);\n\t\tb = b.match(rx);\n\t\tL = a.length > b.length ? b.length : a.length;\n\t\twhile(i < L){\n\t\t\ta1= a[i];\n\t\t\tb1= b[i++];\n\t\t\tif(a1 !== b1){\n\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\treturn a1 - b1;\n\t\t\t\t}\n\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t}\n\t\t}\n\n\t\treturn a.length > b.length;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n}\n\nvar defaultSorters = {\n\tnumber:number$1,\n\tstring:string,\n\tdate:date$1,\n\ttime:time$1,\n\tdatetime:datetime$2,\n\tboolean:boolean,\n\tarray:array,\n\texists:exists,\n\talphanum:alphanum\n};\n\nclass Sort extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.sortList = []; //holder current sort\n\t\tthis.changed = false; //has the sort changed since last render\n\n\t\tthis.registerTableOption(\"sortMode\", \"local\"); //local or remote sorting\n\n\t\tthis.registerTableOption(\"initialSort\", false); //initial sorting criteria\n\t\tthis.registerTableOption(\"columnHeaderSortMulti\", true); //multiple or single column sorting\n\t\tthis.registerTableOption(\"sortOrderReverse\", false); //reverse internal sort ordering\n\t\tthis.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"); //header sort element\n\t\tthis.registerTableOption(\"headerSortClickElement\", \"header\"); //element which triggers sort when clicked\n\n\t\tthis.registerColumnOption(\"sorter\");\n\t\tthis.registerColumnOption(\"sorterParams\");\n\n\t\tthis.registerColumnOption(\"headerSort\", true);\n\t\tthis.registerColumnOption(\"headerSortStartingDir\");\n\t\tthis.registerColumnOption(\"headerSortTristate\");\n\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t\tthis.registerDataHandler(this.sort.bind(this), 20);\n\n\t\tthis.registerTableFunction(\"setSort\", this.userSetSort.bind(this));\n\t\tthis.registerTableFunction(\"getSorters\", this.getSort.bind(this));\n\t\tthis.registerTableFunction(\"clearSort\", this.clearSort.bind(this));\n\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteSortParams.bind(this));\n\t\t}\n\t}\n\n\ttableBuilt(){\n\t\tif(this.table.options.initialSort){\n\t\t\tthis.setSort(this.table.options.initialSort);\n\t\t}\n\t}\n\n\tremoteSortParams(data, config, silent, params){\n\t\tvar sorters = this.getSort();\n\n\t\tsorters.forEach((item) => {\n\t\t\tdelete item.column;\n\t\t});\n\n\t\tparams.sort = sorters;\n\n\t\treturn params;\n\t}\n\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tuserSetSort(sortList, dir){\n\t\tthis.setSort(sortList, dir);\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\n\tclearSort(){\n\t\tthis.clear();\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//initialize column header for sorting\n\tinitializeColumn(column){\n\t\tvar sorter = false,\n\t\tcolEl,\n\t\tarrowEl;\n\n\t\tswitch(typeof column.definition.sorter){\n\t\t\tcase \"string\":\n\t\t\t\tif(Sort.sorters[column.definition.sorter]){\n\t\t\t\t\tsorter = Sort.sorters[column.definition.sorter];\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tsorter = column.definition.sorter;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tcolumn.modules.sort = {\n\t\t\tsorter:sorter, dir:\"none\",\n\t\t\tparams:column.definition.sorterParams || {},\n\t\t\tstartingDir:column.definition.headerSortStartingDir || \"asc\",\n\t\t\ttristate: column.definition.headerSortTristate,\n\t\t};\n\n\t\tif(column.definition.headerSort !== false){\n\n\t\t\tcolEl = column.getElement();\n\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\n\n\t\t\tarrowEl = document.createElement(\"div\");\n\t\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\n\n\t\t\tswitch(this.table.options.headerSortClickElement){\n\t\t\t\tcase \"icon\":\n\t\t\t\t\tarrowEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"header\":\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcolEl.classList.add(\"tabulator-col-sorter-element\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tswitch(this.table.options.headerSortElement){\n\t\t\t\tcase \"function\":\n\t\t\t\t\t//do nothing\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tdefault:\n\t\t\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\n\t\t\t}\n\n\t\t\t//create sorter arrow\n\t\t\tcolumn.titleHolderElement.appendChild(arrowEl);\n\n\t\t\tcolumn.modules.sort.element = arrowEl;\n\n\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\n\t\t\t//sort on click\n\t\t\t(this.table.options.headerSortClickElement === \"icon\" ? arrowEl : colEl).addEventListener(\"click\", (e) => {\n\t\t\t\tvar dir = \"\",\n\t\t\t\tsorters=[],\n\t\t\t\tmatch = false;\n\n\t\t\t\tif(column.modules.sort){\n\t\t\t\t\tif(column.modules.sort.tristate){\n\t\t\t\t\t\tif(column.modules.sort.dir == \"none\"){\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tif(column.modules.sort.dir == column.modules.sort.startingDir){\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tdir = \"none\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tswitch(column.modules.sort.dir){\n\t\t\t\t\t\t\tcase \"asc\":\n\t\t\t\t\t\t\t\tdir = \"desc\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"desc\":\n\t\t\t\t\t\t\t\tdir = \"asc\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n\t\t\t\t\t\tsorters = this.getSort();\n\n\t\t\t\t\t\tmatch = sorters.findIndex((sorter) => {\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif(match > -1){\n\t\t\t\t\t\t\tsorters[match].dir = dir;\n\n\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push(match);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push({column:column, dir:dir});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//add to existing sort\n\t\t\t\t\t\tthis.setSort(sorters);\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(dir == \"none\"){\n\t\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t//sort by column only\n\t\t\t\t\t\t\tthis.setSort(column, dir);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// this.table.rowManager.sorterRefresh(!this.sortList.length);\n\t\t\t\t\tthis.refreshSort();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\trefreshSort(){\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.reloadData(null, false, false);\n\t\t}else {\n\t\t\tthis.refreshData(true);\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the sorters have changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//return current sorters\n\tgetSort(){\n\t\tvar self = this,\n\t\tsorters = [];\n\n\t\tself.sortList.forEach(function(item){\n\t\t\tif(item.column){\n\t\t\t\tsorters.push({column:item.column.getComponent(), field:item.column.getField(), dir:item.dir});\n\t\t\t}\n\t\t});\n\n\t\treturn sorters;\n\t}\n\n\t//change sort list and trigger sort\n\tsetSort(sortList, dir){\n\t\tvar self = this,\n\t\tnewSortList = [];\n\n\t\tif(!Array.isArray(sortList)){\n\t\t\tsortList = [{column: sortList, dir:dir}];\n\t\t}\n\n\t\tsortList.forEach(function(item){\n\t\t\tvar column;\n\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\n\n\t\t\tif(column){\n\t\t\t\titem.column = column;\n\t\t\t\tnewSortList.push(item);\n\t\t\t\tself.changed = true;\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n\t\t\t}\n\n\t\t});\n\n\t\tself.sortList = newSortList;\n\n\t\tthis.dispatch(\"sort-changed\");\n\t}\n\n\t//clear sorters\n\tclear(){\n\t\tthis.setSort([]);\n\t}\n\n\t//find appropriate sorter for column\n\tfindSorter(column){\n\t\tvar row = this.table.rowManager.activeRows[0],\n\t\tsorter = \"string\",\n\t\tfield, value;\n\n\t\tif(row){\n\t\t\trow = row.getData();\n\t\t\tfield = column.getField();\n\n\t\t\tif(field){\n\n\t\t\t\tvalue = column.getFieldValue(row);\n\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn Sort.sorters[sorter];\n\t}\n\n\t//work through sort list sorting data\n\tsort(data){\n\t\tvar self = this,\n\t\tsortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n\t\tsortListActual = [],\n\t\trowComponents = [];\n\n\t\tif(this.subscribedExternal(\"dataSorting\")){\n\t\t\tthis.dispatchExternal(\"dataSorting\", self.getSort());\n\t\t}\n\n\t\tself.clearColumnHeaders();\n\n\t\tif(this.table.options.sortMode !== \"remote\"){\n\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tvar sortObj;\n\n\t\t\t\tif(item.column){\n\t\t\t\t\tsortObj = item.column.modules.sort;\n\n\t\t\t\t\tif(sortObj){\n\n\t\t\t\t\t\t//if no sorter has been defined, take a guess\n\t\t\t\t\t\tif(!sortObj.sorter){\n\t\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n\n\t\t\t\t\t\tsortListActual.push(item);\n\t\t\t\t\t}\n\n\t\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//sort data\n\t\t\tif (sortListActual.length) {\n\t\t\t\tself._sortItems(data, sortListActual);\n\t\t\t}\n\n\t\t}else {\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataSorted\")){\n\t\t\tdata.forEach((row) => {\n\t\t\t\trowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataSorted\", self.getSort(), rowComponents);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//clear sort arrows on columns\n\tclearColumnHeaders(){\n\t\tthis.table.columnManager.getRealColumns().forEach((column) => {\n\t\t\tif(column.modules.sort){\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\n\t\t\t\tthis.setColumnHeaderSortIcon(column, \"none\");\n\t\t\t}\n\t\t});\n\t}\n\n\t//set the column header sort direction\n\tsetColumnHeader(column, dir){\n\t\tcolumn.modules.sort.dir = dir;\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir === \"asc\" ? \"ascending\" : \"descending\");\n\t\tthis.setColumnHeaderSortIcon(column, dir);\n\t}\n\n\tsetColumnHeaderSortIcon(column, dir){\n\t\tvar sortEl = column.modules.sort.element,\n\t\tarrowEl;\n\n\t\tif(column.definition.headerSort && typeof this.table.options.headerSortElement === \"function\"){\n\t\t\twhile(sortEl.firstChild) sortEl.removeChild(sortEl.firstChild);\n\n\t\t\tarrowEl = this.table.options.headerSortElement.call(this.table, column.getComponent(), dir);\n\t\t\t\n\t\t\tif(typeof arrowEl === \"object\"){\n\t\t\t\tsortEl.appendChild(arrowEl);\n\t\t\t}else {\n\t\t\t\tsortEl.innerHTML = arrowEl;\n\t\t\t}\n\t\t}\n\t}\n\n\t//sort each item in sort list\n\t_sortItems(data, sortList){\n\t\tvar sorterCount = sortList.length - 1;\n\n\t\tdata.sort((a, b) => {\n\t\t\tvar result;\n\n\t\t\tfor(var i = sorterCount; i>= 0; i--){\n\t\t\t\tlet sortItem = sortList[i];\n\n\t\t\t\tresult = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\n\t\t\t\tif(result !== 0){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\t//process individual rows for a sort function on active data\n\t_sortRow(a, b, column, dir, params){\n\t\tvar el1Comp, el2Comp;\n\n\t\t//switch elements depending on search direction\n\t\tvar el1 = dir == \"asc\" ? a : b;\n\t\tvar el2 = dir == \"asc\" ? b : a;\n\n\t\ta = column.getFieldValue(el1.getData());\n\t\tb = column.getFieldValue(el2.getData());\n\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\n\n\t\tel1Comp = el1.getComponent();\n\t\tel2Comp = el2.getComponent();\n\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n\t}\n}\n\nSort.moduleName = \"sort\";\n\n//load defaults\nSort.sorters = defaultSorters;\n\nclass Tooltip extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.tooltipSubscriber = null,\n\t\tthis.headerSubscriber = null,\n\t\t\n\t\tthis.timeout = null;\n\t\tthis.popupInstance = null;\n\t\t\n\t\tthis.registerTableOption(\"tooltipGenerationMode\", undefined);  //deprecated\n\t\tthis.registerTableOption(\"tooltipDelay\", 300); \n\t\t\n\t\tthis.registerColumnOption(\"tooltip\");\n\t\tthis.registerColumnOption(\"headerTooltip\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecatedOptionsCheck();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecatedOptionsCheck(){\n\t\tthis.deprecationCheckMsg(\"tooltipGenerationMode\", \"This option is no longer needed as tooltips are always generated on hover now\");\n\t}\t\n\t\n\tinitializeColumn(column){\n\t\tif(column.definition.headerTooltip && !this.headerSubscriber){\n\t\t\tthis.headerSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"column-mousemove\", this.mousemoveCheck.bind(this, \"headerTooltip\"));\n\t\t\tthis.subscribe(\"column-mouseout\", this.mouseoutCheck.bind(this, \"headerTooltip\"));\n\t\t}\n\t\t\n\t\tif(column.definition.tooltip && !this.tooltipSubscriber){\n\t\t\tthis.tooltipSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"cell-mousemove\", this.mousemoveCheck.bind(this, \"tooltip\"));\n\t\t\tthis.subscribe(\"cell-mouseout\", this.mouseoutCheck.bind(this, \"tooltip\"));\n\t\t}\n\t}\n\t\n\tmousemoveCheck(action, e, component){\n\t\tvar tooltip = action === \"tooltip\" ? component.column.definition.tooltip : component.definition.headerTooltip;\n\t\t\n\t\tif(tooltip){\n\t\t\tthis.clearPopup();\n\t\t\tthis.timeout = setTimeout(this.loadTooltip.bind(this, e, component, tooltip), this.table.options.tooltipDelay);\n\t\t}\n\t}\n\n\tmouseoutCheck(action, e, component){\n\t\tif(!this.popupInstance){\n\t\t\tthis.clearPopup();\n\t\t}\n\t}\n\t\n\tclearPopup(action, e, component){\n\t\tclearTimeout(this.timeout);\n\t\tthis.timeout = null;\n\t\t\n\t\tif(this.popupInstance){\n\t\t\tthis.popupInstance.hide();\n\t\t}\n\t}\n\t\n\tloadTooltip(e, component, tooltip){\n\t\tvar contentsEl, renderedCallback, coords;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(typeof tooltip === \"function\"){\n\t\t\ttooltip = tooltip(e, component.getComponent(), onRendered);\n\t\t}\n\t\t\n\t\tif(tooltip instanceof HTMLElement){\n\t\t\tcontentsEl = tooltip;\n\t\t}else {\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\t\n\t\t\tif(tooltip === true){\n\t\t\t\tif(component instanceof Cell){\n\t\t\t\t\ttooltip = component.value;\n\t\t\t\t}else {\n\t\t\t\t\tif(component.definition.field){\n\t\t\t\t\t\tthis.langBind(\"columns|\" + component.definition.field, (value) => {\n\t\t\t\t\t\t\tcontentsEl.innerHTML = tooltip = value || component.definition.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t}else {\n\t\t\t\t\t\ttooltip = component.definition.title;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcontentsEl.innerHTML = tooltip;\n\t\t}\n\t\t\n\t\tif(tooltip || tooltip === 0 || tooltip === false){\n\t\t\tcontentsEl.classList.add(\"tabulator-tooltip\");\n\n\t\t\tcontentsEl.addEventListener(\"mousemove\", e => e.preventDefault());\n\t\t\t\n\t\t\tthis.popupInstance = this.popup(contentsEl);\n\t\t\t\n\t\t\tif(typeof renderedCallback === \"function\"){\n\t\t\t\tthis.popupInstance.renderCallback(renderedCallback);\n\t\t\t}\n\n\t\t\tcoords = this.popupInstance.containerEventCoords(e);\n\t\t\t\n\t\t\tthis.popupInstance.show(coords.x + 15, coords.y + 15).hideOnBlur(() => {\n\t\t\t\tthis.dispatchExternal(\"TooltipClosed\", component.getComponent());\n\t\t\t\tthis.popupInstance = null;\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatchExternal(\"TooltipOpened\", component.getComponent());\n\t\t}\n\t}\n}\n\nTooltip.moduleName = \"tooltip\";\n\nvar defaultValidators = {\n\t//is integer\n\tinteger: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && Math.floor(value) === value;\n\t},\n\n\t//is float\n\tfloat: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\tvalue = Number(value);\n\n\t\treturn !isNaN(value) && isFinite(value) && value % 1 !== 0;\n\t},\n\n\t//must be a number\n\tnumeric: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn !isNaN(value);\n\t},\n\n\t//must be a string\n\tstring: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn isNaN(value);\n\t},\n\n\t//maximum value\n\tmax: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) <= parameters;\n\t},\n\n\t//minimum value\n\tmin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) >= parameters;\n\t},\n\n\t//starts with  value\n\tstarts: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n\t},\n\n\t//ends with  value\n\tends: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n\t},\n\n\n\t//minimum string length\n\tminLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length >= parameters;\n\t},\n\n\t//maximum string length\n\tmaxLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length <= parameters;\n\t},\n\n\t//in provided value list\n\tin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(typeof parameters == \"string\"){\n\t\t\tparameters = parameters.split(\"|\");\n\t\t}\n\n\t\treturn parameters.indexOf(value) > -1;\n\t},\n\n\t//must match provided regex\n\tregex: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar reg = new RegExp(parameters);\n\n\t\treturn reg.test(value);\n\t},\n\n\t//value must be unique in this column\n\tunique: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar unique = true;\n\n\t\tvar cellData = cell.getData();\n\t\tvar column = cell.getColumn()._getSelf();\n\n\t\tthis.table.rowManager.rows.forEach(function(row){\n\t\t\tvar data = row.getData();\n\n\t\t\tif(data !== cellData){\n\t\t\t\tif(value == column.getFieldValue(data)){\n\t\t\t\t\tunique = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn unique;\n\t},\n\n\t//must have a value\n\trequired:function(cell, value, parameters){\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\n\t},\n};\n\nclass Validate extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.invalidCells = [];\n\t\t\n\t\tthis.registerTableOption(\"validationMode\", \"blocking\");\n\t\t\n\t\tthis.registerColumnOption(\"validator\");\n\t\t\n\t\tthis.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this));\n\t\tthis.registerTableFunction(\"validate\", this.userValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\n\t}\n\t\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-delete\", this.clearValidation.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\t\n\t\tthis.subscribe(\"edit-success\", this.editValidate.bind(this));\n\t\tthis.subscribe(\"edit-editor-clear\", this.editorClear.bind(this));\n\t\tthis.subscribe(\"edit-edited-clear\", this.editedClear.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Event Handling //////////\n\t///////////////////////////////////\n\t\n\teditValidate(cell, value, previousValue){\n\t\tvar valid = this.table.options.validationMode !== \"manual\" ? this.validate(cell.column.modules.validate, cell, value) : true;\n\t\t\n\t\t// allow time for editor to make render changes then style cell\n\t\tif(valid !== true){\n\t\t\tsetTimeout(() => {\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t\tthis.dispatchExternal(\"validationFailed\", cell.getComponent(), value, valid);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn valid;\n\t}\n\t\n\teditorClear(cell, cancelled){\n\t\tif(cancelled){\n\t\t\tif(cell.column.modules.validate){\n\t\t\t\tthis.cellValidate(cell);\n\t\t\t}\n\t\t}\n\n\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t}\n\t\n\teditedClear(cell){\n\t\tif(cell.modules.validate){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Cell Functions /////////\n\t///////////////////////////////////\n\t\n\tcellIsValid(cell){\n\t\treturn cell.modules.validate ? (cell.modules.validate.invalid || true) : true;\n\t}\n\t\n\tcellValidate(cell){\n\t\treturn this.validate(cell.column.modules.validate, cell, cell.getValue());\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Column Functions ////////\n\t///////////////////////////////////\n\t\n\tcolumnValidate(column){\n\t\tvar invalid = [];\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Row Functions //////////\n\t///////////////////////////////////\n\t\n\trowValidate(row){\n\t\tvar invalid = [];\n\t\t\n\t\trow.cells.forEach((cell) => {\n\t\t\tif(this.cellValidate(cell) !== true){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\t\n\tuserClearCellValidation(cells){\n\t\tif(!cells){\n\t\t\tcells = this.getInvalidCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.clearValidation(cell._getSelf());\n\t\t});\n\t}\n\t\n\tuserValidate(cells){\n\t\tvar output = [];\n\t\t\n\t\t//clear row data\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trow = row.getComponent();\n\t\t\t\n\t\t\tvar valid = row.validate();\n\t\t\t\n\t\t\tif(valid !== true){\n\t\t\t\toutput = output.concat(valid);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output.length ? output : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.validator !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//validate\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = [],\n\t\tvalidator;\n\t\t\n\t\tif(column.definition.validator){\n\t\t\t\n\t\t\tif(Array.isArray(column.definition.validator)){\n\t\t\t\tcolumn.definition.validator.forEach((item) => {\n\t\t\t\t\tvalidator = self._extractValidator(item);\n\t\t\t\t\t\n\t\t\t\t\tif(validator){\n\t\t\t\t\t\tconfig.push(validator);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\n\t\t\t\t\n\t\t\t\tif(validator){\n\t\t\t\t\tconfig.push(validator);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.validate = config.length ? config : false;\n\t\t}\n\t}\n\t\n\t_extractValidator(value){\n\t\tvar type, params, pos;\n\t\t\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\t\tpos = value.indexOf(':');\n\t\t\t\n\t\t\t\tif(pos > -1){\n\t\t\t\t\ttype = value.substring(0,pos);\n\t\t\t\t\tparams = value.substring(pos+1);\n\t\t\t\t}else {\n\t\t\t\t\ttype = value;\n\t\t\t\t}\n\t\t\t\n\t\t\t\treturn this._buildValidator(type, params);\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\t\treturn this._buildValidator(value);\n\t\t\t\n\t\t\tcase \"object\":\n\t\t\t\treturn this._buildValidator(value.type, value.parameters);\n\t\t}\n\t}\n\t\n\t_buildValidator(type, params){\n\t\t\n\t\tvar func = typeof type == \"function\" ? type : Validate.validators[type];\n\t\t\n\t\tif(!func){\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\n\t\t\treturn false;\n\t\t}else {\n\t\t\treturn {\n\t\t\t\ttype:typeof type == \"function\" ? \"function\" : type,\n\t\t\t\tfunc:func,\n\t\t\t\tparams:params,\n\t\t\t};\n\t\t}\n\t}\n\t\n\tvalidate(validators, cell, value){\n\t\tvar self = this,\n\t\tfailedValidators = [],\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\n\t\tif(validators){\n\t\t\tvalidators.forEach((item) => {\n\t\t\t\tif(!item.func.call(self, cell.getComponent(), value, item.params)){\n\t\t\t\t\tfailedValidators.push({\n\t\t\t\t\t\ttype:item.type,\n\t\t\t\t\t\tparameters:item.params\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(!cell.modules.validate){\n\t\t\tcell.modules.validate = {};\n\t\t}\n\t\t\n\t\tif(!failedValidators.length){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}else {\n\t\t\tcell.modules.validate.invalid = failedValidators;\n\t\t\t\n\t\t\tif(this.table.options.validationMode !== \"manual\"){\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t}\n\t\t\t\n\t\t\tif(invalidIndex == -1){\n\t\t\t\tthis.invalidCells.push(cell);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn failedValidators.length ? failedValidators : true;\n\t}\n\t\n\tgetInvalidCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.invalidCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearValidation(cell){\n\t\tvar invalidIndex;\n\t\t\n\t\tif(cell.modules.validate && cell.modules.validate.invalid){\n\t\t\t\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\t\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nValidate.moduleName = \"validate\";\n\n//load defaults\nValidate.validators = defaultValidators;\n\nvar modules = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tAccessorModule: Accessor,\n\tAjaxModule: Ajax,\n\tClipboardModule: Clipboard,\n\tColumnCalcsModule: ColumnCalcs,\n\tDataTreeModule: DataTree,\n\tDownloadModule: Download,\n\tEditModule: Edit$1,\n\tExportModule: Export,\n\tFilterModule: Filter,\n\tFormatModule: Format,\n\tFrozenColumnsModule: FrozenColumns,\n\tFrozenRowsModule: FrozenRows,\n\tGroupRowsModule: GroupRows,\n\tHistoryModule: History,\n\tHtmlTableImportModule: HtmlTableImport,\n\tImportModule: Import,\n\tInteractionModule: Interaction,\n\tKeybindingsModule: Keybindings,\n\tMenuModule: Menu,\n\tMoveColumnsModule: MoveColumns,\n\tMoveRowsModule: MoveRows,\n\tMutatorModule: Mutator,\n\tPageModule: Page,\n\tPersistenceModule: Persistence,\n\tPopupModule: Popup$1,\n\tPrintModule: Print,\n\tReactiveDataModule: ReactiveData,\n\tResizeColumnsModule: ResizeColumns,\n\tResizeRowsModule: ResizeRows,\n\tResizeTableModule: ResizeTable,\n\tResponsiveLayoutModule: ResponsiveLayout,\n\tSelectRowModule: SelectRow,\n\tSortModule: Sort,\n\tTooltipModule: Tooltip,\n\tValidateModule: Validate\n});\n\nvar defaultOptions = {\n\n\tdebugEventsExternal:false, //flag to console log events\n\tdebugEventsInternal:false, //flag to console log events\n\tdebugInvalidOptions:true, //allow toggling of invalid option warnings\n\tdebugInvalidComponentFuncs:true, //allow toggling of invalid component warnings\n\tdebugInitialization:true, //allow toggling of pre initialization function call warnings\n\tdebugDeprecation:true, //allow toggling of deprecation warnings\n\n\theight:false, //height of tabulator\n\tminHeight:false, //minimum height of tabulator\n\tmaxHeight:false, //maximum height of tabulator\n\n\tcolumnHeaderVertAlign:\"top\", //vertical alignment of column headers\n\n\tpopupContainer:false,\n\n\tcolumns:[],//store for colum header info\n\tcolumnDefaults:{}, //store column default props\n\n\tdata:false, //default starting data\n\n\tautoColumns:false, //build columns from data row structure\n\tautoColumnsDefinitions:false,\n\n\tnestedFieldSeparator:\".\", //separator for nested data\n\n\tfooterElement:false, //hold footer element\n\n\tindex:\"id\", //filed for row index\n\n\ttextDirection:\"auto\",\n\n\taddRowPos:\"bottom\", //position to insert blank rows, top|bottom\n\n\theaderVisible:true, //hide header\n\n\trenderVertical:\"virtual\",\n\trenderHorizontal:\"basic\",\n\trenderVerticalBuffer:0, // set virtual DOM buffer size\n\n\tscrollToRowPosition:\"top\",\n\tscrollToRowIfVisible:true,\n\n\tscrollToColumnPosition:\"left\",\n\tscrollToColumnIfVisible:true,\n\n\trowFormatter:false,\n\trowFormatterPrint:null,\n\trowFormatterClipboard:null,\n\trowFormatterHtmlOutput:null,\n\n\trowHeight:null,\n\n\tplaceholder:false,\n\n\tdataLoader:true,\n\tdataLoaderLoading:false,\n\tdataLoaderError:false,\n\tdataLoaderErrorTimeout:3000,\n\n\tdataSendParams:{},\n\n\tdataReceiveParams:{},\n};\n\nclass OptionsList {\n\tconstructor(table, msgType, defaults = {}){\n\t\tthis.table = table;\n\t\tthis.msgType = msgType;\n\t\tthis.registeredDefaults = Object.assign({}, defaults);\n\t}\n\t\n\tregister(option, value){\n\t\tthis.registeredDefaults[option] = value;\n\t}\n\t\n\tgenerate(defaultOptions, userOptions = {}){\n\t\tvar output = Object.assign({}, this.registeredDefaults),\n\t\twarn = this.table.options.debugInvalidOptions || userOptions.debugInvalidOptions === true;\n\t\t\n\t\tObject.assign(output, defaultOptions);\n\t\t\n\t\tfor (let key in userOptions){\n\t\t\tif(!output.hasOwnProperty(key)){\n\t\t\t\tif(warn){\n\t\t\t\t\tconsole.warn(\"Invalid \" + this.msgType + \" option:\", key);\n\t\t\t\t}\n\n\t\t\t\toutput[key] = userOptions.key;\n\t\t\t}\n\t\t}\n\t\n\t\t\n\t\tfor (let key in output){\n\t\t\tif(key in userOptions){\n\t\t\t\toutput[key] = userOptions[key];\n\t\t\t}else {\n\t\t\t\tif(Array.isArray(output[key])){\n\t\t\t\t\toutput[key] = Object.assign([], output[key]);\n\t\t\t\t}else if(typeof output[key] === \"object\" && output[key] !== null){\n\t\t\t\t\toutput[key] = Object.assign({}, output[key]);\n\t\t\t\t}else if (typeof output[key] === \"undefined\"){\n\t\t\t\t\tdelete output[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n}\n\nclass Renderer extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.elementVertical = table.rowManager.element;\n\t\tthis.elementHorizontal = table.columnManager.element;\n\t\tthis.tableElement =  table.rowManager.tableElement;\n\n\t\tthis.verticalFillMode = \"fit\"; // used by row manager to determine how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the container without resizing it)\n\t}\n\n\n\t///////////////////////////////////\n\t/////// Internal Bindings /////////\n\t///////////////////////////////////\n\n\tinitialize(){\n\t\t//initialize core functionality\n\t}\n\n\tclearRows(){\n\t\t//clear down existing rows layout\n\t}\n\n\tclearColumns(){\n\t\t//clear down existing columns layout\n\t}\n\n\n\treinitializeColumnWidths(columns){\n\t\t//resize columns to fit data\n\t}\n\n\n\trenderRows(){\n\t\t//render rows from a clean slate\n\t}\n\n\trenderColumns(){\n\t\t//render columns from a clean slate\n\t}\n\n\trerenderRows(callback){\n\t\t// rerender rows and keep position\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t}\n\n\trerenderColumns(update, blockRedraw){\n\t\t//rerender columns\n\t}\n\n\trenderRowCells(row){\n\t\t//render the cells in a row\n\t}\n\n\trerenderRowCells(row, force){\n\t\t//rerender the cells in a row\n\t}\n\n\tscrollColumns(left, dir){\n\t\t//handle horizontal scrolling\n\t}\n\n\tscrollRows(top, dir){\n\t\t//handle vertical scrolling\n\t}\n\n\tresize(){\n\t\t//container has resized, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\n\t}\n\n\tscrollToRow(row){\n\t\t//scroll to a specific row\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\t//determine weather the row is nearest the top or bottom of the table, return true for top or false for bottom\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\t//return the visible rows\n\t\treturn [];\n\t}\n\n\t///////////////////////////////////\n\t//////// Helper Functions /////////\n\t///////////////////////////////////\n\n\trows(){\n\t\treturn this.table.rowManager.getDisplayRows();\n\t}\n\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else {\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t/////// External Triggers /////////\n\t/////// (DO NOT OVERRIDE) /////////\n\t///////////////////////////////////\n\n\tclear(){\n\t\t//clear down existing layout\n\t\tthis.clearRows();\n\t\tthis.clearColumns();\n\t}\n\n\trender(){\n\t\t//render from a clean slate\n\t\tthis.renderRows();\n\t\tthis.renderColumns();\n\t}\n\n\trerender(callback){\n\t\t// rerender and keep position\n\t\tthis.rerenderRows();\n\t\tthis.rerenderColumns();\n\t}\n\n\tscrollToRowPosition(row, position, ifVisible){\n\t\tvar rowIndex = this.rows().indexOf(row),\n\t\trowEl = row.getElement(),\n\t\toffset = 0;\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(rowIndex > -1){\n\n\t\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\t\tifVisible = this.table.options.scrollToRowIfVisible;\n\t\t\t\t}\n\n\t\t\t\t//check row visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(Helpers.elVisible(rowEl)){\n\t\t\t\t\t\toffset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight){\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\t\tposition = this.table.options.scrollToRowPosition;\n\t\t\t\t}\n\n\t\t\t\tif(position === \"nearest\"){\n\t\t\t\t\tposition = this.scrollToRowNearestTop(row) ? \"top\" : \"bottom\";\n\t\t\t\t}\n\n\t\t\t\t//scroll to row\n\t\t\t\tthis.scrollToRow(row);\n\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop + (rowEl.offsetTop - this.elementVertical.scrollTop) - ((this.elementVertical.scrollHeight - rowEl.offsetTop) / 2);\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.clientHeight / 2);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"bottom\":\n\n\t\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"top\":\n\t\t\t\t\t\tthis.elementVertical.scrollTop = rowEl.offsetTop;\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\n\t\t\t\treject(\"Scroll Error - Row not visible\");\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass BasicHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\trenderRowCells(row, inFragment) {\n\t\tconst rowFrag = document.createDocumentFragment();\n\t\trow.cells.forEach((cell) => {\n\t\t\trowFrag.appendChild(cell.getElement());\n\t\t});\n\t\trow.element.appendChild(rowFrag);\n\t\t\n\t\tif(!inFragment){\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tcolumns.forEach(function(column){\n\t\t\tcolumn.reinitializeWidth();\n\t\t});\n\t}\n}\n\nclass VirtualDomHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftCol = 0;\n\t\tthis.rightCol = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\t\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t\t\n\t\tthis.fitDataColAvg = 0;\n\t\t\n\t\tthis.windowBuffer = 200; //pixel margin to make column visible before it is shown on screen\n\t\t\n\t\tthis.visibleRows = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.isFitData = false;\n\t\t\n\t\tthis.columns = [];\n\t}\n\t\n\tinitialize(){\n\t\tthis.compatibilityCheck();\n\t\tthis.layoutCheck();\n\t\tthis.vertScrollListen();\n\t}\n\t\n\tcompatibilityCheck(){\t\t\n\t\tif(this.options(\"layout\") == \"fitDataTable\"){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\");\n\t\t}\n\t\t\n\t\tif(this.options(\"responsiveLayout\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\");\n\t\t}\n\t\t\n\t\tif(this.options(\"rtl\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\n\t\t}\n\t}\n\t\n\tlayoutCheck(){\n\t\tthis.isFitData = this.options(\"layout\").startsWith('fitData');\n\t}\n\t\n\tvertScrollListen(){\n\t\tthis.subscribe(\"scroll-vertical\", this.clearVisRowCache.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.clearVisRowCache.bind(this));\n\t}\n\t\n\tclearVisRowCache(){\n\t\tthis.visibleRows = null;\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\t\n\trenderColumns(row, force){\n\t\tthis.dataChange();\n\t}\n\t\n\t\n\tscrollColumns(left, dir){\n\t\tif(this.scrollLeft != left){\n\t\t\tthis.scrollLeft = left;\n\t\t\t\n\t\t\tthis.scroll(left - (this.vDomScrollPosLeft + this.windowBuffer));\n\t\t}\n\t}\n\t\n\tcalcWindowBuffer(){\n\t\tvar buffer = this.elementVertical.clientWidth;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\tvar width = column.getWidth();\n\t\t\t\t\n\t\t\t\tif(width > buffer){\n\t\t\t\t\tbuffer = width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.windowBuffer = buffer * 2;\n\t}\n\t\n\trerenderColumns(update, blockRedraw){\t\t\n\t\tvar old = {\n\t\t\tcols:this.columns,\n\t\t\tleftCol:this.leftCol,\n\t\t\trightCol:this.rightCol,\n\t\t},\n\t\tcolPos = 0;\n\t\t\n\t\tif(update && !this.initialized){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.clear();\n\t\t\n\t\tthis.calcWindowBuffer();\n\t\t\n\t\tthis.scrollLeft = this.elementVertical.scrollLeft;\n\t\t\n\t\tthis.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer;\n\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tvar config = {},\n\t\t\twidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tif(!column.modules.frozen){\t\t\t\n\t\t\t\t\twidth = column.getWidth();\n\n\t\t\t\t\tconfig.leftPos = colPos;\n\t\t\t\t\tconfig.rightPos = colPos + width;\n\t\t\t\t\t\n\t\t\t\t\tconfig.width = width;\n\t\t\t\t\t\n\t\t\t\t\tif (this.isFitData) {\n\t\t\t\t\t\tconfig.fitDataCheck = column.modules.vdomHoz ? column.modules.vdomHoz.fitDataCheck : true;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif((colPos + width > this.vDomScrollPosLeft) && (colPos < this.vDomScrollPosRight)){\n\t\t\t\t\t\t//column is visible\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.leftCol == -1){\n\t\t\t\t\t\t\tthis.leftCol = this.columns.length;\n\t\t\t\t\t\t\tthis.vDomPadLeft = colPos;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.rightCol = this.columns.length;\n\t\t\t\t\t}else {\n\t\t\t\t\t\t// column is hidden\n\t\t\t\t\t\tif(this.leftCol !== -1){\n\t\t\t\t\t\t\tthis.vDomPadRight += width;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.columns.push(column);\n\t\t\t\t\t\n\t\t\t\t\tcolumn.modules.vdomHoz = config;\n\t\t\t\t\t\n\t\t\t\t\tcolPos += width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tif(!update || this.reinitChanged(old)){\n\t\t\t\tthis.reinitializeRows();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.elementVertical.scrollLeft = this.scrollLeft;\n\t}\n\t\n\trenderRowCells(row){\n\t\tif(this.initialized){\n\t\t\tthis.initializeRow(row);\n\t\t}else {\n\t\t\tconst rowFrag = document.createDocumentFragment();\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\trowFrag.appendChild(cell.getElement());\n\t\t\t});\n\t\t\trow.element.appendChild(rowFrag);\n\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\trerenderRowCells(row, force){\n\t\tthis.reinitializeRow(row, force);\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\tthis.columns[i].reinitializeWidth();\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\t\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tclear(){\n\t\tthis.columns = [];\n\t\t\n\t\tthis.leftCol = -1;\n\t\tthis.rightCol = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t}\n\t\n\tdataChange(){\n\t\tvar change = false,\n\t\trow, rowEl;\n\t\t\n\t\tif(this.isFitData){\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\tif(!column.definition.width && column.visible){\n\t\t\t\t\tchange = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(change && this.table.rowManager.getDisplayRows().length){\n\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\t\t\n\t\t\t\trow = this.chain(\"rows-sample\", [1], [], () => {\n\t\t\t\t\treturn this.table.rowManager.getDisplayRows();\n\t\t\t\t})[0];\n\t\t\t\t\n\t\t\t\tif(row){\n\t\t\t\t\trowEl = row.getElement();\n\t\t\t\t\t\n\t\t\t\t\trow.generateCells();\n\t\t\t\t\t\n\t\t\t\t\tthis.tableElement.appendChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tfor(let colEnd = 0; colEnd < row.cells.length; colEnd++){\n\t\t\t\t\t\tlet cell = row.cells[colEnd];\n\t\t\t\t\t\trowEl.appendChild(cell.getElement());\n\t\t\t\t\t\t\n\t\t\t\t\t\tcell.column.reinitializeWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t\t\n\t\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\tif(this.options(\"layout\") === \"fitColumns\"){\n\t\t\t\tthis.layoutRefresh();\n\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treinitChanged(old){\n\t\tvar match = true;\n\t\t\n\t\tif(old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\told.cols.forEach((col, i) => {\n\t\t\tif(col !== this.columns[i]){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn !match;\n\t}\n\t\n\treinitializeRows(){\n\t\tvar visibleRows = this.getVisibleRows(),\n\t\totherRows = this.table.rowManager.getRows().filter(row => !visibleRows.includes(row));\n\n\t\tvisibleRows.forEach((row) => {\n\t\t\tthis.reinitializeRow(row, true);\n\t\t});\n\n\t\totherRows.forEach((row) =>{\n\t\t\trow.deinitialize();\n\t\t});\n\t}\n\t\n\tgetVisibleRows(){\n\t\tif (!this.visibleRows){\n\t\t\tthis.visibleRows = this.table.rowManager.getVisibleRows();\n\t\t}\n\t\t\n\t\treturn this.visibleRows;\t\n\t}\n\t\n\tscroll(diff){\n\t\tthis.vDomScrollPosLeft += diff;\n\t\tthis.vDomScrollPosRight += diff;\n\t\t\n\t\tif(Math.abs(diff) > (this.windowBuffer / 2)){\n\t\t\tthis.rerenderColumns();\n\t\t}else {\n\t\t\tif(diff > 0){\n\t\t\t\t//scroll right\n\t\t\t\tthis.addColRight();\n\t\t\t\tthis.removeColLeft();\n\t\t\t}else {\n\t\t\t\t//scroll left\n\t\t\t\tthis.addColLeft();\n\t\t\t\tthis.removeColRight();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcolPositionAdjust (start, end, diff){\n\t\tfor(let i = start; i < end; i++){\n\t\t\tlet column = this.columns[i];\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.leftPos += diff;\n\t\t\tcolumn.modules.vdomHoz.rightPos += diff;\n\t\t}\n\t}\n\t\n\taddColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\n\t\t\tlet column = this.columns[this.rightCol + 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.rightCol]).getElement().nextSibling);\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tthis.rightCol++; // Don't move this below the >= check below\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.rightCol >= (this.columns.length - 1)){\n\t\t\t\t\t\tthis.vDomPadRight = 0;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.vDomPadRight -= column.getWidth();\n\t\t\t\t\t}\t\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\taddColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol - 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.leftCol]).getElement());\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.leftCol--; // don't move this below the <= check below\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(this.leftCol <= 0){ // replicating logic in addColRight\n\t\t\t\t\t\tthis.vDomPadLeft = 0;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.vDomPadLeft -= column.getWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet diff = this.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tif(diff){\n\t\t\t\t\t\tthis.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + diff;\n\t\t\t\t\t\tthis.vDomPadRight -= diff;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColRight(){\n\t\tvar changes = false,\n\t\tworking = true;\n\t\t\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.rightCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos > this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColRight\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadRight += column.getWidth();\n\t\t\t\t\tthis.rightCol --;\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.rightCol = this.rightCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColLeft(){\n\t\tvar changes = false,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet column = this.columns[this.leftCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\t\t\t\t\t\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColLeft\", ex.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadLeft += column.getWidth();\n\t\t\t\t\tthis.leftCol ++;\n\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\trow.modules.vdomHoz.leftCol = this.leftCol;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tfitDataColActualWidthCheck(column){\n\t\tvar newWidth, widthDiff;\n\t\t\n\t\tif(column.modules.vdomHoz.fitDataCheck){\n\t\t\tcolumn.reinitializeWidth();\n\t\t\t\n\t\t\tnewWidth = column.getWidth();\n\t\t\twidthDiff = newWidth - column.modules.vdomHoz.width;\n\t\t\t\n\t\t\tif(widthDiff){\n\t\t\t\tcolumn.modules.vdomHoz.rightPos += widthDiff;\n\t\t\t\tcolumn.modules.vdomHoz.width = newWidth;\n\t\t\t\tthis.colPositionAdjust(this.columns.indexOf(column) + 1, this.columns.length, widthDiff);\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.fitDataCheck = false;\n\t\t}\n\t\t\n\t\treturn widthDiff;\n\t}\n\t\n\tinitializeRow(row){\n\t\tif(row.type !== \"group\"){\n\t\t\trow.modules.vdomHoz = {\n\t\t\t\tleftCol:this.leftCol,\n\t\t\t\trightCol:this.rightCol,\n\t\t\t};\n\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.leftColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\t\tthis.appendCell(row, this.columns[i]);\n\t\t\t}\n\n\t\t\tif(this.table.modules.frozenColumns){\n\t\t\t\tthis.table.modules.frozenColumns.rightColumns.forEach((column) => {\n\t\t\t\t\tthis.appendCell(row, column);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\n\tappendCell(row, column){\n\t\tif(column && column.visible){\n\t\t\tlet cell = row.getCell(column);\n\t\t\t\n\t\t\trow.getElement().appendChild(cell.getElement());\n\t\t\tcell.cellRendered();\n\t\t}\n\t}\n\t\n\treinitializeRow(row, force){\n\t\tif(row.type !== \"group\"){\n\t\t\tif(force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol){\n\t\t\t\t\n\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\twhile(rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\n\n\t\t\t\tthis.initializeRow(row);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass ColumnManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.blockHozScrollEvent = false;\n\t\tthis.headersElement = null;\n\t\tthis.contentsElement = null;\n\t\tthis.element = null ; //containing element\n\t\tthis.columns = []; // column definition object\n\t\tthis.columnsByIndex = []; //columns by index\n\t\tthis.columnsByField = {}; //columns by field\n\t\tthis.scrollLeft = 0;\n\t\tthis.optionsList = new OptionsList(this.table, \"column definition\", defaultColumnOptions);\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockUpdate = null; //store latest redraw update only status\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t////////////// Setup Functions /////////////////\n\t\n\tinitialize(){\n\t\tthis.initializeRenderer();\n\t\t\n\t\tthis.headersElement = this.createHeadersElement();\n\t\tthis.contentsElement = this.createHeaderContentsElement();\n\t\tthis.element = this.createHeaderElement();\n\t\t\n\t\tthis.contentsElement.insertBefore(this.headersElement, this.contentsElement.firstChild);\n\t\tthis.element.insertBefore(this.contentsElement, this.element.firstChild);\n\n\t\tthis.initializeScrollWheelWatcher();\n\t\t\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"scrollbar-vertical\", this.padVerticalScrollbar.bind(this));\n\t}\n\n\tpadVerticalScrollbar(width){\n\t\tif(this.table.rtl){\n\t\t\tthis.headersElement.style.marginLeft = width + \"px\";\n\t\t}else {\n\t\t\tthis.headersElement.style.marginRight = width + \"px\";\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": VirtualDomHorizontal,\n\t\t\t\"basic\": BasicHorizontal,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderHorizontal === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderHorizontal];\n\t\t}else {\n\t\t\trenderClass = this.table.options.renderHorizontal;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t}else {\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderHorizontal);\n\t\t}\n\t}\n\t\n\t\n\tcreateHeadersElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-headers\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\treturn el;\n\t}\n\n\tcreateHeaderContentsElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header-contents\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateHeaderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-header\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tif(!this.table.options.headerVisible){\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\n\t\t}\n\t\t\n\t\treturn el;\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\t//return containing contents element\n\tgetContentsElement(){\n\t\treturn this.contentsElement;\n\t}\n\t\n\t\n\t//return header containing element\n\tgetHeadersElement(){\n\t\treturn this.headersElement;\n\t}\n\t\n\t//scroll horizontally to match table body\n\tscrollHorizontal(left){\n\t\tthis.contentsElement.scrollLeft = left;\n\n\t\tthis.scrollLeft = left;\n\t\t\n\t\tthis.renderer.scrollColumns(left);\n\t}\n\n\tinitializeScrollWheelWatcher(){\n\t\tthis.contentsElement.addEventListener(\"wheel\", (e) => {\n\t\t\tvar left;\n\n\t\t\tif(e.deltaX){\n\t\t\t\tleft = this.contentsElement.scrollLeft + e.deltaX;\n\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t///////////// Column Setup Functions /////////////\n\tgenerateColumnsFromRowData(data){\n\t\tvar cols = [],\n\t\tdefinitions = this.table.options.autoColumnsDefinitions,\n\t\trow, sorter;\n\t\t\n\t\tif(data && data.length){\n\t\t\t\n\t\t\trow = data[0];\n\t\t\t\n\t\t\tfor(var key in row){\n\t\t\t\tlet col = {\n\t\t\t\t\tfield:key,\n\t\t\t\t\ttitle:key,\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tlet value = row[key];\n\t\t\t\t\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif(Array.isArray(value)){\n\t\t\t\t\t\t\tsorter = \"array\";\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tcol.sorter = sorter;\n\t\t\t\t\n\t\t\t\tcols.push(col);\n\t\t\t}\n\t\t\t\n\t\t\tif(definitions){\n\t\t\t\t\n\t\t\t\tswitch(typeof definitions){\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tif(Array.isArray(definitions)){\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tvar match = definitions.find((def) => {\n\t\t\t\t\t\t\t\t\treturn def.field === col.field;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\t\t\tObject.assign(col, match);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\t\tif(definitions[col.field]){\n\t\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.table.options.columns = cols;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tthis.table.options.columns = cols;\n\t\t\t}\n\t\t\t\n\t\t\tthis.setColumns(this.table.options.columns);\n\t\t}\n\t}\n\t\n\tsetColumns(cols, row){\n\t\twhile(this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\n\t\t\n\t\tthis.columns = [];\n\t\tthis.columnsByIndex = [];\n\t\tthis.columnsByField = {};\n\t\t\n\t\tthis.dispatch(\"columns-loading\");\n\t\t\n\t\tcols.forEach((def, i) => {\n\t\t\tthis._addColumn(def);\n\t\t});\n\t\t\n\t\tthis._reIndexColumns();\n\t\t\n\t\tthis.dispatch(\"columns-loaded\");\n\t\t\n\t\tthis.rerenderColumns(false, true);\n\t\t\n\t\tthis.redraw(true);\n\t}\n\t\n\t_addColumn(definition, before, nextToColumn){\n\t\tvar column = new Column(definition, this),\n\t\tcolEl = column.getElement(),\n\t\tindex = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\t\t\n\t\tif(nextToColumn && index > -1){\n\t\t\tvar topColumn = nextToColumn.getTopColumn();\n\t\t\tvar parentIndex = this.columns.indexOf(topColumn);\n\t\t\tvar nextEl = topColumn.getElement();\n\t\t\t\n\t\t\tif(before){\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\n\t\t\t}else {\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n\t\t\t}\n\t\t}else {\n\t\t\tif(before){\n\t\t\t\tthis.columns.unshift(column);\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n\t\t\t}else {\n\t\t\t\tthis.columns.push(column);\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\n\t\t\t}\n\t\t}\n\t\t\n\t\tcolumn.columnRendered();\n\t\t\n\t\treturn column;\n\t}\n\t\n\tregisterColumnField(col){\n\t\tif(col.definition.field){\n\t\t\tthis.columnsByField[col.definition.field] = col;\n\t\t}\n\t}\n\t\n\tregisterColumnPosition(col){\n\t\tthis.columnsByIndex.push(col);\n\t}\n\t\n\t_reIndexColumns(){\n\t\tthis.columnsByIndex = [];\n\t\t\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.reRegisterPosition();\n\t\t});\n\t}\n\t\n\t//ensure column headers take up the correct amount of space in column groups\n\tverticalAlignHeaders(){\n\t\tvar minHeight = 0;\n\t\t\n\t\tif(!this.redrawBlock){\n\n\t\t\tthis.headersElement.style.height=\"\";\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.clearVerticalAlign();\n\t\t\t});\n\t\t\t\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tvar height = column.getHeight();\n\t\t\t\t\n\t\t\t\tif(height > minHeight){\n\t\t\t\t\tminHeight = height;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.headersElement.style.height = minHeight + \"px\";\n\n\t\t\tthis.columns.forEach((column) => {\n\t\t\t\tcolumn.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\n\t\t\t});\n\t\t\t\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\t\n\t//////////////// Column Details /////////////////\n\tfindColumn(subject){\n\t\tvar columns;\n\n\t\tif(typeof subject == \"object\"){\n\t\t\t\n\t\t\tif(subject instanceof Column){\n\t\t\t\t//subject is column element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof ColumnComponent){\n\t\t\t\t//subject is public column component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\n\t\t\t\tcolumns = [];\n\n\t\t\t\tthis.columns.forEach((column) => {\n\t\t\t\t\tcolumns.push(column);\n\t\t\t\t\tcolumns = columns.concat(column.getColumns(true));\n\t\t\t\t});\n\n\t\t\t\t//subject is a HTML element of the column header\n\t\t\t\tlet match = columns.find((column) => {\n\t\t\t\t\treturn column.element === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}\n\t\t\t\n\t\t}else {\n\t\t\t//subject should be treated as the field name of the column\n\t\t\treturn this.columnsByField[subject] || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetColumnByField(field){\n\t\treturn this.columnsByField[field];\n\t}\n\t\n\tgetColumnsByFieldRoot(root){\n\t\tvar matches = [];\n\t\t\n\t\tObject.keys(this.columnsByField).forEach((field) => {\n\t\t\tvar fieldRoot = field.split(\".\")[0];\n\t\t\tif(fieldRoot === root){\n\t\t\t\tmatches.push(this.columnsByField[field]);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn matches;\n\t}\n\t\n\tgetColumnByIndex(index){\n\t\treturn this.columnsByIndex[index];\n\t}\n\t\n\tgetFirstVisibleColumn(){\n\t\tvar index = this.columnsByIndex.findIndex((col) => {\n\t\t\treturn col.visible;\n\t\t});\n\t\t\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\n\t}\n\t\n\tgetColumns(){\n\t\treturn this.columns;\n\t}\n\t\n\tfindColumnIndex(column){\n\t\treturn this.columnsByIndex.findIndex((col) => {\n\t\t\treturn column === col;\n\t\t});\n\t}\n\t\n\t//return all columns that are not groups\n\tgetRealColumns(){\n\t\treturn this.columnsByIndex;\n\t}\n\t\n\t//traverse across columns and call action\n\ttraverse(callback){\n\t\tthis.columnsByIndex.forEach((column,i) =>{\n\t\t\tcallback(column, i);\n\t\t});\n\t}\n\t\n\t//get definitions of actual columns\n\tgetDefinitions(active){\n\t\tvar output = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(!active || (active && column.visible)){\n\t\t\t\toutput.push(column.getDefinition());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\t//get full nested definition tree\n\tgetDefinitionTree(){\n\t\tvar output = [];\n\t\t\n\t\tthis.columns.forEach((column) => {\n\t\t\toutput.push(column.getDefinition(true));\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(structured){\n\t\tvar output = [],\n\t\tcolumns = structured ? this.columns : this.columnsByIndex;\n\t\t\n\t\tcolumns.forEach((column) => {\n\t\t\toutput.push(column.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetWidth(){\n\t\tvar width = 0;\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\twidth += column.getWidth();\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn width;\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\n\t\t\n\t\tif(after){\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\n\t\t}\n\t\t\n\t\tthis.moveColumnActual(from, to, after);\n\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.table.rowManager.reinitialize();\n\t}\n\t\n\tmoveColumnActual(from, to, after){\n\t\tif(from.parent.isGroup){\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\n\t\t}else {\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\n\t\t}\n\t\t\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\t\t\n\t\tthis.rerenderColumns(true);\n\t\t\n\t\tthis.dispatch(\"column-moved\", from, to, after);\n\t\t\n\t\tif(this.subscribedExternal(\"columnMoved\")){\n\t\t\tthis.dispatchExternal(\"columnMoved\", from.getComponent(), this.table.columnManager.getComponents());\n\t\t}\n\t}\n\t\n\t_moveColumnInArray(columns, from, to, after, updateRows){\n\t\tvar\tfromIndex = columns.indexOf(from),\n\t\ttoIndex, rows = [];\n\t\t\n\t\tif (fromIndex > -1) {\n\t\t\t\n\t\t\tcolumns.splice(fromIndex, 1);\n\t\t\t\n\t\t\ttoIndex = columns.indexOf(to);\n\t\t\t\n\t\t\tif (toIndex > -1) {\n\t\t\t\t\n\t\t\t\tif(after){\n\t\t\t\t\ttoIndex = toIndex+1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else {\n\t\t\t\ttoIndex = fromIndex;\n\t\t\t}\n\t\t\t\n\t\t\tcolumns.splice(toIndex, 0, from);\n\t\t\t\n\t\t\tif(updateRows){\n\t\t\t\t\n\t\t\t\trows = this.chain(\"column-moving-rows\", [from, to, after], null, []) || [];\n\t\t\t\t\n\t\t\t\trows = rows.concat(this.table.rowManager.rows);\n\t\t\t\t\n\t\t\t\trows.forEach(function(row){\n\t\t\t\t\tif(row.cells.length){\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\t\n\tscrollToColumn(column, position, ifVisible){\n\t\tvar left = 0,\n\t\toffset = column.getLeftOffset(),\n\t\tadjust = 0,\n\t\tcolEl = column.getElement();\n\t\t\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\tposition = this.table.options.scrollToColumnPosition;\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\tifVisible = this.table.options.scrollToColumnIfVisible;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\t\t\t\t\t\tadjust = -this.element.clientWidth / 2;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\t\tadjust = colEl.clientWidth - this.headersElement.clientWidth;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//check column visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//calculate scroll position\n\t\t\t\tleft = offset + adjust;\n\t\t\t\t\n\t\t\t\tleft = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),0);\n\t\t\t\t\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.scrollHorizontal(left);\n\t\t\t\t\n\t\t\t\tresolve();\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\n\t\t\t\treject(\"Scroll Error - Column not visible\");\n\t\t\t}\n\t\t\t\n\t\t});\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tgenerateCells(row){\n\t\tvar cells = [];\n\t\t\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tcells.push(column.generateCell(row));\n\t\t});\n\t\t\n\t\treturn cells;\n\t}\n\t\n\t//////////////// Column Management /////////////////\n\tgetFlexBaseWidth(){\n\t\tvar totalWidth = this.table.element.clientWidth, //table element width\n\t\tfixedWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar if present\n\t\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t\t}\n\t\t\n\t\tthis.columnsByIndex.forEach(function(column){\n\t\t\tvar width, minWidth, colWidth;\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\t\n\t\t\t\twidth = column.definition.width || 0;\n\t\t\t\t\n\t\t\t\tminWidth = parseInt(column.minWidth);\n\t\t\t\t\n\t\t\t\tif(typeof(width) == \"string\"){\n\t\t\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width) ;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tcolWidth = width;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\t\t\t\t\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn fixedWidth;\n\t}\n\t\n\taddColumn(definition, before, nextToColumn){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this._addColumn(definition, before, nextToColumn);\n\t\t\t\n\t\t\tthis._reIndexColumns();\n\t\t\t\n\t\t\tthis.dispatch(\"column-add\", definition, before, nextToColumn);\n\t\t\t\n\t\t\tif(this.layoutMode() != \"fitColumns\"){\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\t\t\t\n\t\t\tthis.redraw(true);\n\t\t\t\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t\t\n\t\t\tthis.rerenderColumns();\n\t\t\t\n\t\t\tresolve(column);\n\t\t});\n\t}\n\t\n\t//remove column from system\n\tderegisterColumn(column){\n\t\tvar field = column.getField(),\n\t\tindex;\n\t\t\n\t\t//remove from field list\n\t\tif(field){\n\t\t\tdelete this.columnsByField[field];\n\t\t}\n\t\t\n\t\t//remove from index list\n\t\tindex = this.columnsByIndex.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columnsByIndex.splice(index, 1);\n\t\t}\n\t\t\n\t\t//remove from column list\n\t\tindex = this.columns.indexOf(column);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\t\t\n\t\tthis.verticalAlignHeaders();\n\t\t\n\t\tthis.redraw();\n\t}\n\t\n\trerenderColumns(update, silent){\n\t\tif(!this.redrawBlock){\n\t\t\tthis.renderer.rerenderColumns(update, silent);\n\t\t}else {\n\t\t\tif(update === false || (update === true && this.redrawBlockUpdate === null)){\n\t\t\t\tthis.redrawBlockUpdate = update;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tblockRedraw(){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockUpdate = null;\n\t}\n\t\n\trestoreRedraw(){\n\t\tthis.redrawBlock = false;\n\t\tthis.verticalAlignHeaders();\n\t\tthis.renderer.rerenderColumns(this.redrawBlockUpdate);\n\t\t\n\t}\n\t\n\t//redraw columns\n\tredraw(force){\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.verticalAlignHeaders();\n\t\t}\n\t\t\n\t\tif(force){\n\t\t\tthis.table.rowManager.resetScroll();\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t}\n\t\t\n\t\tif(!this.confirm(\"table-redrawing\", force)){\n\t\t\tthis.layoutRefresh(force);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-redraw\", force);\n\t\t\n\t\tthis.table.footerManager.redraw();\n\t}\n}\n\nclass BasicVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.verticalFillMode = \"fill\";\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\t\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\t\t\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\telement.scrollTop = 0;\n\t\telement.scrollLeft = 0;\n\t\t\n\t\telement.style.minWidth = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\t}\n\t\n\trenderRows() {\n\t\tvar element = this.tableElement,\n\t\tonlyGroupHeaders = true,\n\t\ttableFrag = document.createDocumentFragment(),\n\t\trows = this.rows();\n\t\t\n\t\trows.forEach((row, index) => {\n\t\t\tthis.styleRow(row, index);\n\t\t\trow.initialize(false, true);\n\t\t\t\n\t\t\tif (row.type !== \"group\") {\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t\t\n\t\t\ttableFrag.appendChild(row.getElement());\n\t\t});\n\t\t\n\t\telement.appendChild(tableFrag);\n\t\t\n\t\trows.forEach((row) => {\n\t\t\trow.rendered();\n\t\t\t\n\t\t\tif(!row.heightInitialized) {\n\t\t\t\trow.calcHeight(true);\n\t\t\t}\n\t\t});\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif(!row.heightInitialized) {\n\t\t\t\trow.setCellHeight();\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t\t\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else {\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\t\n\t\n\trerenderRows(callback){\t\n\t\tthis.clearRows();\n\t\t\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t\t\n\t\tthis.renderRows();\n\t}\n\t\n\tscrollToRowNearestTop(row){\n\t\tvar rowTop = Helpers.elOffset(row.getElement()).top;\n\t\t\n\t\treturn !(Math.abs(this.elementVertical.scrollTop - rowTop) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop));\n\t}\n\t\n\tscrollToRow(row){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tthis.elementVertical.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\n\t}\n\t\n\tvisibleRows(includingBuffer){\n\t\treturn this.rows();\n\t}\n\t\n}\n\nclass VirtualDomVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.verticalFillMode = \"fill\";\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\n\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\t\tthis.vDomBottom = 0; //hold position for last rendered row in the virtual DOM\n\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\t}\n\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\telement.style.paddingTop = \"\";\n\t\telement.style.paddingBottom = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\n\t\tthis.elementVertical.scrollTop = 0;\n\t\tthis.elementVertical.scrollLeft = 0;\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomTop = 0;\n\t\tthis.vDomBottom = 0;\n\t\tthis.vDomTopPad = 0;\n\t\tthis.vDomBottomPad = 0;\n\t\tthis.vDomScrollPosTop = 0;\n\t\tthis.vDomScrollPosBottom = 0;\n\t}\n\n\trenderRows(){\n\t\tthis._virtualRenderFill();\n\t}\n\n\trerenderRows(callback){\n\t\tvar scrollTop = this.elementVertical.scrollTop;\n\t\tvar topRow = false;\n\t\tvar topOffset = false;\n\n\t\tvar left = this.table.rowManager.scrollLeft;\n\n\t\tvar rows = this.rows();\n\n\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\n\t\t\tif(rows[i]){\n\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\n\n\t\t\t\tif(topOffset === false || Math.abs(diff) < topOffset){\n\t\t\t\t\ttopOffset = diff;\n\t\t\t\t\ttopRow = i;\n\t\t\t\t}else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\trows.forEach((row) => {\n\t\t\trow.deinitializeHeight();\n\t\t});\n\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\n\t\tif(this.rows().length){\n\t\t\tthis._virtualRenderFill((topRow === false ? this.rows.length - 1 : topRow), true, topOffset || 0);\n\t\t}else {\n\t\t\tthis.clear();\n\t\t\tthis.table.rowManager.tableEmpty();\n\t\t}\n\n\t\tthis.scrollColumns(left);\n\t}\n\n\tscrollColumns(left){\n\t\tthis.table.rowManager.scrollHorizontal(left);\n\t}\n\n\tscrollRows(top, dir){\n\t\tvar topDiff = top - this.vDomScrollPosTop;\n\t\tvar bottomDiff = top - this.vDomScrollPosBottom;\n\t\tvar margin = this.vDomWindowBuffer * 2;\n\t\tvar rows = this.rows();\n\n\t\tthis.scrollTop = top;\n\n\t\tif(-topDiff > margin || bottomDiff > margin){\n\t\t\t//if big scroll redraw table;\n\t\t\tvar left = this.table.rowManager.scrollLeft;\n\t\t\tthis._virtualRenderFill(Math.floor((this.elementVertical.scrollTop / this.elementVertical.scrollHeight) * rows.length));\n\t\t\tthis.scrollColumns(left);\n\t\t}else {\n\n\t\t\tif(dir){\n\t\t\t\t//scrolling up\n\t\t\t\tif(topDiff < 0){\n\t\t\t\t\tthis._addTopRow(rows, -topDiff);\n\t\t\t\t}\n\n\t\t\t\tif(bottomDiff < 0){\n\t\t\t\t\t//hide bottom row if needed\n\t\t\t\t\tif(this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeBottomRow(rows, -bottomDiff);\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else {\n\n\t\t\t\tif(bottomDiff >= 0){\n\t\t\t\t\tthis._addBottomRow(rows, bottomDiff);\n\t\t\t\t}\n\n\t\t\t\t//scrolling down\n\t\t\t\tif(topDiff >= 0){\n\t\t\t\t\t//hide top row if needed\n\t\t\t\t\tif(this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeTopRow(rows, topDiff);\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tresize(){\n\t\tthis.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\tvar rowIndex = this.rows().indexOf(row);\n\n\t\treturn !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex));\n\t}\n\n\tscrollToRow(row){\n\t\tvar index = this.rows().indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tthis._virtualRenderFill(index, true);\n\t\t}\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\tvar topEdge = this.elementVertical.scrollTop,\n\t\tbottomEdge = this.elementVertical.clientHeight + topEdge,\n\t\ttopFound = false,\n\t\ttopRow = 0,\n\t\tbottomRow = 0,\n\t\trows = this.rows();\n\n\t\tif(includingBuffer){\n\t\t\ttopRow = this.vDomTop;\n\t\t\tbottomRow = this.vDomBottom;\n\t\t}else {\n\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\t\t\t\tif(rows[i]){\n\t\t\t\t\tif(!topFound){\n\t\t\t\t\t\tif((topEdge - rows[i].getElement().offsetTop) >= 0){\n\t\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\ttopFound = true;\n\n\t\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn rows.slice(topRow, bottomRow + 1);\n\t}\n\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\n\t//full virtual render\n\t_virtualRenderFill(position, forceMove, offset) {\n\t\tvar\telement = this.tableElement,\n\t\tholder = this.elementVertical,\n\t\ttopPad = 0,\n\t\trowsHeight = 0,\n\t\trowHeight = 0,\n\t\theightOccupied = 0,\n\t\ttopPadHeight = 0,\n\t\ti = 0,\n\t\trows = this.rows(),\n\t\trowsCount = rows.length,\n\t\tindex = 0,\n\t\trow,\n\t\trowFragment,\n\t\trenderedRows = [],\n\t\ttotalRowsRendered = 0,\n\t\trowsToRender = 0,\n\t\tfixedHeight = this.table.rowManager.fixedHeight,\n\t\tcontainerHeight = this.elementVertical.clientHeight, \n\t\tavgRowHeight = this.table.options.rowHeight, \n\t\tresized = true;\n\n\t\tposition = position || 0;\n\n\t\toffset = offset || 0;\n\n\t\tif(!position){\n\t\t\tthis.clear();\n\t\t}else {\n\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\t\t//check if position is too close to bottom of table\n\t\t\theightOccupied = (rowsCount - position + 1) * this.vDomRowHeight;\n\n\t\t\tif(heightOccupied < containerHeight){\n\t\t\t\tposition -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight);\n\t\t\t\tif(position < 0){\n\t\t\t\t\tposition = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//calculate initial pad\n\t\t\ttopPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight),  this.vDomWindowMinMarginRows), position);\n\t\t\tposition -= topPad;\n\t\t}\n\n\t\tif(rowsCount && Helpers.elVisible(this.elementVertical)){\n\t\t\tthis.vDomTop = position;\n\t\t\tthis.vDomBottom = position -1;\n\n\t\t\tif(fixedHeight || this.table.options.maxHeight) {\n\t\t\t\tif(avgRowHeight) {\n\t\t\t\t\trowsToRender = (containerHeight / avgRowHeight) + (this.vDomWindowBuffer / avgRowHeight);\n\t\t\t\t}\n\t\t\t\trowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil(rowsToRender));\n\t\t\t}\n\t\t\telse {\n\t\t\t\trowsToRender = rowsCount;\n\t\t\t}\n\n\t\t\twhile(((rowsToRender == rowsCount || rowsHeight <= containerHeight + this.vDomWindowBuffer) || totalRowsRendered < this.vDomWindowMinTotalRows) && this.vDomBottom < rowsCount -1) {\n\t\t\t\trenderedRows = [];\n\t\t\t\trowFragment = document.createDocumentFragment();\n\n\t\t\t\ti = 0;\n\n\t\t\t\twhile ((i < rowsToRender) && this.vDomBottom < rowsCount -1) {\t\n\t\t\t\t\tindex = this.vDomBottom + 1,\n\t\t\t\t\trow = rows[index];\n\n\t\t\t\t\tthis.styleRow(row, index);\n\n\t\t\t\t\trow.initialize(false, true);\n\t\t\t\t\tif(!row.heightInitialized && !this.table.options.rowHeight){\n\t\t\t\t\t\trow.clearCellHeight();\n\t\t\t\t\t}\n\n\t\t\t\t\trowFragment.appendChild(row.getElement());\n\t\t\t\t\trenderedRows.push(row);\n\t\t\t\t\tthis.vDomBottom ++;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\n\t\t\t\tif(!renderedRows.length){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\telement.appendChild(rowFragment);\n\t\t\t\t\n\t\t\t\t// NOTE: The next 3 loops are separate on purpose\n\t\t\t\t// This is to batch up the dom writes and reads which drastically improves performance \n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\trow.rendered();\n\n\t\t\t\t\tif(!row.heightInitialized) {\n\t\t\t\t\t\trow.calcHeight(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\tif(!row.heightInitialized) {\n\t\t\t\t\t\trow.setCellHeight();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trenderedRows.forEach((row) => {\n\t\t\t\t\trowHeight = row.getHeight();\n\t\t\t\t\t\n\t\t\t\t\tif(totalRowsRendered < topPad){\n\t\t\t\t\t\ttopPadHeight += rowHeight;\n\t\t\t\t\t}else {\n\t\t\t\t\t\trowsHeight += rowHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t}\n\t\t\t\t\ttotalRowsRendered++;\n\t\t\t\t});\n\n\t\t\t\tresized = this.table.rowManager.adjustTableSize();\n\t\t\t\tcontainerHeight = this.elementVertical.clientHeight;\n\t\t\t\tif(resized && (fixedHeight || this.table.options.maxHeight))\n\t\t\t\t{\n\t\t\t\t\tavgRowHeight = rowsHeight / totalRowsRendered;\n\t\t\t\t\trowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil((containerHeight / avgRowHeight) + (this.vDomWindowBuffer / avgRowHeight)));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!position){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t\t//adjust row height to match average of rendered elements\n\t\t\t\tthis.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / totalRowsRendered);\n\t\t\t\tthis.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom -1);\n\n\t\t\t\tthis.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight;\n\t\t\t}else {\n\t\t\t\tthis.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : (this.vDomRowHeight * this.vDomTop) + offset;\n\t\t\t\tthis.vDomBottomPad = this.vDomBottom == rowsCount-1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\n\t\t\t}\n\t\t\t\n\t\t\telement.style.paddingTop = this.vDomTopPad+\"px\";\n\t\t\telement.style.paddingBottom = this.vDomBottomPad+\"px\";\n\n\t\t\tif(forceMove){\n\t\t\t\tthis.scrollTop = this.vDomTopPad + (topPadHeight) + offset - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - containerHeight : 0);\n\t\t\t}\n\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight);\n\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\n\t\t\tif(this.elementVertical.scrollWidth > this.elementVertical.clientWidth && forceMove){\n\t\t\t\tthis.scrollTop += this.elementVertical.offsetHeight - containerHeight;\n\t\t\t}\n\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\n\t\t\tholder.scrollTop = this.scrollTop;\n\n\t\t\tthis.dispatch(\"render-virtual-fill\");\n\t\t}\n\t}\n\n\t_addTopRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomTop -1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tif(this.vDomTop){\n\t\t\t\tlet row = rows[index],\n\t\t\t\trowHeight, initialized;\n\n\t\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\t\ttable.insertBefore(row.getElement(), table.firstChild);\n\n\t\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trow.initialize();\n\n\t\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\t\tthis.vDomTop--;\n\t\t\t\t\t\tindex--;\n\t\t\t\t\t\ti++;\n\n\t\t\t\t\t}else {\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad -= paddingAdjust;\n\n\t\t\tif(this.vDomTopPad < 0){\n\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\n\t\t\t}\n\n\t\t\tif(index < 1){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop -= paddingAdjust;\n\t\t}\n\t}\n\n\t_removeTopRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomTop],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomTop++;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad += paddingAdjust;\n\t\t\tthis.tableElement.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer;\n\t\t}\n\t}\n\n\t_addBottomRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomBottom + 1,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[index],\n\t\t\trowHeight, initialized;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\ttable.appendChild(row.getElement());\n\n\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t}\n\n\t\t\t\t\trow.initialize();\n\n\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tthis.vDomBottom++;\n\t\t\t\t\tindex++;\n\t\t\t\t\ti++;\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad -= paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0 || index == rows.length -1){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom += paddingAdjust;\n\t\t}\n\t}\n\n\t_removeBottomRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0,\n\t\tworking = true;\n\n\t\twhile(working){\n\t\t\tlet row = rows[this.vDomBottom],\n\t\t\trowHeight;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomBottom --;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tworking = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad += paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\tthis.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom -= paddingAdjust;\n\t\t}\n\t}\n\n\t_quickNormalizeRowHeight(rows){\n\t\tfor(let row of rows){\n\t\t\trow.calcHeight();\n\t\t}\n\n\t\tfor(let row of rows){\n\t\t\trow.setCellHeight();\n\t\t}\n\t}\n}\n\nclass RowManager extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = this.createHolderElement(); //containing element\n\t\tthis.tableElement = this.createTableElement(); //table element\n\t\tthis.heightFixer = this.createTableElement(); //table element\n\t\tthis.placeholder = null; //placeholder element\n\t\tthis.placeholderContents = null; //placeholder element\n\t\t\n\t\tthis.firstRender = false; //handle first render\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\n\t\tthis.fixedHeight = false; //current rendering mode\n\t\t\n\t\tthis.rows = []; //hold row data objects\n\t\tthis.activeRowsPipeline = []; //hold calculation of active rows\n\t\tthis.activeRows = []; //rows currently available to on display in the table\n\t\tthis.activeRowsCount = 0; //count of active rows\n\t\t\n\t\tthis.displayRows = []; //rows currently on display in the table\n\t\tthis.displayRowsCount = 0; //count of display rows\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\t\tthis.redrawBlockRenderInPosition = false; //store latest redraw function calls for when redraw is needed\n\t\t\n\t\tthis.dataPipeline = []; //hold data pipeline tasks\n\t\tthis.displayPipeline = []; //hold data display pipeline tasks\n\t\t\n\t\tthis.scrollbarWidth = 0;\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t//////////////// Setup Functions /////////////////\n\t\n\tcreateHolderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-tableholder\");\n\t\tel.setAttribute(\"tabindex\", 0);\n\t\t// el.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateTableElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-table\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitializePlaceholder(){\n\t\tvar placeholder = this.table.options.placeholder;\n\t\t\n\t\tif(typeof placeholder === \"function\"){\n\t\t\tplaceholder = placeholder.call(this.table);\n\t\t}\n\t\t\n\t\tplaceholder = this.chain(\"placeholder\", [placeholder], placeholder, placeholder) || placeholder;\n\t\t\n\t\t//configure placeholder element\n\t\tif(placeholder){\t\n\t\t\tlet el = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-placeholder\");\n\t\t\t\n\t\t\tif(typeof placeholder == \"string\"){\n\t\t\t\tlet contents = document.createElement(\"div\");\n\t\t\t\tcontents.classList.add(\"tabulator-placeholder-contents\");\n\t\t\t\tcontents.innerHTML = placeholder;\n\t\t\t\t\n\t\t\t\tel.appendChild(contents);\n\t\t\t\t\n\t\t\t\tthis.placeholderContents = contents;\n\t\t\t\t\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && placeholder instanceof HTMLElement){\n\t\t\t\t\n\t\t\t\tel.appendChild(placeholder);\n\t\t\t\tthis.placeholderContents = placeholder;\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Invalid placeholder provided, must be string or HTML Element\", placeholder);\n\t\t\t\t\n\t\t\t\tthis.el = null;\n\t\t\t}\n\t\t\t\n\t\t\tthis.placeholder = el;\n\t\t}\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return table element\n\tgetTableElement(){\n\t\treturn this.tableElement;\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializePlaceholder();\n\t\tthis.initializeRenderer();\n\t\t\n\t\t//initialize manager\n\t\tthis.element.appendChild(this.tableElement);\n\t\t\n\t\tthis.firstRender = true;\n\t\t\n\t\t//scroll header along with table body\n\t\tthis.element.addEventListener(\"scroll\", () => {\n\t\t\tvar left = this.element.scrollLeft,\n\t\t\tleftDir = this.scrollLeft > left,\n\t\t\ttop = this.element.scrollTop,\n\t\t\ttopDir = this.scrollTop > top;\n\t\t\t\n\t\t\t//handle horizontal scrolling\n\t\t\tif(this.scrollLeft != left){\n\t\t\t\tthis.scrollLeft = left;\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-horizontal\", left, leftDir);\n\t\t\t\tthis.dispatchExternal(\"scrollHorizontal\", left, leftDir);\n\t\t\t\t\n\t\t\t\tthis._positionPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\t//handle vertical scrolling\n\t\t\tif(this.scrollTop != top){\n\t\t\t\tthis.scrollTop = top;\n\t\t\t\t\n\t\t\t\tthis.renderer.scrollRows(top, topDir);\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-vertical\", top, topDir);\n\t\t\t\tthis.dispatchExternal(\"scrollVertical\", top, topDir);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t////////////////// Row Manipulation //////////////////\n\tfindRow(subject){\n\t\tif(typeof subject == \"object\"){\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\t//subject is a HTML element of the row\n\t\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\t\treturn row.getElement() === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}else if(subject === null){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else if(typeof subject == \"undefined\"){\n\t\t\treturn false;\n\t\t}else {\n\t\t\t//subject should be treated as the index of the row\n\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t\t\n\t\t\treturn match || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetRowFromDataObject(data){\n\t\tvar match = this.rows.find((row) => {\n\t\t\treturn row.data === data;\n\t\t});\n\t\t\n\t\treturn match || false;\n\t}\n\t\n\tgetRowFromPosition(position){\n\t\treturn this.getDisplayRows().find((row) => {\n\t\t\treturn row.getPosition() === position && row.isDisplayed();\n\t\t});\n\t}\n\t\n\tscrollToRow(row, position, ifVisible){\n\t\treturn this.renderer.scrollToRowPosition(row, position, ifVisible);\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\tsetData(data, renderInPosition, columnsChanged){\n\t\treturn new Promise((resolve, reject)=>{\n\t\t\tif(renderInPosition && this.getDisplayRows().length){\n\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\tthis._setDataActual(data, true);\n\t\t\t\t}else {\n\t\t\t\t\tthis.reRenderInPosition(() => {\n\t\t\t\t\t\tthis._setDataActual(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(this.table.options.autoColumns && columnsChanged && this.table.initialized){\n\t\t\t\t\tthis.table.columnManager.generateColumnsFromRowData(data);\n\t\t\t\t}\n\t\t\t\tthis.resetScroll();\n\t\t\t\t\n\t\t\t\tthis._setDataActual(data);\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\t_setDataActual(data, renderInPosition){\n\t\tthis.dispatchExternal(\"dataProcessing\", data);\n\t\t\n\t\tthis._wipeElements();\n\t\t\n\t\tif(Array.isArray(data)){\n\t\t\tthis.dispatch(\"data-processing\", data);\n\t\t\t\n\t\t\tdata.forEach((def, i) => {\n\t\t\t\tif(def && typeof def === \"object\"){\n\t\t\t\t\tvar row = new Row(def, this);\n\t\t\t\t\tthis.rows.push(row);\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(false, false, renderInPosition);\n\t\t\t\n\t\t\tthis.dispatch(\"data-processed\", data);\n\t\t\tthis.dispatchExternal(\"dataProcessed\", data);\n\t\t}else {\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\n\t\t}\n\t}\n\t\n\t_wipeElements(){\n\t\tthis.dispatch(\"rows-wipe\");\n\t\t\n\t\tthis.destroy();\n\t\t\n\t\tthis.adjustTableSize();\n\t\t\n\t\tthis.dispatch(\"rows-wiped\");\n\t}\n\t\n\tdestroy(){\n\t\tthis.rows.forEach((row) => {\n\t\t\trow.wipe();\n\t\t});\n\t\t\n\t\tthis.rows = [];\n\t\tthis.activeRows = [];\n\t\tthis.activeRowsPipeline = [];\n\t\tthis.activeRowsCount = 0;\n\t\tthis.displayRows = [];\n\t\tthis.displayRowsCount = 0;\n\t}\n\t\n\tdeleteRow(row, blockRedraw){\n\t\tvar allIndex = this.rows.indexOf(row),\n\t\tactiveIndex = this.activeRows.indexOf(row);\n\t\t\n\t\tif(activeIndex > -1){\n\t\t\tthis.activeRows.splice(activeIndex, 1);\n\t\t}\n\t\t\n\t\tif(allIndex > -1){\n\t\t\tthis.rows.splice(allIndex, 1);\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tvar displayIndex = rows.indexOf(row);\n\t\t\t\n\t\t\tif(displayIndex > -1){\n\t\t\t\trows.splice(displayIndex, 1);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatchExternal(\"rowDeleted\", row.getComponent());\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis.tableEmpty();\n\t\t}\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.getData());\n\t\t}\n\t}\n\t\n\taddRow(data, pos, index, blockRedraw){\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\n\t\treturn row;\n\t}\n\t\n\t//add multiple rows\n\taddRows(data, pos, index, refreshDisplayOnly){\n\t\tvar rows = [];\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tpos = this.findAddRowPos(pos);\n\t\t\t\n\t\t\tif(!Array.isArray(data)){\n\t\t\t\tdata = [data];\n\t\t\t}\n\t\t\t\n\t\t\tif((typeof index == \"undefined\" && pos) || (typeof index !== \"undefined\" && !pos)){\n\t\t\t\tdata.reverse();\n\t\t\t}\n\t\t\t\n\t\t\tdata.forEach((item, i) => {\n\t\t\t\tvar row = this.addRow(item, pos, index, true);\n\t\t\t\trows.push(row);\n\t\t\t\tthis.dispatch(\"row-added\", row, item, pos, index);\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(refreshDisplayOnly ? \"displayPipeline\" : false, false, true);\n\t\t\t\n\t\t\tthis.regenerateRowPositions();\n\t\t\t\n\t\t\tif(rows.length){\n\t\t\t\tthis._clearPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\tresolve(rows);\n\t\t});\n\t}\n\t\n\tfindAddRowPos(pos){\n\t\tif(typeof pos === \"undefined\"){\n\t\t\tpos = this.table.options.addRowPos;\n\t\t}\n\t\t\n\t\tif(pos === \"pos\"){\n\t\t\tpos = true;\n\t\t}\n\t\t\n\t\tif(pos === \"bottom\"){\n\t\t\tpos = false;\n\t\t}\n\t\t\n\t\treturn pos;\n\t}\n\t\n\taddRowActual(data, pos, index, blockRedraw){\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\n\t\ttop = this.findAddRowPos(pos),\n\t\tallIndex = -1,\n\t\tactiveIndex, chainResult;\n\t\t\n\t\tif(!index){\n\t\t\tchainResult = this.chain(\"row-adding-position\", [row, top], null, {index, top});\n\t\t\t\n\t\t\tindex = chainResult.index;\n\t\t\ttop = chainResult.top;\n\t\t}\n\t\t\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tindex = this.findRow(index);\n\t\t}\n\t\t\n\t\tindex = this.chain(\"row-adding-index\", [row, index, top], null, index);\n\t\t\n\t\tif(index){\n\t\t\tallIndex = this.rows.indexOf(index);\n\t\t}\n\t\t\n\t\tif(index && allIndex > -1){\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\n\t\t\t\n\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\tvar displayIndex = rows.indexOf(index);\n\t\t\t\t\n\t\t\t\tif(displayIndex > -1){\n\t\t\t\t\trows.splice((top ? displayIndex : displayIndex + 1), 0, row);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(activeIndex > -1){\n\t\t\t\tthis.activeRows.splice((top ? activeIndex : activeIndex + 1), 0, row);\n\t\t\t}\n\t\t\t\n\t\t\tthis.rows.splice((top ? allIndex : allIndex + 1), 0, row);\n\t\t\t\n\t\t}else {\n\t\t\t\n\t\t\tif(top){\n\t\t\t\t\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.unshift(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.unshift(row);\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}else {\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.push(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.push(row);\n\t\t\t\tthis.rows.push(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.dispatchExternal(\"rowAdded\", row.getComponent());\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t}\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\treturn row;\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tthis.dispatch(\"row-move\", from, to, after);\n\t\t\n\t\tthis.moveRowActual(from, to, after);\n\t\t\n\t\tthis.regenerateRowPositions();\n\t\t\n\t\tthis.dispatch(\"row-moved\", from, to, after);\n\t\tthis.dispatchExternal(\"rowMoved\", from.getComponent());\n\t}\n\t\n\tmoveRowActual(from, to, after){\n\t\tthis.moveRowInArray(this.rows, from, to, after);\n\t\tthis.moveRowInArray(this.activeRows, from, to, after);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tthis.moveRowInArray(rows, from, to, after);\n\t\t});\n\t\t\n\t\tthis.dispatch(\"row-moving\", from, to, after);\n\t}\n\t\n\tmoveRowInArray(rows, from, to, after){\n\t\tvar\tfromIndex, toIndex, start, end;\n\t\t\n\t\tif(from !== to){\n\t\t\t\n\t\t\tfromIndex = rows.indexOf(from);\n\t\t\t\n\t\t\tif (fromIndex > -1) {\n\t\t\t\t\n\t\t\t\trows.splice(fromIndex, 1);\n\t\t\t\t\n\t\t\t\ttoIndex = rows.indexOf(to);\n\t\t\t\t\n\t\t\t\tif (toIndex > -1) {\n\t\t\t\t\t\n\t\t\t\t\tif(after){\n\t\t\t\t\t\trows.splice(toIndex+1, 0, from);\n\t\t\t\t\t}else {\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else {\n\t\t\t\t\trows.splice(fromIndex, 0, from);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//restyle rows\n\t\t\tif(rows === this.getDisplayRows()){\n\t\t\t\t\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex +1;\n\t\t\t\t\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tif(rows[i]){\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearData(){\n\t\tthis.setData([]);\n\t}\n\t\n\tgetRowIndex(row){\n\t\treturn this.findRowIndex(row, this.rows);\n\t}\n\t\n\tgetDisplayRowIndex(row){\n\t\tvar index = this.getDisplayRows().indexOf(row);\n\t\treturn index > -1 ? index : false;\n\t}\n\t\n\tnextDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tnextRow = false;\n\t\t\n\t\t\n\t\tif(index !== false && index < this.displayRowsCount -1){\n\t\t\tnextRow = this.getDisplayRows()[index+1];\n\t\t}\n\t\t\n\t\tif(nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")){\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn nextRow;\n\t}\n\t\n\tprevDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tprevRow = false;\n\t\t\n\t\tif(index){\n\t\t\tprevRow = this.getDisplayRows()[index-1];\n\t\t}\n\t\t\n\t\tif(rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")){\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn prevRow;\n\t}\n\t\n\tfindRowIndex(row, list){\n\t\tvar rowIndex;\n\t\t\n\t\trow = this.findRow(row);\n\t\t\n\t\tif(row){\n\t\t\trowIndex = list.indexOf(row);\n\t\t\t\n\t\t\tif(rowIndex > -1){\n\t\t\t\treturn rowIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tgetData(active, transform){\n\t\tvar output = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tif(row.type == \"row\"){\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(active){\n\t\tvar\toutput = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\toutput.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetDataCount(active){\n\t\tvar rows = this.getRows(active);\n\t\t\n\t\treturn rows.length;\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tthis.scrollLeft = left;\n\t\tthis.element.scrollLeft = left;\n\t\t\n\t\tthis.dispatch(\"scroll-horizontal\", left);\n\t}\n\t\n\tregisterDataPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.dataPipeline.push({handler, priority});\n\t\t\tthis.dataPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else {\n\t\t\tconsole.error(\"Data pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\tregisterDisplayPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.displayPipeline.push({handler, priority});\n\t\t\tthis.displayPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else {\n\t\t\tconsole.error(\"Display pipeline handlers must have a priority in order to be registered\");\n\t\t}\n\t}\n\t\n\t//set active data set\n\trefreshActiveData(handler, skipStage, renderInPosition){\n\t\tvar table = this.table,\n\t\tstage = \"\",\n\t\tindex = 0,\n\t\tcascadeOrder = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"];\n\t\t\n\t\tif(!this.table.destroyed){\n\t\t\tif(typeof handler === \"function\"){\n\t\t\t\tindex = this.dataPipeline.findIndex((item) => {\n\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(index > -1){\n\t\t\t\t\tstage = \"dataPipeline\";\n\t\t\t\t\t\n\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\tif(index == this.dataPipeline.length - 1){\n\t\t\t\t\t\t\tstage = \"display\";\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tindex = this.displayPipeline.findIndex((item) => {\n\t\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif(index > -1){\n\t\t\t\t\t\tstage = \"displayPipeline\";\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\t\tif(index == this.displayPipeline.length - 1){\n\t\t\t\t\t\t\t\tstage = \"end\";\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.error(\"Unable to refresh data, invalid handler provided\", handler);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tstage = handler || \"all\";\n\t\t\t\tindex = 0;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.redrawBlock){\n\t\t\t\tif(!this.redrawBlockRestoreConfig || (this.redrawBlockRestoreConfig && ((this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index) || (cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))))){\n\t\t\t\t\tthis.redrawBlockRestoreConfig = {\n\t\t\t\t\t\thandler: handler,\n\t\t\t\t\t\tskipStage: skipStage,\n\t\t\t\t\t\trenderInPosition: renderInPosition,\n\t\t\t\t\t\tstage:stage,\n\t\t\t\t\t\tindex:index,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn;\n\t\t\t}else {\n\t\t\t\tif(Helpers.elVisible(this.element)){\n\t\t\t\t\tif(renderInPosition){\n\t\t\t\t\t\tthis.reRenderInPosition(this.refreshPipelines.bind(this, handler, stage, index, renderInPosition));\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!handler){\n\t\t\t\t\t\t\tthis.table.columnManager.renderer.renderColumns();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.renderTable();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(table.options.layoutColumnsOnNewData){\n\t\t\t\t\t\t\tthis.table.columnManager.redraw(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"data-refreshed\");\n\t\t\t}\n\t\t}\n\t}\n\t\n\trefreshPipelines(handler, stage, index, renderInPosition){\n\t\tthis.dispatch(\"data-refreshing\");\n\t\t\n\t\tif(!handler){\n\t\t\tthis.activeRowsPipeline[0] = this.rows.slice(0);\n\t\t}\n\t\t\n\t\t//cascade through data refresh stages\n\t\tswitch(stage){\n\t\t\tcase \"all\":\n\t\t\t//handle case where all data needs refreshing\n\t\t\t\n\t\t\tcase \"dataPipeline\":\n\t\t\t\n\t\t\t\tfor(let i = index; i < this.dataPipeline.length; i++){\n\t\t\t\t\tlet result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));\n\t\t\t\t\n\t\t\t\t\tthis.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0);\n\t\t\t\t}\n\t\t\t\n\t\t\t\tthis.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\tindex = 0;\n\t\t\t\tthis.resetDisplayRows();\n\t\t\t\n\t\t\tcase \"displayPipeline\":\n\t\t\t\tfor(let i = index; i < this.displayPipeline.length; i++){\n\t\t\t\t\tlet result = this.displayPipeline[i].handler((i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0), renderInPosition);\n\t\t\t\t\n\t\t\t\t\tthis.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i);\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"end\":\n\t\t\t//case to handle scenario when trying to skip past end stage\n\t\t\t\tthis.regenerateRowPositions();\n\t\t}\n\t\t\n\t\tif(this.getDisplayRows().length){\n\t\t\tthis._clearPlaceholder();\n\t\t}\n\t}\n\t\n\t//regenerate row positions\n\tregenerateRowPositions(){\n\t\tvar rows = this.getDisplayRows();\n\t\tvar index = 1;\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tif (row.type === \"row\"){\n\t\t\t\trow.setPosition(index);\n\t\t\t\tindex++;\n\t\t\t}\n\t\t});\n\t}\n\t\n\tsetActiveRows(activeRows){\n\t\tthis.activeRows = this.activeRows = Object.assign([], activeRows);\n\t\tthis.activeRowsCount = this.activeRows.length;\n\t}\n\t\n\t//reset display rows array\n\tresetDisplayRows(){\n\t\tthis.displayRows = [];\n\t\t\n\t\tthis.displayRows.push(this.activeRows.slice(0));\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[0].length;\n\t}\n\t\n\t//set display row pipeline data\n\tsetDisplayRows(displayRows, index){\n\t\tthis.displayRows[index] = displayRows;\n\t\t\n\t\tif(index == this.displayRows.length -1){\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t\t}\n\t}\n\t\n\tgetDisplayRows(index){\n\t\tif(typeof index == \"undefined\"){\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length -1] : [];\n\t\t}else {\n\t\t\treturn this.displayRows[index] || [];\n\t\t}\n\t}\n\t\n\tgetVisibleRows(chain, viewable){\n\t\tvar rows =  Object.assign([], this.renderer.visibleRows(!viewable));\n\t\t\n\t\tif(chain){\n\t\t\trows = this.chain(\"rows-visible\", [viewable], rows, rows);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t//repeat action across display rows\n\tdisplayRowIterator(callback){\n\t\tthis.activeRowsPipeline.forEach(callback);\n\t\tthis.displayRows.forEach(callback);\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t}\n\t\n\t//return only actual rows (not group headers etc)\n\tgetRows(type){\n\t\tvar rows = [];\n\t\t\n\t\tswitch(type){\n\t\t\tcase \"active\":\n\t\t\t\trows = this.activeRows;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"visible\":\n\t\t\t\trows = this.getVisibleRows(false, true);\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\t\trows = this.chain(\"rows-retrieve\", type, null, this.rows) || this.rows;\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t///////////////// Table Rendering /////////////////\n\t//trigger rerender of table in current position\n\treRenderInPosition(callback){\n\t\tif(this.redrawBlock){\n\t\t\tif(callback){\n\t\t\t\tcallback();\n\t\t\t}else {\n\t\t\t\tthis.redrawBlockRenderInPosition = true;\n\t\t\t}\n\t\t}else {\n\t\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\t\n\t\t\tthis.renderer.rerenderRows(callback);\n\t\t\t\n\t\t\tif(!this.fixedHeight){\n\t\t\t\tthis.adjustTableSize();\n\t\t\t}\n\t\t\t\n\t\t\tthis.scrollBarCheck();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"renderComplete\");\n\t\t}\n\t}\n\t\n\tscrollBarCheck(){\n\t\tvar scrollbarWidth = 0;\n\t\t\n\t\t//adjust for vertical scrollbar moving table when present\n\t\tif(this.element.scrollHeight > this.element.clientHeight){\n\t\t\tscrollbarWidth = this.element.offsetWidth - this.element.clientWidth;\n\t\t}\n\t\t\n\t\tif(scrollbarWidth !== this.scrollbarWidth){\n\t\t\tthis.scrollbarWidth = scrollbarWidth;\n\t\t\tthis.dispatch(\"scrollbar-vertical\", scrollbarWidth);\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": VirtualDomVertical,\n\t\t\t\"basic\": BasicVertical,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderVertical === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderVertical];\n\t\t}else {\n\t\t\trenderClass = this.table.options.renderVertical;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderMode = this.table.options.renderVertical;\n\t\t\t\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t\t\n\t\t\tif((this.table.element.clientHeight || this.table.options.height) && !(this.table.options.minHeight && this.table.options.maxHeight)){\n\t\t\t\tthis.fixedHeight = true;\n\t\t\t}else {\n\t\t\t\tthis.fixedHeight = false;\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.error(\"Unable to find matching renderer:\", this.table.options.renderVertical);\n\t\t}\n\t}\n\t\n\tgetRenderMode(){\n\t\treturn this.renderMode;\n\t}\n\t\n\trenderTable(){\n\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tthis._clearTable();\n\t\t\n\t\tif(this.displayRowsCount){\n\t\t\tthis.renderer.renderRows();\n\t\t\t\n\t\t\tif(this.firstRender){\n\t\t\t\tthis.firstRender = false;\n\t\t\t\t\n\t\t\t\tif(!this.fixedHeight){\n\t\t\t\t\tthis.adjustTableSize();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.layoutRefresh(true);\n\t\t\t}\n\t\t}else {\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\t\t\n\t\tif(!this.fixedHeight){\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-layout\");\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis._showPlaceholder();\n\t\t}\n\t\t\n\t\tthis.scrollBarCheck();\n\t\t\n\t\tthis.dispatchExternal(\"renderComplete\");\n\t}\n\t\n\t//show scrollbars on empty table div\n\trenderEmptyScroll(){\n\t\tif(this.placeholder){\n\t\t\tthis.tableElement.style.display = \"none\";\n\t\t}else {\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t\t// this.tableElement.style.minHeight = \"1px\";\n\t\t\t// this.tableElement.style.visibility = \"hidden\";\n\t\t}\n\t}\n\t\n\t_clearTable(){\t\n\t\tthis._clearPlaceholder();\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.renderer.clearRows();\n\t}\n\t\n\ttableEmpty(){\n\t\tthis.renderEmptyScroll();\n\t\tthis._showPlaceholder();\n\t}\n\t\n\t_showPlaceholder(){\n\t\tif(this.placeholder){\n\t\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t\t}\n\t\t\t\n\t\t\tthis.initializePlaceholder();\n\t\t\t\n\t\t\tthis.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n\t\t\t\n\t\t\tthis.getElement().appendChild(this.placeholder);\n\t\t\tthis._positionPlaceholder();\n\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t}\n\t\n\t_clearPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t}\n\t\t\n\t\t// clear empty table placeholder min\n\t\tthis.tableElement.style.minWidth = \"\";\n\t\tthis.tableElement.style.display = \"\";\n\t}\n\t\n\t_positionPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n\t\t\tthis.placeholderContents.style.width = this.table.rowManager.element.clientWidth + \"px\";\n\t\t\tthis.placeholderContents.style.marginLeft = this.scrollLeft + \"px\";\n\t\t}\n\t}\n\t\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else {\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\t\n\t//normalize height of active rows\n\tnormalizeHeight(){\n\t\tthis.activeRows.forEach(function(row){\n\t\t\trow.normalizeHeight();\n\t\t});\n\t}\n\t\n\t//adjust the height of the table holder to fit in the Tabulator element\n\tadjustTableSize(){\n\t\tlet initialHeight = this.element.clientHeight, minHeight;\n\t\tlet resized = false;\n\t\t\n\t\tif(this.renderer.verticalFillMode === \"fill\"){\n\t\t\tlet otherHeight =  Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\n\t\t\t\n\t\t\tif(this.fixedHeight){\n\t\t\t\tminHeight = isNaN(this.table.options.minHeight) ? this.table.options.minHeight : this.table.options.minHeight + \"px\";\n\t\t\t\t\n\t\t\t\tconst height = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.minHeight = minHeight || \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.height = height;\n\t\t\t\tthis.element.style.maxHeight = height;\n\t\t\t} else {\n\t\t\t\tthis.element.style.height = \"\";\n\t\t\t\tthis.element.style.height =\n\t\t\t\tthis.table.element.clientHeight - otherHeight + \"px\";\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\n\t\t\t}\n\t\t\t\n\t\t\tthis.renderer.resize();\n\t\t\t\n\t\t\t//check if the table has changed size when dealing with variable height tables\n\t\t\tif(!this.fixedHeight && initialHeight != this.element.clientHeight){\n\t\t\t\tresized = true;\n\t\t\t\tif(this.subscribed(\"table-resize\")){\n\t\t\t\t\tthis.dispatch(\"table-resize\");\n\t\t\t\t}else {\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.scrollBarCheck();\n\t\t}\n\t\t\n\t\tthis._positionPlaceholder();\n\t\treturn resized;\n\t}\n\t\n\t//reinitialize all rows\n\treinitialize(){\n\t\tthis.rows.forEach(function(row){\n\t\t\trow.reinitialize(true);\n\t\t});\n\t}\n\t\n\t//prevent table from being redrawn\n\tblockRedraw (){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockRestoreConfig = false;\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw (){\n\t\tthis.redrawBlock = false;\n\t\t\n\t\tif(this.redrawBlockRestoreConfig){\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n\t\t\t\n\t\t\tthis.redrawBlockRestoreConfig = false;\n\t\t}else {\n\t\t\tif(this.redrawBlockRenderInPosition){\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.redrawBlockRenderInPosition = false;\n\t}\n\t\n\t//redraw table\n\tredraw (force){\n\t\tconst resized = this.adjustTableSize();\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\n\t\t\n\t\tif(!force){\n\t\t\tif(resized) {\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t\tthis.scrollHorizontal(this.scrollLeft);\n\t\t}else {\n\t\t\tthis.renderTable();\n\t\t}\n\t}\n\t\n\tresetScroll(){\n\t\tthis.element.scrollLeft = 0;\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tif(this.table.browser === \"ie\"){\n\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\tevent.initEvent(\"scroll\", false, true);\n\t\t\tthis.element.dispatchEvent(event);\n\t\t}else {\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\n\t\t}\n\t}\n}\n\nclass FooterManager extends CoreFeature{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.active = false;\n\t\tthis.element = this.createElement(); //containing element\n\t\tthis.containerElement = this.createContainerElement(); //containing element\n\t\tthis.external = false;\n\t}\n\n\tinitialize(){\n\t\tthis.initializeElement();\n\t}\n\n\tcreateElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer\");\n\n\t\treturn el;\n\t}\n\n\t\n\tcreateContainerElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer-contents\");\n\n\t\tthis.element.appendChild(el);\n\n\t\treturn el;\n\t}\n\n\tinitializeElement(){\n\t\tif(this.table.options.footerElement){\n\n\t\t\tswitch(typeof this.table.options.footerElement){\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif(this.table.options.footerElement[0] === \"<\"){\n\t\t\t\t\t\tthis.containerElement.innerHTML = this.table.options.footerElement;\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.external = true;\n\t\t\t\t\t\tthis.containerElement = document.querySelector(this.table.options.footerElement);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.element = this.table.options.footerElement;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tappend(element){\n\t\tthis.activate();\n\n\t\tthis.containerElement.appendChild(element);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tprepend(element){\n\t\tthis.activate();\n\n\t\tthis.element.insertBefore(element, this.element.firstChild);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tremove(element){\n\t\telement.parentNode.removeChild(element);\n\t\tthis.deactivate();\n\t}\n\n\tdeactivate(force){\n\t\tif(!this.element.firstChild || force){\n\t\t\tif(!this.external){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\tthis.active = false;\n\t\t}\n\t}\n\n\tactivate(){\n\t\tif(!this.active){\n\t\t\tthis.active = true;\n\t\t\tif(!this.external){\n\t\t\t\tthis.table.element.appendChild(this.getElement());\n\t\t\t\tthis.table.element.style.display = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tredraw(){\n\t\tthis.dispatch(\"footer-redraw\");\n\t}\n}\n\nclass InteractionManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.el = null;\n\t\t\n\t\tthis.abortClasses = [\"tabulator-headers\", \"tabulator-table\"];\n\t\t\n\t\tthis.previousTargets = {};\n\t\t\n\t\tthis.listeners = [\n\t\t\t\"click\",\n\t\t\t\"dblclick\",\n\t\t\t\"contextmenu\",\n\t\t\t\"mouseenter\",\n\t\t\t\"mouseleave\",\n\t\t\t\"mouseover\",\n\t\t\t\"mouseout\",\n\t\t\t\"mousemove\",\n\t\t\t\"mouseup\",\n\t\t\t\"mousedown\",\n\t\t\t\"touchstart\",\n\t\t\t\"touchend\",\n\t\t];\n\t\t\n\t\tthis.componentMap = {\n\t\t\t\"tabulator-cell\":\"cell\",\n\t\t\t\"tabulator-row\":\"row\",\n\t\t\t\"tabulator-group\":\"group\",\n\t\t\t\"tabulator-col\":\"column\",\n\t\t};\n\t\t\n\t\tthis.pseudoTrackers = {\n\t\t\t\"row\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"cell\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"group\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"column\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t};\n\t\t\n\t\tthis.pseudoTracking = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.el = this.table.element;\n\t\t\n\t\tthis.buildListenerMap();\n\t\tthis.bindSubscriptionWatchers();\n\t}\n\t\n\tbuildListenerMap(){\n\t\tvar listenerMap = {};\n\t\t\n\t\tthis.listeners.forEach((listener) => {\n\t\t\tlistenerMap[listener] = {\n\t\t\t\thandler:null,\n\t\t\t\tcomponents:[],\n\t\t\t};\n\t\t});\n\t\t\n\t\tthis.listeners = listenerMap;\n\t}\n\t\n\tbindPseudoEvents(){\n\t\tObject.keys(this.pseudoTrackers).forEach((key) => {\n\t\t\tthis.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key);\n\t\t\tthis.subscribe(key + \"-mouseover\", this.pseudoTrackers[key].subscriber);\n\t\t});\n\t\t\n\t\tthis.pseudoTracking = true;\n\t}\n\t\n\tpseudoMouseEnter(key, e, target){\n\t\tif(this.pseudoTrackers[key].target !== target){\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, this.pseudoTrackers[key].target);\n\t\t\t}\n\t\t\t\n\t\t\tthis.pseudoMouseLeave(key, e);\n\t\t\t\n\t\t\tthis.pseudoTrackers[key].target = target;\n\t\t\t\n\t\t\tthis.dispatch(key + \"-mouseenter\", e, target);\n\t\t}\n\t}\n\t\n\tpseudoMouseLeave(key, e){\n\t\tvar leaveList = Object.keys(this.pseudoTrackers),\n\t\tlinkedKeys = {\n\t\t\t\"row\":[\"cell\"],\n\t\t\t\"cell\":[\"row\"],\n\t\t};\n\t\t\n\t\tleaveList = leaveList.filter((item) => {\n\t\t\tvar links = linkedKeys[key];\n\t\t\treturn item !== key && (!links || (links && !links.includes(item)));\n\t\t});\n\t\t\n\t\t\n\t\tleaveList.forEach((key) => {\n\t\t\tvar target = this.pseudoTrackers[key].target;\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, target);\n\t\t\t\t\n\t\t\t\tthis.pseudoTrackers[key].target = null;\n\t\t\t}\n\t\t});\n\t}\n\t\n\t\n\tbindSubscriptionWatchers(){\n\t\tvar listeners = Object.keys(this.listeners),\n\t\tcomponents = Object.values(this.componentMap);\n\t\t\n\t\tfor(let comp of components){\n\t\t\tfor(let listener of listeners){\n\t\t\t\tlet key = comp + \"-\" + listener;\n\t\t\t\t\n\t\t\t\tthis.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.clearWatchers.bind(this));\n\t}\n\t\n\tsubscriptionChanged(component, key, added){\n\t\tvar listener = this.listeners[key].components,\n\t\tindex = listener.indexOf(component),\n\t\tchanged = false;\n\t\t\n\t\tif(added){\n\t\t\tif(index === -1){\n\t\t\t\tlistener.push(component);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}else {\n\t\t\tif(!this.subscribed(component + \"-\" + key)){\n\t\t\t\tif(index > -1){\n\t\t\t\t\tlistener.splice(index, 1);\n\t\t\t\t\tchanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif((key === \"mouseenter\" || key === \"mouseleave\") && !this.pseudoTracking){\n\t\t\tthis.bindPseudoEvents();\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.updateEventListeners();\n\t\t}\n\t}\n\t\n\tupdateEventListeners(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.components.length){\n\t\t\t\tif(!listener.handler){\n\t\t\t\t\tlistener.handler = this.track.bind(this, key);\n\t\t\t\t\tthis.el.addEventListener(key, listener.handler);\n\t\t\t\t\t// this.el.addEventListener(key, listener.handler, {passive: true})\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif(listener.handler){\n\t\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\t\tlistener.handler = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\ttrack(type, e){\n\t\tvar path = (e.composedPath && e.composedPath()) || e.path;\n\t\t\n\t\tvar targets = this.findTargets(path);\n\t\ttargets = this.bindComponents(type, targets);\n\t\t\n\t\tthis.triggerEvents(type, e, targets);\n\t\t\n\t\tif(this.pseudoTracking && (type == \"mouseover\" || type == \"mouseleave\") && !Object.keys(targets).length){\n\t\t\tthis.pseudoMouseLeave(\"none\", e);\n\t\t}\n\t}\n\t\n\tfindTargets(path){\n\t\tvar targets = {};\n\t\t\n\t\tlet componentMap = Object.keys(this.componentMap);\n\t\t\n\t\tfor (let el of path) {\n\t\t\tlet classList = el.classList ? [...el.classList] : [];\n\t\t\t\n\t\t\tlet abort = classList.filter((item) => {\n\t\t\t\treturn this.abortClasses.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tif(abort.length){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tlet elTargets = classList.filter((item) => {\n\t\t\t\treturn componentMap.includes(item);\n\t\t\t});\n\t\t\t\n\t\t\tfor (let target of elTargets) {\n\t\t\t\tif(!targets[this.componentMap[target]]){\n\t\t\t\t\ttargets[this.componentMap[target]] = el;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(targets.group && targets.group === targets.row){\n\t\t\tdelete targets.row;\n\t\t}\n\t\t\n\t\treturn targets;\n\t}\n\t\n\tbindComponents(type, targets){\n\t\t//ensure row component is looked up before cell\n\t\tvar keys = Object.keys(targets).reverse(),\n\t\tlistener = this.listeners[type],\n\t\tmatches = {},\n\t\ttargetMatches = {};\n\t\t\n\t\tfor(let key of keys){\n\t\t\tlet component,\n\t\t\ttarget = targets[key],\n\t\t\tpreviousTarget = this.previousTargets[key];\n\t\t\t\n\t\t\tif(previousTarget && previousTarget.target === target){\n\t\t\t\tcomponent = previousTarget.component;\n\t\t\t}else {\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"row\":\n\t\t\t\t\tcase \"group\":\n\t\t\t\t\t\tif(listener.components.includes(\"row\") || listener.components.includes(\"cell\") || listener.components.includes(\"group\")){\n\t\t\t\t\t\t\tlet rows = this.table.rowManager.getVisibleRows(true);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tcomponent = rows.find((row) => {\n\t\t\t\t\t\t\t\treturn row.getElement() === target;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(targets[\"row\"] && targets[\"row\"].parentNode && targets[\"row\"].parentNode.closest(\".tabulator-row\")){\n\t\t\t\t\t\t\t\ttargets[key] = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"column\":\n\t\t\t\t\t\tif(listener.components.includes(\"column\")){\n\t\t\t\t\t\t\tcomponent = this.table.columnManager.findColumn(target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"cell\":\n\t\t\t\t\t\tif(listener.components.includes(\"cell\")){\n\t\t\t\t\t\t\tif(matches[\"row\"] instanceof Row){\n\t\t\t\t\t\t\t\tcomponent = matches[\"row\"].findCell(target);\n\t\t\t\t\t\t\t}else {\t\n\t\t\t\t\t\t\t\tif(targets[\"row\"]){\n\t\t\t\t\t\t\t\t\tconsole.warn(\"Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(component){\n\t\t\t\tmatches[key] = component;\n\t\t\t\ttargetMatches[key] = {\n\t\t\t\t\ttarget:target,\n\t\t\t\t\tcomponent:component,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.previousTargets = targetMatches;\n\t\t\n\t\treturn matches;\n\t}\n\t\n\ttriggerEvents(type, e, targets){\n\t\tvar listener = this.listeners[type];\n\n\t\tfor(let key in targets){\n\t\t\tif(targets[key] && listener.components.includes(key)){\n\t\t\t\tthis.dispatch(key + \"-\" + type, e, targets[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearWatchers(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.handler){\n\t\t\t\tthis.el.removeEventListener(key, listener.handler);\n\t\t\t\tlistener.handler = null;\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass ComponentFunctionBinder{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\n\t\tthis.bindings = {};\n\t}\n\n\tbind(type, funcName, handler){\n\t\tif(!this.bindings[type]){\n\t\t\tthis.bindings[type] = {};\n\t\t}\n\n\t\tif(this.bindings[type][funcName]){\n\t\t\tconsole.warn(\"Unable to bind component handler, a matching function name is already bound\", type, funcName, handler);\n\t\t}else {\n\t\t\tthis.bindings[type][funcName] = handler;\n\t\t}\n\t}\n\n\thandle(type, component, name){\n\t\tif(this.bindings[type] && this.bindings[type][name] && typeof this.bindings[type][name].bind === 'function'){\n\t\t\treturn this.bindings[type][name].bind(null, component);\n\t\t}else {\n\t\t\tif(name !== \"then\" && typeof name === \"string\" && !name.startsWith(\"_\")){\n\t\t\t\tif(this.table.options.debugInvalidComponentFuncs){\n\t\t\t\t\tconsole.error(\"The \" + type + \" component does not have a \" + name + \" function, have you checked that you have the correct Tabulator module installed?\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass DataLoader extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.requestOrder = 0; //prevent requests coming out of sequence if overridden by another load request\n\t\tthis.loading = false;\n\t}\n\t\n\tinitialize(){}\n\t\n\tload(data, params, config, replace, silent, columnsChanged){\n\t\tvar requestNo = ++this.requestOrder;\n\n\t\tif(this.table.destroyed){\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\t\n\t\tthis.dispatchExternal(\"dataLoading\", data);\n\t\t\n\t\t//parse json data to array\n\t\tif (data && (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0)){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(this.confirm(\"data-loading\", [data, params, config, silent])){\n\t\t\tthis.loading = true;\n\t\t\t\n\t\t\tif(!silent){\n\t\t\t\tthis.alertLoader();\n\t\t\t}\n\t\t\t\n\t\t\t//get params for request\n\t\t\tparams = this.chain(\"data-params\", [data, config, silent], params || {}, params || {});\n\t\t\t\n\t\t\tparams = this.mapParams(params, this.table.options.dataSendParams);\n\t\t\t\n\t\t\tvar result = this.chain(\"data-load\", [data, params, config, silent], false, Promise.resolve([]));\n\t\t\t\n\t\t\treturn result.then((response) => {\n\t\t\t\tif(!this.table.destroyed){\n\t\t\t\t\tif(!Array.isArray(response) && typeof response == \"object\"){\n\t\t\t\t\t\tresponse = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar rowData = this.chain(\"data-loaded\", response, null, response);\n\t\t\t\t\t\n\t\t\t\t\tif(requestNo == this.requestOrder){\n\t\t\t\t\t\tthis.clearAlert();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(rowData !== false){\n\t\t\t\t\t\t\tthis.dispatchExternal(\"dataLoaded\", rowData);\n\t\t\t\t\t\t\tthis.table.rowManager.setData(rowData,  replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - Table has been destroyed\");\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(\"Data Load Error: \", error);\n\t\t\t\tthis.dispatchExternal(\"dataLoadError\", error);\n\t\t\t\t\n\t\t\t\tif(!silent){\n\t\t\t\t\tthis.alertError();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.clearAlert();\n\t\t\t\t}, this.table.options.dataLoaderErrorTimeout);\n\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t}else {\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\n\t\t\t\n\t\t\tif(!data){\n\t\t\t\tdata = [];\n\t\t\t}\n\t\t\t\n\t\t\tthis.table.rowManager.setData(data, replace, typeof columnsChanged === \"undefined\" ? !replace : columnsChanged);\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\t\n\tmapParams(params, map){\n\t\tvar output = {};\n\t\t\n\t\tfor(let key in params){\n\t\t\toutput[map.hasOwnProperty(key) ? map[key] : key] = params[key];\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tobjectInvert(obj){\n\t\tvar output = {};\n\t\t\n\t\tfor(let key in obj){\n\t\t\toutput[obj[key]] = key;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tblockActiveLoad(){\n\t\tthis.requestOrder++;\n\t}\n\t\n\talertLoader(){\n\t\tvar shouldLoad = typeof this.table.options.dataLoader === \"function\" ? this.table.options.dataLoader() : this.table.options.dataLoader;\n\t\t\n\t\tif(shouldLoad){\n\t\t\tthis.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText(\"data|loading\"));\n\t\t}\n\t}\n\t\n\talertError(){\n\t\tthis.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\n\t}\n\t\n\tclearAlert(){\n\t\tthis.table.alertManager.clear();\n\t}\n}\n\nclass ExternalEventBus {\n\n\tconstructor(table, optionsList, debug){\n\t\tthis.table = table;\n\t\tthis.events = {};\n\t\tthis.optionsList = optionsList || {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push(callback);\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tdelete this.events[key];\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift(),\n\t\tresult;\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((callback, i) => {\n\t\t\t\tlet callResult = callback.apply(this.table, args);\n\n\t\t\t\tif(!i){\n\t\t\t\t\tresult = callResult;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"ExternalEvent:\" + args[0];\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n}\n\nclass InternalEventBus {\n\n\tconstructor(debug){\n\t\tthis.events = {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this);\n\t\tthis.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback, priority = 10000){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push({callback, priority});\n\n\t\tthis.events[key].sort((a, b) => {\n\t\t\treturn a.priority - b.priority;\n\t\t});\n\n\t\tthis._notifySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item.callback === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_chain(key, args, initialValue, fallback){\n\t\tvar value = initialValue;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tvalue = subscriber.callback.apply(this, args.concat([value]));\n\t\t\t});\n\n\t\t\treturn value;\n\t\t}else {\n\t\t\treturn typeof fallback === \"function\" ? fallback() : fallback;\n\t\t}\n\t}\n\n\t_confirm(key, args){\n\t\tvar confirmed = false;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tif(subscriber.callback.apply(this, args)){\n\t\t\t\t\tconfirmed = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn confirmed;\n\t}\n\n\t_notifySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift();\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((subscriber) => {\n\t\t\t\tsubscriber.callback.apply(this, args);\n\t\t\t});\n\t\t}\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n\n\t_debugChain(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._chain(...arguments);\n\t}\n\n\t_debugConfirm(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._confirm(...arguments);\n\t}\n}\n\nclass DeprecationAdvisor extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\t\n\t_warnUser(){\n\t\tif(this.options(\"debugDeprecation\")){\n\t\t\tconsole.warn(...arguments);\n\t\t}\n\t}\n\t\n\tcheck(oldOption, newOption){\n\t\tvar msg = \"\";\n\t\t\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tmsg = \"Deprecated Setup Option - Use of the %c\" + oldOption + \"%c option is now deprecated\";\n\t\t\t\n\t\t\tif(newOption){\n\t\t\t\tmsg = msg + \", Please use the %c\" + newOption + \"%c option instead\";\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t}else {\n\t\t\t\tthis._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t}else {\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tcheckMsg(oldOption, msg){\n\t\tif(typeof this.options(oldOption) !== \"undefined\"){\n\t\t\tthis._warnUser(\"%cDeprecated Setup Option - Use of the %c\" + oldOption + \" %c option is now deprecated, \" + msg, 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;');\n\t\t\t\n\t\t\treturn false;\n\t\t}else {\n\t\t\treturn true;\n\t\t}\n\t}\n\t\n\tmsg(msg){\n\t\tthis._warnUser(msg);\n\t}\n}\n\nclass TableRegistry {\n\n\tstatic register(table){\n\t\tTableRegistry.tables.push(table);\n\t}\n\n\tstatic deregister(table){\n\t\tvar index = TableRegistry.tables.indexOf(table);\n\n\t\tif(index > -1){\n\t\t\tTableRegistry.tables.splice(index, 1);\n\t\t}\n\t}\n\n\tstatic lookupTable(query, silent){\n\t\tvar results = [],\n\t\tmatches, match;\n\n\t\tif(typeof query === \"string\"){\n\t\t\tmatches = document.querySelectorAll(query);\n\n\t\t\tif(matches.length){\n\t\t\t\tfor(var i = 0; i < matches.length; i++){\n\t\t\t\t\tmatch = TableRegistry.matchElement(matches[i]);\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tresults.push(match);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}else if((typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement) || query instanceof Tabulator){\n\t\t\tmatch = TableRegistry.matchElement(query);\n\n\t\t\tif(match){\n\t\t\t\tresults.push(match);\n\t\t\t}\n\t\t}else if(Array.isArray(query)){\n\t\t\tquery.forEach(function(item){\n\t\t\t\tresults = results.concat(TableRegistry.lookupTable(item));\n\t\t\t});\n\t\t}else {\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\tstatic matchElement(element){\n\t\treturn TableRegistry.tables.find(function(table){\n\t\t\treturn element instanceof Tabulator ? table === element : table.element === element;\n\t\t});\n\t}\n}\n\nTableRegistry.tables = [];\n\n//resize columns to fit data they contain\nfunction fitData(columns, forced){\n\tif(forced){\n\t\tthis.table.columnManager.renderer.reinitializeColumnWidths(columns);\n\t}\n\t\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}\n\n//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\nfunction fitDataGeneral(columns, forced){\n\tcolumns.forEach(function(column){\n\t\tcolumn.reinitializeWidth();\n\t});\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n}\n\n//resize columns to fit data the contain and stretch last column to fill table\nfunction fitDataStretch(columns, forced){\n\tvar colsWidth = 0,\n\ttableWidth = this.table.rowManager.element.clientWidth,\n\tgap = 0,\n\tlastCol = false;\n\n\tcolumns.forEach((column, i) => {\n\t\tif(!column.widthFixed){\n\t\t\tcolumn.reinitializeWidth();\n\t\t}\n\n\t\tif(this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible){\n\t\t\tlastCol = column;\n\t\t}\n\n\t\tif(column.visible){\n\t\t\tcolsWidth += column.getWidth();\n\t\t}\n\t});\n\n\tif(lastCol){\n\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tlastCol.setWidth(0);\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\n\t\tif(gap > 0){\n\t\t\tlastCol.setWidth(gap);\n\t\t}else {\n\t\t\tlastCol.reinitializeWidth();\n\t\t}\n\t}else {\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\t}\n}\n\n//resize columns to fit\nfunction fitColumns(columns, forced){\n\tvar totalWidth = this.table.rowManager.element.getBoundingClientRect().width; //table element width\n\tvar fixedWidth = 0; //total width of columns with a defined width\n\tvar flexWidth = 0; //total width available to flexible columns\n\tvar flexGrowUnits = 0; //total number of widthGrow blocks across all columns\n\tvar flexColWidth = 0; //desired width of flexible columns\n\tvar flexColumns = []; //array of flexible width columns\n\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\tvar flexShrinkUnits = 0; //total number of widthShrink blocks across all columns\n\tvar overflowWidth = 0; //horizontal overflow width\n\tvar gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n\tfunction calcWidth(width){\n\t\tvar colWidth;\n\n\t\tif(typeof(width) == \"string\"){\n\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width);\n\t\t\t}else {\n\t\t\t\tcolWidth = parseInt(width);\n\t\t\t}\n\t\t}else {\n\t\t\tcolWidth = width;\n\t\t}\n\n\t\treturn colWidth;\n\t}\n\n\t//ensure columns resize to take up the correct amount of space\n\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols){\n\t\tvar oversizeCols = [],\n\t\toversizeSpace = 0,\n\t\tremainingSpace = 0,\n\t\tnextColWidth = 0,\n\t\tremainingFlexGrowUnits = flexGrowUnits,\n\t\tgap = 0,\n\t\tchangeUnits = 0,\n\t\tundersizeCols = [];\n\n\t\tfunction calcGrow(col){\n\t\t\treturn (colWidth * (col.column.definition.widthGrow || 1));\n\t\t}\n\n\t\tfunction calcShrink(col){\n\t\t\treturn  (calcWidth(col.width) - (colWidth * (col.column.definition.widthShrink || 0)));\n\t\t}\n\n\t\tcolumns.forEach(function(col, i){\n\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\t\t\tif(col.column.minWidth >= width){\n\t\t\t\toversizeCols.push(col);\n\t\t\t}else {\n\t\t\t\tif(col.column.maxWidth && col.column.maxWidth < width){\n\t\t\t\t\tcol.width = col.column.maxWidth;\n\t\t\t\t\tfreeSpace -= col.column.maxWidth;\n\n\t\t\t\t\tremainingFlexGrowUnits -= shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\n\t\t\t\t\tif(remainingFlexGrowUnits){\n\t\t\t\t\t\tcolWidth = Math.floor(freeSpace/remainingFlexGrowUnits);\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tundersizeCols.push(col);\n\t\t\t\t\tchangeUnits += shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(oversizeCols.length){\n\t\t\toversizeCols.forEach(function(col){\n\t\t\t\toversizeSpace += shrinkCols ?  col.width - col.column.minWidth : col.column.minWidth;\n\t\t\t\tcol.width = col.column.minWidth;\n\t\t\t});\n\n\t\t\tremainingSpace = freeSpace - oversizeSpace;\n\n\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace/changeUnits) : remainingSpace;\n\n\t\t\tgap = scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n\t\t}else {\n\t\t\tgap = changeUnits ? freeSpace - (Math.floor(freeSpace/changeUnits) * changeUnits) : freeSpace;\n\n\t\t\tundersizeCols.forEach(function(column){\n\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n\t\t\t});\n\t\t}\n\n\t\treturn gap;\n\t}\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n\n\t//adjust for vertical scrollbar if present\n\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t}\n\n\tcolumns.forEach(function(column){\n\t\tvar width, minWidth, colWidth;\n\n\t\tif(column.visible){\n\n\t\t\twidth = column.definition.width;\n\t\t\tminWidth =  parseInt(column.minWidth);\n\n\t\t\tif(width){\n\n\t\t\t\tcolWidth = calcWidth(width);\n\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n\t\t\t\tif(column.definition.widthShrink){\n\t\t\t\t\tfixedShrinkColumns.push({\n\t\t\t\t\t\tcolumn:column,\n\t\t\t\t\t\twidth:colWidth > minWidth ? colWidth : minWidth\n\t\t\t\t\t});\n\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\n\t\t\t\t}\n\n\t\t\t}else {\n\t\t\t\tflexColumns.push({\n\t\t\t\t\tcolumn:column,\n\t\t\t\t\twidth:0,\n\t\t\t\t});\n\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\n\t\t\t}\n\t\t}\n\t});\n\n\t//calculate available space\n\tflexWidth = totalWidth - fixedWidth;\n\n\t//calculate correct column size\n\tflexColWidth = Math.floor(flexWidth / flexGrowUnits);\n\n\t//generate column widths\n\tgapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n\t//increase width of last column to account for rounding errors\n\tif(flexColumns.length && gapFill > 0){\n\t\tflexColumns[flexColumns.length-1].width += gapFill;\n\t}\n\n\t//calculate space for columns to be shrunk into\n\tflexColumns.forEach(function(col){\n\t\tflexWidth -= col.width;\n\t});\n\n\toverflowWidth = Math.abs(gapFill) + flexWidth;\n\n\t//shrink oversize columns if there is no available space\n\tif(overflowWidth > 0 && flexShrinkUnits){\n\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n\t}\n\n\t//decrease width of last column to account for rounding errors\n\tif(gapFill && fixedShrinkColumns.length){\n\t\tfixedShrinkColumns[fixedShrinkColumns.length-1].width -= gapFill;\n\t}\n\n\tflexColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n\n\tfixedShrinkColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n}\n\nvar defaultModes = {\n\tfitData:fitData,\n\tfitDataFill:fitDataGeneral,\n\tfitDataTable:fitDataGeneral,\n\tfitDataStretch:fitDataStretch,\n\tfitColumns:fitColumns ,\n};\n\nclass Layout extends Module{\n\n\tconstructor(table){\n\t\tsuper(table, \"layout\");\n\n\t\tthis.mode = null;\n\n\t\tthis.registerTableOption(\"layout\", \"fitData\"); //layout type\n\t\tthis.registerTableOption(\"layoutColumnsOnNewData\", false); //update column widths on setData\n\n\t\tthis.registerColumnOption(\"widthGrow\");\n\t\tthis.registerColumnOption(\"widthShrink\");\n\t}\n\n\t//initialize layout system\n\tinitialize(){\n\t\tvar layout = this.table.options.layout;\n\n\t\tif(Layout.modes[layout]){\n\t\t\tthis.mode = layout;\n\t\t}else {\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n\t\t\tthis.mode = 'fitData';\n\t\t}\n\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\n\t}\n\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\n\t//trigger table layout\n\tlayout(dataChanged){\n\t\tthis.dispatch(\"layout-refreshing\");\n\t\tLayout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, dataChanged);\n\t\tthis.dispatch(\"layout-refreshed\");\n\t}\n}\n\nLayout.moduleName = \"layout\";\n\n//load defaults\nLayout.modes = defaultModes;\n\nvar defaultLangs = {\n\t\"default\":{ //hold default locale text\n\t\t\"groups\":{\n\t\t\t\"item\":\"item\",\n\t\t\t\"items\":\"items\",\n\t\t},\n\t\t\"columns\":{\n\t\t},\n\t\t\"data\":{\n\t\t\t\"loading\":\"Loading\",\n\t\t\t\"error\":\"Error\",\n\t\t},\n\t\t\"pagination\":{\n\t\t\t\"page_size\":\"Page Size\",\n\t\t\t\"page_title\":\"Show Page\",\n\t\t\t\"first\":\"First\",\n\t\t\t\"first_title\":\"First Page\",\n\t\t\t\"last\":\"Last\",\n\t\t\t\"last_title\":\"Last Page\",\n\t\t\t\"prev\":\"Prev\",\n\t\t\t\"prev_title\":\"Prev Page\",\n\t\t\t\"next\":\"Next\",\n\t\t\t\"next_title\":\"Next Page\",\n\t\t\t\"all\":\"All\",\n\t\t\t\"counter\":{\n\t\t\t\t\"showing\": \"Showing\",\n\t\t\t\t\"of\": \"of\",\n\t\t\t\t\"rows\": \"rows\",\n\t\t\t\t\"pages\": \"pages\",\n\t\t\t}\n\t\t},\n\t\t\"headerFilters\":{\n\t\t\t\"default\":\"filter column...\",\n\t\t\t\"columns\":{}\n\t\t}\n\t},\n};\n\nclass Localize extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.locale = \"default\"; //current locale\n\t\tthis.lang = false; //current language\n\t\tthis.bindings = {}; //update events to call when locale is changed\n\t\tthis.langList = {};\n\n\t\tthis.registerTableOption(\"locale\", false); //current system language\n\t\tthis.registerTableOption(\"langs\", {});\n\t}\n\n\tinitialize(){\n\t\tthis.langList = Helpers.deepClone(Localize.langs);\n\n\t\tif(this.table.options.columnDefaults.headerFilterPlaceholder !== false){\n\t\t\tthis.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\n\t\t}\n\n\t\tfor(let locale in this.table.options.langs){\n\t\t\tthis.installLang(locale, this.table.options.langs[locale]);\n\t\t}\n\n\t\tthis.setLocale(this.table.options.locale);\n\n\t\tthis.registerTableFunction(\"setLocale\", this.setLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLocale\", this.getLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLang\", this.getLang.bind(this));\n\t}\n\n\t//set header placeholder\n\tsetHeaderFilterPlaceholder(placeholder){\n\t\tthis.langList.default.headerFilters.default = placeholder;\n\t}\n\n\t//setup a lang description object\n\tinstallLang(locale, lang){\n\t\tif(this.langList[locale]){\n\t\t\tthis._setLangProp(this.langList[locale], lang);\n\t\t}else {\n\t\t\tthis.langList[locale] = lang;\n\t\t}\n\t}\n\n\t_setLangProp(lang, values){\n\t\tfor(let key in values){\n\t\t\tif(lang[key] && typeof lang[key] == \"object\"){\n\t\t\t\tthis._setLangProp(lang[key], values[key]);\n\t\t\t}else {\n\t\t\t\tlang[key] = values[key];\n\t\t\t}\n\t\t}\n\t}\n\n\t//set current locale\n\tsetLocale(desiredLocale){\n\t\tdesiredLocale = desiredLocale || \"default\";\n\n\t\t//fill in any matching language values\n\t\tfunction traverseLang(trans, path){\n\t\t\tfor(var prop in trans){\n\t\t\t\tif(typeof trans[prop] == \"object\"){\n\t\t\t\t\tif(!path[prop]){\n\t\t\t\t\t\tpath[prop] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\n\t\t\t\t}else {\n\t\t\t\t\tpath[prop] = trans[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//determining correct locale to load\n\t\tif(desiredLocale === true && navigator.language){\n\t\t\t//get local from system\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\n\t\t}\n\n\t\tif(desiredLocale){\n\t\t\t//if locale is not set, check for matching top level locale else use default\n\t\t\tif(!this.langList[desiredLocale]){\n\t\t\t\tlet prefix = desiredLocale.split(\"-\")[0];\n\n\t\t\t\tif(this.langList[prefix]){\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n\t\t\t\t\tdesiredLocale = prefix;\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n\t\t\t\t\tdesiredLocale = \"default\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.locale = desiredLocale;\n\n\t\t//load default lang template\n\t\tthis.lang = Helpers.deepClone(this.langList.default || {});\n\n\t\tif(desiredLocale != \"default\"){\n\t\t\ttraverseLang(this.langList[desiredLocale], this.lang);\n\t\t}\n\n\t\tthis.dispatchExternal(\"localized\", this.locale, this.lang);\n\n\t\tthis._executeBindings();\n\t}\n\n\t//get current locale\n\tgetLocale(locale){\n\t\treturn this.locale;\n\t}\n\n\t//get lang object for given local or current if none provided\n\tgetLang(locale){\n\t\treturn locale ? this.langList[locale] : this.lang;\n\t}\n\n\t//get text for current locale\n\tgetText(path, value){\n\t\tvar fillPath = value ? path + \"|\" + value : path,\n\t\tpathArray = fillPath.split(\"|\"),\n\t\ttext = this._getLangElement(pathArray, this.locale);\n\n\t\t// if(text === false){\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n\t\t// }\n\n\t\treturn text || \"\";\n\t}\n\n\t//traverse langs object and find localized copy\n\t_getLangElement(path, locale){\n\t\tvar root = this.lang;\n\n\t\tpath.forEach(function(level){\n\t\t\tvar rootPath;\n\n\t\t\tif(root){\n\t\t\t\trootPath = root[level];\n\n\t\t\t\tif(typeof rootPath != \"undefined\"){\n\t\t\t\t\troot = rootPath;\n\t\t\t\t}else {\n\t\t\t\t\troot = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn root;\n\t}\n\n\t//set update binding\n\tbind(path, callback){\n\t\tif(!this.bindings[path]){\n\t\t\tthis.bindings[path] = [];\n\t\t}\n\n\t\tthis.bindings[path].push(callback);\n\n\t\tcallback(this.getText(path), this.lang);\n\t}\n\n\t//iterate through bindings and trigger updates\n\t_executeBindings(){\n\t\tfor(let path in this.bindings){\n\t\t\tthis.bindings[path].forEach((binding) => {\n\t\t\t\tbinding(this.getText(path), this.lang);\n\t\t\t});\n\t\t}\n\t}\n}\n\nLocalize.moduleName = \"localize\";\n\n//load defaults\nLocalize.langs = defaultLangs;\n\nclass Comms extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\n\tinitialize(){\n\t\tthis.registerTableFunction(\"tableComms\", this.receive.bind(this));\n\t}\n\n\tgetConnections(selectors){\n\t\tvar connections = [],\n\t\tconnection;\n\n\t\tconnection = TableRegistry.lookupTable(selectors);\n\n\t\tconnection.forEach((con) =>{\n\t\t\tif(this.table !== con){\n\t\t\t\tconnections.push(con);\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsend(selectors, module, action, data){\n\t\tvar connections = this.getConnections(selectors);\n\n\t\tconnections.forEach((connection) => {\n\t\t\tconnection.tableComms(this.table.element, module, action, data);\n\t\t});\n\n\t\tif(!connections.length && selectors){\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n\t\t}\n\t}\n\n\treceive(table, module, action, data){\n\t\tif(this.table.modExists(module)){\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\n\t\t}else {\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\n\t\t}\n\t}\n}\n\nComms.moduleName = \"comms\";\n\nvar coreModules = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tLayoutModule: Layout,\n\tLocalizeModule: Localize,\n\tCommsModule: Comms\n});\n\nclass ModuleBinder {\n\t\n\tconstructor(tabulator, modules){\n\t\tthis.bindStaticFunctionality(tabulator);\n\t\tthis.bindModules(tabulator, coreModules, true);\n\t\t\n\t\tif(modules){\n\t\t\tthis.bindModules(tabulator, modules);\n\t\t}\n\t}\n\t\n\tbindStaticFunctionality(tabulator){\n\t\ttabulator.moduleBindings = {};\n\t\t\n\t\ttabulator.extendModule = function(name, property, values){\n\t\t\tif(tabulator.moduleBindings[name]){\n\t\t\t\tvar source = tabulator.moduleBindings[name][property];\n\t\t\t\t\n\t\t\t\tif(source){\n\t\t\t\t\tif(typeof values == \"object\"){\n\t\t\t\t\t\tfor(let key in values){\n\t\t\t\t\t\t\tsource[key] = values[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}else {\n\t\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\n\t\t\t}\n\t\t};\n\t\t\n\t\ttabulator.registerModule = function(modules){\n\t\t\tif(!Array.isArray(modules)){\n\t\t\t\tmodules = [modules];\n\t\t\t}\n\t\t\t\n\t\t\tmodules.forEach((mod) => {\n\t\t\t\ttabulator.registerModuleBinding(mod);\n\t\t\t});\n\t\t};\n\t\t\n\t\ttabulator.registerModuleBinding = function(mod){\n\t\t\ttabulator.moduleBindings[mod.moduleName] = mod;\n\t\t};\n\t\t\n\t\ttabulator.findTable = function(query){\n\t\t\tvar results = TableRegistry.lookupTable(query, true);\n\t\t\treturn Array.isArray(results) && !results.length ? false : results;\n\t\t};\n\t\t\n\t\t//ensure that module are bound to instantiated function\n\t\ttabulator.prototype.bindModules = function(){\n\t\t\tvar orderedStartMods = [],\n\t\t\torderedEndMods = [],\n\t\t\tunOrderedMods = [];\n\t\t\t\n\t\t\tthis.modules = {};\n\t\t\t\n\t\t\tfor(var name in tabulator.moduleBindings){\n\t\t\t\tlet mod = tabulator.moduleBindings[name];\n\t\t\t\tlet module = new mod(this);\n\t\t\t\t\n\t\t\t\tthis.modules[name] = module;\n\t\t\t\t\n\t\t\t\tif(mod.prototype.moduleCore){\n\t\t\t\t\tthis.modulesCore.push(module);\n\t\t\t\t}else {\n\t\t\t\t\tif(mod.moduleInitOrder){\n\t\t\t\t\t\tif(mod.moduleInitOrder < 0){\n\t\t\t\t\t\t\torderedStartMods.push(module);\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\torderedEndMods.push(module);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}else {\n\t\t\t\t\t\tunOrderedMods.push(module);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\torderedStartMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\torderedEndMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\t\n\t\t\tthis.modulesRegular = orderedStartMods.concat(unOrderedMods.concat(orderedEndMods));\n\t\t};\n\t}\n\t\n\tbindModules(tabulator, modules, core){\n\t\tvar mods = Object.values(modules);\n\t\t\n\t\tif(core){\n\t\t\tmods.forEach((mod) => {\n\t\t\t\tmod.prototype.moduleCore = true;\n\t\t\t});\n\t\t}\n\t\t\n\t\ttabulator.registerModule(mods);\n\t}\n}\n\nclass Alert extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n        \n\t\tthis.element = this._createAlertElement();\n\t\tthis.msgElement = this._createMsgElement();\n\t\tthis.type = null;\n        \n\t\tthis.element.appendChild(this.msgElement);\n\t}\n    \n\t_createAlertElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert\");\n\t\treturn el;\n\t}\n    \n\t_createMsgElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-alert-msg\");\n\t\tel.setAttribute(\"role\", \"alert\");\n\t\treturn el;\n\t}\n    \n\t_typeClass(){\n\t\treturn \"tabulator-alert-state-\" + this.type;\n\t}\n    \n\talert(content, type = \"msg\"){\n\t\tif(content){\n\t\t\tthis.clear();\n            \n\t\t\tthis.type = type;\n            \n\t\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\n            \n\t\t\tthis.msgElement.classList.add(this._typeClass());\n            \n\t\t\tif(typeof content === \"function\"){\n\t\t\t\tcontent = content();\n\t\t\t}\n            \n\t\t\tif(content instanceof HTMLElement){\n\t\t\t\tthis.msgElement.appendChild(content);\n\t\t\t}else {\n\t\t\t\tthis.msgElement.innerHTML = content;\n\t\t\t}\n            \n\t\t\tthis.table.element.appendChild(this.element);\n\t\t}\n\t}\n    \n\tclear(){\n\t\tif(this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n        \n\t\tthis.msgElement.classList.remove(this._typeClass());\n\t}\n}\n\nclass Tabulator {\n\t\n\tconstructor(element, options){\n\t\t\n\t\tthis.options = {};\n\t\t\n\t\tthis.columnManager = null; // hold Column Manager\n\t\tthis.rowManager = null; //hold Row Manager\n\t\tthis.footerManager = null; //holder Footer Manager\n\t\tthis.alertManager = null; //hold Alert Manager\n\t\tthis.vdomHoz  = null; //holder horizontal virtual dom\n\t\tthis.externalEvents = null; //handle external event messaging\n\t\tthis.eventBus = null; //handle internal event messaging\n\t\tthis.interactionMonitor = false; //track user interaction\n\t\tthis.browser = \"\"; //hold current browser type\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\n\t\tthis.browserMobile = false; //check if running on mobile, prevent resize cancelling edit on keyboard appearance\n\t\tthis.rtl = false; //check if the table is in RTL mode\n\t\tthis.originalElement = null; //hold original table element if it has been replaced\n\t\t\n\t\tthis.componentFunctionBinder = new ComponentFunctionBinder(this); //bind component functions\n\t\tthis.dataLoader = false; //bind component functions\n\t\t\n\t\tthis.modules = {}; //hold all modules bound to this table\n\t\tthis.modulesCore = []; //hold core modules bound to this table (for initialization purposes)\n\t\tthis.modulesRegular = []; //hold regular modules bound to this table (for initialization purposes)\n\t\t\n\t\tthis.deprecationAdvisor = new DeprecationAdvisor(this);\n\t\tthis.optionsList = new OptionsList(this, \"table constructor\");\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.destroyed = false;\n\t\t\n\t\tif(this.initializeElement(element)){\n\t\t\t\n\t\t\tthis.initializeCoreSystems(options);\n\t\t\t\n\t\t\t//delay table creation to allow event bindings immediately after the constructor\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._create();\n\t\t\t});\n\t\t}\n\t\t\n\t\tTableRegistry.register(this); //register table for inter-device communication\n\t}\n\t\n\tinitializeElement(element){\n\t\tif(typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement){\n\t\t\tthis.element = element;\n\t\t\treturn true;\n\t\t}else if(typeof element === \"string\"){\n\t\t\tthis.element = document.querySelector(element);\n\t\t\t\n\t\t\tif(this.element){\n\t\t\t\treturn true;\n\t\t\t}else {\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tinitializeCoreSystems(options){\n\t\tthis.columnManager = new ColumnManager(this);\n\t\tthis.rowManager = new RowManager(this);\n\t\tthis.footerManager = new FooterManager(this);\n\t\tthis.dataLoader = new DataLoader(this);\n\t\tthis.alertManager = new Alert(this);\n\t\t\n\t\tthis.bindModules();\n\t\t\n\t\tthis.options = this.optionsList.generate(Tabulator.defaultOptions, options);\n\t\t\n\t\tthis._clearObjectPointers();\n\t\t\n\t\tthis._mapDeprecatedFunctionality();\n\t\t\n\t\tthis.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal);\n\t\tthis.eventBus = new InternalEventBus(this.options.debugEventsInternal);\n\t\t\n\t\tthis.interactionMonitor = new InteractionManager(this);\n\t\t\n\t\tthis.dataLoader.initialize();\n\t\t// this.columnManager.initialize();\n\t\t// this.rowManager.initialize();\n\t\tthis.footerManager.initialize();\n\t}\n\t\n\t//convert deprecated functionality to new functions\n\t_mapDeprecatedFunctionality(){\n\t\t//all previously deprecated functionality removed in the 5.0 release\n\t}\n\t\n\t_clearSelection(){\n\t\t\n\t\tthis.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tif (window.getSelection) {\n\t\t\tif (window.getSelection().empty) {  // Chrome\n\t\t\t\twindow.getSelection().empty();\n\t\t\t} else if (window.getSelection().removeAllRanges) {  // Firefox\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t}\n\t\t} else if (document.selection) {  // IE?\n\t\t\tdocument.selection.empty();\n\t\t}\n\t\t\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\n\t}\n\t\n\t//create table\n\t_create(){\n\t\tthis.externalEvents.dispatch(\"tableBuilding\");\n\t\tthis.eventBus.dispatch(\"table-building\");\n\t\t\n\t\tthis._rtlCheck();\n\t\t\n\t\tthis._buildElement();\n\t\t\n\t\tthis._initializeTable();\n\t\t\n\t\tthis._loadInitialData();\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tthis.externalEvents.dispatch(\"tableBuilt\");\n\t}\n\t\n\t_rtlCheck(){\n\t\tvar style = window.getComputedStyle(this.element);\n\t\t\n\t\tswitch(this.options.textDirection){\n\t\t\tcase\"auto\":\n\t\t\t\tif(style.direction !== \"rtl\"){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\n\t\t\tcase \"rtl\":\n\t\t\t\tthis.element.classList.add(\"tabulator-rtl\");\n\t\t\t\tthis.rtl = true;\n\t\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"ltr\":\n\t\t\t\tthis.element.classList.add(\"tabulator-ltr\");\n\t\t\t\n\t\t\tdefault:\n\t\t\t\tthis.rtl = false;\n\t\t}\n\t}\n\t\n\t//clear pointers to objects in default config object\n\t_clearObjectPointers(){\n\t\tthis.options.columns = this.options.columns.slice(0);\n\t\t\n\t\tif(Array.isArray(this.options.data) && !this.options.reactiveData){\n\t\t\tthis.options.data = this.options.data.slice(0);\n\t\t}\n\t}\n\t\n\t//build tabulator element\n\t_buildElement(){\n\t\tvar element = this.element,\n\t\toptions = this.options,\n\t\tnewElement;\n\t\t\n\t\tif(element.tagName === \"TABLE\"){\n\t\t\tthis.originalElement = this.element;\n\t\t\tnewElement = document.createElement(\"div\");\n\t\t\t\n\t\t\t//transfer attributes to new element\n\t\t\tvar attributes = element.attributes;\n\t\t\t\n\t\t\t// loop through attributes and apply them on div\n\t\t\tfor(var i in attributes){\n\t\t\t\tif(typeof attributes[i] == \"object\"){\n\t\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// replace table with div element\n\t\t\telement.parentNode.replaceChild(newElement, element);\n\t\t\t\n\t\t\tthis.element = element = newElement;\n\t\t}\n\t\t\n\t\telement.classList.add(\"tabulator\");\n\t\telement.setAttribute(\"role\", \"grid\");\n\t\t\n\t\t//empty element\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\t//set table height\n\t\tif(options.height){\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\n\t\t\telement.style.height = options.height;\n\t\t}\n\t\t\n\t\t//set table min height\n\t\tif(options.minHeight !== false){\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n\t\t\telement.style.minHeight = options.minHeight;\n\t\t}\n\t\t\n\t\t//set table maxHeight\n\t\tif(options.maxHeight !== false){\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n\t\t\telement.style.maxHeight = options.maxHeight;\n\t\t}\n\t}\n\t\n\t//initialize core systems and modules\n\t_initializeTable(){\n\t\tvar element = this.element,\n\t\toptions = this.options;\n\t\t\n\t\tthis.interactionMonitor.initialize();\n\t\t\n\t\tthis.columnManager.initialize();\n\t\tthis.rowManager.initialize();\n\t\t\n\t\tthis._detectBrowser();\n\t\t\n\t\t//initialize core modules\n\t\tthis.modulesCore.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\t//build table elements\n\t\telement.appendChild(this.columnManager.getElement());\n\t\telement.appendChild(this.rowManager.getElement());\n\t\t\n\t\tif(options.footerElement){\n\t\t\tthis.footerManager.activate();\n\t\t}\n\t\t\n\t\tif(options.autoColumns && options.data){\n\t\t\t\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\n\t\t}\n\t\t\n\t\t//initialize regular modules\n\t\tthis.modulesRegular.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\tthis.columnManager.setColumns(options.columns);\n\t\t\n\t\tthis.eventBus.dispatch(\"table-built\");\n\t}\n\t\n\t_loadInitialData(){\n\t\tthis.dataLoader.load(this.options.data);\n\t}\n\t\n\t//deconstructor\n\tdestroy(){\n\t\tvar element = this.element;\n\t\t\n\t\tthis.destroyed = true;\n\t\t\n\t\tTableRegistry.deregister(this); //deregister table from inter-device communication\n\t\t\n\t\tthis.eventBus.dispatch(\"table-destroy\");\n\t\t\n\t\t//clear row data\n\t\tthis.rowManager.destroy();\n\t\t\n\t\t//clear DOM\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\telement.classList.remove(\"tabulator\");\n\n\t\tthis.externalEvents.dispatch(\"tableDestroyed\");\n\t}\n\t\n\t_detectBrowser(){\n\t\tvar ua = navigator.userAgent||navigator.vendor||window.opera;\n\t\t\n\t\tif(ua.indexOf(\"Trident\") > -1){\n\t\t\tthis.browser = \"ie\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Edge\") > -1){\n\t\t\tthis.browser = \"edge\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Firefox\") > -1){\n\t\t\tthis.browser = \"firefox\";\n\t\t\tthis.browserSlow = false;\n\t\t}else if(ua.indexOf(\"Mac OS\") > -1){\n\t\t\tthis.browser = \"safari\";\n\t\t\tthis.browserSlow = false;\n\t\t}else {\n\t\t\tthis.browser = \"other\";\n\t\t\tthis.browserSlow = false;\n\t\t}\n\t\t\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(ua.slice(0,4));\n\t}\n\t\n\tinitGuard(func, msg){\n\t\tvar stack, line;\n\t\t\n\t\tif(this.options.debugInitialization && !this.initialized){\n\t\t\tif(!func){\n\t\t\t\tstack = new Error().stack.split(\"\\n\");\n\t\t\t\t\n\t\t\t\tline = stack[0] == \"Error\" ? stack[2] : stack[1];\n\t\t\t\t\n\t\t\t\tif(line[0] == \" \"){\n\t\t\t\t\tfunc = line.trim().split(\" \")[1].split(\".\")[1];\n\t\t\t\t}else {\n\t\t\t\t\tfunc = line.trim().split(\"@\")[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tconsole.warn(\"Table Not Initialized - Calling the \" + func + \" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.\" + (msg ? \" \" + msg : \"\"));\n\t\t}\n\t\t\n\t\treturn this.initialized;\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\t//block table redrawing\n\tblockRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocking\");\n\t\t\n\t\tthis.rowManager.blockRedraw();\n\t\tthis.columnManager.blockRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-blocked\");\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw(){\n\t\tthis.initGuard();\n\n\t\tthis.eventBus.dispatch(\"redraw-restoring\");\n\n\t\tthis.rowManager.restoreRedraw();\n\t\tthis.columnManager.restoreRedraw();\n\n\t\tthis.eventBus.dispatch(\"redraw-restored\");\n\t}\n\t\n\t//load data\n\tsetData(data, params, config){\n\t\tthis.initGuard(false, \"To set initial data please use the 'data' property in the table constructor.\");\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, false);\n\t}\n\t\n\t//clear data\n\tclearData(){\n\t\tthis.initGuard();\n\t\t\n\t\tthis.dataLoader.blockActiveLoad();\n\t\tthis.rowManager.clearData();\n\t}\n\t\n\t//get table data array\n\tgetData(active){\n\t\treturn this.rowManager.getData(active);\n\t}\n\t\n\t//get table data array count\n\tgetDataCount(active){\n\t\treturn this.rowManager.getDataCount(active);\n\t}\n\t\n\t//replace data, keeping table in position with same sort\n\treplaceData(data, params, config){\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, true, true);\n\t}\n\t\n\t//update table data\n\tupdateData(data){\n\t\tvar responses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\tresponses++;\n\t\t\t\t\t\t\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\t\t\treject(\"Update Error - Unable to update row\", item, e);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else {\n\t\t\t\t\t\treject(\"Update Error - Unable to find row\", item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\taddData(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data){\n\t\t\t\tthis.rowManager.addRows(data, pos, index)\n\t\t\t\t\t.then((rows) => {\n\t\t\t\t\t\tvar output = [];\n\t\t\t\t\t\n\t\t\t\t\t\trows.forEach(function(row){\n\t\t\t\t\t\t\toutput.push(row.getComponent());\n\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t\tresolve(output);\n\t\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//update table data\n\tupdateOrAddData(data){\n\t\tvar rows = [],\n\t\tresponses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data && data.length > 0){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tresponses++;\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(row.getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.rowManager.addRows(item)\n\t\t\t\t\t\t\t.then((newRows)=>{\n\t\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//get row object\n\tgetRow(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else {\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//get row object\n\tgetRowFromPosition(position){\n\t\tvar row = this.rowManager.getRowFromPosition(position);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else {\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//delete row from table\n\tdeleteRow(index){\n\t\tvar foundRows = [];\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(!Array.isArray(index)){\n\t\t\tindex = [index];\n\t\t}\n\t\t\n\t\t//find matching rows\n\t\tfor(let item of index){\n\t\t\tlet row = this.rowManager.findRow(item, true);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\tfoundRows.push(row);\n\t\t\t}else {\n\t\t\t\tconsole.error(\"Delete Error - No matching row found:\", item);\n\t\t\t\treturn Promise.reject(\"Delete Error - No matching row found\");\n\t\t\t}\n\t\t}\n\t\t\n\t\t//sort rows into correct order to ensure smooth delete from table\n\t\tfoundRows.sort((a, b) => {\n\t\t\treturn this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\n\t\t});\n\t\t\n\t\t//delete rows\n\t\tfoundRows.forEach((row) =>{\n\t\t\trow.delete();\n\t\t});\n\t\t\n\t\tthis.rowManager.reRenderInPosition();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\t//add row to table\n\taddRow(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\treturn this.rowManager.addRows(data, pos, index, true)\n\t\t\t.then((rows)=>{\n\t\t\t\treturn rows[0].getComponent();\n\t\t\t});\n\t}\n\t\n\t//update a row if it exists otherwise create it\n\tupdateOrAddRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn row.getComponent();\n\t\t\t\t});\n\t\t}else {\n\t\t\treturn this.rowManager.addRows(data)\n\t\t\t\t.then((rows)=>{\n\t\t\t\t\treturn rows[0].getComponent();\n\t\t\t\t});\n\t\t}\n\t}\n\t\n\t//update row data\n\tupdateRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t\t.then(()=>{\n\t\t\t\t\treturn Promise.resolve(row.getComponent());\n\t\t\t\t});\n\t\t}else {\n\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Update Error - No matching row found\");\n\t\t}\n\t}\n\t\n\t//scroll to row in DOM\n\tscrollToRow(index, position, ifVisible){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn this.rowManager.scrollToRow(row, position, ifVisible);\n\t\t}else {\n\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Scroll Error - No matching row found\");\n\t\t}\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tvar fromRow = this.rowManager.findRow(from);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromRow){\n\t\t\tfromRow.moveToRow(to, after);\n\t\t}else {\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\n\t\t}\n\t}\n\t\n\tgetRows(active){\n\t\treturn this.rowManager.getComponents(active);\t\n\t}\n\t\n\t//get position of row in table\n\tgetRowPosition(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getPosition();\n\t\t}else {\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t/////////////// Column Functions  ///////////////\n\tsetColumns(definition){\n\t\tthis.initGuard(false, \"To set initial columns please use the 'columns' property in the table constructor\");\n\t\t\n\t\tthis.columnManager.setColumns(definition);\n\t}\n\t\n\tgetColumns(structured){\n\t\treturn this.columnManager.getComponents(structured);\n\t}\n\t\n\tgetColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tif(column){\n\t\t\treturn column.getComponent();\n\t\t}else {\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tgetColumnDefinitions(){\n\t\treturn this.columnManager.getDefinitionTree();\n\t}\n\t\n\tshowColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.show();\n\t\t}else {\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\thideColumn(field){\n\t\tvar column = this.columnManager.findColumn(field); \n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.hide();\n\t\t}else {\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\ttoggleColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tif(column.visible){\n\t\t\t\tcolumn.hide();\n\t\t\t}else {\n\t\t\t\tcolumn.show();\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\taddColumn(definition, before, field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.columnManager.addColumn(definition, before, column)\n\t\t\t.then((column) => {\n\t\t\t\treturn column.getComponent();\n\t\t\t});\n\t}\n\t\n\tdeleteColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.delete();\n\t\t}else {\n\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tupdateColumnDefinition(field, definition){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.updateDefinition(definition);\n\t\t}else {\n\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tvar fromColumn = this.columnManager.findColumn(from),\n\t\ttoColumn = this.columnManager.findColumn(to);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromColumn){\n\t\t\tif(toColumn){\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after);\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t\t}\n\t\t}else {\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\n\t\t}\n\t}\n\t\n\t//scroll to column in DOM\n\tscrollToColumn(field, position, ifVisible){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this.columnManager.findColumn(field);\n\t\t\t\n\t\t\tif(column){\n\t\t\t\treturn this.columnManager.scrollToColumn(column, position, ifVisible);\n\t\t\t}else {\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\n\t\t\t\treturn Promise.reject(\"Scroll Error - No matching column found\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//////////// General Public Functions ////////////\n\t//redraw list without updating data\n\tredraw(force){\n\t\tthis.initGuard();\n\n\t\tthis.columnManager.redraw(force);\n\t\tthis.rowManager.redraw(force);\n\t}\n\t\n\tsetHeight(height){\n\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\n\t\tthis.element.style.height = this.options.height;\n\t\tthis.rowManager.initializeRenderer();\n\t\tthis.rowManager.redraw();\n\t}\n\t\n\t//////////////////// Event Bus ///////////////////\n\t\n\ton(key, callback){\n\t\tthis.externalEvents.subscribe(key, callback);\n\t}\n\t\n\toff(key, callback){\n\t\tthis.externalEvents.unsubscribe(key, callback);\n\t}\n\t\n\tdispatchEvent(){\n\t\tvar args = Array.from(arguments);\n\t\targs.shift();\n\t\t\n\t\tthis.externalEvents.dispatch(...arguments);\n\t}\n\n\t//////////////////// Alerts ///////////////////\n\n\talert(contents, type){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.alert(contents, type);\n\t}\n\n\tclearAlert(){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.clear();\n\t}\n\t\n\t////////////// Extension Management //////////////\n\tmodExists(plugin, required){\n\t\tif(this.modules[plugin]){\n\t\t\treturn true;\n\t\t}else {\n\t\t\tif(required){\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule(key){\n\t\tvar mod = this.modules[key];\n\t\t\n\t\tif(!mod){\n\t\t\tconsole.error(\"Tabulator module not installed: \" + key);\n\t\t}\n\t\t\n\t\treturn mod;\n\t}\n}\n\n//default setup options\nTabulator.defaultOptions = defaultOptions;\n\n//bind modules and static functionality\nnew ModuleBinder(Tabulator);\n\n//tabulator with all modules installed\n\nclass TabulatorFull extends Tabulator {}\n\n//bind modules and static functionality\nnew ModuleBinder(TabulatorFull, modules);\n\nclass PseudoRow {\n\n\tconstructor (type){\n\t\tthis.type = type;\n\t\tthis.element = this._createElement();\n\t}\n\n\t_createElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-row\");\n\t\treturn el;\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tgetComponent(){\n\t\treturn false;\n\t}\n\n\tgetData(){\n\t\treturn {};\n\t}\n\n\tgetHeight(){\n\t\treturn this.element.outerHeight;\n\t}\n\n\tinitialize(){}\n\n\treinitialize(){}\n\n\tnormalizeHeight(){}\n\n\tgenerateCells(){}\n\n\treinitializeHeight(){}\n\n\tcalcHeight(){}\n\n\tsetCellHeight(){}\n\n\tclearCellHeight(){}\n}\n\nexport { Accessor as AccessorModule, Ajax as AjaxModule, CalcComponent, CellComponent, Clipboard as ClipboardModule, ColumnCalcs as ColumnCalcsModule, ColumnComponent, DataTree as DataTreeModule, Download as DownloadModule, Edit$1 as EditModule, Export as ExportModule, Filter as FilterModule, Format as FormatModule, FrozenColumns as FrozenColumnsModule, FrozenRows as FrozenRowsModule, GroupComponent, GroupRows as GroupRowsModule, History as HistoryModule, HtmlTableImport as HtmlTableImportModule, Import as ImportModule, Interaction as InteractionModule, Keybindings as KeybindingsModule, Menu as MenuModule, Module, MoveColumns as MoveColumnsModule, MoveRows as MoveRowsModule, Mutator as MutatorModule, Page as PageModule, Persistence as PersistenceModule, Popup$1 as PopupModule, Print as PrintModule, PseudoRow, ReactiveData as ReactiveDataModule, Renderer, ResizeColumns as ResizeColumnsModule, ResizeRows as ResizeRowsModule, ResizeTable as ResizeTableModule, ResponsiveLayout as ResponsiveLayoutModule, RowComponent, SelectRow as SelectRowModule, Sort as SortModule, Tabulator, TabulatorFull, Tooltip as TooltipModule, Validate as ValidateModule };\n//# sourceMappingURL=tabulator_esm.js.map\n","/**\n * Copyright (C) 2017-present by Andrea Giammarchi - @WebReflection\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nconst {replace} = '';\n\n// escape\nconst es = /&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g;\nconst ca = /[&<>'\"]/g;\n\nconst esca = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  \"'\": '&#39;',\n  '\"': '&quot;'\n};\nconst pe = m => esca[m];\n\n/**\n * Safely escape HTML entities such as `&`, `<`, `>`, `\"`, and `'`.\n * @param {string} es the input to safely escape\n * @returns {string} the escaped input, and it **throws** an error if\n *  the input type is unexpected, except for boolean and numbers,\n *  converted as string.\n */\nexport const escape = es => replace.call(es, ca, pe);\n\n\n// unescape\nconst unes = {\n  '&amp;': '&',\n  '&#38;': '&',\n  '&lt;': '<',\n  '&#60;': '<',\n  '&gt;': '>',\n  '&#62;': '>',\n  '&apos;': \"'\",\n  '&#39;': \"'\",\n  '&quot;': '\"',\n  '&#34;': '\"'\n};\nconst cape = m => unes[m];\n\n/**\n * Safely unescape previously escaped entities such as `&`, `<`, `>`, `\"`,\n * and `'`.\n * @param {string} un a previously escaped string\n * @returns {string} the unescaped input, and it **throws** an error if\n *  the input type is unexpected, except for boolean and numbers,\n *  converted as string.\n */\nexport const unescape = un => replace.call(un, es, cape);\n","import { Column, ColumnSorter, ColumnAggregatorFunction } from './table.types';\nimport {\n    CellComponent,\n    ColumnCalc,\n    ColumnComponent,\n    ColumnDefinition,\n    Formatter,\n    SorterFromTable,\n} from 'tabulator-tables';\nimport { escape } from 'html-escaper';\nimport { ElementPool } from './element-pool';\nimport { pickBy, negate } from 'lodash-es';\n\nexport class ColumnDefinitionFactory {\n    constructor(private pool: ElementPool) {\n        this.create = this.create.bind(this);\n    }\n\n    /**\n     * Create Tabulator column definitions from a limel-table column configuration\n     * @param {Column} column config describing the column\n     * @returns {ColumnDefinition} Tabulator column\n     */\n    public create(column: Column<object>): ColumnDefinition {\n        const definition: ColumnDefinition = {\n            title: column.title,\n            field: column.field,\n            hozAlign: column.horizontalAlign,\n            headerSort: column.headerSort,\n        };\n\n        if (column.headerComponent) {\n            definition.titleFormatter = formatHeader(column);\n        }\n\n        if (column.component?.name || column.formatter) {\n            definition.formatter = createFormatter(column, this.pool);\n            definition.formatterParams = column as object;\n        }\n\n        if (column.aggregator) {\n            definition.bottomCalc = getColumnAggregator(column);\n        }\n\n        return definition;\n    }\n}\n\n/**\n * Formats the header of the column\n * @param {Column} column the configuration for the column\n * @returns {string | HTMLElement} custom component that renders a column header\n */\nexport const formatHeader = (column: Column) => (): string | HTMLElement => {\n    const headerElement = document.createElement('div');\n    headerElement.setAttribute('class', 'lime-col-title__custom-component');\n\n    const titleElement = document.createElement('span');\n    titleElement.setAttribute('class', 'title-component-text');\n    titleElement.innerText = column.title;\n\n    const customElement = document.createElement(column.headerComponent.name);\n    customElement.setAttribute('class', 'title-component-slot');\n\n    let props: object = column.headerComponent.props || {};\n    if (column.headerComponent.propsFactory) {\n        props = {\n            ...props,\n            // we pass null to propsFactory function because no data in column header\n            ...column.headerComponent.propsFactory(null),\n        };\n    }\n\n    setElementProperties(customElement, props);\n\n    headerElement.appendChild(titleElement);\n    headerElement.appendChild(customElement);\n\n    return headerElement;\n};\n\n/**\n * Create a formatter to be used to format values in a column\n * @param {Column} column config describing the column\n * @param {ElementPool} pool pool to get custom components from\n * @returns {Formatter} Tabulator formatter\n */\nexport function createFormatter(column: Column, pool: ElementPool): Formatter {\n    if (!column.component?.name) {\n        return formatCell;\n    }\n\n    if (!columnElementExists(column)) {\n        // eslint-disable-next-line no-console\n        console.warn(\n            `Failed to render custom component for column \"${column.field.toString()}\". Custom element <${\n                column.component.name\n            }/> does not exist. Using the default formatter.`\n        );\n\n        return formatCell;\n    }\n\n    return (cell: CellComponent) => {\n        const value = formatCell(cell, column);\n\n        return createCustomComponent(cell, column, value, pool);\n    };\n}\n\nfunction columnElementExists(column: Column<any>) {\n    const name = column.component.name;\n    if (typeof name === 'string') {\n        const isNativeElement = !name.includes('-');\n        const customElementExists = customElements.get(column.component.name);\n\n        return isNativeElement || customElementExists;\n    } else {\n        return false;\n    }\n}\n\n/**\n * Format the value of a cell in the table\n * @param {CellComponent} cell the cell being rendered in the table\n * @param {Column} column configuration for the current column\n * @returns {string} the formatted value\n */\nexport function formatCell(cell: CellComponent, column: Column): string {\n    const data = cell.getData();\n    let value = cell.getValue();\n\n    if (column.formatter) {\n        value = column.formatter(value, data);\n    }\n\n    if (typeof value === 'string' && !column.component) {\n        value = escape(value);\n    }\n\n    return value;\n}\n\n/**\n * Create a custom component that renders a cell value\n * @param {CellComponent} cell Tabulator cell\n * @param {Column} column lime-elements column configuration\n * @param {string} value the value of the cell being rendered\n * @param {ElementPool} pool pool to get custom components from\n * @returns {HTMLElement} custom component that renders a value in the table\n */\nexport function createCustomComponent(\n    cell: CellComponent,\n    column: Column,\n    value: string,\n    pool: ElementPool\n): HTMLElement {\n    const field = cell.getField();\n    const data = cell.getData();\n\n    const element = pool.get(column.component.name);\n    let props: object = column.component.props || {};\n    if (column.component.propsFactory) {\n        props = {\n            ...props,\n            ...column.component.propsFactory(data),\n        };\n    }\n\n    props = {\n        ...props,\n        field: field,\n        value: value,\n        data: data,\n    };\n\n    element.style.display = 'inline-block';\n    setElementProperties(element, props);\n\n    createResizeObserver(element, cell.getColumn());\n\n    return element;\n}\n\n/**\n * Set all properties for a custom element, including event listeners\n * @param {HTMLElement} element the custom element\n * @param {object} props object of properties and event listeners\n */\nexport function setElementProperties(element: HTMLElement, props: object) {\n    const properties = pickBy(props, negate(isEventListener));\n    Object.assign(element, properties);\n\n    const listeners = pickBy(props, isEventListener);\n    Object.entries(listeners).forEach(([key, value]) => {\n        const event = getEventName(key);\n        element.addEventListener(event, value as any);\n    });\n}\n\n/**\n * Check if a property is an event listener.\n *\n * An event listener has to be a function and its property name have to start\n * with \"on\" followed by the name of the event in camel case, e.g. \"onEventName\"\n * @param {any} value the value to check\n * @param {string} key name of the property\n * @returns {boolean} true if the property of the object is an event listener\n */\nfunction isEventListener(value: any, key: string): boolean {\n    if (typeof value !== 'function') {\n        return false;\n    }\n\n    return /^on[A-Z]/.test(key);\n}\n\n/**\n * Get the name of an event from the name of an event listener\n *\n * E.g. \"onMyEvent\" will return \"myEvent\"\n * @param {string} eventListener name of the event listener\n * @returns {string} the name of the event\n */\nfunction getEventName(eventListener: string): string {\n    // eslint-disable-next-line no-magic-numbers\n    return eventListener.charAt(2).toLowerCase() + eventListener.slice(3);\n}\n\nfunction createResizeObserver(element: HTMLElement, column: ColumnComponent) {\n    if (!('ResizeObserver' in window)) {\n        return;\n    }\n\n    const RESIZE_TIMEOUT = 1000;\n    const COLUMN_PADDING = 16;\n\n    const observer = new ResizeObserver(() => {\n        const width = element.getBoundingClientRect().width;\n        const newWidth = width + COLUMN_PADDING;\n\n        if (newWidth < column.getWidth()) {\n            return;\n        }\n\n        column.setWidth(newWidth);\n    });\n    observer.observe(element);\n\n    // We give the component some time to resize itself before we\n    // stop listening for resize events\n    setTimeout(() => {\n        observer.unobserve(element);\n    }, RESIZE_TIMEOUT);\n}\n\n/**\n * Create a column sorter from a tabulator sorter\n * @param {Column[]} columns all available columns in the table\n * @returns {Function} function that creates a sorter from a tabulator sorter\n */\nexport const createColumnSorter =\n    (columns: Column[]) =>\n    (sorter: SorterFromTable): ColumnSorter => {\n        const column = columns.find((col) => col.field === sorter.field);\n        const direction = sorter.dir.toUpperCase() as 'ASC' | 'DESC';\n\n        return {\n            column: column,\n            direction: direction,\n        };\n    };\n\nexport function getColumnAggregator(column: Column): ColumnCalc {\n    const aggregator = column.aggregator;\n    if (isAggregatorFunction(aggregator)) {\n        return (values: any[], data: object[]) => {\n            return aggregator(column, values, data);\n        };\n    }\n\n    return aggregator;\n}\n\nfunction isAggregatorFunction(value: any): value is ColumnAggregatorFunction {\n    return typeof value === 'function';\n}\n","export class ElementPool {\n    private pool: Record<string, HTMLElement[]>;\n    private usedElements: WeakMap<Element, boolean>;\n    private document: Document;\n\n    constructor(document: Document) {\n        this.document = document;\n        this.releaseAll();\n        this.clear();\n    }\n\n    /**\n     * Get an element from the pool\n     * @param {string} name tag name of the element\n     * @returns {HTMLElement} the element\n     */\n    public get(name: string): HTMLElement {\n        let element = this.pool[name]?.find(this.isFree);\n        if (!element) {\n            element = this.createElement(name);\n        }\n\n        this.usedElements.set(element, true);\n\n        return element;\n    }\n\n    private isFree = (element: HTMLElement) => {\n        return !this.usedElements.has(element);\n    };\n\n    /**\n     * Release an element from the pool so that it can be reused\n     * @param {HTMLElement} element the element to release from the pool\n     */\n    public release(element: HTMLElement): void {\n        this.usedElements.delete(element);\n    }\n\n    /**\n     * Release all elements from the pool so that they can be reused\n     */\n    public releaseAll() {\n        this.usedElements = new WeakMap();\n    }\n\n    /**\n     * Remove all elements from the pool and makes them available for garbage\n     * collection\n     */\n    public clear() {\n        this.pool = {};\n    }\n\n    private createElement(name: string) {\n        const element = this.document.createElement(name);\n        if (!(name in this.pool)) {\n            this.pool[name] = [];\n        }\n\n        this.pool[name].push(element);\n\n        return element;\n    }\n}\n","/**\n * Contains changes made to a selection\n */\nexport interface SelectionChangeSet {\n    /**\n     * Tells whether the items were selected or deselected\n     */\n    selected: boolean;\n    /**\n     * Gets the affected items\n     */\n    items: any[];\n    /**\n     * Gets the indexes of the affected items\n     */\n    indexes: number[];\n}\n\n/**\n * Contains a set of selected data objects with methods for adding and removing\n * items to the selection by referring to them by their index/position.\n * Maintains a memory of the last toggled item which can be used to select or\n * deselect a range of items between the last toggled item and a given item.\n */\nexport class Selection {\n    private selectedItems: Set<any>;\n    private lastToggledIndex: number;\n\n    /**\n     * Creates an instance of the Selection class.\n     * The provided function `getDataByIndex` is used to provide data for the\n     * selected items when selection is toggled by using the item index,\n     * which can be the row position in a table.\n     * @param {Function} getDataByIndex A function that returns the data at the given index\n     */\n    constructor(private getDataByIndex: (number) => any) {\n        this.clear();\n    }\n\n    /**\n     * @returns {number} The size of the selection\n     */\n    get size(): number {\n        return this.selectedItems.size;\n    }\n\n    /**\n     * @returns {any[]} The selected items\n     */\n    get items(): any[] {\n        return Array.from(this.selectedItems);\n    }\n\n    /**\n     * @param {any[]} items The selected items\n     */\n    set items(items: any[]) {\n        this.selectedItems = new Set(items);\n        this.lastToggledIndex = -1;\n    }\n\n    /**\n     * Checks whether the given item exist in the selection\n     * @param {any} data The data to look up\n     * @returns {boolean} `true` if the given data exist in the selection, otherwise `false`\n     */\n    public has(data: any) {\n        return this.selectedItems.has(data);\n    }\n\n    /**\n     * Toggles the item at the given index in the selection\n     * @param {number} index The index of the item to toggle\n     * @returns {SelectionChangeSet} The changes made to the selection\n     */\n    public toggleSelection(index: number): SelectionChangeSet {\n        return this.toggleRange(index, index);\n    }\n\n    /**\n     * Toggles the items from the last toggled index to the given index in the selection.\n     * The toggled items will be toggled as the item at the given index no matter\n     * their current state in the selection.\n     * Initially, when no last toggled index exist, this function behaves like\n     * `toggleSelection`.\n     * @param {number} index The index of the item to toggle\n     * @returns {SelectionChangeSet} The changes made to the selection\n     */\n    public toggleSelectionFromLastIndex(index: number): SelectionChangeSet {\n        if (this.lastToggledIndex < 0) {\n            return this.toggleSelection(index);\n        }\n\n        return this.toggleRange(this.lastToggledIndex, index);\n    }\n\n    /**\n     * Clears the current selection and resets last toggled index\n     */\n    public clear() {\n        this.selectedItems = new Set();\n        this.lastToggledIndex = -1;\n    }\n\n    private toggleRange = (\n        fromIndex: number,\n        toIndex: number\n    ): SelectionChangeSet => {\n        const select = !this.selectedItems.has(this.getDataByIndex(toIndex));\n\n        const lowerBound = Math.min(fromIndex, toIndex);\n        const upperBound = Math.max(fromIndex, toIndex);\n        const updatedIndexes = [];\n        const updatedItems = [];\n        for (let index = lowerBound; index <= upperBound; index++) {\n            const data = this.getDataByIndex(index);\n\n            if (!data) {\n                continue;\n            }\n\n            const isSelected = this.selectedItems.has(data);\n\n            if (isSelected === select) {\n                continue;\n            }\n\n            if (select) {\n                this.selectedItems.add(data);\n            } else {\n                this.selectedItems.delete(data);\n            }\n\n            updatedIndexes.push(index);\n            updatedItems.push(data);\n        }\n\n        this.lastToggledIndex = toIndex;\n\n        return {\n            selected: select,\n            items: updatedItems,\n            indexes: updatedIndexes,\n        };\n    };\n}\n","import { EventEmitter } from '@stencil/core';\nimport {\n    CellComponent,\n    ColumnDefinition,\n    RowComponent,\n    Tabulator,\n} from 'tabulator-tables';\nimport { setElementProperties } from './columns';\nimport { ElementPool } from './element-pool';\nimport { Selection, SelectionChangeSet } from './selection';\nimport { isEqual } from 'lodash-es';\n\nconst LIMEL_CHECKBOX = 'limel-checkbox';\n\n/**\n * Provides row selection to Tabulator with shift-click support for range selections\n */\nexport class TableSelection {\n    private selection: Selection;\n\n    /**\n     * Creates an instance of the TableSelection class\n     * @param {Function} getTable Function that returns the Tabulator instance\n     * @param {ElementPool} pool The element pool used to cache the checkbox components\n     * @param {EventEmitter<object[]>} selectEvent The event emitter to use when checkboxes are toggled\n     */\n    constructor(\n        private getTable: () => Tabulator,\n        private pool: ElementPool,\n        private selectEvent: EventEmitter<object[]>\n    ) {\n        this.selection = new Selection((index) =>\n            this.getRowByIndex(index).getData()\n        );\n    }\n\n    /**\n     * @returns {boolean} Returns `true` when the selection is non-empty, otherwise `false`\n     */\n    get hasSelection(): boolean {\n        return this.selection.size > 0;\n    }\n\n    /**\n     * Clears the selection\n     */\n    public clear() {\n        this.selection.clear();\n    }\n\n    /**\n     * Sets the selected items\n     * @param {any[]} data The selected items\n     */\n    public setSelection(data: any[]) {\n        if (isEqual(this.selection.items, data)) {\n            return;\n        }\n\n        this.selection.items = data;\n        const rows = this.getActiveRows();\n        rows.forEach((row) =>\n            this.updateRowSelector(row, this.selection.has(row.getData()))\n        );\n    }\n\n    /**\n     * Prepends a checkbox column used for row selection to the given column definitions\n     * @param {ColumnDefinition[]} columnDefinitions The column definition for the table\n     * @returns {ColumnDefinition[]} The column definitions with the checkbox column prepended to it\n     */\n    public getColumnDefinitions(\n        columnDefinitions: ColumnDefinition[]\n    ): ColumnDefinition[] {\n        return [this.getRowSelectorColumnDefinition(), ...columnDefinitions];\n    }\n\n    private getRowSelectorColumnDefinition(): ColumnDefinition {\n        return {\n            title: '',\n            formatter: this.getRowSelectorFormatter(),\n            cellClick: this.rowSelectorCellClick,\n            headerClick: this.headerClick,\n            headerSort: false,\n            cssClass: 'limel-table--row-selector',\n            resizable: false,\n            htmlOutput: false,\n            clipboard: false,\n        };\n    }\n\n    private headerClick(ev: Event) {\n        ev.stopPropagation();\n    }\n\n    private getRowSelectorFormatter() {\n        return (cell: CellComponent) => {\n            const element = this.pool.get(LIMEL_CHECKBOX);\n            setElementProperties(element, {\n                checked: this.selection.has(cell.getData()),\n            });\n            element.style.display = 'inline-block';\n\n            return element;\n        };\n    }\n\n    /**\n     * Tabulator cell click handler that updates the selection for the clicked\n     * row and toggles the selection from the last clicked row if the shift key\n     * is pressed down.\n     * @param {PointerEvent} ev The pointer event\n     * @param {CellComponent} cell The clicked cell component\n     */\n    protected rowSelectorCellClick = (\n        ev: PointerEvent,\n        cell: CellComponent\n    ) => {\n        ev.stopPropagation();\n        ev.preventDefault();\n\n        const clickedRow = cell.getRow();\n        const rowPosition = clickedRow.getPosition(true);\n\n        if (rowPosition === false) {\n            return;\n        }\n\n        if (ev.shiftKey) {\n            this.updateRowSelectors(\n                this.selection.toggleSelectionFromLastIndex(rowPosition)\n            );\n        } else {\n            this.updateRowSelectors(\n                this.selection.toggleSelection(rowPosition)\n            );\n        }\n\n        this.selectEvent.emit(this.selection.items);\n    };\n\n    private updateRowSelectors = (changeSet: SelectionChangeSet) => {\n        changeSet.indexes\n            .map(this.getRowByIndex)\n            .forEach((row) => this.updateRowSelector(row, changeSet.selected));\n    };\n\n    private updateRowSelector = (row: RowComponent, checked: boolean) => {\n        const cell = row.getCells()[0];\n        if (cell) {\n            const checkBox = cell.getElement().querySelector(LIMEL_CHECKBOX);\n            checkBox.checked = checked;\n        }\n    };\n\n    private getActiveRows: () => RowComponent[] = () => {\n        const table = this.getTable();\n        if (!table) {\n            return [];\n        }\n\n        return table.getRows('active');\n    };\n\n    private getRowByIndex = (index: number) => {\n        return this.getTable().getRowFromPosition(index, true);\n    };\n}\n","export type Layout =\n    | 'default'\n    | 'stretchLastColumn'\n    | 'stretchColumns'\n    | 'lowDensity';\n\nexport function mapLayout(layout: Layout) {\n    const layouts = {\n        stretchLastColumn: 'fitDataStretch',\n        stretchColumns: 'fitColumns',\n        lowDensity: 'fitData',\n    };\n\n    return layouts[layout] || 'fitDataFill';\n}\n","@use '../../style/mixins';\n@use '../../style/functions';\n@use '../../style/internal/lime-typography';\n@import '../../../node_modules/tabulator-tables/src/scss/tabulator.scss';\n\n/*\n* @prop --table-max-column-width: defines a maximum width for columns using standard size units, to prevent the table from growing too wide. Set to `auto` if you do not need this limitation. Defaults to `40rem`.\n*/\n\n$width-of-sorter-arrow: 0.5rem;\n$cell-padding: 0.5rem;\n$table--has-interactive-rows--selectable-row--hover: 2;\n$table--limel-table--row-selector: 1;\n\n:host(limel-table) {\n    isolation: isolate;\n    display: block;\n    --table-header-background-color: var(--contrast-500);\n    --table-header-background-color--hover: var(--contrast-400);\n    --table-header-background-color-when-being-dragged: var(--contrast-100);\n\n    --table-row-background-color--odd: var(--contrast-200);\n    --table-row-background-color--even: var(--contrast-100);\n    --table-row-background-color--hover: var(\n        --lime-elevated-surface-background-color\n    );\n    --table-row-background-color--active: var(--contrast-300);\n\n    --table-arrow-color: var(--contrast-800);\n    --table-arrow-color--active: var(--mdc-theme-primary);\n\n    --table-text-color: var(--mdc-theme-text-primary-on-background);\n}\n\n@import './partial-styles/_table-main-layout';\n\n#tabulator-container {\n    position: relative;\n}\n\n#tabulator-container,\n#tabulator-table {\n    @include lime-typography.base;\n    background-color: transparent;\n    border: none;\n}\n\n.tabulator {\n    .tabulator-header {\n        color: var(--table-text-color);\n    }\n    .tabulator-tableHolder {\n        .tabulator-table {\n            color: var(--table-text-color);\n            background-color: transparent;\n        }\n    }\n\n    .tabulator-header {\n        border-bottom: 0;\n        background-color: rgb(var(--table-header-background-color));\n\n        .tabulator-headers {\n            width: fit-content;\n        }\n\n        .tabulator-col {\n            transition: background-color 0.2s ease;\n            background-color: rgb(var(--table-header-background-color));\n            border-right-color: rgb(var(--contrast-200));\n\n            &.tabulator-sortable {\n                &:hover {\n                    background-color: rgb(\n                        var(--table-header-background-color--hover)\n                    );\n                }\n            }\n\n            .tabulator-col-content {\n                padding-right: $width-of-sorter-arrow;\n            }\n        }\n\n        .tabulator-col-title-holder {\n            display: flex;\n            gap: 0.25rem;\n        }\n\n        .tabulator-col-sorter {\n            order: 1;\n        }\n        .tabulator-col-title {\n            order: 2;\n            font-weight: 500;\n            padding-right: 0 !important;\n            line-height: functions.pxToRem(20);\n        }\n    }\n}\n\n.tabulator-row {\n    &.tabulator-selectable {\n        transition: background-color 0.2s ease;\n\n        &:hover {\n            background-color: rgb(var(--contrast-300));\n        }\n        &:not(.active) {\n            &:hover {\n                background-color: rgb(var(--table-header-background-color));\n            }\n        }\n    }\n    &.tabulator-row-odd:not(.active):not(:hover) {\n        background-color: rgb(var(--table-row-background-color--odd));\n    }\n\n    &.tabulator-row-even:not(.active):not(:hover) {\n        background-color: rgb(var(--table-row-background-color--even));\n    }\n\n    &.active {\n        background-color: rgb(var(--table-row-background-color--active));\n        box-shadow: var(--button-shadow-inset-pressed);\n\n        &:before {\n            $width-of-selected-row-indicator: 0.2rem;\n            content: '';\n            display: inline-block;\n            box-sizing: border-box;\n            position: sticky;\n            z-index: $table--has-interactive-rows--selectable-row--hover + 1;\n            inset: 0 0 auto 0;\n            border: $width-of-selected-row-indicator solid\n                var(--mdc-theme-primary);\n            border-radius: 1rem;\n            margin-right: -$width-of-selected-row-indicator * 2;\n        }\n    }\n\n    .tabulator-cell {\n        border-right: transparent;\n        padding: $cell-padding;\n        padding-left: $cell-padding + $width-of-sorter-arrow;\n\n        display: inline-flex;\n        align-items: center;\n        &[style*='text-align: right;'] {\n            justify-content: flex-end;\n        }\n        &[style*='text-align: center;'] {\n            justify-content: center;\n        }\n    }\n}\n\n.tabulator-col,\n.tabulator-cell {\n    max-width: var(--table-max-column-width, 40rem);\n    font-size: functions.pxToRem(13);\n}\n\n#tabulator-loader,\n#tabulator-empty-text {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    z-index: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n#tabulator-loader {\n    background-color: rgba(var(--contrast-100), 0.6);\n    cursor: wait;\n}\n\n#tabulator-empty-text {\n    color: rgb(var(--contrast-800));\n    font-weight: bold;\n    font-size: functions.pxToRem(20);\n    pointer-events: none;\n}\n\n@import './partial-styles/tabulator-arrow';\n@import './partial-styles/tabulator-paginator';\n@import './partial-styles/tabulator-loader';\n@import './partial-styles/tabulator-custom-styles';\n@import './partial-styles/header-component';\n@import './partial-styles/movable-columns';\n@import './partial-styles/_tabulator-footer';\n@import './partial-styles/_row-selection';\n","import {\n    Component,\n    h,\n    Prop,\n    Element,\n    Watch,\n    EventEmitter,\n    Event,\n    Host,\n} from '@stencil/core';\nimport {\n    Tabulator,\n    TabulatorFull,\n    AjaxModule,\n    SortModule,\n    PageModule,\n    FormatModule,\n    ColumnCalcsModule,\n    MoveColumnsModule,\n    InteractionModule,\n    ResizeColumnsModule,\n    ExportModule,\n    ClipboardModule,\n    Options,\n    Sorter,\n    SortDirection,\n    ColumnDefinition,\n    OptionsData,\n    OptionsPagination,\n    SorterFromTable,\n    RowComponent,\n    OptionsColumns,\n    ColumnComponent,\n} from 'tabulator-tables';\nimport {\n    Column,\n    TableParams,\n    ColumnSorter,\n    ColumnAggregate,\n} from './table.types';\nimport { ColumnDefinitionFactory, createColumnSorter } from './columns';\nimport { isEqual, has } from 'lodash-es';\nimport { ElementPool } from './element-pool';\nimport { TableSelection } from './table-selection';\nimport { mapLayout, Layout } from './layout';\n\nconst FIRST_PAGE = 1;\n\nTabulator.registerModule([\n    AjaxModule,\n    SortModule,\n    PageModule,\n    FormatModule,\n    ColumnCalcsModule,\n    MoveColumnsModule,\n    InteractionModule,\n    ResizeColumnsModule,\n    ExportModule,\n    ClipboardModule,\n]);\n\n/**\n * @exampleComponent limel-example-table\n * @exampleComponent limel-example-table-custom-components\n * @exampleComponent limel-example-table-header-menu\n * @exampleComponent limel-example-table-movable-columns\n * @exampleComponent limel-example-table-sorting-disabled\n * @exampleComponent limel-example-table-local\n * @exampleComponent limel-example-table-remote\n * @exampleComponent limel-example-table-activate-row\n * @exampleComponent limel-example-table-selectable-rows\n * @exampleComponent limel-example-table-default-sorted\n * @exampleComponent limel-example-table-layout-default\n * @exampleComponent limel-example-table-layout-stretch-last-column\n * @exampleComponent limel-example-table-layout-stretch-columns\n * @exampleComponent limel-example-table-layout-low-density\n * @exampleComponent limel-example-table-interactive-rows\n */\n@Component({\n    tag: 'limel-table',\n    styleUrl: 'table.scss',\n    shadow: true,\n})\nexport class Table {\n    /**\n     * Data to be displayed in the table\n     */\n    @Prop()\n    public data: object[] = [];\n\n    /**\n     * Columns used to display the data\n     */\n    @Prop()\n    public columns: Column[] = [];\n\n    /**\n     * Set to either `local` or `remote` to change how the table handles the\n     * loaded data. When in `local` mode, all sorting and pagination will be\n     * done locally with the data given. When in `remote` mode, the consumer\n     * is responsible to give the table new data when a `load` event occurs\n     */\n    @Prop()\n    public mode: 'local' | 'remote' = 'local';\n\n    /**\n     * Defines the layout of the table, based on how width of the columns are calculated.\n     *\n     * - `default`: makes columns as wide as their contents.\n     * - `stretchLastColumn`: makes columns as wide as their contents, stretch the last column to fill up the remaining table width.\n     * - `stretchColumns`: stretches all columns to fill the available width when possible.\n     * - `lowDensity`: makes columns as wide as their contents, and creates a low density and airy layout.\n     */\n    @Prop()\n    public layout: Layout;\n\n    /**\n     * Number of rows per page\n     */\n    @Prop()\n    public pageSize: number;\n\n    /**\n     * The number of total rows available for the data\n     */\n    @Prop()\n    public totalRows: number;\n\n    /**\n     * The initial sorted columns\n     */\n    @Prop()\n    public sorting: ColumnSorter[] = [];\n\n    /**\n     * Active row in the table\n     */\n    @Prop({ mutable: true })\n    public activeRow: object;\n\n    /**\n     * Set to `true` to enable reordering of the columns by dragging them\n     */\n    @Prop()\n    public movableColumns: boolean;\n\n    /**\n     * Set to `true` to trigger loading animation\n     */\n    @Prop()\n    public loading: boolean = false;\n\n    /**\n     * The page to show\n     */\n    @Prop()\n    public page: number = FIRST_PAGE;\n\n    /**\n     * Emitted when `mode` is `local` the data is sorted\n     */\n    @Event()\n    public sort: EventEmitter<ColumnSorter[]>;\n\n    /**\n     * Emitted when a new page has been set\n     */\n    @Event()\n    public changePage: EventEmitter<number>;\n\n    /**\n     * A message to display when the table has no data\n     */\n    @Prop()\n    public emptyMessage: string;\n\n    /**\n     * Column aggregates to be displayed in the table\n     */\n    @Prop()\n    public aggregates: ColumnAggregate[];\n\n    /**\n     * Enables row selection\n     */\n    @Prop()\n    public selectable: boolean;\n\n    /**\n     * Selected data. Requires `selectable` to be true.\n     */\n    @Prop()\n    public selection: object[];\n\n    /**\n     * Emitted when `mode` is `remote` and the table is loading new data. The\n     * consumer is responsible for giving the table new data\n     */\n    @Event()\n    public load: EventEmitter<TableParams>;\n\n    /**\n     * Emitted when a row is activated\n     */\n    @Event()\n    public activate: EventEmitter<object>;\n\n    /**\n     * Emitted when the columns have been changed\n     */\n    @Event()\n    public changeColumns: EventEmitter<Column[]>;\n\n    /**\n     * Emitted when the row selection has been changed\n     */\n    @Event()\n    public select: EventEmitter<object[]>;\n\n    /**\n     * Emitted when the select all rows state is toggled\n     */\n    @Event()\n    public selectAll: EventEmitter<boolean>;\n\n    @Element()\n    private host: HTMLLimelTableElement;\n\n    private currentLoad: { page: number; sorters: ColumnSorter[] };\n\n    private tabulator: TabulatorFull;\n\n    private pool: ElementPool;\n    private columnFactory: ColumnDefinitionFactory;\n    private firstRequest: boolean;\n    private currentSorting: ColumnSorter[];\n    private tableSelection: TableSelection;\n\n    constructor() {\n        this.handleDataSorting = this.handleDataSorting.bind(this);\n        this.handlePageLoaded = this.handlePageLoaded.bind(this);\n        this.handleAjaxRequesting = this.handleAjaxRequesting.bind(this);\n        this.requestData = this.requestData.bind(this);\n        this.onClickRow = this.onClickRow.bind(this);\n        this.formatRow = this.formatRow.bind(this);\n        this.formatRows = this.formatRows.bind(this);\n        this.updateMaxPage = this.updateMaxPage.bind(this);\n        this.initTabulatorComponent = this.initTabulatorComponent.bind(this);\n        this.setSelection = this.setSelection.bind(this);\n        this.addColumnAggregator = this.addColumnAggregator.bind(this);\n        this.pool = new ElementPool(document);\n        this.columnFactory = new ColumnDefinitionFactory(this.pool);\n    }\n\n    public componentWillLoad() {\n        this.firstRequest = this.mode === 'remote';\n        this.initTableSelection();\n    }\n\n    public componentDidLoad() {\n        this.init();\n    }\n\n    public disconnectedCallback() {\n        this.pool.clear();\n    }\n\n    @Watch('totalRows')\n    protected totalRowsChanged() {\n        this.updateMaxPage();\n    }\n\n    @Watch('pageSize')\n    protected pageSizeChanged() {\n        this.updateMaxPage();\n    }\n\n    @Watch('page')\n    protected pageChanged() {\n        if (!this.tabulator) {\n            return;\n        }\n\n        if (this.tabulator.getPage() === this.page) {\n            return;\n        }\n\n        this.tabulator.setPage(this.page);\n    }\n\n    @Watch('activeRow')\n    protected activeRowChanged() {\n        if (!this.tabulator) {\n            return;\n        }\n\n        this.formatRows();\n    }\n\n    @Watch('data')\n    protected updateData(newData = [], oldData = []) {\n        if (isEqual(newData, oldData)) {\n            return;\n        }\n\n        this.pool.releaseAll();\n\n        setTimeout(() => {\n            if (!this.tabulator) {\n                return;\n            }\n\n            this.tabulator.replaceData(this.data);\n            this.setSelection();\n        });\n    }\n\n    @Watch('columns')\n    protected updateColumns(newColumns: Column[], oldColumns: Column[]) {\n        if (!this.tabulator) {\n            return;\n        }\n\n        if (this.areSameColumns(newColumns, oldColumns)) {\n            return;\n        }\n\n        const columnsInTable = this.tabulator\n            .getColumns()\n            .filter((c) => c.getField());\n\n        const oldColumnsInTable = columnsInTable.map((c) =>\n            oldColumns.find((old) => old.field === c.getField())\n        );\n\n        if (this.areSameColumns(newColumns, oldColumnsInTable)) {\n            return;\n        }\n\n        // Updating columns requires a reinitialization otherwise sorting will not work\n        // afterwards\n        this.init();\n    }\n\n    @Watch('aggregates')\n    protected updateAggregates(\n        newAggregates: ColumnAggregate[],\n        oldAggregates: ColumnAggregate[]\n    ) {\n        if (!this.tabulator) {\n            return;\n        }\n\n        if (isEqual(newAggregates, oldAggregates)) {\n            return;\n        }\n\n        if (!this.haveSameAggregateFields(newAggregates, oldAggregates)) {\n            this.init();\n\n            return;\n        }\n\n        this.tabulator.recalc();\n        this.tabulator.rowManager.redraw();\n    }\n\n    @Watch('selection')\n    protected updateSelection(newSelection: any[]) {\n        if (!this.tableSelection) {\n            return;\n        }\n\n        this.tableSelection.setSelection(newSelection);\n    }\n\n    @Watch('selectable')\n    protected updateSelectable() {\n        if (this.tableSelection && !this.selectable) {\n            this.tableSelection = null;\n        }\n\n        this.initTableSelection();\n        this.init();\n    }\n\n    private areSameColumns(newColumns: Column[], oldColumns: Column[]) {\n        return (\n            newColumns.length === oldColumns.length &&\n            newColumns.every((column) => oldColumns.includes(column))\n        );\n    }\n\n    private haveSameAggregateFields(\n        newAggregates: ColumnAggregate[],\n        oldAggregates: ColumnAggregate[]\n    ) {\n        const oldAggregateFields = oldAggregates?.map((a) => a.field) || [];\n\n        return (\n            newAggregates?.length === oldAggregates?.length &&\n            !!newAggregates?.every((a) => oldAggregateFields.includes(a.field))\n        );\n    }\n\n    private init() {\n        if (this.tabulator) {\n            this.pool.releaseAll();\n            this.tabulator.destroy();\n        }\n\n        const options = this.getOptions();\n        const table: HTMLElement =\n            this.host.shadowRoot.querySelector('#tabulator-table');\n        this.initTabulatorComponent(table, options);\n    }\n\n    /*\n     * Tabulator requires that the html element it's rendered inside\n     * has a size before it's created, otherwise it doesn't consider\n     * it self renderedy completely. (the callback \"renderComplete\"\n     * is never run).\n     *\n     * @param table {HTMLElement}\n     * @param options {Options}\n     *\n     * @returns {void}\n     */\n    private initTabulatorComponent(table: HTMLElement, options: Options) {\n        const createTabulator = () => {\n            this.tabulator = new Tabulator(table, options);\n            this.tabulator.on('dataSorting', this.handleDataSorting);\n            this.tabulator.on('pageLoaded', this.handlePageLoaded);\n            this.tabulator.on('rowClick', this.onClickRow);\n\n            if (this.movableColumns) {\n                this.tabulator.on('columnMoved', this.handleMoveColumn);\n            }\n\n            if (this.isRemoteMode()) {\n                this.tabulator.on('tableBuilt', () => {\n                    this.tabulator.setData('https://localhost');\n                });\n            }\n\n            this.setSelection();\n        };\n\n        // Some browsers do not implement the ResizeObserver API...\n        // If that's the case lets just create the table no\n        // matter if its rendered or not.\n        if (!('ResizeObserver' in window)) {\n            createTabulator();\n\n            return;\n        }\n\n        const observer = new ResizeObserver(() => {\n            createTabulator();\n            observer.unobserve(table);\n        });\n        observer.observe(table);\n    }\n\n    private initTableSelection() {\n        if (this.selectable) {\n            this.tableSelection = new TableSelection(\n                () => this.tabulator,\n                this.pool,\n                this.select\n            );\n            this.tableSelection.setSelection(this.selection);\n        }\n    }\n\n    private setSelection() {\n        if (!(this.tabulator && this.tableSelection)) {\n            return;\n        }\n\n        this.tableSelection.setSelection(this.selection);\n    }\n\n    private updateMaxPage() {\n        this.tabulator?.setMaxPage(this.calculatePageCount());\n    }\n\n    private getOptions(): Options {\n        const ajaxOptions = this.getAjaxOptions();\n        const paginationOptions = this.getPaginationOptions();\n        const columnOptions = this.getColumnOptions();\n\n        return {\n            data: this.data,\n            layout: mapLayout(this.layout),\n            columns: this.getColumnDefinitions(),\n            ...ajaxOptions,\n            ...paginationOptions,\n            rowFormatter: this.formatRow,\n            initialSort: this.getColumnSorter(),\n            nestedFieldSeparator: false,\n            ...columnOptions,\n        };\n    }\n\n    private getColumnSorter(): Sorter[] {\n        const sorting = this.currentSorting ?? this.sorting;\n\n        return sorting.map((sorter: ColumnSorter) => {\n            return {\n                column: String(sorter.column.field),\n                dir: sorter.direction.toLocaleLowerCase() as SortDirection,\n            };\n        });\n    }\n\n    private getColumnDefinitions(): ColumnDefinition[] {\n        const columnDefinitions = this.columns\n            .map(this.addColumnAggregator)\n            .map(this.columnFactory.create);\n\n        if (this.tableSelection) {\n            return this.tableSelection.getColumnDefinitions(columnDefinitions);\n        }\n\n        return columnDefinitions;\n    }\n\n    private addColumnAggregator(column: Column<any>): Column<any> {\n        if (!this.aggregates?.length || column.aggregator) {\n            return column;\n        }\n\n        const aggregate = this.aggregates.find((a) => a.field === column.field);\n        if (aggregate) {\n            column.aggregator = (\n                col?: Column,\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                _values?: any[],\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                _data?: any[]\n            ) => {\n                if (!col) {\n                    return undefined;\n                }\n\n                const value = this.aggregates.find(\n                    (a) => a.field === col.field\n                )?.value;\n\n                if (col.formatter) {\n                    return col.formatter(value);\n                }\n\n                return value;\n            };\n        }\n\n        return column;\n    }\n\n    private getAjaxOptions(): OptionsData {\n        if (!this.isRemoteMode()) {\n            return {};\n        }\n\n        // Tabulator needs a URL to be set, even though this one will never be\n        // used since we have our own custom `ajaxRequestFunc`\n        const remoteUrl = 'https://localhost';\n\n        return {\n            ajaxURL: remoteUrl,\n            sortMode: 'remote',\n            ajaxRequestFunc: this.requestData,\n            ajaxRequesting: this.handleAjaxRequesting,\n        };\n    }\n\n    /*\n     * The ajaxRequesting callback is triggered when ever an ajax request is made.\n     *\n     * Tabulator is requesting data with an AJAX request even though it has been\n     * given data when it was created.\n     *\n     * It seems unnecessary for us to emit the `load` event as well when this\n     * happens, since we can just initialize the table with the data that has been\n     * given to us. Therefore, we abort the request if:\n     *\n     *  * its the first time this method is called and,\n     *  * data has been sent in to the component as a prop\n     *\n     */\n    private handleAjaxRequesting() {\n        const abortRequest = this.firstRequest && !!this.data?.length;\n        this.firstRequest = false;\n\n        if (abortRequest) {\n            setTimeout(() => {\n                this.updateMaxPage();\n                this.tabulator.replaceData(this.data);\n            });\n\n            return false;\n        }\n\n        return true;\n    }\n\n    private getPaginationOptions(): OptionsPagination {\n        if (!this.pageSize) {\n            return {};\n        }\n\n        return {\n            pagination: true,\n            paginationMode: this.isRemoteMode() ? 'remote' : 'local',\n            paginationSize: this.pageSize,\n            paginationInitialPage: this.page,\n        };\n    }\n\n    private requestData(_, __, params: any): Promise<object> {\n        const sorters = params.sort;\n        const currentPage = params.page;\n\n        if (this.page !== currentPage) {\n            this.changePage.emit(currentPage);\n        }\n\n        const columnSorters = sorters.map(createColumnSorter(this.columns));\n\n        const load = {\n            page: currentPage,\n            sorters: columnSorters,\n        };\n\n        // In order to make limel-table behave more like a controlled component,\n        // we always return the existing data from this function, therefore\n        // relying on the consumer component to handle the loading\n        // state via the loading prop, if it actually decides to load new data.\n        const resolveExistingData = Promise.resolve({\n            last_page: this.calculatePageCount(), // eslint-disable-line camelcase\n            data: this.data,\n        });\n\n        if (isEqual(this.currentLoad, load)) {\n            return resolveExistingData;\n        }\n\n        this.currentSorting = columnSorters;\n        this.currentLoad = load;\n        this.load.emit(load);\n\n        return resolveExistingData;\n    }\n\n    private isRemoteMode(): boolean {\n        return this.mode === 'remote';\n    }\n\n    private handleDataSorting(sorters: SorterFromTable[]): void {\n        if (this.isRemoteMode()) {\n            return;\n        }\n\n        const columnSorters = sorters.map(createColumnSorter(this.columns));\n        if (columnSorters.length === 0) {\n            return;\n        }\n\n        this.sort.emit(columnSorters);\n    }\n\n    private handlePageLoaded(page: number): void {\n        if (this.isRemoteMode()) {\n            return;\n        }\n\n        this.changePage.emit(page);\n    }\n\n    private onClickRow(_ev, row: RowComponent): void {\n        if (typeof row.getPosition === 'undefined') {\n            // Not a data row, probably a CalcComponent\n            return;\n        }\n\n        if (this.activeRow === row.getData()) {\n            this.activeRow = null;\n        } else {\n            this.activeRow = row.getData();\n        }\n\n        this.activate.emit(this.activeRow);\n    }\n\n    private getActiveRows: () => RowComponent[] = () => {\n        if (!this.tabulator) {\n            return [];\n        }\n\n        return this.tabulator.getRows('active');\n    };\n\n    private getActiveRowsData: () => object[] = () => {\n        // Note: Tabulator.getData() creates copies of each data object\n        // and will break this.selection.has checks, hence why this function\n        // intentionally retrieves the data using the row components\n        return this.getActiveRows().map((row) => row.getData());\n    };\n\n    private selectAllOnChange = (ev: CustomEvent<boolean>) => {\n        const selectAll = ev.detail;\n\n        ev.stopPropagation();\n        ev.preventDefault();\n\n        const newSelection = selectAll ? this.getActiveRowsData() : [];\n        this.select.emit(newSelection);\n        this.tableSelection.setSelection(newSelection);\n        this.selectAll.emit(selectAll);\n    };\n\n    private formatRows() {\n        this.tabulator.getRows().forEach(this.formatRow);\n    }\n\n    private formatRow(row: RowComponent) {\n        if (this.activeRow === row.getData()) {\n            row.getElement().classList.add('active');\n        } else {\n            row.getElement().classList.remove('active');\n        }\n    }\n\n    private calculatePageCount(): number {\n        let total = this.totalRows;\n        if (!total) {\n            total = this.data.length;\n        }\n\n        return Math.ceil(total / this.pageSize);\n    }\n\n    private hasAggregation(columns: Column[]): boolean {\n        return columns.some((column) => has(column, 'aggregator'));\n    }\n\n    private getColumnOptions = (): OptionsColumns => {\n        if (!this.movableColumns) {\n            return {};\n        }\n\n        return {\n            movableColumns: true,\n        };\n    };\n\n    private handleMoveColumn = (_, components: ColumnComponent[]) => {\n        const columns = components.map(this.findColumn).filter((c) => c);\n        this.changeColumns.emit(columns);\n    };\n\n    private findColumn = (component: ColumnComponent): Column => {\n        return this.columns.find((column) => {\n            return (\n                column.field === component.getField() &&\n                column.title === component.getDefinition().title\n            );\n        });\n    };\n\n    render() {\n        return (\n            <Host\n                class={{\n                    'has-low-density': this.layout === 'lowDensity',\n                }}\n            >\n                <div\n                    id=\"tabulator-container\"\n                    class={{\n                        'has-pagination': this.totalRows > this.pageSize,\n                        'has-aggregation': this.hasAggregation(this.columns),\n                        'has-movable-columns': this.movableColumns,\n                        'has-rowselector': this.selectable,\n                        'has-selection': this.tableSelection?.hasSelection,\n                    }}\n                >\n                    {/* Toggle style instead of removing the loader\n                    because removing the element will cause a rerender, breaking the\n                    tabulator table */}\n                    <div\n                        id=\"tabulator-loader\"\n                        style={{ display: this.loading ? 'flex' : 'none' }}\n                    >\n                        <limel-spinner size=\"large\" />\n                    </div>\n                    {this.renderEmptyMessage()}\n                    {this.renderSelectAll()}\n                    <div id=\"tabulator-table\" />\n                </div>\n            </Host>\n        );\n    }\n\n    private renderSelectAll() {\n        if (!this.selectable) {\n            return;\n        }\n\n        const showSelectAll = !this.loading && this.tableSelection;\n\n        return (\n            <div\n                class=\"select-all\"\n                style={{ display: showSelectAll ? 'inline-block' : 'none' }}\n            >\n                <limel-checkbox\n                    onChange={this.selectAllOnChange}\n                    disabled={!this.data.length}\n                    checked={this.tableSelection?.hasSelection}\n                    indeterminate={\n                        this.tableSelection?.hasSelection &&\n                        this.selection?.length < this.data.length\n                    }\n                />\n            </div>\n        );\n    }\n\n    private renderEmptyMessage() {\n        const showEmptyMessage =\n            !this.loading && !this.data.length && this.emptyMessage;\n\n        return (\n            <div\n                id=\"tabulator-empty-text\"\n                style={{ display: showEmptyMessage ? 'flex' : 'none' }}\n            >\n                <span>{this.emptyMessage}</span>\n            </div>\n        );\n    }\n}\n"],"mappings":"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"}