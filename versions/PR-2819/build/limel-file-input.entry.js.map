{"version":3,"names":["FileInput","this","fileInputId","createRandomString","handleClick","event","disabled","stopPropagation","preventDefault","triggerFileDialog","handleKeyUp","code","handleFileChange","files","Array","from","fileInput","length","filesSelected","emit","map","createFileInfo","value","componentDidLoad","element","shadowRoot","getElementById","render","h","Host","onClick","onKeyUp","onKeyDown","handleKeyDown","hidden","id","onChange","type","accept","click"],"sources":["./src/components/file-input/file-input.tsx"],"sourcesContent":["import {\n    h,\n    Event,\n    EventEmitter,\n    Host,\n    Component,\n    Element,\n    Prop,\n} from '@stencil/core';\nimport { createRandomString } from '../../util/random-string';\nimport { FileInfo } from '../../global/shared-types/file.types';\nimport { createFileInfo } from '../../util/files';\n\n/**\n * @exampleComponent limel-example-file-input\n */\n@Component({\n    tag: 'limel-file-input',\n    shadow: true,\n})\nexport class FileInput {\n    @Prop({ reflect: true })\n    public accept: string = '*';\n\n    @Prop()\n    public disabled: boolean = false;\n\n    @Event()\n    filesSelected: EventEmitter<FileInfo[]>;\n\n    @Element()\n    private element: HTMLLimelFileElement;\n\n    private fileInput: HTMLInputElement;\n    private fileInputId = createRandomString();\n\n    public componentDidLoad() {\n        this.fileInput = this.element.shadowRoot.getElementById(\n            this.fileInputId,\n        ) as HTMLInputElement;\n    }\n\n    public render() {\n        return (\n            <Host\n                onClick={this.handleClick}\n                onKeyUp={this.handleKeyUp}\n                onKeyDown={this.handleKeyDown}\n            >\n                <input\n                    hidden={true}\n                    id={this.fileInputId}\n                    onChange={this.handleFileChange}\n                    type=\"file\"\n                    accept={this.accept}\n                    disabled={this.disabled}\n                />\n                <slot />\n            </Host>\n        );\n    }\n\n    private handleClick = (event: Event) => {\n        if (this.disabled) {\n            event.stopPropagation();\n            event.preventDefault();\n\n            return;\n        }\n\n        this.triggerFileDialog();\n\n        event.stopPropagation();\n    };\n\n    private handleKeyUp = (event: KeyboardEvent) => {\n        event.stopPropagation();\n        event.preventDefault();\n\n        if (event.code === 'Enter') {\n            this.triggerFileDialog();\n        }\n    };\n\n    private handleKeyDown(event: KeyboardEvent) {\n        if (\n            event.code === 'Tab' ||\n            event.code === 'Backspace' ||\n            event.code === 'Enter'\n        ) {\n            return;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n    }\n\n    private triggerFileDialog() {\n        this.fileInput.click();\n    }\n\n    private handleFileChange = (event: Event) => {\n        const files = Array.from(this.fileInput.files);\n        if (files.length > 0) {\n            event.stopPropagation();\n            this.filesSelected.emit(files.map(createFileInfo));\n            this.fileInput.value = '';\n        }\n    };\n}\n"],"mappings":"2OAoBaA,EAAS,M,sEAcVC,KAAAC,YAAcC,IA4BdF,KAAAG,YAAeC,IACnB,GAAIJ,KAAKK,SAAU,CACfD,EAAME,kBACNF,EAAMG,iBAEN,M,CAGJP,KAAKQ,oBAELJ,EAAME,iBAAiB,EAGnBN,KAAAS,YAAeL,IACnBA,EAAME,kBACNF,EAAMG,iBAEN,GAAIH,EAAMM,OAAS,QAAS,CACxBV,KAAKQ,mB,GAqBLR,KAAAW,iBAAoBP,IACxB,MAAMQ,EAAQC,MAAMC,KAAKd,KAAKe,UAAUH,OACxC,GAAIA,EAAMI,OAAS,EAAG,CAClBZ,EAAME,kBACNN,KAAKiB,cAAcC,KAAKN,EAAMO,IAAIC,IAClCpB,KAAKe,UAAUM,MAAQ,E,eApFP,I,cAGG,K,CAWpBC,mBACHtB,KAAKe,UAAYf,KAAKuB,QAAQC,WAAWC,eACrCzB,KAAKC,Y,CAINyB,SACH,OACIC,EAACC,EAAI,CACDC,QAAS7B,KAAKG,YACd2B,QAAS9B,KAAKS,YACdsB,UAAW/B,KAAKgC,eAEhBL,EAAA,SACIM,OAAQ,KACRC,GAAIlC,KAAKC,YACTkC,SAAUnC,KAAKW,iBACfyB,KAAK,OACLC,OAAQrC,KAAKqC,OACbhC,SAAUL,KAAKK,WAEnBsB,EAAA,a,CA2BJK,cAAc5B,GAClB,GACIA,EAAMM,OAAS,OACfN,EAAMM,OAAS,aACfN,EAAMM,OAAS,QACjB,CACE,M,CAGJN,EAAMG,iBACNH,EAAME,iB,CAGFE,oBACJR,KAAKe,UAAUuB,O"}