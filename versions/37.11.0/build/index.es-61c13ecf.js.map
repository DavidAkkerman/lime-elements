{"version":3,"names":["dist","debounce","fn","wait","arguments","length","undefined","options","lastCallAt","deferred","timer","pendingArgs","debounced","currentWait","getWait","currentTime","Date","getTime","isCold","_len","args","Array","_key","leading","accumulate","Promise","resolve","call","this","then","result","apply","concat","clearTimeout","defer","push","setTimeout","flush","bind","argsIndex","promise","results","thisDeferred","reject","createImperativePromise","promiseArg","wrappedPromise","_resolve","_reject","val","error","value","reason","cancel","onlyResolvesLast","asyncFunction","cancelPrevious","wrappedFunction","_i","initialPromise","_a","__assign","Object","assign","t","s","i","n","p","prototype","hasOwnProperty","DefaultOptions","key","_args","DebounceCache","config","debounceSingleton","debounceCache","_createDebouncedFunction","debouncedFunc","DebouncePromise","func","getDebouncedFunction","AwesomeDebouncePromise","finalOptions","AwesomeDebouncePromiseWrapper","debouncedFn"],"sources":["./node_modules/debounce-promise/dist/index.js","./node_modules/awesome-imperative-promise/dist/index.es.js","./node_modules/awesome-only-resolves-last-promise/dist/index.es.js","./node_modules/awesome-debounce-promise/dist/index.es.js"],"sourcesContent":["'use strict';\n\n/* global setTimeout, clearTimeout */\n\nmodule.exports = function debounce(fn) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var lastCallAt = void 0;\n  var deferred = void 0;\n  var timer = void 0;\n  var pendingArgs = [];\n  return function debounced() {\n    var currentWait = getWait(wait);\n    var currentTime = new Date().getTime();\n\n    var isCold = !lastCallAt || currentTime - lastCallAt > currentWait;\n\n    lastCallAt = currentTime;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (isCold && options.leading) {\n      return options.accumulate ? Promise.resolve(fn.call(this, [args])).then(function (result) {\n        return result[0];\n      }) : Promise.resolve(fn.call.apply(fn, [this].concat(args)));\n    }\n\n    if (deferred) {\n      clearTimeout(timer);\n    } else {\n      deferred = defer();\n    }\n\n    pendingArgs.push(args);\n    timer = setTimeout(flush.bind(this), currentWait);\n\n    if (options.accumulate) {\n      var argsIndex = pendingArgs.length - 1;\n      return deferred.promise.then(function (results) {\n        return results[argsIndex];\n      });\n    }\n\n    return deferred.promise;\n  };\n\n  function flush() {\n    var thisDeferred = deferred;\n    clearTimeout(timer);\n\n    Promise.resolve(options.accumulate ? fn.call(this, pendingArgs) : fn.apply(this, pendingArgs[pendingArgs.length - 1])).then(thisDeferred.resolve, thisDeferred.reject);\n\n    pendingArgs = [];\n    deferred = null;\n  }\n};\n\nfunction getWait(wait) {\n  return typeof wait === 'function' ? wait() : wait;\n}\n\nfunction defer() {\n  var deferred = {};\n  deferred.promise = new Promise(function (resolve, reject) {\n    deferred.resolve = resolve;\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n//# sourceMappingURL=index.js.map","function createImperativePromise(promiseArg) {\r\n    var resolve = null;\r\n    var reject = null;\r\n    var wrappedPromise = new Promise(function (_resolve, _reject) {\r\n        resolve = _resolve;\r\n        reject = _reject;\r\n    });\r\n    promiseArg && promiseArg.then(function (val) {\r\n        resolve && resolve(val);\r\n    }, function (error) {\r\n        reject && reject(error);\r\n    });\r\n    return {\r\n        promise: wrappedPromise,\r\n        resolve: function (value) {\r\n            resolve && resolve(value);\r\n        },\r\n        reject: function (reason) {\r\n            reject && reject(reason);\r\n        },\r\n        cancel: function () {\r\n            resolve = null;\r\n            reject = null;\r\n        }\r\n    };\r\n}\n\nexport { createImperativePromise };\n//# sourceMappingURL=index.es.js.map\n","import { createImperativePromise } from 'awesome-imperative-promise';\n\n// see https://stackoverflow.com/a/54825370/82609\r\nfunction onlyResolvesLast(asyncFunction) {\r\n    var cancelPrevious = null;\r\n    var wrappedFunction = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        cancelPrevious && cancelPrevious();\r\n        var initialPromise = asyncFunction.apply(void 0, args);\r\n        var _a = createImperativePromise(initialPromise), promise = _a.promise, cancel = _a.cancel;\r\n        cancelPrevious = cancel;\r\n        return promise;\r\n    };\r\n    return wrappedFunction; // TODO fix TS\r\n}\n\nexport { onlyResolvesLast };\n//# sourceMappingURL=index.es.js.map\n","import DebouncePromise from 'debounce-promise';\nimport { onlyResolvesLast } from 'awesome-only-resolves-last-promise';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar DefaultOptions = {\r\n    // One distinct debounced function is created per key and added to an internal cache\r\n    // By default, the key is null, which means that all the calls\r\n    // will share the same debounced function\r\n    key: function () {\r\n        var _args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            _args[_i] = arguments[_i];\r\n        }\r\n        return null;\r\n    },\r\n    // By default, a debounced function will only resolve\r\n    // the last promise it returned\r\n    // Former calls will stay unresolved, so that you don't have\r\n    // to handle concurrency issues in your code\r\n    // Setting this to false means all returned promises will resolve to the last result\r\n    onlyResolvesLast: true,\r\n};\r\n// We create a debouncing function cache, because when wrapping the original function,\r\n// we may actually want to route the function call to different debounced functions depending function paameters\r\nvar DebounceCache = /** @class */ (function () {\r\n    function DebounceCache(config) {\r\n        this.config = config;\r\n        this.debounceSingleton = null;\r\n        this.debounceCache = {}; // when key feature is used\r\n    }\r\n    DebounceCache.prototype._createDebouncedFunction = function () {\r\n        var debouncedFunc = DebouncePromise(this.config.func, this.config.wait, this.config.options); // TODO TS\r\n        if (this.config.options.onlyResolvesLast) {\r\n            debouncedFunc = onlyResolvesLast(debouncedFunc);\r\n        }\r\n        return {\r\n            func: debouncedFunc,\r\n        };\r\n    };\r\n    DebounceCache.prototype.getDebouncedFunction = function (args) {\r\n        var _a;\r\n        var key = (_a = this.config.options).key.apply(_a, args);\r\n        if (key === null || typeof key === 'undefined') {\r\n            if (!this.debounceSingleton) {\r\n                this.debounceSingleton = this._createDebouncedFunction();\r\n            }\r\n            return this.debounceSingleton;\r\n        }\r\n        else {\r\n            if (!this.debounceCache[key]) {\r\n                this.debounceCache[key] = this._createDebouncedFunction();\r\n            }\r\n            return this.debounceCache[key];\r\n        }\r\n    };\r\n    return DebounceCache;\r\n}());\r\nfunction AwesomeDebouncePromise(func, wait, options) {\r\n    var finalOptions = __assign({}, DefaultOptions, options);\r\n    var debounceCache = new DebounceCache({\r\n        func: func,\r\n        wait: wait,\r\n        options: finalOptions,\r\n    });\r\n    var AwesomeDebouncePromiseWrapper = (function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var debouncedFn = debounceCache.getDebouncedFunction(args).func;\r\n        return debouncedFn.apply(void 0, args);\r\n    }); // TODO fix TS\r\n    /*\r\n    AwesomeDebouncePromiseWrapper.cancel = (key?: string) => {\r\n  \n    };\r\n    */\r\n    return AwesomeDebouncePromiseWrapper;\r\n}\n\nexport default AwesomeDebouncePromise;\n//# sourceMappingURL=index.es.js.map\n"],"mappings":"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"}