{"version":3,"names":["menuCss","SEARCH_DEBOUNCE","Menu","visibleItems","Array","isArray","this","currentItems","items","constructor","hostRef","renderLoader","loadingSubItems","loading","cssProperties","getCssProperties","h","style","width","display","padding","size","limeBranded","renderBreadcrumb","leafNode","_a","find","isMenuItem","textValue","breadCrumbItems","currentItem","parentItem","unshift","text","icon","iconColor","menuItem","length","onSelect","event","detail","parentSelect","emit","handleSelect","iconOnly","renderSearchField","searcher","type","leadingIcon","value","onChange","handlerTextInput","renderMenuList","class","gridLayout","lazyLoadItems","badgeIcons","ref","setListElement","async","stopPropagation","query","result","debouncedSearch","setTriggerAttributes","element","attributes","open","disabled","role","key","Object","entries","removeAttribute","setAttribute","String","onClose","cancel","onTriggerClick","subItems","map","item","assign","setTimeout","focusMenuItem","loadSubItems","select","list","activeElement","shadowRoot","blur","MenuItems","filter","selectedIndex","Math","max","findIndex","selected","menuElements","from","querySelectorAll","focus","renderNotificationBadge","some","hasNotificationBadge","badge","undefined","createDebouncedSearcher","bind","portalId","createRandomString","itemsWatcher","openWatcher","observer","IntersectionObserver","unobserve","observe","newValue","AwesomeDebouncePromise","componentDidLoad","render","dropdownZIndex","getComputedStyle","host","getPropertyValue","onClick","name","visible","containerId","openDirection","position","containerStyle","onDismiss","componentDidRender","slotElement","querySelector","assignedElements","forEach","propertyNames","values","property","zipObject","extendStatics","d","b","setPrototypeOf","__proto__","p","prototype","hasOwnProperty","call","__extends","TypeError","__","create","__assign","t","s","i","n","arguments","apply","cssClasses","MENU_SELECTED_LIST_ITEM","MENU_SELECTION_GROUP","ROOT","strings","ARIA_CHECKED_ATTR","ARIA_DISABLED_ATTR","CHECKBOX_SELECTOR","LIST_SELECTOR","SELECTED_EVENT","SKIP_RESTORE_FOCUS","numbers","FOCUS_ROOT_INDEX","DefaultFocusState","MDCMenuFoundation","_super","adapter","_this","defaultAdapter","closeAnimationEndTimerId","defaultFocusState","LIST_ROOT","defineProperty","get","enumerable","configurable","addClassToElementAtIndex","removeClassFromElementAtIndex","addAttributeToElementAtIndex","removeAttributeFromElementAtIndex","getAttributeFromElementAtIndex","elementContainsClass","closeSurface","getElementIndex","notifySelected","getMenuItemCount","focusItemAtIndex","focusListRoot","getSelectedSiblingOfItemAtIndex","isSelectableItemAtIndex","destroy","clearTimeout","handleKeydown","evt","keyCode","isTab","handleItemAction","listItem","index","skipRestoreFocus","recomputedIndex","setSelectedIndex","MDCMenuSurfaceFoundation","TRANSITION_CLOSE_DURATION","handleMenuSurfaceOpened","FIRST_ITEM","LAST_ITEM","NONE","setDefaultFocusState","focusState","getSelectedIndex","validatedIndex","Error","prevSelectedIndex","setEnabled","isEnabled","listCssClasses","LIST_ITEM_DISABLED_CLASS","menuSize","isIndexInRange","MDCFoundation","MDCMenu","attachTo","root","initialize","menuSurfaceFactory","listFactory","el","MDCMenuSurface","MDCList","initialSyncWithDOM","menuSurface","wrapFocus","foundation","listen","OPENED_EVENT","MDCListFoundation","ACTION_EVENT","unlisten","isOpen","set","close","hasTypeahead","typeaheadInProgress","typeaheadMatchItem","nextChar","startingIndex","layout","listElements","singleSelection","listConstants","UNSET_INDEX","quickOpen","setAnchorCorner","corner","setAnchorMargin","margin","getOptionByIndex","getPrimaryTextAtIndex","getPrimaryText","setFixedPosition","isFixed","setIsHoisted","isHoisted","setAbsolutePosition","x","y","setAnchorElement","anchorElement","getDefaultFoundation","className","classList","add","remove","attr","getAttribute","contains","indexOf","evtData","closest","selectionGroupEl","selectedItemEl","MDCComponent","MenuListRenderer","defaultConfig","getIndexForWhichToApplyTabIndex","renderMenuItem","classNames","applyTabIndexToItemAtIndex","tabindex","renderIcon","config","renderText","renderSubMenuIcon","renderNotification","twoLines","avatarList","renderDivider","isSimpleItem","renderCommandText","secondaryText","hasSubItems","commandText","color","iconSize","label","classes","isLeafNode","commandKey","hasIcons","selectable","includes","menuListCss","listStrings","menuStrings","MenuList","setup","setupMenu","setupListeners","mdcMenu","MDCRipple","handleMenuSelect","teardown","mdcList","handleAction","_b","_c","_d","handleSingleSelect","selectedItem","connectedCallback","disconnectedCallback","html","handleType","itemsChanged"],"sources":["./src/components/menu/menu.scss?tag=limel-menu&encapsulation=shadow","./src/components/menu/menu.tsx","./node_modules/@material/menu/node_modules/tslib/tslib.es6.js","./node_modules/@material/menu/constants.js","./node_modules/@material/menu/foundation.js","./node_modules/@material/menu/component.js","./src/components/menu-list/menu-list-renderer.tsx","./src/components/menu-list/menu-list.scss?tag=limel-menu-list&encapsulation=shadow","./src/components/menu-list/menu-list.tsx"],"sourcesContent":["@use '../../style/functions';\n\n// Note! The `--dropdown-z-index` property is used from `menu.tsx`.\n\n/**\n * @prop --dropdown-z-index: `z-index` of the dropdown menu.\n * @prop --menu-surface-width: Width of the menu surface.\n * @prop --list-grid-item-max-width: Maximum width of items in the menu list when `gridLayout={true}`. Defaults to `10rem`.\n * @prop --list-grid-item-min-width: Minimum width of items in the menu list when `gridLayout={true}`. Defaults to `7.5rem`.\n * @prop --list-grid-gap: Distance between the items in the menu list when `gridLayout={true}`. Defaults to `0.75rem`.\n * @prop --notification-badge-text-color: Defines the text color of notification badges. Defaults to `--color-white`.\n * @prop --notification-badge-background-color: Defines the background color of notification badges. Defaults to `--color-red-default`.\n */\n\n:host(limel-menu) {\n    isolation: isolate;\n    position: relative;\n    display: inline-block;\n    --badge-background-color: var(\n        --notification-badge-background-color,\n        rgb(var(--color-red-default))\n    );\n    --badge-text-color: var(\n        --notification-badge-text-color,\n        rgb(var(--color-white))\n    );\n}\n\n:host([hidden]) {\n    display: none;\n}\n\n.menu__trigger {\n    border-color: transparent;\n    border-width: 1px;\n    border-style: solid;\n    background: none;\n    color: rgb(var(--contrast-800));\n    height: functions.pxToRem(36);\n\n    &-enabled {\n        &:hover {\n            border-color: rgb(var(--contrast-800));\n            color: rgb(var(--contrast-1100));\n        }\n    }\n}\n\n.mdc-menu-surface--anchor {\n    position: relative;\n}\n\nlimel-badge {\n    position: absolute;\n    top: -0.25rem;\n    right: -0.25rem;\n}\n","/* eslint-disable sonarjs/no-duplicate-string */\nimport {\n    Component,\n    Event,\n    EventEmitter,\n    h,\n    Prop,\n    Element,\n    Watch,\n    State,\n} from '@stencil/core';\nimport { createRandomString } from '../../util/random-string';\nimport { zipObject } from 'lodash-es';\nimport {\n    BreadcrumbItem,\n    LimelBreadcrumbsCustomEvent,\n    LimelInputFieldCustomEvent,\n    ListSeparator,\n    OpenDirection,\n} from '@limetech/lime-elements';\n\nimport { MenuSearcher, MenuItem, SubItemsLoader } from '../menu/menu.types';\n\nimport AwesomeDebouncePromise from 'awesome-debounce-promise';\n\ninterface MenuCrumbItem extends BreadcrumbItem {\n    menuItem: MenuItem;\n}\n\nconst SEARCH_DEBOUNCE = 500;\n\n/**\n * @slot trigger - Element to use as a trigger for the menu.\n * @exampleComponent limel-example-menu-basic\n * @exampleComponent limel-example-menu-disabled\n * @exampleComponent limel-example-menu-open-direction\n * @exampleComponent limel-example-menu-icons\n * @exampleComponent limel-example-menu-badge-icons\n * @exampleComponent limel-example-menu-grid\n * @exampleComponent limel-example-menu-hotkeys\n * @exampleComponent limel-example-menu-secondary-text\n * @exampleComponent limel-example-menu-notification\n * @exampleComponent limel-example-menu-subitems\n * @exampleComponent limel-example-menu-searchable\n * @exampleComponent limel-example-menu-subitems-lazy-loading\n * @exampleComponent limel-example-menu-composite\n */\n@Component({\n    tag: 'limel-menu',\n    shadow: true,\n    styleUrl: 'menu.scss',\n})\nexport class Menu {\n    /**\n     * A list of items and separators to show in the menu.\n     */\n    @Prop()\n    public items: Array<MenuItem | ListSeparator> = [];\n\n    /**\n     * Sets the disabled state of the menu.\n     */\n    @Prop({ reflect: true })\n    public disabled = false;\n\n    /**\n     * Decides the menu's location in relation to its trigger\n     */\n    @Prop({ reflect: true })\n    public openDirection: OpenDirection = 'bottom-start';\n\n    /**\n     * Sets the open state of the menu.\n     */\n    @Prop({ mutable: true, reflect: true })\n    public open = false;\n\n    /**\n     * Defines whether the menu should show badges.\n     */\n    @Prop({ reflect: true })\n    public badgeIcons = false;\n\n    /**\n     * Renders list items in a grid layout, rather than a vertical list\n     */\n    @Prop({ reflect: true })\n    public gridLayout = false;\n\n    /**\n     * A search function that takes a search-string as an argument,\n     * and returns a promise that will eventually be resolved with\n     * an array of `MenuItem`:s.\n     *\n     * See the docs for the type `Searcher` for type information on\n     * the searcher function itself.\n     */\n    @Prop()\n    public searcher: MenuSearcher;\n\n    @Prop()\n    public loadSubItems: SubItemsLoader;\n\n    @Prop()\n    public lazyLoadItems: boolean;\n\n    @Prop()\n    public loading: boolean;\n\n    /**\n     * Is emitted when the menu is cancelled.\n     */\n    @Event()\n    private cancel: EventEmitter<void>;\n\n    /**\n     * Is emitted when a menu item is selected.\n     */\n    @Event()\n    public select: EventEmitter<MenuItem | MenuItem[]>;\n\n    @Event()\n    public parentSelect: EventEmitter<MenuItem>;\n\n    @Element()\n    private host: HTMLLimelMenuElement;\n\n    @State()\n    private textValue: string;\n\n    @State()\n    private loadingSubItems: boolean;\n\n    @State()\n    private currentItems: Array<MenuItem | ListSeparator> = null;\n\n    private list: HTMLLimelMenuListElement;\n\n    private portalId: string;\n    private debouncedSearch: MenuSearcher;\n\n    private get visibleItems(): Array<MenuItem | ListSeparator> {\n        if (Array.isArray(this.currentItems)) {\n            return this.currentItems;\n        }\n\n        return this.items;\n    }\n\n    constructor() {\n        this.createDebouncedSearcher = this.createDebouncedSearcher.bind(this);\n        this.portalId = createRandomString();\n    }\n\n    @Watch('items')\n    protected itemsWatcher() {\n        this.textValue = '';\n        this.currentItems = null;\n    }\n\n    @Watch('open')\n    protected openWatcher() {\n        if (!this.open) {\n            this.textValue = '';\n            this.currentItems = null;\n\n            return;\n        }\n\n        const observer = new IntersectionObserver(() => {\n            observer.unobserve(this.list);\n            this.focusMenuItem();\n        });\n        observer.observe(this.list);\n    }\n\n    @Watch('searcher')\n    protected createDebouncedSearcher(newValue: MenuSearcher) {\n        if (typeof newValue !== 'function') {\n            return;\n        }\n\n        this.debouncedSearch = AwesomeDebouncePromise(\n            newValue,\n            SEARCH_DEBOUNCE\n        );\n    }\n\n    public componentDidLoad() {\n        this.createDebouncedSearcher(this.searcher);\n    }\n\n    public render() {\n        const cssProperties = this.getCssProperties();\n\n        const dropdownZIndex = getComputedStyle(this.host).getPropertyValue(\n            '--dropdown-z-index'\n        );\n\n        return (\n            <div class=\"mdc-menu-surface--anchor\" onClick={this.onTriggerClick}>\n                <slot name=\"trigger\" />\n                {this.renderNotificationBadge()}\n                <limel-portal\n                    visible={this.open}\n                    containerId={this.portalId}\n                    openDirection={this.openDirection}\n                    position=\"absolute\"\n                    containerStyle={{ 'z-index': dropdownZIndex }}\n                >\n                    <limel-menu-surface\n                        open={this.open}\n                        onDismiss={this.onClose}\n                        style={cssProperties}\n                        class={{\n                            'has-grid-layout': this.gridLayout,\n                        }}\n                    >\n                        {this.renderBreadcrumb()}\n                        {this.renderSearchField()}\n                        {this.renderLoader()}\n                        {this.renderMenuList()}\n                    </limel-menu-surface>\n                </limel-portal>\n            </div>\n        );\n    }\n\n    public componentDidRender() {\n        const slotElement = this.host.shadowRoot.querySelector('slot');\n        slotElement.assignedElements().forEach(this.setTriggerAttributes);\n    }\n\n    private renderLoader = () => {\n        if (!this.loadingSubItems && !this.loading) {\n            return;\n        }\n\n        const cssProperties = this.getCssProperties();\n\n        return (\n            <div\n                style={{\n                    width: cssProperties['--menu-surface-width'],\n                    display: 'flex',\n                    'align-items': 'center',\n                    'justify-content': 'center',\n                    padding: '0.5rem 0',\n                }}\n            >\n                <limel-spinner size=\"mini\" limeBranded={false} />\n            </div>\n        );\n    };\n\n    private renderBreadcrumb = () => {\n        const leafNode = this.visibleItems?.find(this.isMenuItem) as MenuItem;\n        if (!leafNode || this.textValue) {\n            return;\n        }\n\n        const breadCrumbItems: MenuCrumbItem[] = [];\n        let currentItem = leafNode?.parentItem;\n        while (currentItem) {\n            breadCrumbItems.unshift({\n                text: currentItem.text,\n                icon: currentItem.icon,\n                iconColor: currentItem.iconColor,\n                menuItem: currentItem,\n            });\n            currentItem = currentItem.parentItem;\n        }\n\n        if (!breadCrumbItems.length) {\n            return;\n        }\n\n        return (\n            <limel-breadcrumbs\n                onSelect={(\n                    event: LimelBreadcrumbsCustomEvent<MenuCrumbItem>\n                ) => {\n                    if (!event.detail.menuItem) {\n                        this.currentItems = null;\n                        this.parentSelect.emit(null);\n\n                        return;\n                    }\n\n                    this.handleSelect(event.detail.menuItem);\n                }}\n                items={[\n                    {\n                        text: '',\n                        icon: 'home',\n                        iconOnly: true,\n                    },\n                    ...breadCrumbItems,\n                ]}\n            />\n        );\n    };\n\n    private renderSearchField = () => {\n        if (!this.searcher) {\n            return;\n        }\n\n        return (\n            <limel-input-field\n                type=\"search\"\n                leadingIcon=\"search\"\n                style={{\n                    padding: '0.25rem',\n                }}\n                value={this.textValue}\n                onChange={this.handlerTextInput}\n            />\n        );\n    };\n\n    private renderMenuList = () => {\n        if (this.loadingSubItems || this.loading) {\n            return;\n        }\n\n        const cssProperties = this.getCssProperties();\n\n        return (\n            <limel-menu-list\n                class={{\n                    'has-grid-layout has-interactive-items': this.gridLayout,\n                }}\n                style={{\n                    width: `calc(${cssProperties['--menu-surface-width']} - 1rem)`,\n                }}\n                items={this.visibleItems}\n                type=\"menu\"\n                lazyLoadItems={this.lazyLoadItems}\n                badgeIcons={this.badgeIcons}\n                onSelect={this.onSelect}\n                ref={this.setListElement}\n            />\n        );\n    };\n\n    /**\n     * Input handler for the input field\n     * @param {InputEvent} event event\n     * @returns {void}\n     */\n    private handlerTextInput = async (\n        event: LimelInputFieldCustomEvent<string>\n    ) => {\n        event.stopPropagation();\n\n        const query = event.detail;\n        this.textValue = query;\n        if (query === '') {\n            this.currentItems = null;\n\n            return;\n        }\n\n        this.loadingSubItems = true;\n\n        const result = await this.debouncedSearch(query);\n\n        this.currentItems = result;\n        this.loadingSubItems = false;\n    };\n\n    private setTriggerAttributes = (element: HTMLElement) => {\n        const attributes = {\n            'aria-haspopup': true,\n            'aria-expanded': this.open,\n            disabled: this.disabled,\n            role: 'button',\n        };\n\n        for (const [key, value] of Object.entries(attributes)) {\n            if (!value) {\n                element.removeAttribute(key);\n            } else {\n                element.setAttribute(key, String(value));\n            }\n        }\n    };\n\n    private onClose = () => {\n        this.cancel.emit();\n        this.open = false;\n    };\n\n    private onTriggerClick = (event: MouseEvent) => {\n        event.stopPropagation();\n        if (this.disabled) {\n            return;\n        }\n\n        this.open = !this.open;\n    };\n\n    private handleSelect = async (menuItem: MenuItem) => {\n        this.currentItems = null;\n        this.textValue = '';\n\n        if (menuItem?.subItems?.length) {\n            this.parentSelect.emit(menuItem);\n            this.currentItems = menuItem.subItems.map((item) => ({\n                ...item,\n                parentItem: menuItem,\n            }));\n            setTimeout(() => {\n                this.focusMenuItem();\n            }, 100);\n\n            return;\n        } else if (this.lazyLoadItems) {\n            this.loadingSubItems = true;\n            const subItems = await this.loadSubItems(menuItem);\n            this.loadingSubItems = false;\n\n            if (subItems?.length) {\n                this.parentSelect.emit(menuItem);\n                this.currentItems = subItems.map((item) => ({\n                    ...item,\n                    parentItem: menuItem,\n                }));\n                setTimeout(() => {\n                    this.focusMenuItem();\n                }, 100);\n\n                return;\n            }\n        }\n\n        this.select.emit(menuItem);\n        this.open = false;\n    };\n\n    private onSelect = (event: CustomEvent<MenuItem>) => {\n        event.stopPropagation();\n        this.handleSelect(event.detail);\n    };\n\n    private getCssProperties() {\n        const propertyNames = [\n            '--menu-surface-width',\n            '--list-grid-item-max-width',\n            '--list-grid-item-min-width',\n            '--list-grid-gap',\n            '--notification-badge-background-color',\n            '--notification-badge-text-color',\n        ] as const;\n        const style = getComputedStyle(this.host);\n        const values = propertyNames.map((property) => {\n            return style.getPropertyValue(property);\n        });\n\n        type PropName = (typeof propertyNames)[number];\n\n        return zipObject(propertyNames, values) as Record<PropName, string>;\n    }\n\n    private setListElement = (element: HTMLLimelMenuListElement) => {\n        this.list = element;\n    };\n\n    private focusMenuItem = () => {\n        const activeElement = this.list.shadowRoot.activeElement as HTMLElement;\n        activeElement?.blur();\n\n        const MenuItems = this.visibleItems.filter(this.isMenuItem);\n        const selectedIndex = Math.max(\n            MenuItems.findIndex((item) => item.selected),\n            0\n        );\n        const menuElements: HTMLElement[] = Array.from(\n            this.list.shadowRoot.querySelectorAll('[role=\"menuitem\"]')\n        );\n        menuElements[selectedIndex]?.focus();\n    };\n\n    private isMenuItem(item: MenuItem | ListSeparator): item is MenuItem {\n        return !('separator' in item);\n    }\n\n    private renderNotificationBadge = () => {\n        if (this.items.some(this.hasNotificationBadge)) {\n            return <limel-badge />;\n        }\n    };\n\n    private hasNotificationBadge = (item: MenuItem | ListSeparator) =>\n        this.isMenuItem(item) && item.badge !== undefined;\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar cssClasses = {\n    MENU_SELECTED_LIST_ITEM: 'mdc-menu-item--selected',\n    MENU_SELECTION_GROUP: 'mdc-menu__selection-group',\n    ROOT: 'mdc-menu',\n};\nvar strings = {\n    ARIA_CHECKED_ATTR: 'aria-checked',\n    ARIA_DISABLED_ATTR: 'aria-disabled',\n    CHECKBOX_SELECTOR: 'input[type=\"checkbox\"]',\n    LIST_SELECTOR: '.mdc-list,.mdc-deprecated-list',\n    SELECTED_EVENT: 'MDCMenu:selected',\n    SKIP_RESTORE_FOCUS: 'data-menu-item-skip-restore-focus',\n};\nvar numbers = {\n    FOCUS_ROOT_INDEX: -1,\n};\nvar DefaultFocusState;\n(function (DefaultFocusState) {\n    DefaultFocusState[DefaultFocusState[\"NONE\"] = 0] = \"NONE\";\n    DefaultFocusState[DefaultFocusState[\"LIST_ROOT\"] = 1] = \"LIST_ROOT\";\n    DefaultFocusState[DefaultFocusState[\"FIRST_ITEM\"] = 2] = \"FIRST_ITEM\";\n    DefaultFocusState[DefaultFocusState[\"LAST_ITEM\"] = 3] = \"LAST_ITEM\";\n})(DefaultFocusState || (DefaultFocusState = {}));\nexport { cssClasses, strings, numbers, DefaultFocusState };\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __assign, __extends } from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses as listCssClasses } from '@material/list/constants';\nimport { MDCMenuSurfaceFoundation } from '@material/menu-surface/foundation';\nimport { cssClasses, DefaultFocusState, numbers, strings } from './constants';\nvar MDCMenuFoundation = /** @class */ (function (_super) {\n    __extends(MDCMenuFoundation, _super);\n    function MDCMenuFoundation(adapter) {\n        var _this = _super.call(this, __assign(__assign({}, MDCMenuFoundation.defaultAdapter), adapter)) || this;\n        _this.closeAnimationEndTimerId = 0;\n        _this.defaultFocusState = DefaultFocusState.LIST_ROOT;\n        _this.selectedIndex = -1;\n        return _this;\n    }\n    Object.defineProperty(MDCMenuFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuFoundation, \"numbers\", {\n        get: function () {\n            return numbers;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuFoundation, \"defaultAdapter\", {\n        /**\n         * @see {@link MDCMenuAdapter} for typing information on parameters and return types.\n         */\n        get: function () {\n            // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n            return {\n                addClassToElementAtIndex: function () { return undefined; },\n                removeClassFromElementAtIndex: function () { return undefined; },\n                addAttributeToElementAtIndex: function () { return undefined; },\n                removeAttributeFromElementAtIndex: function () { return undefined; },\n                getAttributeFromElementAtIndex: function () { return null; },\n                elementContainsClass: function () { return false; },\n                closeSurface: function () { return undefined; },\n                getElementIndex: function () { return -1; },\n                notifySelected: function () { return undefined; },\n                getMenuItemCount: function () { return 0; },\n                focusItemAtIndex: function () { return undefined; },\n                focusListRoot: function () { return undefined; },\n                getSelectedSiblingOfItemAtIndex: function () { return -1; },\n                isSelectableItemAtIndex: function () { return false; },\n            };\n            // tslint:enable:object-literal-sort-keys\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MDCMenuFoundation.prototype.destroy = function () {\n        if (this.closeAnimationEndTimerId) {\n            clearTimeout(this.closeAnimationEndTimerId);\n        }\n        this.adapter.closeSurface();\n    };\n    MDCMenuFoundation.prototype.handleKeydown = function (evt) {\n        var key = evt.key, keyCode = evt.keyCode;\n        var isTab = key === 'Tab' || keyCode === 9;\n        if (isTab) {\n            this.adapter.closeSurface(/** skipRestoreFocus */ true);\n        }\n    };\n    MDCMenuFoundation.prototype.handleItemAction = function (listItem) {\n        var _this = this;\n        var index = this.adapter.getElementIndex(listItem);\n        if (index < 0) {\n            return;\n        }\n        this.adapter.notifySelected({ index: index });\n        var skipRestoreFocus = this.adapter.getAttributeFromElementAtIndex(index, strings.SKIP_RESTORE_FOCUS) === 'true';\n        this.adapter.closeSurface(skipRestoreFocus);\n        // Wait for the menu to close before adding/removing classes that affect styles.\n        this.closeAnimationEndTimerId = setTimeout(function () {\n            // Recompute the index in case the menu contents have changed.\n            var recomputedIndex = _this.adapter.getElementIndex(listItem);\n            if (recomputedIndex >= 0 &&\n                _this.adapter.isSelectableItemAtIndex(recomputedIndex)) {\n                _this.setSelectedIndex(recomputedIndex);\n            }\n        }, MDCMenuSurfaceFoundation.numbers.TRANSITION_CLOSE_DURATION);\n    };\n    MDCMenuFoundation.prototype.handleMenuSurfaceOpened = function () {\n        switch (this.defaultFocusState) {\n            case DefaultFocusState.FIRST_ITEM:\n                this.adapter.focusItemAtIndex(0);\n                break;\n            case DefaultFocusState.LAST_ITEM:\n                this.adapter.focusItemAtIndex(this.adapter.getMenuItemCount() - 1);\n                break;\n            case DefaultFocusState.NONE:\n                // Do nothing.\n                break;\n            default:\n                this.adapter.focusListRoot();\n                break;\n        }\n    };\n    /**\n     * Sets default focus state where the menu should focus every time when menu\n     * is opened. Focuses the list root (`DefaultFocusState.LIST_ROOT`) element by\n     * default.\n     */\n    MDCMenuFoundation.prototype.setDefaultFocusState = function (focusState) {\n        this.defaultFocusState = focusState;\n    };\n    /** @return Index of the currently selected list item within the menu. */\n    MDCMenuFoundation.prototype.getSelectedIndex = function () {\n        return this.selectedIndex;\n    };\n    /**\n     * Selects the list item at `index` within the menu.\n     * @param index Index of list item within the menu.\n     */\n    MDCMenuFoundation.prototype.setSelectedIndex = function (index) {\n        this.validatedIndex(index);\n        if (!this.adapter.isSelectableItemAtIndex(index)) {\n            throw new Error('MDCMenuFoundation: No selection group at specified index.');\n        }\n        var prevSelectedIndex = this.adapter.getSelectedSiblingOfItemAtIndex(index);\n        if (prevSelectedIndex >= 0) {\n            this.adapter.removeAttributeFromElementAtIndex(prevSelectedIndex, strings.ARIA_CHECKED_ATTR);\n            this.adapter.removeClassFromElementAtIndex(prevSelectedIndex, cssClasses.MENU_SELECTED_LIST_ITEM);\n        }\n        this.adapter.addClassToElementAtIndex(index, cssClasses.MENU_SELECTED_LIST_ITEM);\n        this.adapter.addAttributeToElementAtIndex(index, strings.ARIA_CHECKED_ATTR, 'true');\n        this.selectedIndex = index;\n    };\n    /**\n     * Sets the enabled state to isEnabled for the menu item at the given index.\n     * @param index Index of the menu item\n     * @param isEnabled The desired enabled state of the menu item.\n     */\n    MDCMenuFoundation.prototype.setEnabled = function (index, isEnabled) {\n        this.validatedIndex(index);\n        if (isEnabled) {\n            this.adapter.removeClassFromElementAtIndex(index, listCssClasses.LIST_ITEM_DISABLED_CLASS);\n            this.adapter.addAttributeToElementAtIndex(index, strings.ARIA_DISABLED_ATTR, 'false');\n        }\n        else {\n            this.adapter.addClassToElementAtIndex(index, listCssClasses.LIST_ITEM_DISABLED_CLASS);\n            this.adapter.addAttributeToElementAtIndex(index, strings.ARIA_DISABLED_ATTR, 'true');\n        }\n    };\n    MDCMenuFoundation.prototype.validatedIndex = function (index) {\n        var menuSize = this.adapter.getMenuItemCount();\n        var isIndexInRange = index >= 0 && index < menuSize;\n        if (!isIndexInRange) {\n            throw new Error('MDCMenuFoundation: No list item at specified index.');\n        }\n    };\n    return MDCMenuFoundation;\n}(MDCFoundation));\nexport { MDCMenuFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCMenuFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __extends } from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { closest } from '@material/dom/ponyfill';\nimport { MDCList } from '@material/list/component';\nimport { numbers as listConstants } from '@material/list/constants';\nimport { MDCListFoundation } from '@material/list/foundation';\nimport { MDCMenuSurface } from '@material/menu-surface/component';\nimport { MDCMenuSurfaceFoundation } from '@material/menu-surface/foundation';\nimport { cssClasses, strings } from './constants';\nimport { MDCMenuFoundation } from './foundation';\nvar MDCMenu = /** @class */ (function (_super) {\n    __extends(MDCMenu, _super);\n    function MDCMenu() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MDCMenu.attachTo = function (root) {\n        return new MDCMenu(root);\n    };\n    MDCMenu.prototype.initialize = function (menuSurfaceFactory, listFactory) {\n        if (menuSurfaceFactory === void 0) { menuSurfaceFactory = function (el) { return new MDCMenuSurface(el); }; }\n        if (listFactory === void 0) { listFactory = function (el) { return new MDCList(el); }; }\n        this.menuSurfaceFactory = menuSurfaceFactory;\n        this.listFactory = listFactory;\n    };\n    MDCMenu.prototype.initialSyncWithDOM = function () {\n        var _this = this;\n        this.menuSurface = this.menuSurfaceFactory(this.root);\n        var list = this.root.querySelector(strings.LIST_SELECTOR);\n        if (list) {\n            this.list = this.listFactory(list);\n            this.list.wrapFocus = true;\n        }\n        else {\n            this.list = null;\n        }\n        this.handleKeydown = function (evt) {\n            _this.foundation.handleKeydown(evt);\n        };\n        this.handleItemAction = function (evt) {\n            _this.foundation.handleItemAction(_this.items[evt.detail.index]);\n        };\n        this.handleMenuSurfaceOpened = function () {\n            _this.foundation.handleMenuSurfaceOpened();\n        };\n        this.menuSurface.listen(MDCMenuSurfaceFoundation.strings.OPENED_EVENT, this.handleMenuSurfaceOpened);\n        this.listen('keydown', this.handleKeydown);\n        this.listen(MDCListFoundation.strings.ACTION_EVENT, this.handleItemAction);\n    };\n    MDCMenu.prototype.destroy = function () {\n        if (this.list) {\n            this.list.destroy();\n        }\n        this.menuSurface.destroy();\n        this.menuSurface.unlisten(MDCMenuSurfaceFoundation.strings.OPENED_EVENT, this.handleMenuSurfaceOpened);\n        this.unlisten('keydown', this.handleKeydown);\n        this.unlisten(MDCListFoundation.strings.ACTION_EVENT, this.handleItemAction);\n        _super.prototype.destroy.call(this);\n    };\n    Object.defineProperty(MDCMenu.prototype, \"open\", {\n        get: function () {\n            return this.menuSurface.isOpen();\n        },\n        set: function (value) {\n            if (value) {\n                this.menuSurface.open();\n            }\n            else {\n                this.menuSurface.close();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenu.prototype, \"wrapFocus\", {\n        get: function () {\n            return this.list ? this.list.wrapFocus : false;\n        },\n        set: function (value) {\n            if (this.list) {\n                this.list.wrapFocus = value;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenu.prototype, \"hasTypeahead\", {\n        /**\n         * Sets whether the menu has typeahead functionality.\n         * @param value Whether typeahead is enabled.\n         */\n        set: function (value) {\n            if (this.list) {\n                this.list.hasTypeahead = value;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenu.prototype, \"typeaheadInProgress\", {\n        /**\n         * @return Whether typeahead logic is currently matching some user prefix.\n         */\n        get: function () {\n            return this.list ? this.list.typeaheadInProgress : false;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Given the next desired character from the user, adds it to the typeahead\n     * buffer. Then, attempts to find the next option matching the buffer. Wraps\n     * around if at the end of options.\n     *\n     * @param nextChar The next character to add to the prefix buffer.\n     * @param startingIndex The index from which to start matching. Only relevant\n     *     when starting a new match sequence. To start a new match sequence,\n     *     clear the buffer using `clearTypeaheadBuffer`, or wait for the buffer\n     *     to clear after a set interval defined in list foundation. Defaults to\n     *     the currently focused index.\n     * @return The index of the matched item, or -1 if no match.\n     */\n    MDCMenu.prototype.typeaheadMatchItem = function (nextChar, startingIndex) {\n        if (this.list) {\n            return this.list.typeaheadMatchItem(nextChar, startingIndex);\n        }\n        return -1;\n    };\n    /**\n     * Layout the underlying list element in the case of any dynamic updates\n     * to its structure.\n     */\n    MDCMenu.prototype.layout = function () {\n        if (this.list) {\n            this.list.layout();\n        }\n    };\n    Object.defineProperty(MDCMenu.prototype, \"items\", {\n        /**\n         * Return the items within the menu. Note that this only contains the set of elements within\n         * the items container that are proper list items, and not supplemental / presentational DOM\n         * elements.\n         */\n        get: function () {\n            return this.list ? this.list.listElements : [];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenu.prototype, \"singleSelection\", {\n        /**\n         * Turns on/off the underlying list's single selection mode. Used mainly\n         * by select menu.\n         *\n         * @param singleSelection Whether to enable single selection mode.\n         */\n        set: function (singleSelection) {\n            if (this.list) {\n                this.list.singleSelection = singleSelection;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenu.prototype, \"selectedIndex\", {\n        /**\n         * Retrieves the selected index. Only applicable to select menus.\n         * @return The selected index, which is a number for single selection and\n         *     radio lists, and an array of numbers for checkbox lists.\n         */\n        get: function () {\n            return this.list ? this.list.selectedIndex : listConstants.UNSET_INDEX;\n        },\n        /**\n         * Sets the selected index of the list. Only applicable to select menus.\n         * @param index The selected index, which is a number for single selection and\n         *     radio lists, and an array of numbers for checkbox lists.\n         */\n        set: function (index) {\n            if (this.list) {\n                this.list.selectedIndex = index;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenu.prototype, \"quickOpen\", {\n        set: function (quickOpen) {\n            this.menuSurface.quickOpen = quickOpen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Sets default focus state where the menu should focus every time when menu\n     * is opened. Focuses the list root (`DefaultFocusState.LIST_ROOT`) element by\n     * default.\n     * @param focusState Default focus state.\n     */\n    MDCMenu.prototype.setDefaultFocusState = function (focusState) {\n        this.foundation.setDefaultFocusState(focusState);\n    };\n    /**\n     * @param corner Default anchor corner alignment of top-left menu corner.\n     */\n    MDCMenu.prototype.setAnchorCorner = function (corner) {\n        this.menuSurface.setAnchorCorner(corner);\n    };\n    MDCMenu.prototype.setAnchorMargin = function (margin) {\n        this.menuSurface.setAnchorMargin(margin);\n    };\n    /**\n     * Sets the list item as the selected row at the specified index.\n     * @param index Index of list item within menu.\n     */\n    MDCMenu.prototype.setSelectedIndex = function (index) {\n        this.foundation.setSelectedIndex(index);\n    };\n    /**\n     * Sets the enabled state to isEnabled for the menu item at the given index.\n     * @param index Index of the menu item\n     * @param isEnabled The desired enabled state of the menu item.\n     */\n    MDCMenu.prototype.setEnabled = function (index, isEnabled) {\n        this.foundation.setEnabled(index, isEnabled);\n    };\n    /**\n     * @return The item within the menu at the index specified.\n     */\n    MDCMenu.prototype.getOptionByIndex = function (index) {\n        var items = this.items;\n        if (index < items.length) {\n            return this.items[index];\n        }\n        else {\n            return null;\n        }\n    };\n    /**\n     * @param index A menu item's index.\n     * @return The primary text within the menu at the index specified.\n     */\n    MDCMenu.prototype.getPrimaryTextAtIndex = function (index) {\n        var item = this.getOptionByIndex(index);\n        if (item && this.list) {\n            return this.list.getPrimaryText(item) || '';\n        }\n        return '';\n    };\n    MDCMenu.prototype.setFixedPosition = function (isFixed) {\n        this.menuSurface.setFixedPosition(isFixed);\n    };\n    MDCMenu.prototype.setIsHoisted = function (isHoisted) {\n        this.menuSurface.setIsHoisted(isHoisted);\n    };\n    MDCMenu.prototype.setAbsolutePosition = function (x, y) {\n        this.menuSurface.setAbsolutePosition(x, y);\n    };\n    /**\n     * Sets the element that the menu-surface is anchored to.\n     */\n    MDCMenu.prototype.setAnchorElement = function (element) {\n        this.menuSurface.anchorElement = element;\n    };\n    MDCMenu.prototype.getDefaultFoundation = function () {\n        var _this = this;\n        // DO NOT INLINE this variable. For backward compatibility, foundations take a Partial<MDCFooAdapter>.\n        // To ensure we don't accidentally omit any methods, we need a separate, strongly typed adapter variable.\n        // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n        var adapter = {\n            addClassToElementAtIndex: function (index, className) {\n                var list = _this.items;\n                list[index].classList.add(className);\n            },\n            removeClassFromElementAtIndex: function (index, className) {\n                var list = _this.items;\n                list[index].classList.remove(className);\n            },\n            addAttributeToElementAtIndex: function (index, attr, value) {\n                var list = _this.items;\n                list[index].setAttribute(attr, value);\n            },\n            removeAttributeFromElementAtIndex: function (index, attr) {\n                var list = _this.items;\n                list[index].removeAttribute(attr);\n            },\n            getAttributeFromElementAtIndex: function (index, attr) {\n                var list = _this.items;\n                return list[index].getAttribute(attr);\n            },\n            elementContainsClass: function (element, className) {\n                return element.classList.contains(className);\n            },\n            closeSurface: function (skipRestoreFocus) {\n                _this.menuSurface.close(skipRestoreFocus);\n            },\n            getElementIndex: function (element) { return _this.items.indexOf(element); },\n            notifySelected: function (evtData) {\n                _this.emit(strings.SELECTED_EVENT, {\n                    index: evtData.index,\n                    item: _this.items[evtData.index],\n                });\n            },\n            getMenuItemCount: function () { return _this.items.length; },\n            focusItemAtIndex: function (index) {\n                _this.items[index].focus();\n            },\n            focusListRoot: function () {\n                _this.root.querySelector(strings.LIST_SELECTOR).focus();\n            },\n            isSelectableItemAtIndex: function (index) {\n                return !!closest(_this.items[index], \".\" + cssClasses.MENU_SELECTION_GROUP);\n            },\n            getSelectedSiblingOfItemAtIndex: function (index) {\n                var selectionGroupEl = closest(_this.items[index], \".\" + cssClasses.MENU_SELECTION_GROUP);\n                var selectedItemEl = selectionGroupEl.querySelector(\".\" + cssClasses.MENU_SELECTED_LIST_ITEM);\n                return selectedItemEl ? _this.items.indexOf(selectedItemEl) : -1;\n            },\n        };\n        // tslint:enable:object-literal-sort-keys\n        return new MDCMenuFoundation(adapter);\n    };\n    return MDCMenu;\n}(MDCComponent));\nexport { MDCMenu };\n//# sourceMappingURL=component.js.map","import { ListSeparator, MenuItem } from '@limetech/lime-elements';\nimport { h } from '@stencil/core';\nimport { MenuListRendererConfig } from './menu-list-renderer-config';\n\nexport class MenuListRenderer {\n    private defaultConfig: MenuListRendererConfig = {\n        isOpen: true,\n        badgeIcons: false,\n    };\n\n    private config: MenuListRendererConfig;\n\n    private hasIcons: boolean;\n    private twoLines: boolean;\n    private avatarList: boolean;\n    private commandKey: boolean;\n\n    private applyTabIndexToItemAtIndex: number;\n\n    public render(\n        items: Array<MenuItem | ListSeparator>,\n        config: MenuListRendererConfig = {}\n    ) {\n        items = items || [];\n        this.config = { ...this.defaultConfig, ...config };\n\n        this.twoLines = items.some((item) => {\n            return 'secondaryText' in item && !!item.secondaryText;\n        });\n\n        this.commandKey = items.some((item) => {\n            return 'commandText' in item && !!item.commandText;\n        });\n\n        this.hasIcons = items.some((item) => {\n            return 'icon' in item && !!item.icon;\n        });\n\n        this.avatarList = this.config.badgeIcons && this.hasIcons;\n\n        this.applyTabIndexToItemAtIndex =\n            this.getIndexForWhichToApplyTabIndex(items);\n\n        const classNames = {\n            'mdc-deprecated-list': true,\n            'mdc-deprecated-list--two-line': this.twoLines,\n            selectable: true,\n            'mdc-deprecated-list--avatar-list': this.avatarList,\n            'list--compact':\n                this.twoLines &&\n                this.commandKey &&\n                ['small', 'x-small'].includes(this.config.iconSize),\n        };\n\n        return (\n            <ul\n                class={classNames}\n                aria-hidden={true}\n                role=\"menu\"\n                aria-orientation=\"vertical\"\n                style={{ '--maxLinesSecondaryText': '2' }}\n            >\n                {items.map(this.renderMenuItem)}\n            </ul>\n        );\n    }\n\n    /**\n     * Determine which MenuItem should have the `tab-index` attribute set,\n     * and return the index at which that MenuItem is located in `items`.\n     * Returns `undefined` if no item should have the attribute set.\n     * See https://github.com/material-components/material-components-web/tree/e66a43a75fef4f9179e24856649518e15e279a04/packages/mdc-list#accessibility\n     * @param {Array<MenuItem | ListSeparator>} items the items of the list, including any `ListSeparator`:s\n     * @returns {number} the index as per the description\n     */\n    private getIndexForWhichToApplyTabIndex = (\n        items: Array<MenuItem | ListSeparator>\n    ) => {\n        let result;\n        for (let i = 0, max = items.length; i < max; i += 1) {\n            if ('separator' in items[i]) {\n                // Ignore ListSeparator\n            } else {\n                const item = items[i] as MenuItem<any>;\n                if (item.selected) {\n                    result = i;\n                    break;\n                }\n\n                if (result === undefined && !item.disabled) {\n                    result = i;\n                    // Do NOT break, as any later item with\n                    // `selected=true` should get the tab-index instead!\n                }\n            }\n        }\n\n        return result;\n    };\n\n    /**\n     * Render a single list item\n     * @param {MenuItem | ListSeparator} item the item to render\n     * @param {number} index the index the item had in the `items` array\n     * @returns {HTMLElement} the list item\n     */\n    private renderMenuItem = (\n        item: MenuItem | ListSeparator,\n        index: number\n    ) => {\n        if ('separator' in item) {\n            return <li class=\"mdc-deprecated-list-divider\" role=\"separator\" />;\n        }\n\n        const classNames = {\n            'mdc-deprecated-list-item': true,\n            'mdc-deprecated-list-item--disabled': item.disabled,\n            'mdc-deprecated-list-item--selected': item.selected,\n        };\n\n        const attributes: { tabindex?: string } = {};\n        if (index === this.applyTabIndexToItemAtIndex) {\n            attributes.tabindex = '0';\n        }\n\n        return (\n            <li\n                class={classNames}\n                role=\"menuitem\"\n                aria-disabled={item.disabled ? 'true' : 'false'}\n                aria-selected={item.selected ? 'true' : 'false'}\n                data-index={index}\n                {...attributes}\n            >\n                {item.icon ? this.renderIcon(this.config, item) : null}\n                {this.renderText(item)}\n                {this.renderSubMenuIcon(item)}\n                {this.renderNotification(item)}\n                {this.twoLines && this.avatarList ? this.renderDivider() : null}\n            </li>\n        );\n    };\n\n    /**\n     * Render the text of the list item\n     * @param {MenuItem} item the list item\n     * @returns {HTMLElement | string} the text for the list item\n     */\n    private renderText = (item: MenuItem) => {\n        if (this.isSimpleItem(item)) {\n            return (\n                <span class=\"mdc-deprecated-list-item__text\">{item.text}</span>\n            );\n        }\n\n        return (\n            <div class=\"mdc-deprecated-list-item__text\">\n                <div class=\"mdc-deprecated-list-item__primary-command-text\">\n                    <div class=\"mdc-deprecated-list-item__primary-text\">\n                        {item.text}\n                    </div>\n                    {this.renderCommandText(item)}\n                </div>\n                <div class=\"mdc-deprecated-list-item__secondary-text\">\n                    {item.secondaryText}\n                </div>\n            </div>\n        );\n    };\n\n    private renderSubMenuIcon = (item: MenuItem) => {\n        if (!this.hasSubItems(item)) {\n            return;\n        }\n\n        return (\n            <div class=\"sub-menu-icon\">\n                <limel-icon size=\"x-small\" name=\"angle_right\" />\n            </div>\n        );\n    };\n\n    private renderCommandText = (item: MenuItem) => {\n        if (!('commandText' in item)) {\n            return;\n        }\n\n        return (\n            <div class=\"mdc-deprecated-list-item__command-text\">\n                {item.commandText}\n            </div>\n        );\n    };\n\n    private isSimpleItem = (item: MenuItem): boolean => {\n        if ('commandText' in item) {\n            return false;\n        }\n\n        return !('secondaryText' in item);\n    };\n\n    /**\n     * Render an icon for a list item\n     * @param {MenuListRendererConfig} config the config object, passed on from the `renderMenuItem` function\n     * @param {MenuItem} item the list item\n     * @returns {HTMLElement} the icon element\n     */\n    private renderIcon = (config: MenuListRendererConfig, item: MenuItem) => {\n        const style: any = {};\n        if (item.iconColor) {\n            if (config.badgeIcons) {\n                style['--icon-background-color'] = item.iconColor;\n            } else {\n                style.color = item.iconColor;\n            }\n        }\n\n        return (\n            <limel-icon\n                badge={config.badgeIcons}\n                class=\"mdc-deprecated-list-item__graphic\"\n                name={item.icon}\n                style={style}\n                size={config.iconSize}\n            />\n        );\n    };\n\n    private renderNotification = (item: MenuItem) => {\n        if (item.badge !== undefined) {\n            return <limel-badge label={item.badge} />;\n        }\n    };\n\n    private renderDivider = () => {\n        const classes = {\n            'mdc-deprecated-list-divider': true,\n            'mdc-deprecated-list-divider--inset': true,\n        };\n        if (this.config.iconSize) {\n            classes[this.config.iconSize] = true;\n        }\n\n        return <hr class={classes} />;\n    };\n\n    private hasSubItems = (item: MenuItem): boolean => {\n        return (\n            !item.isLeafNode &&\n            (this.config.lazyLoadItems || item.subItems?.length)\n        );\n    };\n}\n","@use '../../style/functions';\n\n@import '../list/list';\n\n:host(limel-menu-list) {\n    display: block;\n    --badge-background-color: var(\n        --notification-badge-background-color,\n        rgb(var(--color-red-default))\n    );\n    --badge-text-color: var(\n        --notification-badge-text-color,\n        rgb(var(--color-white))\n    );\n}\n\n.mdc-menu {\n    max-height: 70vh; // force tall menus render inside the viewport when menu is at the bottom of the screen\n}\n\n.mdc-deprecated-list {\n    margin: functions.pxToRem(4);\n    // added space to visualize keyboard-focused items\n    .mdc-deprecated-list-item[role='menuitem'] {\n        font-size: functions.pxToRem(13);\n\n        .mdc-deprecated-list-item__graphic {\n            margin-right: functions.pxToRem(14);\n        }\n    }\n\n    hr.mdc-deprecated-list-divider {\n        &.mdc-deprecated-list-divider--inset {\n            display: none;\n        }\n    }\n}\n\nlimel-badge {\n    transform: translateX(0.75rem);\n}\n\n.sub-menu-icon {\n    display: flex;\n    align-items: center;\n    align-self: center;\n}\n","import {\n    IconSize,\n    MenuItem,\n    ListSeparator,\n    MenuListType,\n} from '@limetech/lime-elements';\nimport { MDCList, MDCListActionEvent } from '@material/list';\nimport { MDCMenu, MDCMenuItemEvent } from '@material/menu';\nimport { MDCRipple } from '@material/ripple';\nimport { strings as listStrings } from '@material/list/constants';\nimport { strings as menuStrings } from '@material/menu/constants';\nimport {\n    Component,\n    Element,\n    Event,\n    EventEmitter,\n    h,\n    Prop,\n    Watch,\n} from '@stencil/core';\nimport { MenuListRenderer } from './menu-list-renderer';\nimport { MenuListRendererConfig } from './menu-list-renderer-config';\n\nconst { ACTION_EVENT } = listStrings;\nconst { SELECTED_EVENT } = menuStrings;\n\n/**\n * @private\n */\n@Component({\n    tag: 'limel-menu-list',\n    shadow: true,\n    styleUrl: 'menu-list.scss',\n})\nexport class MenuList {\n    /**\n     * List of items to display\n     */\n    @Prop()\n    public items: Array<MenuItem | ListSeparator>;\n\n    /**\n     * Set to `true` if the list should display larger icons with a background\n     */\n    @Prop()\n    public badgeIcons: boolean;\n\n    /**\n     * Size of the icons in the list\n     */\n    @Prop()\n    public iconSize: IconSize = 'small';\n\n    /**\n     * The type of the menu, omit to get a regular vertical menu.\n     * Available types are:\n     * `menu`: regular vertical menu.\n     */\n    @Prop()\n    public type: MenuListType;\n\n    @Prop()\n    public lazyLoadItems: boolean;\n\n    /**\n     * By default, lists will display 3 lines of text, and then truncate the rest.\n     * Consumers can increase or decrease this number by specifying\n     * `maxLinesSecondaryText`. If consumer enters zero or negative\n     * numbers we default to 1; and if they type decimals we round up.\n     */\n    // eslint-disable-next-line no-magic-numbers\n    @Prop() maxLinesSecondaryText: number = 3;\n\n    @Element()\n    private element: HTMLLimelMenuListElement;\n\n    private config: MenuListRendererConfig;\n    private MenuListRenderer = new MenuListRenderer();\n    private mdcList: MDCList;\n    private mdcMenu: MDCMenu;\n\n    /**\n     * Fired when a new value has been selected from the list.\n     */\n    @Event()\n    private select: EventEmitter<MenuItem>;\n\n    public connectedCallback() {\n        this.setup();\n    }\n\n    public disconnectedCallback() {\n        this.teardown();\n    }\n\n    public componentDidLoad() {\n        this.setup();\n    }\n\n    public render() {\n        this.config = {\n            badgeIcons: this.badgeIcons,\n            type: this.type,\n            iconSize: this.iconSize,\n            lazyLoadItems: this.lazyLoadItems,\n        };\n\n        const html = this.MenuListRenderer.render(this.items, this.config);\n\n        return <div class=\"mdc-menu mdc-menu-surface\">{html}</div>;\n    }\n\n    @Watch('type')\n    protected handleType() {\n        this.setupListeners();\n    }\n\n    @Watch('items')\n    protected itemsChanged() {\n        if (!this.mdcList) {\n            return;\n        }\n\n        const MenuItems = this.items.filter(this.isMenuItem);\n\n        this.mdcList.selectedIndex = MenuItems.findIndex(\n            (item: MenuItem) => item.selected\n        );\n    }\n\n    private setup = () => {\n        this.setupMenu();\n        this.setupListeners();\n    };\n\n    private setupMenu = () => {\n        const element = this.element.shadowRoot.querySelector('.mdc-menu');\n        if (!element) {\n            return;\n        }\n\n        this.mdcMenu = new MDCMenu(element);\n        this.mdcMenu.hasTypeahead = true;\n        this.mdcMenu.wrapFocus = true;\n        this.mdcMenu.items.forEach((item) => new MDCRipple(item));\n    };\n\n    private setupListeners = () => {\n        if (!this.mdcMenu) {\n            return;\n        }\n\n        this.mdcMenu.unlisten(SELECTED_EVENT, this.handleMenuSelect);\n        this.mdcMenu.listen(SELECTED_EVENT, this.handleMenuSelect);\n    };\n\n    private teardown = () => {\n        this.mdcList?.unlisten(ACTION_EVENT, this.handleAction);\n        this.mdcList?.destroy();\n\n        this.mdcMenu?.unlisten(SELECTED_EVENT, this.handleMenuSelect);\n        this.mdcMenu?.destroy();\n    };\n\n    private handleAction = (event: MDCListActionEvent) => {\n        this.handleSingleSelect(event.detail.index);\n    };\n\n    private handleMenuSelect = (event: MDCMenuItemEvent) => {\n        this.handleSingleSelect(event.detail.index);\n    };\n\n    private handleSingleSelect = (index: number) => {\n        const MenuItems = this.items.filter(this.isMenuItem) as MenuItem[];\n        if (MenuItems[index].disabled) {\n            return;\n        }\n\n        const selectedItem: MenuItem = MenuItems.find((item: MenuItem) => {\n            return !!item.selected;\n        });\n\n        if (selectedItem) {\n            this.select.emit({ ...selectedItem, selected: false });\n        }\n\n        if (MenuItems[index] !== selectedItem) {\n            this.select.emit({ ...MenuItems[index], selected: false });\n        }\n    };\n\n    private isMenuItem = (item: MenuItem): boolean => {\n        return !('separator' in item);\n    };\n}\n"],"mappings":"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"}