{"version":3,"names":["chipCss","Chip","this","chipId","crypto","randomUUID","renderAsButton","h","id","class","role","disabled","readonly","onKeyDown","handleDeleteKeyDown","renderIcon","renderLabel","renderBadge","renderRemoveButton","renderAsLink","href","link","title","target","tabindex","text","filterClickWhenDisabled","e","preventDefault","handleRemoveClick","event","stopPropagation","remove","emit","removable","keys","DELETE","BACKSPACE","keycodes","DELETE_KEY_CODE","BACKSPACE_KEY_CODE","includes","key","keyCode","removeChipLabel","translate","get","language","componentWillLoad","makeEnterClickable","host","disconnectedCallback","removeEnterClickable","render","Host","onClick","icon","getIconName","badge","name","style","color","_a","_b","backgroundColor","label","svgData","tabIndex","innerHTML","handleKeyboardEvent","textValue","length","value","isLeft","ARROW_LEFT","ARROW_LEFT_KEY_CODE","isRight","ARROW_RIGHT","ARROW_RIGHT_KEY_CODE","isEnter","ENTER","ENTER_KEY_CODE","isDelete","isBackspace","isEscape","ESCAPE","ESCAPE_KEY_CODE","handleLeft","handleRight","handleEnter","handleDelete","handleBackspace","handleEscape","inputChipIndexSelected","emitInteraction","removeChip","repeat","chipSetCss","INPUT_FIELD_TABINDEX","ChipSet","constructor","hostRef","handleKeyDown","getValue","map","chip","Object","assign","type","selected","selectedChipIds","renderEmptyValueForReadonly","floatLabelAbove","editMode","dropZoneTip","hasHelperText","helperText","undefined","renderHelperLine","maxItems","maxLength","invalid","isInvalid","catchInputChipClicks","isSelectableChip","updateSelectedChipIds","change","newValue","filter","clearAllChipsLabel","renderChip","bind","renderInputChip","isFull","handleTextFieldFocus","handleInputBlur","handleTextInput","inputFieldOnChange","inputHidden","handleDeleteAllIconClick","renderDelimiter","connectedCallback","initialize","async","emptyInput","shadowRoot","querySelector","focus","startEdit","syncEmptyInput","componentDidLoad","triggerIconColorWarning","mdcTextField","MDCTextField","componentDidUpdate","input","destroy","renderInputChips","classes","chipSetLabel","renderChipSetLabel","handleChangeChips","oldValue","isEqual","leadingIcon","clearAllButton","inputType","hidden","onBlur","onFocus","onInput","onChange","placeholder","searchLabel","required","renderLeadingIcon","renderClearAllChipsButton","labelClassList","htmlFor","blurred","emptyInputOnBlur","setTimeout","stopEdit","trim","interact","chipType","chipProps","getChipProps","index","onRemove","getHref","getTarget","updateChoiceTypeSelectedIds","updateFilterTypeSelectedIds","isChipSelected","find","removeChipIdFromSelectedChipIds","addChipIdToSelectedChipIds","delimiter","iconFillColor","iconBackgroundColor","iconTitle","console","warn"],"sources":["./src/components/chip/chip.scss?tag=limel-chip&encapsulation=shadow","./src/components/chip/chip.tsx","./src/components/chip-set/chip-set-input-helpers.ts","./src/components/chip-set/chip-set.scss?tag=limel-chip-set&encapsulation=shadow","./src/components/chip-set/chip-set.tsx"],"sourcesContent":["@use '../../style/mixins';\n\n/**\n* @prop --chip-max-width: Maximum width of the chip. Defaults to `10rem`. Keep in mind that the chips should not appear too big.\n*/\n\n:host(limel-chip) {\n    --limel-chip-height: 1.75rem;\n    --limel-chip-gap: 0.5rem;\n    isolation: isolate;\n    display: inline-flex;\n    align-items: center;\n}\n\n* {\n    box-sizing: border-box;\n}\n\n.chip {\n    all: unset;\n    position: relative;\n\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 0.25rem;\n\n    max-width: var(--chip-max-width, 10rem);\n    height: var(--limel-chip-height);\n\n    border-radius: var(--limel-chip-height);\n    font-size: 0.875rem;\n    padding: 0 0.125rem;\n\n    &:has(limel-icon) {\n        .text {\n            padding-left: 0.25rem;\n        }\n    }\n\n    &:not([disabled]) {\n        @include mixins.visualize-keyboard-focus;\n        @include mixins.is-elevated-inset-clickable;\n    }\n\n    &:has(limel-badge) {\n        padding-right: 0.375rem;\n\n        .text {\n            padding-right: 0;\n        }\n    }\n\n    &:has(+ .remove-button:hover) {\n        box-shadow: var(--shadow-depth-8-error);\n    }\n\n    &:has(+ .trailing-button) {\n        padding-right: calc(var(--limel-chip-height) + 0.125rem);\n\n        .text {\n            padding-right: 0;\n        }\n    }\n}\n\n:host(limel-chip[disabled]) {\n    .chip {\n        // Similar to `limel-button[disabled]`\n        color: rgba(var(--contrast-1600), 0.37);\n        background-color: rgba(var(--contrast-1600), 0.1);\n        box-shadow: none;\n    }\n}\n\n:host(limel-chip[readonly]) {\n    .chip {\n        box-shadow: 0 0 0 1px rgba(var(--contrast-800), 0.5);\n    }\n}\n\n:host(limel-chip[selected]) {\n    .chip {\n        box-shadow: var(--button-shadow-inset);\n\n        &:focus-visible {\n            box-shadow: var(--button-shadow-inset),\n                var(--shadow-depth-8-focused);\n        }\n\n        &:active {\n            box-shadow: var(--button-shadow-inset-pressed);\n        }\n    }\n    .text {\n        color: var(--mdc-theme-primary);\n    }\n}\n\n:host(limel-chip[type='filter']) {\n    .chip {\n        border-top-left-radius: 0.5rem;\n        border-bottom-left-radius: 0.5rem;\n\n        &:after {\n            content: '';\n            transition:\n                background-color 0.4s ease 0.2s,\n                box-shadow 0.6s ease 0.2s;\n            box-sizing: border-box;\n            position: absolute;\n            bottom: 0.125rem;\n            left: 0.125rem;\n            width: 0.5rem;\n            height: 0.5rem;\n            border-radius: 50%;\n            background-color: rgb(var(--contrast-800), 0.8);\n            box-shadow: 0 0 0 1px rgb(var(--color-white)) inset;\n        }\n    }\n}\n\n:host(limel-chip[type='filter'][selected]) {\n    .chip {\n        &:after {\n            background-color: rgb(var(--color-green-default));\n            box-shadow:\n                0 0 0.375rem 0 rgb(var(--color-green-light)),\n                0 0 0 1px rgb(var(--color-white)) inset;\n        }\n    }\n}\n\nlimel-icon {\n    flex-shrink: 0;\n    width: calc(var(--limel-chip-height) - 0.25rem);\n    height: calc(var(--limel-chip-height) - 0.25rem);\n    padding: 0.0625rem;\n}\n\nlimel-badge {\n    pointer-events: none;\n}\n\n.text {\n    @include mixins.truncate-text;\n    line-height: 1.2;\n    padding: 0 0.5rem;\n}\n\n.trailing-button {\n    all: unset;\n    @include mixins.is-flat-clickable(\n        $color--hovered: rgb(var(--color-red-dark))\n    );\n\n    z-index: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    margin-left: calc(var(--limel-chip-height) * -1 + 0.125rem);\n    margin-right: 0.125rem;\n    width: calc(var(--limel-chip-height) - 0.25rem);\n    height: calc(var(--limel-chip-height) - 0.25rem);\n\n    border-radius: 50%;\n\n    svg {\n        transition:\n            color 0.2s ease,\n            transform 0.2s ease;\n        width: 1.25rem;\n    }\n\n    &:hover {\n        svg {\n            transform: scale(0.8);\n        }\n    }\n}\n","import {\n    Component,\n    Element,\n    Event,\n    EventEmitter,\n    h,\n    Host,\n    Prop,\n} from '@stencil/core';\nimport { Icon, Languages, Link } from '../../interface';\nimport { getIconName } from '../icon/get-icon-props';\nimport {\n    makeEnterClickable,\n    removeEnterClickable,\n} from '../../util/make-enter-clickable';\nimport translate from '../../global/translations';\nimport {\n    BACKSPACE,\n    BACKSPACE_KEY_CODE,\n    DELETE,\n    DELETE_KEY_CODE,\n} from '../../util/keycodes';\nimport { ChipType, Chip as OldChipInterface } from '../chip-set/chip.types';\n\ninterface ChipInterface extends Omit<OldChipInterface, 'id' | 'badge'> {\n    badge?: string | number;\n}\n\n/**\n * Chips and buttons are both interactive elements in UI design,\n * but they serve different purposes and are used in different contexts.\n *\n * :::warning\n * Do not use the chip component carelessly, as an alternative for\n * [`limel-button`](#/component/limel-button/) in the UI design!\n *\n * **Buttons:**\n * Buttons are used to trigger actions. They are typically used to\n * submit forms, open dialogs, initiate a process, or perform any action\n * that changes the state of the application.\n * Buttons' labels usually contain action words, in other words, the labels is\n * a _verb in imperative mood_ such as \"Submit\" or \"Delete\".\n * Buttons are placed in areas where it's clear they will initiate\n * an action when clicked.\n *\n * **Chips:**\n * Chips however are elements which may look like buttons, but they are\n * representing choices, filters, or tags, in a small block\n * or clearly bundled into a group. Chips are rarely used alone in the\n * user interface.\n * They are often used in a so called \"chip-set\", or placed together in\n * a section of the UI, where the user can expect more than one chip to be present.\n *\n * For example, a chip may represent a filter in a filter bar, or a tag in a tag list,\n * or an item in a shopping list.\n * Clicking a chip can also trigger an action, for example toggling a filter ON or OFF,\n * or opening a page with all posts tagged with the tag represented by the chip,\n * or navigating to a page with more information about the item in the shopping list.\n * :::\n *\n * @private\n * @exampleComponent limel-example-chip-button\n * @exampleComponent limel-example-chip-link\n * @exampleComponent limel-example-chip-icon-colors\n * @exampleComponent limel-example-chip-badge\n * @exampleComponent limel-example-chip-filter\n * @exampleComponent limel-example-chip-removable\n * @exampleComponent limel-example-chip-aria-role\n */\n@Component({\n    tag: 'limel-chip',\n    shadow: true,\n    styleUrl: 'chip.scss',\n})\nexport class Chip implements ChipInterface {\n    /**\n     * Defines the language for translations.\n     * Will translate the translatable strings on the components.\n     */\n    @Prop({ reflect: true })\n    public language: Languages = 'en';\n\n    /**\n     * Label displayed on the chip\n     */\n    @Prop({ reflect: true })\n    public text: string;\n\n    /**\n     * Icon of the chip.\n     */\n    @Prop()\n    public icon?: string | Icon;\n\n    /**\n     * If supplied, the chip will become a clickable link.\n     */\n    @Prop()\n    public link?: Omit<Link, 'text'>;\n\n    /**\n     * The value of the badge, displayed on the chip.\n     */\n    @Prop({ reflect: true })\n    public badge?: string | number;\n\n    /**\n     * Set to `true` to disable the chip.\n     */\n    @Prop({ reflect: true })\n    public disabled = false;\n\n    /**\n     * Set to `true` to render the chip as a static UI element.\n     * Useful when the parent component has a `readonly` state.\n     */\n    @Prop({ reflect: true })\n    public readonly = false;\n\n    /**\n     * Set to `true` to visualize the chip in a \"selected\" state.\n     * This is typically used when the chip is used in a chip-set\n     * along with other chips.\n     */\n    @Prop({ reflect: true })\n    public selected = false;\n\n    /**\n     * Set to `true` to render a remove button on the chip.\n     */\n    @Prop({ reflect: true })\n    public removable = false;\n\n    /**\n     * Set to `filter` to render the chip with a distinct style\n     * suitable for visualizing filters.\n     */\n    @Prop({ reflect: true })\n    public type?: ChipType = 'default';\n\n    /**\n     * Fired when clicking on the remove button of a `removable` chip.\n     */\n    @Event()\n    public remove: EventEmitter<void>;\n\n    @Element()\n    private host: HTMLLimelChipElement;\n\n    public componentWillLoad() {\n        makeEnterClickable(this.host);\n    }\n\n    public disconnectedCallback() {\n        removeEnterClickable(this.host);\n    }\n\n    private chipId = 'chip-' + crypto.randomUUID();\n\n    public render() {\n        return (\n            <Host onClick={this.filterClickWhenDisabled}>\n                {this.link ? this.renderAsLink() : this.renderAsButton()}\n            </Host>\n        );\n    }\n\n    private renderAsButton = () => {\n        return [\n            <button\n                id={this.chipId}\n                class=\"chip\"\n                role=\"button\"\n                disabled={this.disabled || this.readonly}\n                onKeyDown={this.handleDeleteKeyDown}\n            >\n                {this.renderIcon()}\n                {this.renderLabel()}\n                {this.renderBadge()}\n            </button>,\n            this.renderRemoveButton(),\n        ];\n    };\n\n    private renderAsLink = () => {\n        return [\n            <a\n                id={this.chipId}\n                class=\"chip\"\n                href={this.link.href}\n                title={this.link.title}\n                target={this.link.target}\n                aria-disabled={this.disabled || this.readonly}\n                tabindex={this.disabled || this.readonly ? -1 : 0}\n                onKeyDown={this.handleDeleteKeyDown}\n            >\n                {this.renderIcon()}\n                {this.renderLabel()}\n                {this.renderBadge()}\n            </a>,\n            this.renderRemoveButton(),\n        ];\n    };\n\n    private renderLabel = () => {\n        return <span class=\"text\">{this.text}</span>;\n    };\n\n    private renderIcon() {\n        const icon = getIconName(this.icon);\n\n        if (!icon) {\n            return;\n        }\n\n        return (\n            <limel-icon\n                badge={true}\n                name={icon}\n                style={{\n                    color: `${(this.icon as Icon)?.color}`,\n                    'background-color': `${\n                        (this.icon as Icon)?.backgroundColor\n                    }`,\n                }}\n            />\n        );\n    }\n\n    private renderBadge() {\n        if (!this.badge) {\n            return;\n        }\n\n        return <limel-badge label={this.badge} />;\n    }\n\n    private renderRemoveButton() {\n        if (!this.removable || this.readonly || this.disabled) {\n            return;\n        }\n\n        const svgData =\n            '<svg viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" d=\"m8 8 16 16M24 8 8 24\"/></svg>';\n\n        return (\n            <button\n                class=\"trailing-button remove-button\"\n                tabIndex={-1}\n                aria-label={this.removeChipLabel}\n                aria-controls={this.chipId}\n                innerHTML={svgData}\n                onClick={this.handleRemoveClick}\n            />\n        );\n    }\n\n    private filterClickWhenDisabled = (e) => {\n        if (this.disabled || this.readonly) {\n            e.preventDefault();\n        }\n    };\n\n    private handleRemoveClick = (event: MouseEvent | KeyboardEvent) => {\n        event.stopPropagation();\n        this.remove.emit();\n    };\n\n    private handleDeleteKeyDown = (event: KeyboardEvent) => {\n        if (!this.removable) {\n            return;\n        }\n\n        const keys = [DELETE, BACKSPACE];\n        const keycodes = [DELETE_KEY_CODE, BACKSPACE_KEY_CODE];\n\n        if (keys.includes(event.key) || keycodes.includes(event.keyCode)) {\n            this.handleRemoveClick(event);\n        }\n    };\n\n    private removeChipLabel = (): string => {\n        return translate.get('chip-set.remove-chip', this.language);\n    };\n}\n","import {\n    ARROW_LEFT,\n    ARROW_LEFT_KEY_CODE,\n    ARROW_RIGHT,\n    ARROW_RIGHT_KEY_CODE,\n    BACKSPACE,\n    BACKSPACE_KEY_CODE,\n    DELETE,\n    DELETE_KEY_CODE,\n    ENTER,\n    ENTER_KEY_CODE,\n    ESCAPE,\n    ESCAPE_KEY_CODE,\n} from '../../util/keycodes';\n\n/**\n * Key handler for the input field.\n * Lets the user select, activate, and remove chips with the keyboard.\n *\n * @param event - event\n\n */\nexport function handleKeyboardEvent(event: KeyboardEvent) {\n    if (this.textValue.length) {\n        // If there is any text in the input field, keyboard input should\n        // navigate the text, not the chips.\n        return;\n    }\n\n    if (!this.value || !this.value.length) {\n        // If there are no chips, there is nothing to select.\n        return;\n    }\n\n    const isLeft =\n        event.key === ARROW_LEFT || event.keyCode === ARROW_LEFT_KEY_CODE;\n    const isRight =\n        event.key === ARROW_RIGHT || event.keyCode === ARROW_RIGHT_KEY_CODE;\n    const isEnter = event.key === ENTER || event.keyCode === ENTER_KEY_CODE;\n    const isDelete = event.key === DELETE || event.keyCode === DELETE_KEY_CODE;\n    const isBackspace =\n        event.key === BACKSPACE || event.keyCode === BACKSPACE_KEY_CODE;\n    const isEscape = event.key === ESCAPE || event.keyCode === ESCAPE_KEY_CODE;\n\n    if (isLeft) {\n        return handleLeft(this, event);\n    }\n\n    if (isRight) {\n        return handleRight(this, event);\n    }\n\n    if (isEnter) {\n        return handleEnter(this, event);\n    }\n\n    if (isDelete) {\n        return handleDelete(this, event);\n    }\n\n    if (isBackspace) {\n        return handleBackspace(this, event);\n    }\n\n    if (isEscape) {\n        return handleEscape(this, event);\n    }\n}\n\nfunction handleLeft(host, event) {\n    event.preventDefault();\n    if (host.inputChipIndexSelected === null) {\n        host.inputChipIndexSelected = host.value.length - 1;\n\n        return;\n    }\n\n    if (host.inputChipIndexSelected <= 0) {\n        return;\n    }\n\n    host.inputChipIndexSelected -= 1;\n}\n\nfunction handleRight(host, event) {\n    event.preventDefault();\n    if (host.inputChipIndexSelected === null) {\n        host.inputChipIndexSelected = 0;\n\n        return;\n    }\n\n    if (host.inputChipIndexSelected >= host.value.length - 1) {\n        return;\n    }\n\n    host.inputChipIndexSelected += 1;\n}\n\nfunction handleEnter(host, event) {\n    if (host.inputChipIndexSelected !== null) {\n        event.preventDefault();\n        host.emitInteraction(host.value[host.inputChipIndexSelected]);\n    }\n}\n\nfunction handleEscape(host, event) {\n    if (host.inputChipIndexSelected !== null) {\n        event.preventDefault();\n        host.inputChipIndexSelected = null;\n    }\n}\n\nfunction handleDelete(host, event) {\n    if (host.inputChipIndexSelected !== null) {\n        event.preventDefault();\n        removeChip(host);\n    }\n}\n\nfunction handleBackspace(host, event) {\n    if (host.inputChipIndexSelected !== null) {\n        event.preventDefault();\n        removeChip(host);\n    } else if (!event.repeat) {\n        host.inputChipIndexSelected = host.value.length - 1;\n    }\n}\n\nfunction removeChip(host) {\n    if (host.inputChipIndexSelected !== null) {\n        host.removeChip(host.value[host.inputChipIndexSelected].id)();\n        host.inputChipIndexSelected = null;\n    }\n}\n","@use '../../style/functions';\n@use '../../style/internal/shared_input-select-picker';\n@use '../../style/mixins';\n\n@use '../../style/internal/lime-theme';\n\n@use '@material/textfield';\n@use '@material/textfield/icon';\n@use '@material/notched-outline/mdc-notched-outline';\n@use '@material/floating-label';\n@use '@material/floating-label/mdc-floating-label';\n\n/**\n * @prop --icon-background-color: Background color of the icon. Defaults to transparent.\n * @prop --icon-color: Color of the icon. Defaults to `rgb(var(--contrast-1100))`.\n * @prop --background-color: Background color of the field when type is set to input.\n * @prop --background-color-disabled: Background color of the field when type is set to input and the component is disabled or readonly.\n * @prop --input-chip-set-selected-chip-color: Color of the highlight around selected chips in input chip-sets.\n */\n\n@include textfield.core-styles;\n@include icon.icon-core-styles;\n\n@include shared_input-select-picker.outlined-style-overrides;\n@include shared_input-select-picker.floating-label-overrides;\n@include shared_input-select-picker.cropped-label-hack;\n@include shared_input-select-picker.disabled-overrides;\n@include shared_input-select-picker.readonly-overrides;\n@include shared_input-select-picker.leading-icon;\n@include shared_input-select-picker.lime-empty-value-for-readonly;\n@include shared_input-select-picker.lime-looks-like-input-value;\n\n$height-of-chip-set-input: functions.pxToRem(36);\n$leading-icon-space: functions.pxToRem(40);\n\n:host(limel-chip-set) {\n    isolation: isolate;\n}\n\n.mdc-chip-set {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    min-height: shared_input-select-picker.$height-of-mdc-text-field;\n    position: relative;\n\n    &.chip-set--with-label {\n        .lime-floating-label--float-above {\n            padding-left: functions.pxToRem(4);\n        }\n    }\n\n    &.mdc-chip-set--input {\n        padding: functions.pxToRem(8);\n\n        width: 100%;\n    }\n\n    &.has-clear-all-button {\n        &.mdc-chip-set--input {\n            padding-right: functions.pxToRem(\n                32\n            ); // This leaves space for \"clear all\" button and avoids overlapping with chips\n        }\n    }\n}\n\n.mdc-text-field {\n    height: auto;\n    cursor: text;\n    flex-wrap: wrap;\n    row-gap: 0.5rem;\n\n    .mdc-text-field__input {\n        @include shared_input-select-picker.input-field-placeholder;\n\n        width: auto;\n        padding: 0 functions.pxToRem(12);\n\n        flex-grow: 1;\n        flex-shrink: 0;\n\n        &.hidden {\n            // This class is added, as soon as there is a chip selected and displayed\n            // This input field should not be visually visible as it breaks the UI in some cases\n            // But it should be rendered to be able to tab between fields and do other keyboard commands /Kia\n            transition: all 0s;\n            opacity: 0;\n            position: absolute;\n            z-index: -100; // to let users interact with chips, in case they're covered\n        }\n        &[type='search'] {\n            -webkit-appearance: textfield; // Removes the default magnifying glass icon on iOS which appears automatically on input fields with type of search\n            background-color: transparent; // overides styles caused by previous line\n\n            &::-webkit-search-cancel-button {\n                display: none; // removes the default X button\n            }\n        }\n    }\n}\n\n// used only in chipsets that do not have input\n.chip-set__label {\n    @include mixins.truncate-text;\n    width: 120%; // `120%` instead of `100%`,\n    // because this class is always together with `mdc-floating-label--float-above`,\n    // which scales the label down. So there is more horizontal space to display the label in.\n    top: functions.pxToRem(13);\n    padding-left: functions.pxToRem(20);\n}\n\n// Because MDC removes some classes in chipset, we add custom\n// classes with similar names and expected behavior & styles.\n// These class names start with `lime-`, instead of `mdc-`.\n.lime-notched-outline--notched {\n    .mdc-notched-outline__notch {\n        border-top: 1px solid transparent !important;\n\n        .lime-floating-label--float-above {\n            // This overrides MDC's original top value which is `top: 50%`.\n            // The reason is that a % value aligns the label in a wrong position\n            // vertically, when there are multiple rows of chips.\n            top: functions.pxToRem(27);\n\n            transform: translateY(-34.75px) scale(0.75);\n            font-size: shared_input-select-picker.$cropped-label-hack--font-size;\n        }\n    }\n}\n\n.force-invalid {\n    @extend .mdc-text-field--invalid;\n}\n\n.clear-all-button {\n    @include mixins.clear-all-button;\n    @include mixins.visualize-keyboard-focus;\n\n    position: absolute;\n    right: functions.pxToRem(8);\n    top: functions.pxToRem(18);\n\n    opacity: 0; // Is hidden, but can receive focus (such as when navigating through tab indexes).\n\n    &:focus,\n    .has-chips:not(.mdc-text-field--disabled):hover &,\n    .has-chips:not(.mdc-text-field--disabled).mdc-text-field--focused & {\n        opacity: 1;\n        outline: none;\n    }\n\n    :not(.has-chips) &,\n    .has-chips.mdc-text-field--disabled & {\n        display: none; // Won't receive focus when disabled\n    }\n}\n\n.has-leading-icon {\n    &:not(.has-chips) {\n        .mdc-text-field__input {\n            padding-left: $leading-icon-space;\n        }\n\n        .mdc-floating-label {\n            &:not(.lime-floating-label--float-above) {\n                left: $leading-icon-space;\n            }\n            &.mdc-floating-label--float-above {\n                left: functions.pxToRem(4);\n            }\n        }\n    }\n\n    limel-chip {\n        &:first-of-type {\n            margin-left: 40px;\n        }\n    }\n\n    .search-icon {\n        transition: transform 0.2s ease;\n        position: absolute;\n        top: functions.pxToRem(16);\n        left: functions.pxToRem(16);\n    }\n\n    limel-icon {\n        background-color: transparent;\n    }\n}\n\n.delimiter {\n    opacity: 0.5;\n    padding: 0 functions.pxToRem(2);\n    color: var(--mdc-theme-on-surface);\n}\n\nlimel-chip {\n    border-radius: 2rem;\n\n    &.can-be-removed {\n        // When chip is selected with keyboard (backspace / arrow-keys) to be deleted\n        box-shadow: var(--shadow-depth-8-error);\n    }\n}\n\n@import './partial-styles/_readonly';\n@import './partial-styles/_file-picker';\n@import './partial-styles/_helper-text';\n","import { Chip, ChipType } from '../chip-set/chip.types';\nimport { Languages } from '../date-picker/date.types';\nimport { MDCTextField } from '@material/textfield';\nimport {\n    Component,\n    Element,\n    Event,\n    EventEmitter,\n    h,\n    Method,\n    Prop,\n    State,\n    Watch,\n} from '@stencil/core';\nimport { handleKeyboardEvent } from './chip-set-input-helpers';\nimport translate from '../../global/translations';\nimport { getHref, getTarget } from '../../util/link-helper';\nimport { isEqual } from 'lodash-es';\n\nconst INPUT_FIELD_TABINDEX = 1;\n\n/**\n * @exampleComponent limel-example-chip-set\n * @exampleComponent limel-example-chip-set-choice\n * @exampleComponent limel-example-chip-set-filter\n * @exampleComponent limel-example-chip-set-filter-badge\n * @exampleComponent limel-example-chip-set-input\n * @exampleComponent limel-example-chip-set-input-type-text\n * @exampleComponent limel-example-chip-set-input-type-search\n * @exampleComponent limel-example-chip-icon-color\n * @exampleComponent limel-example-chip-set-composite\n */\n@Component({\n    tag: 'limel-chip-set',\n    shadow: true,\n    styleUrl: 'chip-set.scss',\n})\nexport class ChipSet {\n    /**\n     * List of chips for the set\n     */\n    @Prop()\n    public value: Chip[] = [];\n\n    /**\n     * Type of chip set\n     *\n     * - `choice` renders a set of selectable chips where only one is selectable. The `removable` property is ignored\n     * - `filter` renders a set of selectable chips where all are selectable.\n     * - `input` renders a set of chips that can be used in conjunction with an input field\n     *\n     * If no type is set, a basic set of chips without additional functionality will be rendered\n     */\n    @Prop({ reflect: true })\n    public type?: 'choice' | 'filter' | 'input';\n\n    /**\n     * Label for the chip-set\n     */\n    @Prop({ reflect: true })\n    public label: string;\n\n    /**\n     * Optional helper text to display below the chipset.\n     * When type is `input`, the helper text is displayed below the\n     * input field when it has focus.\n     * When type is not `input`, the helper text is always displayed\n     * if the device is touch screen; otherwise it is shown when chip-set\n     * is hovered or focused using keyboard navigation.\n     */\n    @Prop({ reflect: true })\n    public helperText: string;\n\n    /**\n     * True if the chip set should be disabled\n     */\n    @Prop({ reflect: true })\n    public disabled: boolean = false;\n\n    /**\n     * For chip-sets of type `input`, set to `true` to disable adding and\n     * removing chips, but allow interaction with existing chips in the set.\n     * For any other types, setting either `readonly` or `disabled` disables\n     * the chip-set.\n     */\n    @Prop({ reflect: true })\n    public readonly: boolean = false;\n\n    /**\n     * Set to `true` to indicate that the current value of the input field is\n     * invalid.\n     */\n    @Prop({ reflect: true })\n    public invalid = false;\n\n    /**\n     * For chip-sets of type `input`. Value to use for the `type` attribute on the\n     * input field inside the chip-set.\n     */\n    @Prop({ reflect: true })\n    public inputType: 'search' | 'text' = 'text';\n\n    /**\n     * For chip-sets of type `input`. Limits the maximum number of chips.\n     * When the value is `0` or not set, no limit is applied.\n     */\n    @Prop({ reflect: true })\n    public maxItems: number;\n\n    /**\n     * True if the control requires a value\n     */\n    @Prop({ reflect: true })\n    public required: boolean = false;\n\n    /**\n     * Search label to display when type is `input` and component is in search mode\n     */\n    @Prop({ reflect: true })\n    public searchLabel: string;\n\n    /**\n     * Whether the input field should be emptied when the chip-set loses focus.\n     */\n    @Prop({ reflect: true })\n    public emptyInputOnBlur: boolean = true;\n\n    /**\n     * Whether the \"Clear all\" buttons should be shown\n     */\n    @Prop()\n    public clearAllButton: boolean = true;\n\n    /**\n     * For chip-sets of type `input`. When the value is null, no leading icon is used.\n     * Leading icon to show to the far left in the text field\n     */\n    @Prop({ reflect: true })\n    public leadingIcon: string = null;\n\n    /**\n     * For chip-set of type `input`. Sets delimiters between chips.\n     */\n    @Prop({ reflect: true })\n    public delimiter: string = null;\n\n    /**\n     * Defines the language for translations.\n     * Will translate the translatable strings on the components. For example, the clear all chips label.\n     */\n    @Prop()\n    public language: Languages = 'en';\n\n    /**\n     * Dispatched when a chip is interacted with\n     */\n    @Event()\n    private interact: EventEmitter<Chip>;\n\n    /**\n     * Dispatched when a chip is selected/deselected\n     */\n    @Event()\n    private change: EventEmitter<Chip | Chip[]>;\n\n    /**\n     * Emitted when an input chip set has received focus and editing in the text field has started\n     */\n    @Event()\n    private startEdit: EventEmitter<void>;\n\n    /**\n     * Emitted when an input chip set has lost focus and editing in the text field has ended\n     */\n    @Event()\n    private stopEdit: EventEmitter<void>;\n\n    /**\n     * Dispatched when the input is changed for type `input`\n     */\n    @Event()\n    private input: EventEmitter<string>;\n\n    @Element()\n    private host: HTMLLimelChipSetElement;\n\n    @State()\n    private editMode: boolean = false;\n\n    @State()\n    private textValue: string = '';\n\n    @State()\n    private blurred: boolean = false;\n\n    @State()\n    private inputChipIndexSelected: number = null;\n\n    @State()\n    private selectedChipIds: Array<string | number>;\n\n    private mdcTextField: MDCTextField;\n    private handleKeyDown = handleKeyboardEvent;\n\n    constructor() {\n        this.renderChip = this.renderChip.bind(this);\n        this.renderInputChip = this.renderInputChip.bind(this);\n        this.isFull = this.isFull.bind(this);\n        this.handleTextFieldFocus = this.handleTextFieldFocus.bind(this);\n        this.handleInputBlur = this.handleInputBlur.bind(this);\n        this.handleTextInput = this.handleTextInput.bind(this);\n        this.inputFieldOnChange = this.inputFieldOnChange.bind(this);\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n        this.inputHidden = this.inputHidden.bind(this);\n        this.handleDeleteAllIconClick =\n            this.handleDeleteAllIconClick.bind(this);\n        this.renderDelimiter = this.renderDelimiter.bind(this);\n    }\n\n    public connectedCallback() {\n        this.initialize();\n    }\n\n    private initialize() {\n        if (this.value.length) {\n            this.selectedChipIds = this.value\n                .filter((chip) => chip.selected)\n                .map((chip) => chip.id);\n        }\n    }\n\n    /**\n     * Used to find out whether the chip-set is in edit mode.\n     *\n     * @returns `true` if the chip-set is in edit mode, `false` otherwise.\n     */\n    @Method()\n    public async getEditMode(): Promise<boolean> {\n        return this.editMode;\n    }\n\n    /**\n     * Used to set focus to the chip-set input field.\n     *\n     * @param emptyInput - if `true`, any text in the input is discarded\n     * @returns does not return anything, but methods have to be async\n     */\n    @Method()\n    public async setFocus(emptyInput: boolean = false) {\n        if (this.disabled || this.readonly) {\n            return;\n        }\n\n        this.editMode = true;\n        if (emptyInput) {\n            this.textValue = '';\n        }\n\n        this.host.shadowRoot.querySelector('input').focus();\n        this.startEdit.emit();\n    }\n\n    /**\n     * Used to empty the input field. Used in conjunction with `emptyInputOnBlur` to let the\n     * consumer control when the input is emptied.\n     *\n     * @returns does not return anything, but methods have to be async\n     */\n    @Method()\n    public async emptyInput() {\n        this.syncEmptyInput();\n    }\n\n    public componentDidLoad() {\n        this.triggerIconColorWarning(this.value);\n\n        if (this.type === 'input') {\n            this.mdcTextField = new MDCTextField(\n                this.host.shadowRoot.querySelector('.mdc-text-field'),\n            );\n        }\n    }\n\n    public componentDidUpdate() {\n        const input = this.host.shadowRoot.querySelector('input');\n        if (input && this.editMode) {\n            input.focus();\n        }\n    }\n\n    public disconnectedCallback() {\n        if (this.mdcTextField) {\n            this.mdcTextField.destroy();\n        }\n    }\n\n    public render() {\n        if (this.type === 'input') {\n            return this.renderInputChips();\n        }\n\n        const classes = {\n            'mdc-chip-set': true,\n            disabled: this.disabled || this.readonly,\n            'mdc-text-field--with-trailing-icon': true,\n        };\n        if (this.type) {\n            classes[`mdc-chip-set--${this.type}`] = true;\n        }\n\n        const chipSetLabel = this.renderChipSetLabel();\n        if (chipSetLabel) {\n            classes['chip-set--with-label'] = true;\n        }\n\n        const value = this.getValue();\n\n        return (\n            <div class={classes} role=\"grid\">\n                {chipSetLabel}\n                {value.map(this.renderChip)}\n                {this.renderHelperLine()}\n            </div>\n        );\n    }\n\n    private getValue = () => {\n        return this.value.map((chip) => ({\n            ...chip,\n            ...(this.type && {\n                selected: this.selectedChipIds.includes(chip.id),\n            }),\n        }));\n    };\n\n    @Watch('value')\n    protected handleChangeChips(newValue: Chip[], oldValue: Chip[]) {\n        if (isEqual(newValue, oldValue)) {\n            return;\n        }\n\n        this.syncEmptyInput();\n        this.initialize();\n    }\n\n    private renderChipSetLabel() {\n        if (!this.label) {\n            return;\n        }\n\n        return (\n            <label class=\"chip-set__label mdc-floating-label mdc-floating-label--float-above\">\n                {this.label}\n            </label>\n        );\n    }\n\n    private renderInputChips() {\n        return [\n            <div\n                class={{\n                    'mdc-text-field mdc-text-field--outlined': true,\n                    'mdc-chip-set mdc-chip-set--input': true,\n                    'force-invalid': this.isInvalid(),\n                    'mdc-text-field--disabled': this.readonly || this.disabled,\n                    'lime-text-field--readonly': this.readonly,\n                    'has-chips mdc-text-field--label-floating':\n                        this.value.length !== 0,\n                    'has-leading-icon': this.leadingIcon !== null,\n                    'has-clear-all-button': this.clearAllButton,\n                }}\n                onClick={this.handleTextFieldFocus}\n            >\n                {this.value.map(this.renderInputChip)}\n                <input\n                    tabIndex={INPUT_FIELD_TABINDEX}\n                    type={this.inputType}\n                    id=\"input-element\"\n                    disabled={this.readonly || this.disabled}\n                    class={{\n                        'mdc-text-field__input': true,\n                        hidden: this.inputHidden(),\n                    }}\n                    value={this.textValue}\n                    onBlur={this.handleInputBlur}\n                    onFocus={this.handleTextFieldFocus}\n                    onKeyDown={this.handleKeyDown}\n                    onInput={this.handleTextInput}\n                    // Some browsers emit a change event on input elements, we need to stop\n                    // that event from propagating since we are emitting our own change event\n                    onChange={this.inputFieldOnChange}\n                    placeholder={this.isFull() ? '' : this.searchLabel}\n                    readonly={this.isFull()}\n                />\n                <div\n                    class={{\n                        'mdc-notched-outline': true,\n                        'mdc-notched-outline--upgraded': true,\n                        'mdc-text-field--required': this.required,\n                        'lime-notched-outline--notched': this.floatLabelAbove(),\n                    }}\n                    dropzone-tip={this.dropZoneTip()}\n                >\n                    <div class=\"mdc-notched-outline__leading\" />\n                    {this.renderLabel()}\n                    <div class=\"mdc-notched-outline__trailing\" />\n                </div>\n                {this.renderLeadingIcon()}\n                {this.renderEmptyValueForReadonly()}\n                {this.renderClearAllChipsButton()}\n            </div>,\n            this.renderHelperLine(),\n        ];\n    }\n\n    private renderEmptyValueForReadonly = () => {\n        if (this.readonly && this.value.length === 0) {\n            return (\n                <span class=\"lime-empty-value-for-readonly lime-looks-like-input-value\">\n                    –\n                </span>\n            );\n        }\n    };\n\n    private renderLabel() {\n        const labelClassList = {\n            'mdc-floating-label': true,\n            'mdc-text-field--disabled': this.readonly || this.disabled,\n            'mdc-floating-label--required': this.required,\n            'lime-floating-label--float-above': this.floatLabelAbove(),\n        };\n\n        if (!this.label) {\n            return;\n        }\n\n        return (\n            <div class=\"mdc-notched-outline__notch\">\n                <label class={labelClassList} htmlFor=\"input-element\">\n                    {this.label}\n                </label>\n            </div>\n        );\n    }\n\n    private floatLabelAbove = () => {\n        if (!!this.value.length || this.editMode || this.readonly) {\n            return true;\n        }\n    };\n\n    private dropZoneTip = (): string => {\n        return translate.get('file.drag-and-drop-tips', this.language);\n    };\n\n    private isFull(): boolean {\n        return !!this.maxItems && this.value.length >= this.maxItems;\n    }\n\n    private isInvalid() {\n        if (this.readonly) {\n            // A readonly field can never be invalid.\n            return false;\n        }\n\n        if (this.invalid) {\n            return true;\n        }\n\n        if (!this.required) {\n            return false;\n        }\n\n        if (!this.blurred) {\n            return false;\n        }\n\n        return !this.value || !this.value.length;\n    }\n\n    private inputFieldOnChange(event) {\n        event.stopPropagation();\n    }\n\n    /**\n     * Enter edit mode when the text field receives focus. When editMode is true, the input element will be visible\n     */\n    private handleTextFieldFocus() {\n        if (this.disabled || this.readonly) {\n            return;\n        }\n\n        if (this.editMode) {\n            return;\n        }\n\n        this.editMode = true;\n        this.startEdit.emit();\n    }\n\n    /**\n     * Exit edit mode when the input element loses focus. This makes sure the input element does not take up any\n     * additional space when the user it not typing anything\n     */\n    private handleInputBlur() {\n        if (this.emptyInputOnBlur) {\n            this.syncEmptyInput();\n        }\n\n        this.editMode = false;\n        this.blurred = true;\n        this.inputChipIndexSelected = null;\n\n        // This timeout is needed in order to let a new element receive focus\n        setTimeout(() => {\n            this.stopEdit.emit();\n        }, 0);\n    }\n\n    private syncEmptyInput() {\n        this.textValue = '';\n    }\n\n    private inputHidden() {\n        if (this.editMode) {\n            return this.isFull();\n        }\n\n        // If there are chips in the picker, hide the input to avoid the input\n        // being placed on a new line and adding ugly space beneath the chips.\n        // If there are no chips, show the input, or the picker will look weird.\n        return !!(this.value && this.value.length);\n    }\n\n    private handleTextInput(event) {\n        event.stopPropagation();\n        this.inputChipIndexSelected = null;\n        this.textValue = event.target.value;\n        this.input.emit(event.target.value && event.target.value.trim());\n    }\n\n    private emitInteraction(chip: Chip) {\n        this.interact.emit(chip);\n    }\n\n    private renderChip(chip: Chip) {\n        const chipType: ChipType =\n            this.type === 'filter' ? 'filter' : 'default';\n\n        const chipProps = this.getChipProps(chip, chipType);\n\n        return <limel-chip {...chipProps} />;\n    }\n\n    private hasHelperText = () => {\n        return this.helperText !== null && this.helperText !== undefined;\n    };\n\n    private renderHelperLine = () => {\n        if (!this.maxItems && !this.hasHelperText()) {\n            return;\n        }\n\n        return (\n            <limel-helper-line\n                length={this.value.length}\n                maxLength={this.maxItems}\n                helperText={this.helperText}\n                invalid={this.isInvalid()}\n            />\n        );\n    };\n\n    private renderInputChip(chip: Chip, index: number) {\n        const chipProps = this.getChipProps(chip, 'default');\n\n        return [\n            <limel-chip\n                key={chip.id}\n                class={{\n                    'can-be-removed': this.inputChipIndexSelected === index,\n                }}\n                {...chipProps}\n            />,\n            this.renderDelimiter(),\n        ];\n    }\n\n    private getChipProps(chip: Chip, chipType: ChipType) {\n        const removable = this.type === 'input' && chip.removable;\n\n        return {\n            role: 'row',\n            id: `${chip.id}`,\n            text: chip.text,\n            icon: chip.icon,\n            badge: chip.badge,\n            selected: chip.selected,\n            disabled: this.disabled,\n            readonly: this.readonly,\n            type: chipType,\n            removable: removable,\n            onClick: this.catchInputChipClicks(chip),\n            onRemove: this.removeChip(chip.id),\n            ...(chip.href && {\n                link: {\n                    href: getHref(chip.href),\n                    target: getTarget(chip.href),\n                },\n            }),\n        };\n    }\n\n    private catchInputChipClicks = (chip: Chip) => () => {\n        if (this.isSelectableChip(chip)) {\n            this.updateSelectedChipIds(chip);\n            this.change.emit(chip);\n        }\n\n        this.emitInteraction(chip);\n    };\n\n    private isSelectableChip(chip: Chip): boolean {\n        return this.type !== 'input' && 'selected' in chip;\n    }\n\n    private updateSelectedChipIds(chip: Chip): void {\n        chip.selected = !chip.selected;\n        const id = chip.id;\n        if (this.type === 'choice') {\n            this.updateChoiceTypeSelectedIds(id);\n        } else {\n            this.updateFilterTypeSelectedIds(id)\n        }\n    }\n\n    private updateChoiceTypeSelectedIds(id: number | string): void {\n        this.selectedChipIds = this.isChipSelected(id) ? [] : [id];\n    }\n\n    private isChipSelected(id: number | string): boolean {\n        return !!this.selectedChipIds.find((chipId) => chipId === id);\n    }\n\n    private updateFilterTypeSelectedIds(id: number | string): void {\n        if (this.isChipSelected(id)) {\n            this.removeChipIdFromSelectedChipIds(id);\n        } else {\n            this.addChipIdToSelectedChipIds(id);\n        }\n    }\n\n    private removeChipIdFromSelectedChipIds(id: number | string): void {\n        this.selectedChipIds = this.selectedChipIds.filter(chipId => chipId !== id);\n    }\n\n    private addChipIdToSelectedChipIds(id: number | string): void {\n        this.selectedChipIds = [...this.selectedChipIds, id];\n    }\n\n    private removeChip = (id: string | number) => () => {\n        const newValue = this.value.filter((chip) => {\n            return `${chip.id}` !== `${id}`;\n        });\n        this.change.emit(newValue);\n    };\n\n    private renderLeadingIcon() {\n        if (!this.leadingIcon) {\n            return;\n        }\n\n        return (\n            <i class=\"mdc-text-field__icon search-icon\">\n                <limel-icon name={this.leadingIcon} />\n            </i>\n        );\n    }\n\n    private renderClearAllChipsButton() {\n        if (this.disabled || this.readonly || !this.clearAllButton) {\n            return;\n        }\n\n        return (\n            <a\n                href=\"\"\n                onClick={this.handleDeleteAllIconClick}\n                class=\"mdc-text-field__icon clear-all-button\"\n                tabindex=\"0\"\n                role=\"button\"\n                title={this.clearAllChipsLabel()}\n                aria-label={this.clearAllChipsLabel()}\n            />\n        );\n    }\n\n    private clearAllChipsLabel = (): string => {\n        return translate.get('chip-set.clear-all', this.language);\n    };\n\n    private handleDeleteAllIconClick(event: Event) {\n        event.preventDefault();\n        this.change.emit([]);\n    }\n\n    private renderDelimiter() {\n        if (!this.delimiter) {\n            return;\n        }\n\n        return <div class=\"delimiter\">{this.delimiter}</div>;\n    }\n\n    private triggerIconColorWarning(value: Chip[]) {\n        for (const chip of value) {\n            if (\n                chip.icon &&\n                (chip.iconFillColor ||\n                    chip.iconBackgroundColor ||\n                    chip.iconTitle)\n            ) {\n                /* eslint-disable-next-line no-console */\n                console.warn(\n                    \"The `iconFillColor`, `iconBackgroundColor`, and `iconTitle` props are deprecated now! Use the new `Icon` interface and instead of `iconColor: 'color-name', `iconBackgroundColor: 'color-name', and `iconTitle: 'title'`, write `icon { name: 'icon-name', color: 'color-name', backgroundColor: 'color-name', title: 'title' }`.\",\n                );\n            }\n        }\n    }\n}\n"],"mappings":"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"}