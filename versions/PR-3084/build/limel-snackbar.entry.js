import{r as s,c as t,h as i,g as e}from"./index-6156b4fd.js";import{t as r}from"./translations-8927471e.js";import{c as a}from"./random-string-812b1c35.js";class o{constructor(){this.snackbarElements=[]}add(s){const t=this.getPopover(s);t===null||t===void 0?void 0:t.showPopover();this.snackbarElements=[s,...this.snackbarElements];this.emitOffsets()}remove(s){const t=this.getPopover(s);t===null||t===void 0?void 0:t.hidePopover();this.snackbarElements=this.snackbarElements.filter((t=>t!==s));this.emitOffsets()}emitOffsets(){let s=0;this.snackbarElements.forEach((t=>{t.dispatchEvent(new CustomEvent("changeOffset",{detail:s}));s+=this.getPopover(t).getBoundingClientRect().height}))}getPopover(s){return s.shadowRoot.querySelector("[popover]")}}const n="*{box-sizing:border-box}aside{background:none;border:none;inset:unset;overflow:visible;padding:0.5rem 0.5rem 0 0.5rem;right:0;width:var(--limel-snackbar-width, 21rem);top:calc(var(--snackbar-distance-to-top-edge) + env(safe-area-inset-top, 0));transition:opacity var(--limel-snackbar-opacity-transition-speed, 0.2s) ease, top var(--limel-snackbar-top-transition-speed, 0.46s) cubic-bezier(1, 0.09, 0, 0.89), transform var(--limel-snackbar-top-transition-speed, 0.46s) ease;transform:translate3d(0, 0, 0);opacity:1}aside.is-closing{transform:translate3d(2rem, 0, 0);opacity:0;--limel-snackbar-top-transition-speed:0.2s;--limel-snackbar-opacity-transition-speed:0.2s}.surface{overflow:hidden;padding:0.5rem;display:flex;align-items:center;justify-content:flex-start;gap:0.25rem;min-height:3.25rem;border-radius:0.75rem;background-color:rgb(var(--contrast-1400));box-shadow:var(--shadow-depth-8), var(--shadow-depth-16)}.label{color:rgb(var(--contrast-100));-webkit-font-smoothing:antialiased;font-size:0.8125rem;font-weight:400;padding:0 0.25rem;width:100%;flex-grow:1}.actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;gap:0.5rem}.dismiss,.actions{--lime-elevated-surface-background-color:rgb(\n      var(--contrast-1300)\n  )}.dismiss{--mdc-theme-on-surface:rgb(var(--contrast-100));--icon-background-color:var(--lime-elevated-surface-background-color);--fill-color:var(--mdc-theme-primary);--track-color:rgb(var(--contrast-800), 0.2);transition:opacity 0.1s ease, transform 0.1s ease;position:absolute;top:-0.375rem;left:-0.375rem;transform:scale(0.7);display:flex;align-items:center;justify-content:center}.dismiss svg{position:absolute;transform:rotate(90deg);fill:transparent;stroke-dasharray:100;stroke-linecap:round}aside:popover-open .dismiss svg{animation:timeout var(--snackbar-timeout) linear forwards}.dismiss .is-closing{transform:scale(0.5);opacity:0}.dismiss-button{transform:scale(0.8);margin:0;padding:0}@keyframes timeout{0%{stroke-width:4;stroke-dashoffset:0;opacity:1}100%{stroke-width:1;stroke-dashoffset:-100;opacity:0.7}}";const c=new o;const l=300;const d=class{constructor(i){s(this,i);this.action=t(this,"action",7);this.hide=t(this,"hide",7);this.close=()=>{if(!this.open){return false}this.closing=true;setTimeout((()=>{this.open=false;c.remove(this.host);this.hide.emit();this.offset=0}),l)};this.handleClickAction=()=>{this.action.emit()};this.message=undefined;this.timeout=5e3;this.actionText=undefined;this.dismissible=true;this.multiline=undefined;this.language="en";this.offset=0;this.open=false;this.closing=true;this.snackbarId=a()}onChangeIndex(s){s.stopPropagation();this.offset=s.detail}async show(){if(this.open){return}this.open=true;this.closing=false;c.add(this.host);if(this.timeout){setTimeout(this.close,Math.max(this.timeout-l,0))}}render(){return i("aside",{popover:"manual",style:{"--snackbar-timeout":`${this.timeout}ms`,"--snackbar-distance-to-top-edge":`${this.offset}px`},class:{open:this.open,"is-closing":this.closing},id:this.snackbarId},i("div",{class:"surface",role:"status","aria-relevant":"additions"},i("div",{class:"label","aria-atomic":"false"},this.message),this.renderActions(this.actionText),this.renderDismissButton(this.dismissible)))}renderActions(s){if(!s){return}return i("div",{class:"actions","aria-atomic":"true"},this.renderActionButton(s))}renderActionButton(s){if(!s){return}return i("limel-button",{label:s,onClick:this.handleClickAction})}renderDismissButton(s){if(!s){return}const t=r.get("snackbar.dismiss",this.language);return i("div",{class:"dismiss"},this.renderTimeoutVisualization(),i("limel-icon-button",{class:"dismiss-button",icon:"multiply",label:t,onClick:this.close,"aria-controls":this.snackbarId}))}renderTimeoutVisualization(){return i("svg",{width:"36",height:"36",viewBox:"0 0 36 36"},i("circle",{r:"18",cx:"18",cy:"18",fill:"var(--track-color)"}),i("path",{class:"track",d:"M 18,18 m -16,0 a 16,16 0 1,0 32,0 a 16,16 0 1,0 -32,0",stroke:"var(--fill-color)"}))}get host(){return e(this)}};d.style=n;export{d as limel_snackbar};
//# sourceMappingURL=limel-snackbar.entry.js.map