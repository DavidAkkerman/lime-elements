import{r as e,c as t,h as i,g as o}from"./index-6156b4fd.js";import{c as r}from"./random-string-812b1c35.js";import{b as s}from"./keycodes-9382910b.js";import{z as n}from"./zipObject-973a13ff.js";import"./_assignValue-d635a66e.js";import"./_defineProperty-6dda4257.js";import"./_getNative-4698fd71.js";import"./eq-1533d1d3.js";import"./_baseGetTag-49d0259e.js";import"./isObject-7039fcda.js";function a(e,t){var i;if(e.contains(t)||((i=e.shadowRoot)===null||i===void 0?void 0:i.contains(t))){return true}const o=c(t);if(!o){return false}return a(e,o)}function c(e){const t=e.closest(".limel-portal--container");if(t){return t.portalSource}const i=e.getRootNode();return i.host}const l=".trigger-anchor{display:inline-block;position:relative}";const p=400;const h=class{constructor(i){e(this,i);this.close=t(this,"close",7);this.togglePopover=()=>{this.open=!this.open};this.handleMouseEnter=()=>{this.hoverTimeout=window.setTimeout((()=>{this.open=true}),p)};this.handleMouseLeave=()=>{clearTimeout(this.hoverTimeout)};this.handleGlobalKeyPress=e=>{if(e.key!==s){return}e.stopPropagation();e.preventDefault();this.close.emit()};this.setTriggerAttributes=e=>{const t={"aria-haspopup":true,"aria-expanded":this.open,"aria-controls":this.portalId,role:"button"};for(const[i,o]of Object.entries(t)){if(!o){e.removeAttribute(i)}else{e.setAttribute(i,String(o))}}};this.open=false;this.openDirection=undefined;this.triggerInteraction="click";this.portalId=r();this.globalClickListener=this.globalClickListener.bind(this)}watchOpen(){this.setupGlobalHandlers()}componentWillLoad(){this.setupGlobalHandlers()}componentDidRender(){const e=this.host.shadowRoot.querySelector("slot");e.assignedElements().forEach(this.setTriggerAttributes);if(this.triggerInteraction==="hover"){this.setupHoverListeners(e)}else{this.setupClickListener(e)}}setupGlobalHandlers(){if(this.open){document.addEventListener("click",this.globalClickListener,{capture:true});document.addEventListener("keyup",this.handleGlobalKeyPress)}else{document.removeEventListener("click",this.globalClickListener);document.removeEventListener("keyup",this.handleGlobalKeyPress)}}setupClickListener(e){e.assignedElements().forEach((e=>{e.addEventListener("click",this.togglePopover)}))}setupHoverListeners(e){e.assignedElements().forEach((e=>{e.addEventListener("mouseenter",this.handleMouseEnter);e.addEventListener("mouseleave",this.handleMouseLeave)}))}teardownListeners(e){e.assignedElements().forEach((e=>{e.removeEventListener("click",this.togglePopover);e.removeEventListener("mouseenter",this.handleMouseEnter);e.removeEventListener("mouseleave",this.handleMouseLeave)}))}watchTriggerInteraction(){const e=this.host.shadowRoot.querySelector("slot");this.teardownListeners(e);this.componentDidRender()}render(){const e=this.getCssProperties();const t=getComputedStyle(this.host).getPropertyValue("--popover-z-index");return i("div",{class:"trigger-anchor"},i("slot",{name:"trigger"}),i("limel-portal",{visible:this.open,containerId:this.portalId,containerStyle:{"z-index":t},openDirection:this.openDirection},i("limel-popover-surface",{contentCollection:this.host.children,style:e})))}globalClickListener(e){const t=e.target;const i=a(this.host,t);if(this.open&&!i){e.stopPropagation();e.preventDefault();this.close.emit()}}getCssProperties(){const e=["--popover-surface-width","--popover-body-background-color","--popover-border-radius"];const t=getComputedStyle(this.host);const i=e.map((e=>t.getPropertyValue(e)));return n(e,i)}get host(){return o(this)}static get watchers(){return{open:["watchOpen"],triggerInteraction:["watchTriggerInteraction"]}}};h.style=l;const d='@charset "UTF-8";:host(limel-popover-surface){isolation:isolate;position:relative;display:flex;width:var(--popover-surface-width, auto);max-height:inherit;max-width:calc(100vw - 2rem);margin:0 0.25rem}.limel-popover-surface{flex:1;min-width:0;min-height:0;border-radius:var(--popover-border-radius, 0.75rem);box-shadow:var(--shadow-depth-16);backdrop-filter:blur(0.3125rem);-webkit-backdrop-filter:blur(0.3125rem)}.limel-popover-surface:after{transition:opacity 0.4s ease;pointer-events:none;content:"";position:absolute;top:0;right:0;bottom:0;left:0;z-index:-1;opacity:0.75;border-radius:var(--popover-border-radius, 0.75rem);background-color:var(--popover-body-background-color, var(--lime-elevated-surface-background-color))}.limel-popover-surface:focus{outline:none}.limel-popover-surface:focus-visible{outline:none;box-shadow:var(--shadow-depth-8-focused)}.limel-popover-surface:focus:after,.limel-popover-surface:focus-within:after{opacity:1}.limel-popover-surface>*{box-sizing:border-box}';const u=class{constructor(t){e(this,t);this.contentCollection=undefined}componentDidLoad(){this.appendElement()}render(){return i("div",{class:"limel-popover-surface",tabindex:"0"})}appendElement(){const e=this.host.shadowRoot.querySelector(".limel-popover-surface");Array.from(this.contentCollection).forEach((t=>{if(t.slot==="trigger"){return}e.appendChild(t)}))}get host(){return o(this)}};u.style=d;export{h as limel_popover,u as limel_popover_surface};
//# sourceMappingURL=limel-popover_2.entry.js.map