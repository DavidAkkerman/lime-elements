import{r as t,h as i,g as s}from"./index-6156b4fd.js";import{g as e}from"./config-19f3ce37.js";class n{constructor(t){this.promises={};this.cache=t}async get(t,i=""){const s=await this.cache;const e=this.getUrl(t,i);let n=await s.match(e);if(!n){n=await this.fetchData(e,s)}return this.getIcon(n)}async fetchData(t,i){let s=this.promises[t];if(s===undefined){s=i.add(t);this.promises[t]=s}await s;return i.match(t)}async getIcon(t){let i=await t.text();i=i.replace(/#000000/g,"currentColor");if(!this.validSvg(i)){throw new Error("Invalid SVG")}return i}validSvg(t){const i=new DOMParser;const s=i.parseFromString(t,"image/svg+xml");return s.documentElement.tagName.toLowerCase()==="svg"}getUrl(t,i){let s=i||"";if(i&&!i.endsWith("/")){s=`${i}/`}return`${s}assets/icons/${t}.svg`}}class r{constructor(){this.cache={};this.resolveFunctions={}}async get(t,i=""){if(!this.cache[t]){this.cache[t]=await this.getIcon(t,i)}return this.cache[t]}getIcon(t,i){return new Promise((s=>{if(!this.resolveFunctions[t]){this.resolveFunctions[t]=[];this.fetchData(t,i)}this.resolveFunctions[t].push(s)}))}async fetchData(t,i){let s=i||"";if(i&&!i.endsWith("/")){s=`${i}/`}const e=await fetch(`${s}assets/icons/${t}.svg`);let n=await e.text();n=n.replace(/#000000/g,"currentColor");if(!this.validSvg(n)){throw new Error("Invalid SVG")}this.resolvePromises(t,n)}validSvg(t){const i=new DOMParser;const s=i.parseFromString(t,"image/svg+xml");return s.documentElement.tagName.toLowerCase()==="svg"}resolvePromises(t,i){const s=this.resolveFunctions[t];s.forEach((t=>{t(i)}));this.resolveFunctions[t]=null}}const o="@limetech/lime-elements/icons";function a(){try{const t=caches.open(o);return new n(t)}catch(t){return new r}}const h=(()=>a())();const c=":host(limel-icon){background-color:var(--icon-background-color, transparent);border-radius:50%;display:inline-block;line-height:0;box-sizing:border-box;padding:var(--limel-icon-svg-margin, 0)}:host(limel-icon) svg{fill:currentColor;height:100%;pointer-events:none;width:100%}:host([hidden]){display:none}:host([size=x-small]){height:1rem;width:1rem}:host([size=small]){height:1.5rem;width:1.5rem}:host([size=medium]){height:1.75rem;width:1.75rem}:host([size=large]){height:2rem;width:2rem}:host([badge]){--limel-icon-svg-margin:0.25rem}:host([badge][size=x-small]){--limel-icon-svg-margin:0.0625rem}:host([badge][size=small]),:host([badge][size=medium]){--limel-icon-svg-margin:0.125rem}";const l=class{constructor(i){t(this,i);this.size=undefined;this.name=undefined;this.badge=undefined}componentDidLoad(){this.loadIcon(this.name)}render(){return i("div",{class:"container"})}async loadIcon(t){if(t===undefined||t===""){return}const i=await this.loadSvg(t);this.renderSvg(i)}loadSvg(t){return h.get(t,e.iconPath)}renderSvg(t){const i=this.host.shadowRoot.querySelector("div.container");if(i){i.innerHTML=t}}get host(){return s(this)}static get watchers(){return{name:["loadIcon"]}}};l.style=c;export{l as limel_icon};
//# sourceMappingURL=limel-icon.entry.js.map