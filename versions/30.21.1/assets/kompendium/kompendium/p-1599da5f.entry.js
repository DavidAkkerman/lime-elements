import{r as t,h as e,g as a,c as n,e as s}from"./p-2ba95fd4.js";import{A as i}from"./p-463b019e.js";import{m as o,a as r,s as l,b as c,c as h,d,e as p,f as m,g as u,h as b,i as g,j as w,k as v,l as f,n as k,o as y,p as x}from"./p-9b6a9315.js";import{s as _}from"./p-72466aaf.js";const P=class{constructor(e){t(this,e),this.path="/kompendium.json",this.onMessage=this.onMessage.bind(this)}componentWillLoad(){this.createWebSocket(),this.fetchData()}createWebSocket(){if(this.socket)return;const t=function(t){return`${"https:"===t.protocol?"wss:":"ws:"}//${t.hostname}:${t.port}/`}(location);this.socket=new WebSocket(t),this.socket.addEventListener("message",this.onMessage)}onMessage(t){var e;try{1===(null===(e=JSON.parse(t.data).buildLog)||void 0===e?void 0:e.progress)&&this.fetchData()}catch(a){console.error(a)}}async fetchData(){const t=await fetch(this.path);this.data=await t.json();const e=this.data.types.map(t=>t.name);_(e)}render(){return this.data?e("div",{class:"kompendium-body"},e("kompendium-navigation",{menu:this.data.menu,header:this.data.title,logo:this.data.logo}),e("main",{role:"main"},e("stencil-router",{historyType:"hash"},e("stencil-route-switch",{scrollTopOffset:0},e("stencil-route",{url:"/",component:"kompendium-markdown",componentProps:{text:this.data.readme},exact:!0}),e("stencil-route",{url:"/component/:name/:section?",component:"kompendium-component",componentProps:{docs:this.data.docs}}),e("stencil-route",{url:"/type/:name",component:"kompendium-type",componentProps:{types:this.data.types}}),e("stencil-route",{component:"kompendium-guide",componentProps:{data:this.data}}))))):e("div",{class:"loading-screen"},e("div",{class:"loading-screen-icon"}),e("div",{class:"loading-screen-text"},"Loading..."))}};P.style="*,*::before,*::after{-webkit-box-sizing:border-box;box-sizing:border-box}ul[class],ol[class]{padding:0}body,h1,h2,h3,h4,p,ul[class],ol[class],li,figure,figcaption,blockquote,dl,dd{margin:0}ul[class],ol[class]{list-style:none}a:not([class]){-webkit-text-decoration-skip:ink;text-decoration-skip-ink:auto}img{max-width:100%}input,button,textarea,select{font:inherit}@media (prefers-reduced-motion: reduce){*{-webkit-animation-duration:0.01ms !important;animation-duration:0.01ms !important;-webkit-animation-iteration-count:1 !important;animation-iteration-count:1 !important;-webkit-transition-duration:0.01ms !important;transition-duration:0.01ms !important;scroll-behavior:auto !important}}:root{--width-nav-panel:16rem}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.loading-screen{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;right:0;bottom:0;left:0}.loading-screen-icon{-webkit-animation:spin 0.35s linear infinite;animation:spin 0.35s linear infinite;border-radius:50%;border-style:solid;border-width:0.125rem;border-color:rgb(var(--color-blue-default));border-top-color:transparent;display:inline-block;height:1.25rem;width:1.25rem}.loading-screen-text{padding-left:0.75rem;color:rgb(var(--contrast-1100))}:host{display:block;margin:0;padding:0}main{padding:1.25rem 2rem;margin-left:var(--width-nav-panel)}main kompendium-guide{display:block;width:100%;max-width:60rem}@media (max-width: 1400px){main{padding-top:2.625rem;margin-left:0}}";const L=class{constructor(e){t(this,e),this.route="",this.toggleMenu=()=>{const t=this.host.shadowRoot.querySelector(".nav-panel");t&&t.classList.toggle("display-nav-panel")},this.setRoute=this.setRoute.bind(this),this.renderMenuItem=this.renderMenuItem.bind(this)}componentWillLoad(){window.addEventListener("hashchange",this.setRoute),this.setRoute()}componentDidUnload(){window.removeEventListener("hashchange",this.setRoute)}setRoute(){this.route=location.hash.substr(1)}render(){return e("nav",{class:"nav-panel"},e("a",{class:"nav-panel__responsive-menu",onClick:this.toggleMenu},e("span",null),e("span",null),e("span",null),e("span",null)),e("header",{class:"panel-header"},e("h1",null,this.renderHeader()),e("kompendium-search",null)),this.renderChapters(this.menu))}renderHeader(){let t=this.header;return this.logo&&(t=e("img",{alt:this.header,src:this.logo})),e("a",{href:"#"},t)}renderChapters(t){if(t&&t.length)return e("ul",{class:"panel-list"},t.map(this.renderMenuItem))}renderMenuItem(t){const n={active:this.isRouteActive(t.path),chapters:!0,"panel-list":!0},s={"panel-link":!0,active:this.isRouteActive(t.path)},i=t.children||[],o=a("../collection/assets/icons/arrow-right-s-line.svg");return e("li",{class:"panel-item"},e("a",{class:s,href:"#"+t.path},e("img",{src:o}),e("span",{class:"link-text"},t.title)),e("ul",{class:n},i.map(this.renderMenuItem)))}isRouteActive(t){return this.route.startsWith(t)}get host(){return n(this)}};L.style="*,*::before,*::after{-webkit-box-sizing:border-box;box-sizing:border-box}ul[class],ol[class]{padding:0}body,h1,h2,h3,h4,p,ul[class],ol[class],li,figure,figcaption,blockquote,dl,dd{margin:0}ul[class],ol[class]{list-style:none}a:not([class]){-webkit-text-decoration-skip:ink;text-decoration-skip-ink:auto}img{max-width:100%}input,button,textarea,select{font:inherit}@media (prefers-reduced-motion: reduce){*{-webkit-animation-duration:0.01ms !important;animation-duration:0.01ms !important;-webkit-animation-iteration-count:1 !important;animation-iteration-count:1 !important;-webkit-transition-duration:0.01ms !important;transition-duration:0.01ms !important;scroll-behavior:auto !important}}:root{--width-nav-panel:16rem}:host{display:block;font-family:var(--kompendium-font-primary);--size-show-nav-panel-button:2.25rem}header a{text-decoration:none;color:unset}.nav-panel{-webkit-transition:margin 0.2s ease;transition:margin 0.2s ease;z-index:100;width:var(--width-nav-panel);height:100vh;position:fixed;background-color:rgb(var(--contrast-400));display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.nav-panel .panel-header{-ms-flex-direction:row;flex-direction:row;padding:1rem;border-bottom:1px solid rgb(var(--contrast-600));margin-bottom:0.5rem}.nav-panel .panel-header h1{text-transform:uppercase;font-size:1rem;font-weight:normal;letter-spacing:0.5ch;color:rgb(var(--contrast-800));margin:0.125rem 0 0.5rem 0}.nav-panel .panel-list{overflow-y:auto}.nav-panel .panel-list:not(.chapters){padding:0 0.25rem 2rem 0.25rem}.nav-panel__responsive-menu{-webkit-transition:background-color 0.2s ease, -webkit-box-shadow 0.2s ease, -webkit-transform 0.1s ease-out;transition:background-color 0.2s ease, -webkit-box-shadow 0.2s ease, -webkit-transform 0.1s ease-out;transition:background-color 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease-out;transition:background-color 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease-out, -webkit-box-shadow 0.2s ease, -webkit-transform 0.1s ease-out;-webkit-box-shadow:var(--button-shadow-normal);box-shadow:var(--button-shadow-normal);-webkit-transition:all 0.2s ease;transition:all 0.2s ease;display:none;cursor:pointer;position:absolute;top:0.75rem;right:calc((var(--size-show-nav-panel-button) * -1) - 1rem);width:var(--size-show-nav-panel-button);height:var(--size-show-nav-panel-button);margin:0.25rem;border-radius:50%;text-align:center;font-weight:bold;background-color:rgba(var(--contrast-200), 0.7);-webkit-backdrop-filter:blur(0.25rem);backdrop-filter:blur(0.25rem);color:rgb(var(--contrast-900))}.nav-panel__responsive-menu:hover{-webkit-box-shadow:var(--button-shadow-hovered);box-shadow:var(--button-shadow-hovered)}.nav-panel__responsive-menu:active{-webkit-box-shadow:var(--button-shadow-pressed);box-shadow:var(--button-shadow-pressed);-webkit-transform:translate3d(0, 0.08rem, 0);transform:translate3d(0, 0.08rem, 0)}.nav-panel__responsive-menu span{-webkit-transition:background-color 0.2s ease, opacity 0.15s ease 0.3s, -webkit-transform 0.2s ease 0.3s;transition:background-color 0.2s ease, opacity 0.15s ease 0.3s, -webkit-transform 0.2s ease 0.3s;transition:background-color 0.2s ease, transform 0.2s ease 0.3s, opacity 0.15s ease 0.3s;transition:background-color 0.2s ease, transform 0.2s ease 0.3s, opacity 0.15s ease 0.3s, -webkit-transform 0.2s ease 0.3s;display:block;position:absolute;left:0;right:0;margin:auto;height:0.125rem;width:1rem;border-radius:0.25rem;background-color:rgb(var(--contrast-900))}.nav-panel__responsive-menu span:nth-child(1){top:0.75rem}.nav-panel__responsive-menu span:nth-child(2),.nav-panel__responsive-menu span:nth-child(3){top:0;bottom:0}.nav-panel__responsive-menu span:nth-child(4){bottom:0.75rem}.nav-panel__responsive-menu:hover span{background-color:rgb(var(--contrast-1200))}@media (max-width: 1400px){.nav-panel{margin-left:calc(var(--width-nav-panel) * -1)}.nav-panel.display-nav-panel{margin-left:0;-webkit-box-shadow:0 0.09375rem 0.225rem 0 rgba(0, 0, 0, 0.232), 0 0.01875rem 0.05625rem 0 rgba(0, 0, 0, 0.208);box-shadow:0 0.09375rem 0.225rem 0 rgba(0, 0, 0, 0.232), 0 0.01875rem 0.05625rem 0 rgba(0, 0, 0, 0.208)}.nav-panel.display-nav-panel .nav-panel__responsive-menu{right:calc((var(--size-show-nav-panel-button) * -1) - 0.3125rem);border-radius:0 0.5rem 0.5rem 0}.nav-panel.display-nav-panel .nav-panel__responsive-menu span:nth-child(1),.nav-panel.display-nav-panel .nav-panel__responsive-menu span:nth-child(4){-webkit-transform:scaleX(0);transform:scaleX(0);opacity:0}.nav-panel.display-nav-panel .nav-panel__responsive-menu span:nth-child(2){-webkit-transform:rotate(45deg);transform:rotate(45deg)}.nav-panel.display-nav-panel .nav-panel__responsive-menu span:nth-child(3){-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.nav-panel__responsive-menu{display:block}}.panel-item{-webkit-transition:opacity 0.2s ease;transition:opacity 0.2s ease;width:100%;padding-right:0.75rem}.panel-link{display:grid;grid-auto-flow:column;grid-template-columns:1.25rem 1fr;line-height:1.75rem;color:rgb(var(--contrast-900));text-decoration:none;border-radius:0.375rem}.panel-link:hover,.panel-link.active{color:rgb(var(--color-blue-default))}.panel-link.active img{-webkit-transform:rotate(90deg) scale(0.8);transform:rotate(90deg) scale(0.8)}.panel-link img{-webkit-transition:-webkit-transform 0.2s ease;transition:-webkit-transform 0.2s ease;transition:transform 0.2s ease;transition:transform 0.2s ease, -webkit-transform 0.2s ease;-webkit-transform:scale(0.8);transform:scale(0.8);height:2rem}.link-text{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;padding-left:0.5rem}.chapters{height:0;-webkit-transition:height 0.2s ease;transition:height 0.2s ease}.chapters.active{height:100%;padding-left:1.25rem}.chapters.active .panel-item{opacity:1;-webkit-transition-delay:0.2s;transition-delay:0.2s}.chapters.active .panel-item:nth-child(1){-webkit-transition-delay:0s;transition-delay:0s}.chapters.active .panel-item:nth-child(2){-webkit-transition-delay:0.04s;transition-delay:0.04s}.chapters.active .panel-item:nth-child(3){-webkit-transition-delay:0.06s;transition-delay:0.06s}.chapters.active .panel-item:nth-child(4){-webkit-transition-delay:0.08s;transition-delay:0.08s}.chapters.active .panel-item:nth-child(5){-webkit-transition-delay:0.1s;transition-delay:0.1s}.chapters.active .panel-item:nth-child(6){-webkit-transition-delay:0.12s;transition-delay:0.12s}.chapters.active .panel-item:nth-child(7){-webkit-transition-delay:0.14s;transition-delay:0.14s}.chapters.active .panel-item:nth-child(8){-webkit-transition-delay:0.15s;transition-delay:0.15s}.chapters.active .panel-item:nth-child(9){-webkit-transition-delay:0.16s;transition-delay:0.16s}.chapters.active .panel-item:nth-child(10){-webkit-transition-delay:0.17s;transition-delay:0.17s}.chapters.active .panel-item:nth-child(11){-webkit-transition-delay:0.18s;transition-delay:0.18s}.chapters.active .panel-item:nth-child(12){-webkit-transition-delay:0.19s;transition-delay:0.19s}.chapters.active .panel-item:last-child{margin-bottom:1rem}.chapters img{visibility:hidden}.chapters .panel-item{opacity:0}.chapters .panel-item .chapters{font-size:0.8125rem;padding-left:0.5rem}.chapters .panel-item .chapters:first-child{margin-top:0.25rem}.chapters .panel-item .chapters:last-child{margin-bottom:0.5rem}";const O=class{constructor(e){t(this,e)}componentDidLoad(){this.host.shadowRoot.querySelector("input").focus()}render(){return e("div",{class:"search-box"},e("input",{type:"search",autoFocus:!0,placeholder:"Search"}),e("ul",{class:"result"}))}get host(){return n(this)}};O.style="*,*::before,*::after{-webkit-box-sizing:border-box;box-sizing:border-box}ul[class],ol[class]{padding:0}body,h1,h2,h3,h4,p,ul[class],ol[class],li,figure,figcaption,blockquote,dl,dd{margin:0}ul[class],ol[class]{list-style:none}a:not([class]){-webkit-text-decoration-skip:ink;text-decoration-skip-ink:auto}img{max-width:100%}input,button,textarea,select{font:inherit}@media (prefers-reduced-motion: reduce){*{-webkit-animation-duration:0.01ms !important;animation-duration:0.01ms !important;-webkit-animation-iteration-count:1 !important;animation-iteration-count:1 !important;-webkit-transition-duration:0.01ms !important;transition-duration:0.01ms !important;scroll-behavior:auto !important}}:host{display:block}.search-box{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}input{-webkit-transition:background-color 0.2s ease;transition:background-color 0.2s ease;border:0;border-radius:0.25rem;padding:0 0.5rem;color:rgb(var(--contrast-1200));background-color:rgb(var(--contrast-300));height:2rem;line-height:2rem}input::-webkit-input-placeholder{color:rgb(var(--contrast-800))}input::-moz-placeholder{color:rgb(var(--contrast-800))}input:-ms-input-placeholder{color:rgb(var(--contrast-800))}input::-ms-input-placeholder{color:rgb(var(--contrast-800))}input::placeholder{color:rgb(var(--contrast-800))}input:active,input:focus,input:hover{background-color:rgb(var(--contrast-200))}input:focus{outline:none}input::-webkit-search-cancel-button{-webkit-appearance:none;-webkit-transition:background-color 0.2s ease;transition:background-color 0.2s ease;height:1.25rem;width:1.25rem;border-radius:50%;margin-right:-0.25rem;cursor:pointer;background-color:rgb(var(--contrast-800));background-repeat:no-repeat;background-position:center;background-size:0.75rem;background-image:url(\"data:image/svg+xml; utf8, <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><defs/><path fill='rgb(255,255,255)' d='M7.219 5.781L5.78 7.22 14.563 16 5.78 24.781 7.22 26.22 16 17.437l8.781 8.782 1.438-1.438L17.437 16l8.782-8.781L24.78 5.78 16 14.563z'/></svg>\")}input::-webkit-search-cancel-button:hover{background-color:rgb(var(--contrast-1000))}";const j=class{constructor(e){t(this,e),this.group=null,this.match=null,this.componentProps={},this.exact=!1,this.scrollOnNextRender=!1,this.previousMatch=null}computeMatch(t){const e=null!=this.group||null!=this.el.parentElement&&"stencil-route-switch"===this.el.parentElement.tagName.toLowerCase();if(t&&!e)return this.previousMatch=this.match,this.match=o(t.pathname,{path:this.url,exact:this.exact,strict:!0})}async loadCompleted(){let t={};this.history&&this.history.location.hash?t={scrollToId:this.history.location.hash.substr(1)}:this.scrollTopOffset&&(t={scrollTopOffset:this.scrollTopOffset}),"function"==typeof this.componentUpdated?this.componentUpdated(t):this.match&&!r(this.match,this.previousMatch)&&this.routeViewsUpdated&&this.routeViewsUpdated(t)}async componentDidUpdate(){await this.loadCompleted()}async componentDidLoad(){await this.loadCompleted()}render(){if(!this.match||!this.history)return null;const t=Object.assign({},this.componentProps,{history:this.history,match:this.match});return this.routeRender?this.routeRender(Object.assign({},t,{component:this.component})):this.component?e(this.component,Object.assign({},t)):void 0}get el(){return n(this)}static get watchers(){return{location:["computeMatch"]}}};i.injectProps(j,["location","history","historyType","routeViewsUpdated"]),j.style="stencil-route.inactive{display:none}";const S=t=>"STENCIL-ROUTE"===t.tagName,z=class{constructor(e){t(this,e),this.group=((1e17*Math.random()).toString().match(/.{4}/g)||[]).join("-"),this.subscribers=[],this.queue=s(this,"queue")}componentWillLoad(){null!=this.location&&this.regenerateSubscribers(this.location)}async regenerateSubscribers(t){if(null==t)return;let e=-1;if(this.subscribers=Array.prototype.slice.call(this.el.children).filter(S).map((a,n)=>{const s=o(t.pathname,{path:a.url,exact:a.exact,strict:!0});return s&&-1===e&&(e=n),{el:a,match:s}}),-1===e)return;if(this.activeIndex===e)return void(this.subscribers[e].el.match=this.subscribers[e].match);this.activeIndex=e;const a=this.subscribers[this.activeIndex];this.scrollTopOffset&&(a.el.scrollTopOffset=this.scrollTopOffset),a.el.group=this.group,a.el.match=a.match,a.el.componentUpdated=t=>{this.queue.write(()=>{this.subscribers.forEach((t,e)=>{if(t.el.componentUpdated=void 0,e===this.activeIndex)return t.el.style.display="";this.scrollTopOffset&&(t.el.scrollTopOffset=this.scrollTopOffset),t.el.group=this.group,t.el.match=null,t.el.style.display="none"})}),this.routeViewsUpdated&&this.routeViewsUpdated(Object.assign({scrollTopOffset:this.scrollTopOffset},t))}}render(){return e("slot",null)}get el(){return n(this)}static get watchers(){return{location:["regenerateSubscribers"]}}};i.injectProps(z,["location","routeViewsUpdated"]);const T=(t,...e)=>{t||console.warn(...e)},U=()=>{let t,e=[];return{setPrompt:e=>(T(null==t,"A history supports only one prompt at a time"),t=e,()=>{t===e&&(t=null)}),confirmTransitionTo:(e,a,n,s)=>{if(null!=t){const i="function"==typeof t?t(e,a):t;"string"==typeof i?"function"==typeof n?n(i,s):(T(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),s(!0)):s(!1!==i)}else s(!0)},appendListener:t=>{let a=!0;const n=(...e)=>{a&&t(...e)};return e.push(n),()=>{a=!1,e=e.filter(t=>t!==n)}},notifyListeners:(...t)=>{e.forEach(e=>e(...t))}}},H=(t,e="scrollPositions")=>{let a=new Map;const n=(e,n)=>{if(a.set(e,n),l(t,"sessionStorage")){const e=[];a.forEach((t,a)=>{e.push([a,t])}),t.sessionStorage.setItem("scrollPositions",JSON.stringify(e))}};if(l(t,"sessionStorage")){const n=t.sessionStorage.getItem(e);a=n?new Map(JSON.parse(n)):a}return"scrollRestoration"in t.history&&(history.scrollRestoration="manual"),{set:n,get:t=>a.get(t),has:t=>a.has(t),capture:e=>{n(e,[t.scrollX,t.scrollY])}}},E={hashbang:{encodePath:t=>"!"===t.charAt(0)?t:"!/"+y(t),decodePath:t=>"!"===t.charAt(0)?t.substr(1):t},noslash:{encodePath:y,decodePath:p},slash:{encodePath:p,decodePath:p}},A=(t,e)=>{const a=0==t.pathname.indexOf(e)?"/"+t.pathname.slice(e.length):t.pathname;return Object.assign({},t,{pathname:a})},C={browser:(t,e={})=>{let a=!1;const n=t.history,s=t.location,i=t.navigator,o=c(t),r=!h(i),l=H(t),k=null!=e.forceRefresh&&e.forceRefresh,y=null!=e.getUserConfirmation?e.getUserConfirmation:v,x=null!=e.keyLength?e.keyLength:6,_=e.basename?d(p(e.basename)):"",P=()=>{try{return t.history.state||{}}catch(e){return{}}},L=t=>{t=t||{};const{key:e,state:a}=t,{pathname:n,search:i,hash:o}=s;let r=n+i+o;return T(!_||b(r,_),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+r+'" to begin with "'+_+'".'),_&&(r=g(r,_)),m(r,a,e||u(x))},O=U(),j=t=>{l.capture(N.location.key),Object.assign(N,t),N.location.scrollPosition=l.get(N.location.key),N.length=n.length,O.notifyListeners(N.location,N.action)},S=t=>{f(i,t)||E(L(t.state))},z=()=>{E(L(P()))},E=t=>{if(a)a=!1,j();else{const e="POP";O.confirmTransitionTo(t,e,y,a=>{a?j({action:e,location:t}):A(t)})}},A=t=>{let e=M.indexOf(N.location.key),n=M.indexOf(t.key);-1===e&&(e=0),-1===n&&(n=0);const s=e-n;s&&(a=!0,B(s))},C=L(P());let M=[C.key],R=0,W=!1;const q=t=>_+w(t),B=t=>{n.go(t)},D=e=>{R+=e,1===R?(t.addEventListener("popstate",S),r&&t.addEventListener("hashchange",z)):0===R&&(t.removeEventListener("popstate",S),r&&t.removeEventListener("hashchange",z))},N={length:n.length,action:"POP",location:C,createHref:q,push:(t,e)=>{T(!("object"==typeof t&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");const a=m(t,e,u(x),N.location);O.confirmTransitionTo(a,"PUSH",y,t=>{if(!t)return;const e=q(a),{key:i,state:r}=a;if(o)if(n.pushState({key:i,state:r},"",e),k)s.href=e;else{const t=M.indexOf(N.location.key),e=M.slice(0,-1===t?0:t+1);e.push(a.key),M=e,j({action:"PUSH",location:a})}else T(void 0===r,"Browser history cannot push state in browsers that do not support HTML5 history"),s.href=e})},replace:(t,e)=>{T(!("object"==typeof t&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");const a=m(t,e,u(x),N.location);O.confirmTransitionTo(a,"REPLACE",y,t=>{if(!t)return;const e=q(a),{key:i,state:r}=a;if(o)if(n.replaceState({key:i,state:r},"",e),k)s.replace(e);else{const t=M.indexOf(N.location.key);-1!==t&&(M[t]=a.key),j({action:"REPLACE",location:a})}else T(void 0===r,"Browser history cannot replace state in browsers that do not support HTML5 history"),s.replace(e)})},go:B,goBack:()=>B(-1),goForward:()=>B(1),block:(t="")=>{const e=O.setPrompt(t);return W||(D(1),W=!0),()=>(W&&(W=!1,D(-1)),e())},listen:t=>{const e=O.appendListener(t);return D(1),()=>{D(-1),e()}},win:t};return N},hash:(t,e={})=>{let a=!1,n=null,s=0,i=!1;const o=t.location,r=t.history,l=k(t.navigator),c=null!=e.keyLength?e.keyLength:6,{getUserConfirmation:h=v,hashType:f="slash"}=e,y=e.basename?d(p(e.basename)):"",{encodePath:_,decodePath:P}=E[f],L=()=>{const t=o.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},O=t=>{const e=o.href.indexOf("#");o.replace(o.href.slice(0,e>=0?e:0)+"#"+t)},j=()=>{let t=P(L());return T(!y||b(t,y),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+y+'".'),y&&(t=g(t,y)),m(t,void 0,u(c))},S=U(),z=t=>{Object.assign(N,t),N.length=r.length,S.notifyListeners(N.location,N.action)},H=()=>{const t=L(),e=_(t);if(t!==e)O(e);else{const t=j(),e=N.location;if(!a&&x(e,t))return;if(n===w(t))return;n=null,A(t)}},A=t=>{if(a)a=!1,z();else{const e="POP";S.confirmTransitionTo(t,e,h,a=>{a?z({action:e,location:t}):C(t)})}},C=t=>{let e=q.lastIndexOf(w(N.location)),n=q.lastIndexOf(w(t));-1===e&&(e=0),-1===n&&(n=0);const s=e-n;s&&(a=!0,B(s))},M=L(),R=_(M);M!==R&&O(R);const W=j();let q=[w(W)];const B=t=>{T(l,"Hash history go(n) causes a full page reload in this browser"),r.go(t)},D=(t,e)=>{s+=e,1===s?t.addEventListener("hashchange",H):0===s&&t.removeEventListener("hashchange",H)},N={length:r.length,action:"POP",location:W,createHref:t=>"#"+_(y+w(t)),push:(t,e)=>{T(void 0===e,"Hash history cannot push state; it is ignored");const a=m(t,void 0,u(c),N.location);S.confirmTransitionTo(a,"PUSH",h,t=>{if(!t)return;const e=w(a),s=_(y+e);if(L()!==s){n=e,(t=>{o.hash=t})(s);const t=q.lastIndexOf(w(N.location)),i=q.slice(0,-1===t?0:t+1);i.push(e),q=i,z({action:"PUSH",location:a})}else T(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),z()})},replace:(t,e)=>{T(void 0===e,"Hash history cannot replace state; it is ignored");const a=m(t,void 0,u(c),N.location);S.confirmTransitionTo(a,"REPLACE",h,t=>{if(!t)return;const e=w(a),s=_(y+e);L()!==s&&(n=e,O(s));const i=q.indexOf(w(N.location));-1!==i&&(q[i]=e),z({action:"REPLACE",location:a})})},go:B,goBack:()=>B(-1),goForward:()=>B(1),block:(e="")=>{const a=S.setPrompt(e);return i||(D(t,1),i=!0),()=>(i&&(i=!1,D(t,-1)),a())},listen:e=>{const a=S.appendListener(e);return D(t,1),()=>{D(t,-1),a()}},win:t};return N}},M=class{constructor(e){t(this,e),this.root="/",this.historyType="browser",this.titleSuffix="",this.routeViewsUpdated=(t={})=>{if(this.history&&t.scrollToId&&"browser"===this.historyType){const e=this.history.win.document.getElementById(t.scrollToId);if(e)return e.scrollIntoView()}this.scrollTo(t.scrollTopOffset||this.scrollTopOffset)},this.isServer=s(this,"isServer"),this.queue=s(this,"queue")}componentWillLoad(){this.history=C[this.historyType](this.el.ownerDocument.defaultView),this.history.listen(t=>{t=A(t,this.root),this.location=t}),this.location=A(this.history.location,this.root)}scrollTo(t){const e=this.history;if(null!=t&&!this.isServer&&e)return"POP"===e.action&&Array.isArray(e.location.scrollPosition)?this.queue.write(()=>{e&&e.location&&Array.isArray(e.location.scrollPosition)&&e.win.scrollTo(e.location.scrollPosition[0],e.location.scrollPosition[1])}):this.queue.write(()=>{e.win.scrollTo(0,t)})}render(){if(this.location&&this.history)return e(i.Provider,{state:{historyType:this.historyType,location:this.location,titleSuffix:this.titleSuffix,root:this.root,history:this.history,routeViewsUpdated:this.routeViewsUpdated}},e("slot",null))}get el(){return n(this)}};export{P as kompendium_app,L as kompendium_navigation,O as kompendium_search,j as stencil_route,z as stencil_route_switch,M as stencil_router}