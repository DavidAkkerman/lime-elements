{"version":3,"names":["cssClasses","ANCHOR","ANIMATING_CLOSED","ANIMATING_OPEN","FIXED","IS_OPEN_BELOW","OPEN","ROOT","strings","CLOSED_EVENT","CLOSING_EVENT","OPENED_EVENT","FOCUSABLE_ELEMENTS","join","numbers","TRANSITION_OPEN_DURATION","TRANSITION_CLOSE_DURATION","MARGIN_TO_EDGE","ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO","TOUCH_EVENT_WAIT_MS","CornerBit","Corner","_a","_b","LIST_ITEM_ACTIVATED_CLASS","LIST_ITEM_CLASS","LIST_ITEM_DISABLED_CLASS","LIST_ITEM_SELECTED_CLASS","LIST_ITEM_TEXT_CLASS","LIST_ITEM_PRIMARY_TEXT_CLASS","evolutionClassNameMap","deprecatedClassNameMap","ACTION_EVENT","ARIA_CHECKED","ARIA_CHECKED_CHECKBOX_SELECTOR","ARIA_CHECKED_RADIO_SELECTOR","ARIA_CURRENT","ARIA_DISABLED","ARIA_ORIENTATION","ARIA_ORIENTATION_HORIZONTAL","ARIA_ROLE_CHECKBOX_SELECTOR","ARIA_SELECTED","ARIA_INTERACTIVE_ROLES_SELECTOR","ARIA_MULTI_SELECTABLE_SELECTOR","CHECKBOX_RADIO_SELECTOR","CHECKBOX_SELECTOR","CHILD_ELEMENTS_TO_TOGGLE_TABINDEX","DEPRECATED_SELECTOR","FOCUSABLE_CHILD_ELEMENTS","RADIO_SELECTOR","SELECTED_ITEM_SELECTOR","UNSET_INDEX","TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS","evolutionAttribute","ELEMENTS_KEY_ALLOWED_IN","preventDefaultEvent","evt","target","tagName","toLowerCase","indexOf","preventDefault","initState","state","bufferClearTimeout","currentFirstChar","sortedIndexCursor","typeaheadBuffer","initSortedIndex","listItemCount","getPrimaryTextByItemIndex","sortedIndexByFirstChar","Map","i","primaryText","trim","firstChar","has","set","get","push","text","index","forEach","values","sort","first","second","matchItem","opts","nextChar","focusItemAtIndex","focusedItemIndex","skipFocus","isItemAtIndexDisabled","clearTimeout","setTimeout","clearBuffer","length","matchFirstChar","matchAllChars","itemsMatchingFirstChar","newIndex","newCursorPosition","cursorPosition","startingItem","lastIndexOf","nextCursorPosition","currentItem","matches","isEnabled","isTypingInProgress","handleKeydown","event","isTargetListItem","isArrowLeft","normalizeKey","isArrowUp","isArrowRight","isArrowDown","isHome","isEnd","isEnter","isSpace","ctrlKey","metaKey","isCharacterKey","key","matchItemOpts","typeaheadOnListItem","isNumberArray","selectedIndex","Array","MDCListFoundation","_super","__extends","adapter","_this","call","this","__assign","defaultAdapter","wrapFocus","isVertical","isSingleSelectionList","useActivatedClass","useSelectedAttr","ariaCurrentAttrValue","isCheckboxList","isRadioList","hasTypeahead","typeaheadState","typeahead.initState","Object","defineProperty","enumerable","configurable","addClassForElementIndex","undefined","getAttributeForElementIndex","getFocusedElementIndex","getListItemCount","hasCheckboxAtIndex","hasRadioAtIndex","isCheckboxCheckedAtIndex","isFocusInsideList","isRootFocused","listItemAtIndexHasClass","notifyAction","removeClassForElementIndex","setAttributeForElementIndex","setCheckedCheckboxOrRadioAtIndex","setTabIndexForListItemChildren","getPrimaryTextAtIndex","prototype","layout","maybeInitializeSingleSelection","typeaheadInitSortedIndex","getFocusedItemIndex","setWrapFocus","value","setVerticalOrientation","setSingleSelection","getSelectedIndexFromDOM","selectedItemIndex","hasActivatedClass","setUseActivatedClass","listItemsCount","hasSelectedClass","setHasTypeahead","isTypeaheadInProgress","typeahead.isTypingInProgress","useActivated","setUseSelectedAttribute","useSelected","getSelectedIndex","setSelectedIndex","forceUpdate","isIndexValid","setCheckboxAtIndex","setRadioAtIndex","setSingleSelectionAtIndex","handleFocusIn","listItemIndex","handleFocusOut","setTabindexToFirstSelectedOrFocusedItem","isRootListItem","isLetterA","focusLastElement","focusFirstElement","handleKeydownOpts","typeahead.handleKeydown","currentIndex","focusNextElement","focusPrevElement","toggleAll","isSelectableList","setSelectedIndexOnAction","handleClick","toggleCheckbox","count","nextIndex","prevIndex","lastIndex","focusInitialElement","initialIndex","getFirstSelectedOrFocusedItemIndex","setEnabled","itemIndex","selectedClassName","setAriaForSingleSelectionAtIndex","setTabindexAtIndex","isAriaCurrent","ariaAttribute","ariaAttributeValue","getSelectionAttribute","selectionAttribute","isChecked","targetIndex","Math","max","reduce","minIndex","min","Error","some","isIndexInRange","listSize","toggleCheckboxAtIndex","selectedIndexes","slice","filter","currentlySelectedIndexes","allIndexes","typeaheadMatchItem","startingIndex","typeahead.matchItem","typeahead.initSortedIndex","clearTypeaheadBuffer","typeahead.clearBuffer","MDCFoundation","MDCList","apply","arguments","foundation","from","root","querySelectorAll","classNameMap","attachTo","initialSyncWithDOM","isEvolutionEnabled","dataset","obj","className","handleClickEvent","bind","handleKeydownEvent","focusInEventListener","handleFocusInEvent","focusOutEventListener","handleFocusOutEvent","listen","initializeListType","ensureFocusable","destroy","unlisten","direction","getAttribute","vertical","itemSelector","childSelector","itemEls","el","setAttribute","focusableChildEls","getPrimaryText","item","querySelector","textContent","singleLineText","isInteractive","selection","listItem","listElements","checkboxListItems","radioSelectedListItem","preselectedItems","getDefaultFoundation","element","classList","add","focus","attr","document","activeElement","toggleEl","checked","contains","emit","remove","createEvent","initEvent","dispatchEvent","tabIndexValue","selector","initialFocusIndex","tabIndex","getListItemIndex","nearestParent","closest","MDCComponent","MDCMenuSurfaceFoundation","isSurfaceOpen","isQuickOpen","isHoistedElement","isFixedPosition","isHorizontallyCenteredOnViewport","maxHeight","openAnimationEndTimerId","closeAnimationEndTimerId","animationRequestId","anchorCorner","TOP_START","originCorner","anchorMargin","top","right","bottom","left","position","x","y","addClass","removeClass","hasClass","hasAnchor","isElementInContainer","isFocused","isRtl","getInnerDimensions","height","width","getAnchorDimensions","getWindowDimensions","getBodyDimensions","getWindowScroll","setPosition","setMaxHeight","setTransformOrigin","saveFocus","restoreFocus","notifyClose","notifyOpen","notifyClosing","init","cancelAnimationFrame","setAnchorCorner","corner","flipCornerHorizontally","RIGHT","setAnchorMargin","margin","setIsHoisted","isHoisted","setFixedPosition","isFixed","setAbsolutePosition","isFinite","setIsHorizontallyCenteredOnViewport","isCentered","setQuickOpen","quickOpen","isOpen","open","dimensions","autoposition","requestAnimationFrame","close","skipRestoreFocus","maybeRestoreFocus","handleBodyClick","keyCode","isEscape","measurements","getAutoLayoutmeasurements","getoriginCorner","maxMenuSurfaceHeight","getMenuSurfaceMaxHeight","verticalAlignment","hasBit","BOTTOM","horizontalAlignment","horizontalOffset","getHorizontalOriginOffset","verticalOffset","getVerticalOriginOffset","anchorSize","surfaceSize","adjustPositionForHoistedElement","anchorRect","bodySize","viewportSize","windowScroll","viewportDistance","isAnchoredToBottom","availableTop","availableBottom","isAvailableBottom","setBit","isFlipRtl","FLIP_RTL","hasRightBit","isAnchoredToRight","availableLeft","availableRight","isAvailableLeft","isAvailableRight","isOriginCornerAlignedToEnd","unsetBit","isBottomAligned","isBottomAnchored","isRightAligned","avoidHorizontalOverlap","rightOffset","avoidVerticalOverlap","e_1","props","keys","props_1","__values","props_1_1","next","done","prop","e_1_1","error","return","childHasFocus","bit","Boolean","num","MDCMenuSurface","parentEl","parentElement","anchorElement","registerBodyClickListener","body","addEventListener","capture","deregisterBodyClickListener","removeEventListener","setMenuSurfaceAnchorElement","getComputedStyle","getPropertyValue","origin","propertyName","getCorrectPropertyName","window","style","setProperty","previousFocus","offsetWidth","offsetHeight","getBoundingClientRect","innerWidth","innerHeight","clientWidth","clientHeight","pageXOffset","pageYOffset","rootHTML"],"sources":["./node_modules/@material/menu-surface/constants.js","./node_modules/@material/list/constants.js","./node_modules/@material/list/events.js","./node_modules/@material/list/typeahead.js","./node_modules/@material/list/foundation.js","./node_modules/@material/list/component.js","./node_modules/@material/menu-surface/foundation.js","./node_modules/@material/menu-surface/component.js"],"sourcesContent":["/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar cssClasses = {\n    ANCHOR: 'mdc-menu-surface--anchor',\n    ANIMATING_CLOSED: 'mdc-menu-surface--animating-closed',\n    ANIMATING_OPEN: 'mdc-menu-surface--animating-open',\n    FIXED: 'mdc-menu-surface--fixed',\n    IS_OPEN_BELOW: 'mdc-menu-surface--is-open-below',\n    OPEN: 'mdc-menu-surface--open',\n    ROOT: 'mdc-menu-surface',\n};\n// tslint:disable:object-literal-sort-keys\nvar strings = {\n    CLOSED_EVENT: 'MDCMenuSurface:closed',\n    CLOSING_EVENT: 'MDCMenuSurface:closing',\n    OPENED_EVENT: 'MDCMenuSurface:opened',\n    FOCUSABLE_ELEMENTS: [\n        'button:not(:disabled)',\n        '[href]:not([aria-disabled=\"true\"])',\n        'input:not(:disabled)',\n        'select:not(:disabled)',\n        'textarea:not(:disabled)',\n        '[tabindex]:not([tabindex=\"-1\"]):not([aria-disabled=\"true\"])',\n    ].join(', '),\n};\n// tslint:enable:object-literal-sort-keys\nvar numbers = {\n    /** Total duration of menu-surface open animation. */\n    TRANSITION_OPEN_DURATION: 120,\n    /** Total duration of menu-surface close animation. */\n    TRANSITION_CLOSE_DURATION: 75,\n    /**\n     * Margin left to the edge of the viewport when menu-surface is at maximum\n     * possible height. Also used as a viewport margin.\n     */\n    MARGIN_TO_EDGE: 32,\n    /**\n     * Ratio of anchor width to menu-surface width for switching from corner\n     * positioning to center positioning.\n     */\n    ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO: 0.67,\n    /**\n     * Amount of time to wait before restoring focus when closing the menu\n     * surface. This is important because if a touch event triggered the menu\n     * close, and the subsequent mouse event occurs after focus is restored, then\n     * the restored focus would be lost.\n     */\n    TOUCH_EVENT_WAIT_MS: 30,\n};\n/**\n * Enum for bits in the {@see Corner) bitmap.\n */\nvar CornerBit;\n(function (CornerBit) {\n    CornerBit[CornerBit[\"BOTTOM\"] = 1] = \"BOTTOM\";\n    CornerBit[CornerBit[\"CENTER\"] = 2] = \"CENTER\";\n    CornerBit[CornerBit[\"RIGHT\"] = 4] = \"RIGHT\";\n    CornerBit[CornerBit[\"FLIP_RTL\"] = 8] = \"FLIP_RTL\";\n})(CornerBit || (CornerBit = {}));\n/**\n * Enum for representing an element corner for positioning the menu-surface.\n *\n * The START constants map to LEFT if element directionality is left\n * to right and RIGHT if the directionality is right to left.\n * Likewise END maps to RIGHT or LEFT depending on the directionality.\n */\nvar Corner;\n(function (Corner) {\n    Corner[Corner[\"TOP_LEFT\"] = 0] = \"TOP_LEFT\";\n    Corner[Corner[\"TOP_RIGHT\"] = 4] = \"TOP_RIGHT\";\n    Corner[Corner[\"BOTTOM_LEFT\"] = 1] = \"BOTTOM_LEFT\";\n    Corner[Corner[\"BOTTOM_RIGHT\"] = 5] = \"BOTTOM_RIGHT\";\n    Corner[Corner[\"TOP_START\"] = 8] = \"TOP_START\";\n    Corner[Corner[\"TOP_END\"] = 12] = \"TOP_END\";\n    Corner[Corner[\"BOTTOM_START\"] = 9] = \"BOTTOM_START\";\n    Corner[Corner[\"BOTTOM_END\"] = 13] = \"BOTTOM_END\";\n})(Corner || (Corner = {}));\nexport { cssClasses, strings, numbers, CornerBit, Corner };\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar _a, _b;\nvar cssClasses = {\n    LIST_ITEM_ACTIVATED_CLASS: 'mdc-list-item--activated',\n    LIST_ITEM_CLASS: 'mdc-list-item',\n    LIST_ITEM_DISABLED_CLASS: 'mdc-list-item--disabled',\n    LIST_ITEM_SELECTED_CLASS: 'mdc-list-item--selected',\n    LIST_ITEM_TEXT_CLASS: 'mdc-list-item__text',\n    LIST_ITEM_PRIMARY_TEXT_CLASS: 'mdc-list-item__primary-text',\n    ROOT: 'mdc-list',\n};\nvar evolutionClassNameMap = (_a = {},\n    _a[\"\" + cssClasses.LIST_ITEM_ACTIVATED_CLASS] = 'mdc-list-item--activated',\n    _a[\"\" + cssClasses.LIST_ITEM_CLASS] = 'mdc-list-item',\n    _a[\"\" + cssClasses.LIST_ITEM_DISABLED_CLASS] = 'mdc-list-item--disabled',\n    _a[\"\" + cssClasses.LIST_ITEM_SELECTED_CLASS] = 'mdc-list-item--selected',\n    _a[\"\" + cssClasses.LIST_ITEM_PRIMARY_TEXT_CLASS] = 'mdc-list-item__primary-text',\n    _a[\"\" + cssClasses.ROOT] = 'mdc-list',\n    _a);\nvar deprecatedClassNameMap = (_b = {},\n    _b[\"\" + cssClasses.LIST_ITEM_ACTIVATED_CLASS] = 'mdc-deprecated-list-item--activated',\n    _b[\"\" + cssClasses.LIST_ITEM_CLASS] = 'mdc-deprecated-list-item',\n    _b[\"\" + cssClasses.LIST_ITEM_DISABLED_CLASS] = 'mdc-deprecated-list-item--disabled',\n    _b[\"\" + cssClasses.LIST_ITEM_SELECTED_CLASS] = 'mdc-deprecated-list-item--selected',\n    _b[\"\" + cssClasses.LIST_ITEM_TEXT_CLASS] = 'mdc-deprecated-list-item__text',\n    _b[\"\" + cssClasses.LIST_ITEM_PRIMARY_TEXT_CLASS] = 'mdc-deprecated-list-item__primary-text',\n    _b[\"\" + cssClasses.ROOT] = 'mdc-deprecated-list',\n    _b);\nvar strings = {\n    ACTION_EVENT: 'MDCList:action',\n    ARIA_CHECKED: 'aria-checked',\n    ARIA_CHECKED_CHECKBOX_SELECTOR: '[role=\"checkbox\"][aria-checked=\"true\"]',\n    ARIA_CHECKED_RADIO_SELECTOR: '[role=\"radio\"][aria-checked=\"true\"]',\n    ARIA_CURRENT: 'aria-current',\n    ARIA_DISABLED: 'aria-disabled',\n    ARIA_ORIENTATION: 'aria-orientation',\n    ARIA_ORIENTATION_HORIZONTAL: 'horizontal',\n    ARIA_ROLE_CHECKBOX_SELECTOR: '[role=\"checkbox\"]',\n    ARIA_SELECTED: 'aria-selected',\n    ARIA_INTERACTIVE_ROLES_SELECTOR: '[role=\"listbox\"], [role=\"menu\"]',\n    ARIA_MULTI_SELECTABLE_SELECTOR: '[aria-multiselectable=\"true\"]',\n    CHECKBOX_RADIO_SELECTOR: 'input[type=\"checkbox\"], input[type=\"radio\"]',\n    CHECKBOX_SELECTOR: 'input[type=\"checkbox\"]',\n    CHILD_ELEMENTS_TO_TOGGLE_TABINDEX: \"\\n    .\" + cssClasses.LIST_ITEM_CLASS + \" button:not(:disabled),\\n    .\" + cssClasses.LIST_ITEM_CLASS + \" a,\\n    .\" + deprecatedClassNameMap[cssClasses.LIST_ITEM_CLASS] + \" button:not(:disabled),\\n    .\" + deprecatedClassNameMap[cssClasses.LIST_ITEM_CLASS] + \" a\\n  \",\n    DEPRECATED_SELECTOR: '.mdc-deprecated-list',\n    FOCUSABLE_CHILD_ELEMENTS: \"\\n    .\" + cssClasses.LIST_ITEM_CLASS + \" button:not(:disabled),\\n    .\" + cssClasses.LIST_ITEM_CLASS + \" a,\\n    .\" + cssClasses.LIST_ITEM_CLASS + \" input[type=\\\"radio\\\"]:not(:disabled),\\n    .\" + cssClasses.LIST_ITEM_CLASS + \" input[type=\\\"checkbox\\\"]:not(:disabled),\\n    .\" + deprecatedClassNameMap[cssClasses.LIST_ITEM_CLASS] + \" button:not(:disabled),\\n    .\" + deprecatedClassNameMap[cssClasses.LIST_ITEM_CLASS] + \" a,\\n    .\" + deprecatedClassNameMap[cssClasses.LIST_ITEM_CLASS] + \" input[type=\\\"radio\\\"]:not(:disabled),\\n    .\" + deprecatedClassNameMap[cssClasses.LIST_ITEM_CLASS] + \" input[type=\\\"checkbox\\\"]:not(:disabled)\\n  \",\n    RADIO_SELECTOR: 'input[type=\"radio\"]',\n    SELECTED_ITEM_SELECTOR: '[aria-selected=\"true\"], [aria-current=\"true\"]',\n};\nvar numbers = {\n    UNSET_INDEX: -1,\n    TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS: 300\n};\nvar evolutionAttribute = 'evolution';\nexport { strings, cssClasses, numbers, deprecatedClassNameMap, evolutionAttribute, evolutionClassNameMap };\n//# sourceMappingURL=constants.js.map","/**\n * @license\n * Copyright 2020 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nvar ELEMENTS_KEY_ALLOWED_IN = ['input', 'button', 'textarea', 'select'];\n/**\n * Ensures that preventDefault is only called if the containing element\n * doesn't consume the event, and it will cause an unintended scroll.\n *\n * @param evt keyboard event to be prevented.\n */\nexport var preventDefaultEvent = function (evt) {\n    var target = evt.target;\n    if (!target) {\n        return;\n    }\n    var tagName = (\"\" + target.tagName).toLowerCase();\n    if (ELEMENTS_KEY_ALLOWED_IN.indexOf(tagName) === -1) {\n        evt.preventDefault();\n    }\n};\n//# sourceMappingURL=events.js.map","/**\n * @license\n * Copyright 2020 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { normalizeKey } from '@material/dom/keyboard';\nimport { numbers } from './constants';\nimport { preventDefaultEvent } from './events';\n/**\n * Initializes a state object for typeahead. Use the same reference for calls to\n * typeahead functions.\n *\n * @return The current state of the typeahead process. Each state reference\n *     represents a typeahead instance as the reference is typically mutated\n *     in-place.\n */\nexport function initState() {\n    var state = {\n        bufferClearTimeout: 0,\n        currentFirstChar: '',\n        sortedIndexCursor: 0,\n        typeaheadBuffer: '',\n    };\n    return state;\n}\n/**\n * Initializes typeahead state by indexing the current list items by primary\n * text into the sortedIndexByFirstChar data structure.\n *\n * @param listItemCount numer of items in the list\n * @param getPrimaryTextByItemIndex function that returns the primary text at a\n *     given index\n *\n * @return Map that maps the first character of the primary text to the full\n *     list text and it's index\n */\nexport function initSortedIndex(listItemCount, getPrimaryTextByItemIndex) {\n    var sortedIndexByFirstChar = new Map();\n    // Aggregate item text to index mapping\n    for (var i = 0; i < listItemCount; i++) {\n        var primaryText = getPrimaryTextByItemIndex(i).trim();\n        if (!primaryText) {\n            continue;\n        }\n        var firstChar = primaryText[0].toLowerCase();\n        if (!sortedIndexByFirstChar.has(firstChar)) {\n            sortedIndexByFirstChar.set(firstChar, []);\n        }\n        sortedIndexByFirstChar.get(firstChar).push({ text: primaryText.toLowerCase(), index: i });\n    }\n    // Sort the mapping\n    // TODO(b/157162694): Investigate replacing forEach with Map.values()\n    sortedIndexByFirstChar.forEach(function (values) {\n        values.sort(function (first, second) {\n            return first.index - second.index;\n        });\n    });\n    return sortedIndexByFirstChar;\n}\n/**\n * Given the next desired character from the user, it attempts to find the next\n * list option matching the buffer. Wraps around if at the end of options.\n *\n * @param opts Options and accessors\n *   - nextChar - the next character to match against items\n *   - sortedIndexByFirstChar - output of `initSortedIndex(...)`\n *   - focusedItemIndex - the index of the currently focused item\n *   - focusItemAtIndex - function that focuses a list item at given index\n *   - skipFocus - whether or not to focus the matched item\n *   - isItemAtIndexDisabled - function that determines whether an item at a\n *        given index is disabled\n * @param state The typeahead state instance. See `initState`.\n *\n * @return The index of the matched item, or -1 if no match.\n */\nexport function matchItem(opts, state) {\n    var nextChar = opts.nextChar, focusItemAtIndex = opts.focusItemAtIndex, sortedIndexByFirstChar = opts.sortedIndexByFirstChar, focusedItemIndex = opts.focusedItemIndex, skipFocus = opts.skipFocus, isItemAtIndexDisabled = opts.isItemAtIndexDisabled;\n    clearTimeout(state.bufferClearTimeout);\n    state.bufferClearTimeout = setTimeout(function () {\n        clearBuffer(state);\n    }, numbers.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS);\n    state.typeaheadBuffer = state.typeaheadBuffer + nextChar;\n    var index;\n    if (state.typeaheadBuffer.length === 1) {\n        index = matchFirstChar(sortedIndexByFirstChar, focusedItemIndex, isItemAtIndexDisabled, state);\n    }\n    else {\n        index = matchAllChars(sortedIndexByFirstChar, isItemAtIndexDisabled, state);\n    }\n    if (index !== -1 && !skipFocus) {\n        focusItemAtIndex(index);\n    }\n    return index;\n}\n/**\n * Matches the user's single input character in the buffer to the\n * next option that begins with such character. Wraps around if at\n * end of options. Returns -1 if no match is found.\n */\nfunction matchFirstChar(sortedIndexByFirstChar, focusedItemIndex, isItemAtIndexDisabled, state) {\n    var firstChar = state.typeaheadBuffer[0];\n    var itemsMatchingFirstChar = sortedIndexByFirstChar.get(firstChar);\n    if (!itemsMatchingFirstChar) {\n        return -1;\n    }\n    // Has the same firstChar been recently matched?\n    // Also, did starting index remain the same between key presses?\n    // If both hold true, simply increment index.\n    if (firstChar === state.currentFirstChar &&\n        itemsMatchingFirstChar[state.sortedIndexCursor].index ===\n            focusedItemIndex) {\n        state.sortedIndexCursor =\n            (state.sortedIndexCursor + 1) % itemsMatchingFirstChar.length;\n        var newIndex = itemsMatchingFirstChar[state.sortedIndexCursor].index;\n        if (!isItemAtIndexDisabled(newIndex)) {\n            return newIndex;\n        }\n    }\n    // If we're here, it means one of the following happened:\n    // - either firstChar or startingIndex has changed, invalidating the\n    // cursor.\n    // - The next item of typeahead is disabled, so we have to look further.\n    state.currentFirstChar = firstChar;\n    var newCursorPosition = -1;\n    var cursorPosition;\n    // Find the first non-disabled item as a fallback.\n    for (cursorPosition = 0; cursorPosition < itemsMatchingFirstChar.length; cursorPosition++) {\n        if (!isItemAtIndexDisabled(itemsMatchingFirstChar[cursorPosition].index)) {\n            newCursorPosition = cursorPosition;\n            break;\n        }\n    }\n    // Advance cursor to first item matching the firstChar that is positioned\n    // after starting item. Cursor is unchanged from fallback if there's no\n    // such item.\n    for (; cursorPosition < itemsMatchingFirstChar.length; cursorPosition++) {\n        if (itemsMatchingFirstChar[cursorPosition].index > focusedItemIndex &&\n            !isItemAtIndexDisabled(itemsMatchingFirstChar[cursorPosition].index)) {\n            newCursorPosition = cursorPosition;\n            break;\n        }\n    }\n    if (newCursorPosition !== -1) {\n        state.sortedIndexCursor = newCursorPosition;\n        return itemsMatchingFirstChar[state.sortedIndexCursor].index;\n    }\n    return -1;\n}\n/**\n * Attempts to find the next item that matches all of the typeahead buffer.\n * Wraps around if at end of options. Returns -1 if no match is found.\n */\nfunction matchAllChars(sortedIndexByFirstChar, isItemAtIndexDisabled, state) {\n    var firstChar = state.typeaheadBuffer[0];\n    var itemsMatchingFirstChar = sortedIndexByFirstChar.get(firstChar);\n    if (!itemsMatchingFirstChar) {\n        return -1;\n    }\n    // Do nothing if text already matches\n    var startingItem = itemsMatchingFirstChar[state.sortedIndexCursor];\n    if (startingItem.text.lastIndexOf(state.typeaheadBuffer, 0) === 0 &&\n        !isItemAtIndexDisabled(startingItem.index)) {\n        return startingItem.index;\n    }\n    // Find next item that matches completely; if no match, we'll eventually\n    // loop around to same position\n    var cursorPosition = (state.sortedIndexCursor + 1) % itemsMatchingFirstChar.length;\n    var nextCursorPosition = -1;\n    while (cursorPosition !== state.sortedIndexCursor) {\n        var currentItem = itemsMatchingFirstChar[cursorPosition];\n        var matches = currentItem.text.lastIndexOf(state.typeaheadBuffer, 0) === 0;\n        var isEnabled = !isItemAtIndexDisabled(currentItem.index);\n        if (matches && isEnabled) {\n            nextCursorPosition = cursorPosition;\n            break;\n        }\n        cursorPosition = (cursorPosition + 1) % itemsMatchingFirstChar.length;\n    }\n    if (nextCursorPosition !== -1) {\n        state.sortedIndexCursor = nextCursorPosition;\n        return itemsMatchingFirstChar[state.sortedIndexCursor].index;\n    }\n    return -1;\n}\n/**\n * Whether or not the given typeahead instaance state is currently typing.\n *\n * @param state The typeahead state instance. See `initState`.\n */\nexport function isTypingInProgress(state) {\n    return state.typeaheadBuffer.length > 0;\n}\n/**\n * Clears the typeahaed buffer so that it resets item matching to the first\n * character.\n *\n * @param state The typeahead state instance. See `initState`.\n */\nexport function clearBuffer(state) {\n    state.typeaheadBuffer = '';\n}\n/**\n * Given a keydown event, it calculates whether or not to automatically focus a\n * list item depending on what was typed mimicing the typeahead functionality of\n * a standard <select> element that is open.\n *\n * @param opts Options and accessors\n *   - event - the KeyboardEvent to handle and parse\n *   - sortedIndexByFirstChar - output of `initSortedIndex(...)`\n *   - focusedItemIndex - the index of the currently focused item\n *   - focusItemAtIndex - function that focuses a list item at given index\n *   - isItemAtFocusedIndexDisabled - whether or not the currently focused item\n *      is disabled\n *   - isTargetListItem - whether or not the event target is a list item\n * @param state The typeahead state instance. See `initState`.\n *\n * @returns index of the item matched by the keydown. -1 if not matched.\n */\nexport function handleKeydown(opts, state) {\n    var event = opts.event, isTargetListItem = opts.isTargetListItem, focusedItemIndex = opts.focusedItemIndex, focusItemAtIndex = opts.focusItemAtIndex, sortedIndexByFirstChar = opts.sortedIndexByFirstChar, isItemAtIndexDisabled = opts.isItemAtIndexDisabled;\n    var isArrowLeft = normalizeKey(event) === 'ArrowLeft';\n    var isArrowUp = normalizeKey(event) === 'ArrowUp';\n    var isArrowRight = normalizeKey(event) === 'ArrowRight';\n    var isArrowDown = normalizeKey(event) === 'ArrowDown';\n    var isHome = normalizeKey(event) === 'Home';\n    var isEnd = normalizeKey(event) === 'End';\n    var isEnter = normalizeKey(event) === 'Enter';\n    var isSpace = normalizeKey(event) === 'Spacebar';\n    if (event.ctrlKey || event.metaKey || isArrowLeft || isArrowUp ||\n        isArrowRight || isArrowDown || isHome || isEnd || isEnter) {\n        return -1;\n    }\n    var isCharacterKey = !isSpace && event.key.length === 1;\n    if (isCharacterKey) {\n        preventDefaultEvent(event);\n        var matchItemOpts = {\n            focusItemAtIndex: focusItemAtIndex,\n            focusedItemIndex: focusedItemIndex,\n            nextChar: event.key.toLowerCase(),\n            sortedIndexByFirstChar: sortedIndexByFirstChar,\n            skipFocus: false,\n            isItemAtIndexDisabled: isItemAtIndexDisabled,\n        };\n        return matchItem(matchItemOpts, state);\n    }\n    if (!isSpace) {\n        return -1;\n    }\n    if (isTargetListItem) {\n        preventDefaultEvent(event);\n    }\n    var typeaheadOnListItem = isTargetListItem && isTypingInProgress(state);\n    if (typeaheadOnListItem) {\n        var matchItemOpts = {\n            focusItemAtIndex: focusItemAtIndex,\n            focusedItemIndex: focusedItemIndex,\n            nextChar: ' ',\n            sortedIndexByFirstChar: sortedIndexByFirstChar,\n            skipFocus: false,\n            isItemAtIndexDisabled: isItemAtIndexDisabled,\n        };\n        // space participates in typeahead matching if in rapid typing mode\n        return matchItem(matchItemOpts, state);\n    }\n    return -1;\n}\n//# sourceMappingURL=typeahead.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __assign, __extends } from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { normalizeKey } from '@material/dom/keyboard';\nimport { cssClasses, numbers, strings } from './constants';\nimport { preventDefaultEvent } from './events';\nimport * as typeahead from './typeahead';\nfunction isNumberArray(selectedIndex) {\n    return selectedIndex instanceof Array;\n}\nvar MDCListFoundation = /** @class */ (function (_super) {\n    __extends(MDCListFoundation, _super);\n    function MDCListFoundation(adapter) {\n        var _this = _super.call(this, __assign(__assign({}, MDCListFoundation.defaultAdapter), adapter)) || this;\n        _this.wrapFocus = false;\n        _this.isVertical = true;\n        _this.isSingleSelectionList = false;\n        _this.selectedIndex = numbers.UNSET_INDEX;\n        _this.focusedItemIndex = numbers.UNSET_INDEX;\n        _this.useActivatedClass = false;\n        _this.useSelectedAttr = false;\n        _this.ariaCurrentAttrValue = null;\n        _this.isCheckboxList = false;\n        _this.isRadioList = false;\n        _this.hasTypeahead = false;\n        // Transiently holds current typeahead prefix from user.\n        _this.typeaheadState = typeahead.initState();\n        _this.sortedIndexByFirstChar = new Map();\n        return _this;\n    }\n    Object.defineProperty(MDCListFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCListFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCListFoundation, \"numbers\", {\n        get: function () {\n            return numbers;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCListFoundation, \"defaultAdapter\", {\n        get: function () {\n            return {\n                addClassForElementIndex: function () { return undefined; },\n                focusItemAtIndex: function () { return undefined; },\n                getAttributeForElementIndex: function () { return null; },\n                getFocusedElementIndex: function () { return 0; },\n                getListItemCount: function () { return 0; },\n                hasCheckboxAtIndex: function () { return false; },\n                hasRadioAtIndex: function () { return false; },\n                isCheckboxCheckedAtIndex: function () { return false; },\n                isFocusInsideList: function () { return false; },\n                isRootFocused: function () { return false; },\n                listItemAtIndexHasClass: function () { return false; },\n                notifyAction: function () { return undefined; },\n                removeClassForElementIndex: function () { return undefined; },\n                setAttributeForElementIndex: function () { return undefined; },\n                setCheckedCheckboxOrRadioAtIndex: function () { return undefined; },\n                setTabIndexForListItemChildren: function () { return undefined; },\n                getPrimaryTextAtIndex: function () { return ''; },\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MDCListFoundation.prototype.layout = function () {\n        if (this.adapter.getListItemCount() === 0) {\n            return;\n        }\n        // TODO(b/172274142): consider all items when determining the list's type.\n        if (this.adapter.hasCheckboxAtIndex(0)) {\n            this.isCheckboxList = true;\n        }\n        else if (this.adapter.hasRadioAtIndex(0)) {\n            this.isRadioList = true;\n        }\n        else {\n            this.maybeInitializeSingleSelection();\n        }\n        if (this.hasTypeahead) {\n            this.sortedIndexByFirstChar = this.typeaheadInitSortedIndex();\n        }\n    };\n    /** Returns the index of the item that was last focused. */\n    MDCListFoundation.prototype.getFocusedItemIndex = function () {\n        return this.focusedItemIndex;\n    };\n    /** Toggles focus wrapping with keyboard navigation. */\n    MDCListFoundation.prototype.setWrapFocus = function (value) {\n        this.wrapFocus = value;\n    };\n    /**\n     * Toggles orientation direction for keyboard navigation (true for vertical,\n     * false for horizontal).\n     */\n    MDCListFoundation.prototype.setVerticalOrientation = function (value) {\n        this.isVertical = value;\n    };\n    /** Toggles single-selection behavior. */\n    MDCListFoundation.prototype.setSingleSelection = function (value) {\n        this.isSingleSelectionList = value;\n        if (value) {\n            this.maybeInitializeSingleSelection();\n            this.selectedIndex = this.getSelectedIndexFromDOM();\n        }\n    };\n    /**\n     * Automatically determines whether the list is single selection list. If so,\n     * initializes the internal state to match the selected item.\n     */\n    MDCListFoundation.prototype.maybeInitializeSingleSelection = function () {\n        var selectedItemIndex = this.getSelectedIndexFromDOM();\n        if (selectedItemIndex === numbers.UNSET_INDEX)\n            return;\n        var hasActivatedClass = this.adapter.listItemAtIndexHasClass(selectedItemIndex, cssClasses.LIST_ITEM_ACTIVATED_CLASS);\n        if (hasActivatedClass) {\n            this.setUseActivatedClass(true);\n        }\n        this.isSingleSelectionList = true;\n        this.selectedIndex = selectedItemIndex;\n    };\n    /** @return Index of the first selected item based on the DOM state. */\n    MDCListFoundation.prototype.getSelectedIndexFromDOM = function () {\n        var selectedIndex = numbers.UNSET_INDEX;\n        var listItemsCount = this.adapter.getListItemCount();\n        for (var i = 0; i < listItemsCount; i++) {\n            var hasSelectedClass = this.adapter.listItemAtIndexHasClass(i, cssClasses.LIST_ITEM_SELECTED_CLASS);\n            var hasActivatedClass = this.adapter.listItemAtIndexHasClass(i, cssClasses.LIST_ITEM_ACTIVATED_CLASS);\n            if (!(hasSelectedClass || hasActivatedClass)) {\n                continue;\n            }\n            selectedIndex = i;\n            break;\n        }\n        return selectedIndex;\n    };\n    /**\n     * Sets whether typeahead is enabled on the list.\n     * @param hasTypeahead Whether typeahead is enabled.\n     */\n    MDCListFoundation.prototype.setHasTypeahead = function (hasTypeahead) {\n        this.hasTypeahead = hasTypeahead;\n        if (hasTypeahead) {\n            this.sortedIndexByFirstChar = this.typeaheadInitSortedIndex();\n        }\n    };\n    /**\n     * @return Whether typeahead is currently matching a user-specified prefix.\n     */\n    MDCListFoundation.prototype.isTypeaheadInProgress = function () {\n        return this.hasTypeahead &&\n            typeahead.isTypingInProgress(this.typeaheadState);\n    };\n    /** Toggle use of the \"activated\" CSS class. */\n    MDCListFoundation.prototype.setUseActivatedClass = function (useActivated) {\n        this.useActivatedClass = useActivated;\n    };\n    /**\n     * Toggles use of the selected attribute (true for aria-selected, false for\n     * aria-checked).\n     */\n    MDCListFoundation.prototype.setUseSelectedAttribute = function (useSelected) {\n        this.useSelectedAttr = useSelected;\n    };\n    MDCListFoundation.prototype.getSelectedIndex = function () {\n        return this.selectedIndex;\n    };\n    MDCListFoundation.prototype.setSelectedIndex = function (index, _a) {\n        var _b = _a === void 0 ? {} : _a, forceUpdate = _b.forceUpdate;\n        if (!this.isIndexValid(index)) {\n            return;\n        }\n        if (this.isCheckboxList) {\n            this.setCheckboxAtIndex(index);\n        }\n        else if (this.isRadioList) {\n            this.setRadioAtIndex(index);\n        }\n        else {\n            this.setSingleSelectionAtIndex(index, { forceUpdate: forceUpdate });\n        }\n    };\n    /**\n     * Focus in handler for the list items.\n     */\n    MDCListFoundation.prototype.handleFocusIn = function (listItemIndex) {\n        if (listItemIndex >= 0) {\n            this.focusedItemIndex = listItemIndex;\n            this.adapter.setAttributeForElementIndex(listItemIndex, 'tabindex', '0');\n            this.adapter.setTabIndexForListItemChildren(listItemIndex, '0');\n        }\n    };\n    /**\n     * Focus out handler for the list items.\n     */\n    MDCListFoundation.prototype.handleFocusOut = function (listItemIndex) {\n        var _this = this;\n        if (listItemIndex >= 0) {\n            this.adapter.setAttributeForElementIndex(listItemIndex, 'tabindex', '-1');\n            this.adapter.setTabIndexForListItemChildren(listItemIndex, '-1');\n        }\n        /**\n         * Between Focusout & Focusin some browsers do not have focus on any\n         * element. Setting a delay to wait till the focus is moved to next element.\n         */\n        setTimeout(function () {\n            if (!_this.adapter.isFocusInsideList()) {\n                _this.setTabindexToFirstSelectedOrFocusedItem();\n            }\n        }, 0);\n    };\n    /**\n     * Key handler for the list.\n     */\n    MDCListFoundation.prototype.handleKeydown = function (event, isRootListItem, listItemIndex) {\n        var _this = this;\n        var isArrowLeft = normalizeKey(event) === 'ArrowLeft';\n        var isArrowUp = normalizeKey(event) === 'ArrowUp';\n        var isArrowRight = normalizeKey(event) === 'ArrowRight';\n        var isArrowDown = normalizeKey(event) === 'ArrowDown';\n        var isHome = normalizeKey(event) === 'Home';\n        var isEnd = normalizeKey(event) === 'End';\n        var isEnter = normalizeKey(event) === 'Enter';\n        var isSpace = normalizeKey(event) === 'Spacebar';\n        // Have to check both upper and lower case, because having caps lock on\n        // affects the value.\n        var isLetterA = event.key === 'A' || event.key === 'a';\n        if (this.adapter.isRootFocused()) {\n            if (isArrowUp || isEnd) {\n                event.preventDefault();\n                this.focusLastElement();\n            }\n            else if (isArrowDown || isHome) {\n                event.preventDefault();\n                this.focusFirstElement();\n            }\n            if (this.hasTypeahead) {\n                var handleKeydownOpts = {\n                    event: event,\n                    focusItemAtIndex: function (index) {\n                        _this.focusItemAtIndex(index);\n                    },\n                    focusedItemIndex: -1,\n                    isTargetListItem: isRootListItem,\n                    sortedIndexByFirstChar: this.sortedIndexByFirstChar,\n                    isItemAtIndexDisabled: function (index) {\n                        return _this.adapter.listItemAtIndexHasClass(index, cssClasses.LIST_ITEM_DISABLED_CLASS);\n                    },\n                };\n                typeahead.handleKeydown(handleKeydownOpts, this.typeaheadState);\n            }\n            return;\n        }\n        var currentIndex = this.adapter.getFocusedElementIndex();\n        if (currentIndex === -1) {\n            currentIndex = listItemIndex;\n            if (currentIndex < 0) {\n                // If this event doesn't have a mdc-list-item ancestor from the\n                // current list (not from a sublist), return early.\n                return;\n            }\n        }\n        if ((this.isVertical && isArrowDown) ||\n            (!this.isVertical && isArrowRight)) {\n            preventDefaultEvent(event);\n            this.focusNextElement(currentIndex);\n        }\n        else if ((this.isVertical && isArrowUp) || (!this.isVertical && isArrowLeft)) {\n            preventDefaultEvent(event);\n            this.focusPrevElement(currentIndex);\n        }\n        else if (isHome) {\n            preventDefaultEvent(event);\n            this.focusFirstElement();\n        }\n        else if (isEnd) {\n            preventDefaultEvent(event);\n            this.focusLastElement();\n        }\n        else if (isLetterA && event.ctrlKey && this.isCheckboxList) {\n            event.preventDefault();\n            this.toggleAll(this.selectedIndex === numbers.UNSET_INDEX ?\n                [] :\n                this.selectedIndex);\n        }\n        else if (isEnter || isSpace) {\n            if (isRootListItem) {\n                // Return early if enter key is pressed on anchor element which triggers\n                // synthetic MouseEvent event.\n                var target = event.target;\n                if (target && target.tagName === 'A' && isEnter) {\n                    return;\n                }\n                preventDefaultEvent(event);\n                if (this.adapter.listItemAtIndexHasClass(currentIndex, cssClasses.LIST_ITEM_DISABLED_CLASS)) {\n                    return;\n                }\n                if (!this.isTypeaheadInProgress()) {\n                    if (this.isSelectableList()) {\n                        this.setSelectedIndexOnAction(currentIndex);\n                    }\n                    this.adapter.notifyAction(currentIndex);\n                }\n            }\n        }\n        if (this.hasTypeahead) {\n            var handleKeydownOpts = {\n                event: event,\n                focusItemAtIndex: function (index) {\n                    _this.focusItemAtIndex(index);\n                },\n                focusedItemIndex: this.focusedItemIndex,\n                isTargetListItem: isRootListItem,\n                sortedIndexByFirstChar: this.sortedIndexByFirstChar,\n                isItemAtIndexDisabled: function (index) { return _this.adapter.listItemAtIndexHasClass(index, cssClasses.LIST_ITEM_DISABLED_CLASS); },\n            };\n            typeahead.handleKeydown(handleKeydownOpts, this.typeaheadState);\n        }\n    };\n    /**\n     * Click handler for the list.\n     */\n    MDCListFoundation.prototype.handleClick = function (index, toggleCheckbox) {\n        if (index === numbers.UNSET_INDEX) {\n            return;\n        }\n        if (this.adapter.listItemAtIndexHasClass(index, cssClasses.LIST_ITEM_DISABLED_CLASS)) {\n            return;\n        }\n        if (this.isSelectableList()) {\n            this.setSelectedIndexOnAction(index, toggleCheckbox);\n        }\n        this.adapter.notifyAction(index);\n    };\n    /**\n     * Focuses the next element on the list.\n     */\n    MDCListFoundation.prototype.focusNextElement = function (index) {\n        var count = this.adapter.getListItemCount();\n        var nextIndex = index + 1;\n        if (nextIndex >= count) {\n            if (this.wrapFocus) {\n                nextIndex = 0;\n            }\n            else {\n                // Return early because last item is already focused.\n                return index;\n            }\n        }\n        this.focusItemAtIndex(nextIndex);\n        return nextIndex;\n    };\n    /**\n     * Focuses the previous element on the list.\n     */\n    MDCListFoundation.prototype.focusPrevElement = function (index) {\n        var prevIndex = index - 1;\n        if (prevIndex < 0) {\n            if (this.wrapFocus) {\n                prevIndex = this.adapter.getListItemCount() - 1;\n            }\n            else {\n                // Return early because first item is already focused.\n                return index;\n            }\n        }\n        this.focusItemAtIndex(prevIndex);\n        return prevIndex;\n    };\n    MDCListFoundation.prototype.focusFirstElement = function () {\n        this.focusItemAtIndex(0);\n        return 0;\n    };\n    MDCListFoundation.prototype.focusLastElement = function () {\n        var lastIndex = this.adapter.getListItemCount() - 1;\n        this.focusItemAtIndex(lastIndex);\n        return lastIndex;\n    };\n    MDCListFoundation.prototype.focusInitialElement = function () {\n        var initialIndex = this.getFirstSelectedOrFocusedItemIndex();\n        this.focusItemAtIndex(initialIndex);\n        return initialIndex;\n    };\n    /**\n     * @param itemIndex Index of the list item\n     * @param isEnabled Sets the list item to enabled or disabled.\n     */\n    MDCListFoundation.prototype.setEnabled = function (itemIndex, isEnabled) {\n        if (!this.isIndexValid(itemIndex)) {\n            return;\n        }\n        if (isEnabled) {\n            this.adapter.removeClassForElementIndex(itemIndex, cssClasses.LIST_ITEM_DISABLED_CLASS);\n            this.adapter.setAttributeForElementIndex(itemIndex, strings.ARIA_DISABLED, 'false');\n        }\n        else {\n            this.adapter.addClassForElementIndex(itemIndex, cssClasses.LIST_ITEM_DISABLED_CLASS);\n            this.adapter.setAttributeForElementIndex(itemIndex, strings.ARIA_DISABLED, 'true');\n        }\n    };\n    MDCListFoundation.prototype.setSingleSelectionAtIndex = function (index, _a) {\n        var _b = _a === void 0 ? {} : _a, forceUpdate = _b.forceUpdate;\n        if (this.selectedIndex === index && !forceUpdate) {\n            return;\n        }\n        var selectedClassName = cssClasses.LIST_ITEM_SELECTED_CLASS;\n        if (this.useActivatedClass) {\n            selectedClassName = cssClasses.LIST_ITEM_ACTIVATED_CLASS;\n        }\n        if (this.selectedIndex !== numbers.UNSET_INDEX) {\n            this.adapter.removeClassForElementIndex(this.selectedIndex, selectedClassName);\n        }\n        this.setAriaForSingleSelectionAtIndex(index);\n        this.setTabindexAtIndex(index);\n        if (index !== numbers.UNSET_INDEX) {\n            this.adapter.addClassForElementIndex(index, selectedClassName);\n        }\n        this.selectedIndex = index;\n    };\n    /**\n     * Sets aria attribute for single selection at given index.\n     */\n    MDCListFoundation.prototype.setAriaForSingleSelectionAtIndex = function (index) {\n        // Detect the presence of aria-current and get the value only during list\n        // initialization when it is in unset state.\n        if (this.selectedIndex === numbers.UNSET_INDEX) {\n            this.ariaCurrentAttrValue =\n                this.adapter.getAttributeForElementIndex(index, strings.ARIA_CURRENT);\n        }\n        var isAriaCurrent = this.ariaCurrentAttrValue !== null;\n        var ariaAttribute = isAriaCurrent ? strings.ARIA_CURRENT : strings.ARIA_SELECTED;\n        if (this.selectedIndex !== numbers.UNSET_INDEX) {\n            this.adapter.setAttributeForElementIndex(this.selectedIndex, ariaAttribute, 'false');\n        }\n        if (index !== numbers.UNSET_INDEX) {\n            var ariaAttributeValue = isAriaCurrent ? this.ariaCurrentAttrValue : 'true';\n            this.adapter.setAttributeForElementIndex(index, ariaAttribute, ariaAttributeValue);\n        }\n    };\n    /**\n     * Returns the attribute to use for indicating selection status.\n     */\n    MDCListFoundation.prototype.getSelectionAttribute = function () {\n        return this.useSelectedAttr ? strings.ARIA_SELECTED : strings.ARIA_CHECKED;\n    };\n    /**\n     * Toggles radio at give index. Radio doesn't change the checked state if it\n     * is already checked.\n     */\n    MDCListFoundation.prototype.setRadioAtIndex = function (index) {\n        var selectionAttribute = this.getSelectionAttribute();\n        this.adapter.setCheckedCheckboxOrRadioAtIndex(index, true);\n        if (this.selectedIndex !== numbers.UNSET_INDEX) {\n            this.adapter.setAttributeForElementIndex(this.selectedIndex, selectionAttribute, 'false');\n        }\n        this.adapter.setAttributeForElementIndex(index, selectionAttribute, 'true');\n        this.selectedIndex = index;\n    };\n    MDCListFoundation.prototype.setCheckboxAtIndex = function (index) {\n        var selectionAttribute = this.getSelectionAttribute();\n        for (var i = 0; i < this.adapter.getListItemCount(); i++) {\n            var isChecked = false;\n            if (index.indexOf(i) >= 0) {\n                isChecked = true;\n            }\n            this.adapter.setCheckedCheckboxOrRadioAtIndex(i, isChecked);\n            this.adapter.setAttributeForElementIndex(i, selectionAttribute, isChecked ? 'true' : 'false');\n        }\n        this.selectedIndex = index;\n    };\n    MDCListFoundation.prototype.setTabindexAtIndex = function (index) {\n        if (this.focusedItemIndex === numbers.UNSET_INDEX && index !== 0) {\n            // If some list item was selected set first list item's tabindex to -1.\n            // Generally, tabindex is set to 0 on first list item of list that has no\n            // preselected items.\n            this.adapter.setAttributeForElementIndex(0, 'tabindex', '-1');\n        }\n        else if (this.focusedItemIndex >= 0 && this.focusedItemIndex !== index) {\n            this.adapter.setAttributeForElementIndex(this.focusedItemIndex, 'tabindex', '-1');\n        }\n        // Set the previous selection's tabindex to -1. We need this because\n        // in selection menus that are not visible, programmatically setting an\n        // option will not change focus but will change where tabindex should be 0.\n        if (!(this.selectedIndex instanceof Array) &&\n            this.selectedIndex !== index) {\n            this.adapter.setAttributeForElementIndex(this.selectedIndex, 'tabindex', '-1');\n        }\n        if (index !== numbers.UNSET_INDEX) {\n            this.adapter.setAttributeForElementIndex(index, 'tabindex', '0');\n        }\n    };\n    /**\n     * @return Return true if it is single selectin list, checkbox list or radio\n     *     list.\n     */\n    MDCListFoundation.prototype.isSelectableList = function () {\n        return this.isSingleSelectionList || this.isCheckboxList ||\n            this.isRadioList;\n    };\n    MDCListFoundation.prototype.setTabindexToFirstSelectedOrFocusedItem = function () {\n        var targetIndex = this.getFirstSelectedOrFocusedItemIndex();\n        this.setTabindexAtIndex(targetIndex);\n    };\n    MDCListFoundation.prototype.getFirstSelectedOrFocusedItemIndex = function () {\n        // Action lists retain focus on the most recently focused item.\n        if (!this.isSelectableList()) {\n            return Math.max(this.focusedItemIndex, 0);\n        }\n        // Single-selection lists focus the selected item.\n        if (typeof this.selectedIndex === 'number' &&\n            this.selectedIndex !== numbers.UNSET_INDEX) {\n            return this.selectedIndex;\n        }\n        // Multiple-selection lists focus the first selected item.\n        if (isNumberArray(this.selectedIndex) && this.selectedIndex.length > 0) {\n            return this.selectedIndex.reduce(function (minIndex, currentIndex) { return Math.min(minIndex, currentIndex); });\n        }\n        // Selection lists without a selection focus the first item.\n        return 0;\n    };\n    MDCListFoundation.prototype.isIndexValid = function (index) {\n        var _this = this;\n        if (index instanceof Array) {\n            if (!this.isCheckboxList) {\n                throw new Error('MDCListFoundation: Array of index is only supported for checkbox based list');\n            }\n            if (index.length === 0) {\n                return true;\n            }\n            else {\n                return index.some(function (i) { return _this.isIndexInRange(i); });\n            }\n        }\n        else if (typeof index === 'number') {\n            if (this.isCheckboxList) {\n                throw new Error(\"MDCListFoundation: Expected array of index for checkbox based list but got number: \" + index);\n            }\n            return this.isIndexInRange(index) ||\n                this.isSingleSelectionList && index === numbers.UNSET_INDEX;\n        }\n        else {\n            return false;\n        }\n    };\n    MDCListFoundation.prototype.isIndexInRange = function (index) {\n        var listSize = this.adapter.getListItemCount();\n        return index >= 0 && index < listSize;\n    };\n    /**\n     * Sets selected index on user action, toggles checkbox / radio based on\n     * toggleCheckbox value. User interaction should not toggle list item(s) when\n     * disabled.\n     */\n    MDCListFoundation.prototype.setSelectedIndexOnAction = function (index, toggleCheckbox) {\n        if (toggleCheckbox === void 0) { toggleCheckbox = true; }\n        if (this.isCheckboxList) {\n            this.toggleCheckboxAtIndex(index, toggleCheckbox);\n        }\n        else {\n            this.setSelectedIndex(index);\n        }\n    };\n    MDCListFoundation.prototype.toggleCheckboxAtIndex = function (index, toggleCheckbox) {\n        var selectionAttribute = this.getSelectionAttribute();\n        var isChecked = this.adapter.isCheckboxCheckedAtIndex(index);\n        if (toggleCheckbox) {\n            isChecked = !isChecked;\n            this.adapter.setCheckedCheckboxOrRadioAtIndex(index, isChecked);\n        }\n        this.adapter.setAttributeForElementIndex(index, selectionAttribute, isChecked ? 'true' : 'false');\n        // If none of the checkbox items are selected and selectedIndex is not\n        // initialized then provide a default value.\n        var selectedIndexes = this.selectedIndex === numbers.UNSET_INDEX ?\n            [] :\n            this.selectedIndex.slice();\n        if (isChecked) {\n            selectedIndexes.push(index);\n        }\n        else {\n            selectedIndexes = selectedIndexes.filter(function (i) { return i !== index; });\n        }\n        this.selectedIndex = selectedIndexes;\n    };\n    MDCListFoundation.prototype.focusItemAtIndex = function (index) {\n        this.adapter.focusItemAtIndex(index);\n        this.focusedItemIndex = index;\n    };\n    MDCListFoundation.prototype.toggleAll = function (currentlySelectedIndexes) {\n        var count = this.adapter.getListItemCount();\n        // If all items are selected, deselect everything.\n        if (currentlySelectedIndexes.length === count) {\n            this.setCheckboxAtIndex([]);\n        }\n        else {\n            // Otherwise select all enabled options.\n            var allIndexes = [];\n            for (var i = 0; i < count; i++) {\n                if (!this.adapter.listItemAtIndexHasClass(i, cssClasses.LIST_ITEM_DISABLED_CLASS) ||\n                    currentlySelectedIndexes.indexOf(i) > -1) {\n                    allIndexes.push(i);\n                }\n            }\n            this.setCheckboxAtIndex(allIndexes);\n        }\n    };\n    /**\n     * Given the next desired character from the user, adds it to the typeahead\n     * buffer. Then, attempts to find the next option matching the buffer. Wraps\n     * around if at the end of options.\n     *\n     * @param nextChar The next character to add to the prefix buffer.\n     * @param startingIndex The index from which to start matching. Only relevant\n     *     when starting a new match sequence. To start a new match sequence,\n     *     clear the buffer using `clearTypeaheadBuffer`, or wait for the buffer\n     *     to clear after a set interval defined in list foundation. Defaults to\n     *     the currently focused index.\n     * @return The index of the matched item, or -1 if no match.\n     */\n    MDCListFoundation.prototype.typeaheadMatchItem = function (nextChar, startingIndex, skipFocus) {\n        var _this = this;\n        if (skipFocus === void 0) { skipFocus = false; }\n        var opts = {\n            focusItemAtIndex: function (index) {\n                _this.focusItemAtIndex(index);\n            },\n            focusedItemIndex: startingIndex ? startingIndex : this.focusedItemIndex,\n            nextChar: nextChar,\n            sortedIndexByFirstChar: this.sortedIndexByFirstChar,\n            skipFocus: skipFocus,\n            isItemAtIndexDisabled: function (index) { return _this.adapter.listItemAtIndexHasClass(index, cssClasses.LIST_ITEM_DISABLED_CLASS); }\n        };\n        return typeahead.matchItem(opts, this.typeaheadState);\n    };\n    /**\n     * Initializes the MDCListTextAndIndex data structure by indexing the current\n     * list items by primary text.\n     *\n     * @return The primary texts of all the list items sorted by first character.\n     */\n    MDCListFoundation.prototype.typeaheadInitSortedIndex = function () {\n        return typeahead.initSortedIndex(this.adapter.getListItemCount(), this.adapter.getPrimaryTextAtIndex);\n    };\n    /**\n     * Clears the typeahead buffer.\n     */\n    MDCListFoundation.prototype.clearTypeaheadBuffer = function () {\n        typeahead.clearBuffer(this.typeaheadState);\n    };\n    return MDCListFoundation;\n}(MDCFoundation));\nexport { MDCListFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCListFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __extends } from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { closest, matches } from '@material/dom/ponyfill';\nimport { cssClasses, deprecatedClassNameMap, evolutionAttribute, evolutionClassNameMap, numbers, strings } from './constants';\nimport { MDCListFoundation } from './foundation';\nvar MDCList = /** @class */ (function (_super) {\n    __extends(MDCList, _super);\n    function MDCList() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(MDCList.prototype, \"vertical\", {\n        set: function (value) {\n            this.foundation.setVerticalOrientation(value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCList.prototype, \"listElements\", {\n        get: function () {\n            return Array.from(this.root.querySelectorAll(\".\" + this.classNameMap[cssClasses.LIST_ITEM_CLASS]));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCList.prototype, \"wrapFocus\", {\n        set: function (value) {\n            this.foundation.setWrapFocus(value);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCList.prototype, \"typeaheadInProgress\", {\n        /**\n         * @return Whether typeahead is currently matching a user-specified prefix.\n         */\n        get: function () {\n            return this.foundation.isTypeaheadInProgress();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCList.prototype, \"hasTypeahead\", {\n        /**\n         * Sets whether typeahead functionality is enabled on the list.\n         * @param hasTypeahead Whether typeahead is enabled.\n         */\n        set: function (hasTypeahead) {\n            this.foundation.setHasTypeahead(hasTypeahead);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCList.prototype, \"singleSelection\", {\n        set: function (isSingleSelectionList) {\n            this.foundation.setSingleSelection(isSingleSelectionList);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCList.prototype, \"selectedIndex\", {\n        get: function () {\n            return this.foundation.getSelectedIndex();\n        },\n        set: function (index) {\n            this.foundation.setSelectedIndex(index);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MDCList.attachTo = function (root) {\n        return new MDCList(root);\n    };\n    MDCList.prototype.initialSyncWithDOM = function () {\n        this.isEvolutionEnabled =\n            evolutionAttribute in this.root.dataset;\n        if (this.isEvolutionEnabled) {\n            this.classNameMap = evolutionClassNameMap;\n        }\n        else if (matches(this.root, strings.DEPRECATED_SELECTOR)) {\n            this.classNameMap = deprecatedClassNameMap;\n        }\n        else {\n            this.classNameMap =\n                Object.values(cssClasses)\n                    .reduce(function (obj, className) {\n                    obj[className] = className;\n                    return obj;\n                }, {});\n        }\n        this.handleClick = this.handleClickEvent.bind(this);\n        this.handleKeydown = this.handleKeydownEvent.bind(this);\n        this.focusInEventListener = this.handleFocusInEvent.bind(this);\n        this.focusOutEventListener = this.handleFocusOutEvent.bind(this);\n        this.listen('keydown', this.handleKeydown);\n        this.listen('click', this.handleClick);\n        this.listen('focusin', this.focusInEventListener);\n        this.listen('focusout', this.focusOutEventListener);\n        this.layout();\n        this.initializeListType();\n        this.ensureFocusable();\n    };\n    MDCList.prototype.destroy = function () {\n        this.unlisten('keydown', this.handleKeydown);\n        this.unlisten('click', this.handleClick);\n        this.unlisten('focusin', this.focusInEventListener);\n        this.unlisten('focusout', this.focusOutEventListener);\n    };\n    MDCList.prototype.layout = function () {\n        var direction = this.root.getAttribute(strings.ARIA_ORIENTATION);\n        this.vertical = direction !== strings.ARIA_ORIENTATION_HORIZONTAL;\n        var itemSelector = \".\" + this.classNameMap[cssClasses.LIST_ITEM_CLASS] + \":not([tabindex])\";\n        var childSelector = strings.FOCUSABLE_CHILD_ELEMENTS;\n        // List items need to have at least tabindex=-1 to be focusable.\n        var itemEls = this.root.querySelectorAll(itemSelector);\n        if (itemEls.length) {\n            Array.prototype.forEach.call(itemEls, function (el) {\n                el.setAttribute('tabindex', '-1');\n            });\n        }\n        // Child button/a elements are not tabbable until the list item is focused.\n        var focusableChildEls = this.root.querySelectorAll(childSelector);\n        if (focusableChildEls.length) {\n            Array.prototype.forEach.call(focusableChildEls, function (el) {\n                el.setAttribute('tabindex', '-1');\n            });\n        }\n        if (this.isEvolutionEnabled) {\n            this.foundation.setUseSelectedAttribute(true);\n        }\n        this.foundation.layout();\n    };\n    /**\n     * Extracts the primary text from a list item.\n     * @param item The list item element.\n     * @return The primary text in the element.\n     */\n    MDCList.prototype.getPrimaryText = function (item) {\n        var _a;\n        var primaryText = item.querySelector(\".\" + this.classNameMap[cssClasses.LIST_ITEM_PRIMARY_TEXT_CLASS]);\n        if (this.isEvolutionEnabled || primaryText) {\n            return (_a = primaryText === null || primaryText === void 0 ? void 0 : primaryText.textContent) !== null && _a !== void 0 ? _a : '';\n        }\n        var singleLineText = item.querySelector(\".\" + this.classNameMap[cssClasses.LIST_ITEM_TEXT_CLASS]);\n        return (singleLineText && singleLineText.textContent) || '';\n    };\n    /**\n     * Initialize selectedIndex value based on pre-selected list items.\n     */\n    MDCList.prototype.initializeListType = function () {\n        var _this = this;\n        this.isInteractive =\n            matches(this.root, strings.ARIA_INTERACTIVE_ROLES_SELECTOR);\n        if (this.isEvolutionEnabled && this.isInteractive) {\n            var selection = Array.from(this.root.querySelectorAll(strings.SELECTED_ITEM_SELECTOR), function (listItem) { return _this.listElements.indexOf(listItem); });\n            if (matches(this.root, strings.ARIA_MULTI_SELECTABLE_SELECTOR)) {\n                this.selectedIndex = selection;\n            }\n            else if (selection.length > 0) {\n                this.selectedIndex = selection[0];\n            }\n            return;\n        }\n        var checkboxListItems = this.root.querySelectorAll(strings.ARIA_ROLE_CHECKBOX_SELECTOR);\n        var radioSelectedListItem = this.root.querySelector(strings.ARIA_CHECKED_RADIO_SELECTOR);\n        if (checkboxListItems.length) {\n            var preselectedItems = this.root.querySelectorAll(strings.ARIA_CHECKED_CHECKBOX_SELECTOR);\n            this.selectedIndex = Array.from(preselectedItems, function (listItem) { return _this.listElements.indexOf(listItem); });\n        }\n        else if (radioSelectedListItem) {\n            this.selectedIndex = this.listElements.indexOf(radioSelectedListItem);\n        }\n    };\n    /**\n     * Updates the list item at itemIndex to the desired isEnabled state.\n     * @param itemIndex Index of the list item\n     * @param isEnabled Sets the list item to enabled or disabled.\n     */\n    MDCList.prototype.setEnabled = function (itemIndex, isEnabled) {\n        this.foundation.setEnabled(itemIndex, isEnabled);\n    };\n    /**\n     * Given the next desired character from the user, adds it to the typeahead\n     * buffer. Then, attempts to find the next option matching the buffer. Wraps\n     * around if at the end of options.\n     *\n     * @param nextChar The next character to add to the prefix buffer.\n     * @param startingIndex The index from which to start matching. Defaults to\n     *     the currently focused index.\n     * @return The index of the matched item.\n     */\n    MDCList.prototype.typeaheadMatchItem = function (nextChar, startingIndex) {\n        return this.foundation.typeaheadMatchItem(nextChar, startingIndex, /** skipFocus */ true);\n    };\n    MDCList.prototype.getDefaultFoundation = function () {\n        var _this = this;\n        // DO NOT INLINE this variable. For backward compatibility, foundations take\n        // a Partial<MDCFooAdapter>. To ensure we don't accidentally omit any\n        // methods, we need a separate, strongly typed adapter variable.\n        var adapter = {\n            addClassForElementIndex: function (index, className) {\n                var element = _this.listElements[index];\n                if (element) {\n                    element.classList.add(_this.classNameMap[className]);\n                }\n            },\n            focusItemAtIndex: function (index) {\n                var element = _this.listElements[index];\n                if (element) {\n                    element.focus();\n                }\n            },\n            getAttributeForElementIndex: function (index, attr) {\n                return _this.listElements[index].getAttribute(attr);\n            },\n            getFocusedElementIndex: function () {\n                return _this.listElements.indexOf(document.activeElement);\n            },\n            getListItemCount: function () { return _this.listElements.length; },\n            getPrimaryTextAtIndex: function (index) {\n                return _this.getPrimaryText(_this.listElements[index]);\n            },\n            hasCheckboxAtIndex: function (index) {\n                var listItem = _this.listElements[index];\n                return !!listItem.querySelector(strings.CHECKBOX_SELECTOR);\n            },\n            hasRadioAtIndex: function (index) {\n                var listItem = _this.listElements[index];\n                return !!listItem.querySelector(strings.RADIO_SELECTOR);\n            },\n            isCheckboxCheckedAtIndex: function (index) {\n                var listItem = _this.listElements[index];\n                var toggleEl = listItem.querySelector(strings.CHECKBOX_SELECTOR);\n                return toggleEl.checked;\n            },\n            isFocusInsideList: function () {\n                return _this.root !== document.activeElement &&\n                    _this.root.contains(document.activeElement);\n            },\n            isRootFocused: function () { return document.activeElement === _this.root; },\n            listItemAtIndexHasClass: function (index, className) {\n                return _this.listElements[index].classList.contains(_this.classNameMap[className]);\n            },\n            notifyAction: function (index) {\n                _this.emit(strings.ACTION_EVENT, { index: index }, /** shouldBubble */ true);\n            },\n            removeClassForElementIndex: function (index, className) {\n                var element = _this.listElements[index];\n                if (element) {\n                    element.classList.remove(_this.classNameMap[className]);\n                }\n            },\n            setAttributeForElementIndex: function (index, attr, value) {\n                var element = _this.listElements[index];\n                if (element) {\n                    element.setAttribute(attr, value);\n                }\n            },\n            setCheckedCheckboxOrRadioAtIndex: function (index, isChecked) {\n                var listItem = _this.listElements[index];\n                var toggleEl = listItem.querySelector(strings.CHECKBOX_RADIO_SELECTOR);\n                toggleEl.checked = isChecked;\n                var event = document.createEvent('Event');\n                event.initEvent('change', true, true);\n                toggleEl.dispatchEvent(event);\n            },\n            setTabIndexForListItemChildren: function (listItemIndex, tabIndexValue) {\n                var element = _this.listElements[listItemIndex];\n                var selector = strings.CHILD_ELEMENTS_TO_TOGGLE_TABINDEX;\n                Array.prototype.forEach.call(element.querySelectorAll(selector), function (el) {\n                    el.setAttribute('tabindex', tabIndexValue);\n                });\n            },\n        };\n        return new MDCListFoundation(adapter);\n    };\n    /**\n     * Ensures that at least one item is focusable if the list is interactive and\n     * doesn't specify a suitable tabindex.\n     */\n    MDCList.prototype.ensureFocusable = function () {\n        if (this.isEvolutionEnabled && this.isInteractive) {\n            if (!this.root.querySelector(\".\" + this.classNameMap[cssClasses.LIST_ITEM_CLASS] + \"[tabindex=\\\"0\\\"]\")) {\n                var index = this.initialFocusIndex();\n                if (index !== -1) {\n                    this.listElements[index].tabIndex = 0;\n                }\n            }\n        }\n    };\n    MDCList.prototype.initialFocusIndex = function () {\n        if (this.selectedIndex instanceof Array && this.selectedIndex.length > 0) {\n            return this.selectedIndex[0];\n        }\n        if (typeof this.selectedIndex === 'number' &&\n            this.selectedIndex !== numbers.UNSET_INDEX) {\n            return this.selectedIndex;\n        }\n        var el = this.root.querySelector(\".\" + this.classNameMap[cssClasses.LIST_ITEM_CLASS] + \":not(.\" + this.classNameMap[cssClasses.LIST_ITEM_DISABLED_CLASS] + \")\");\n        if (el === null) {\n            return -1;\n        }\n        return this.getListItemIndex(el);\n    };\n    /**\n     * Used to figure out which list item this event is targetting. Or returns -1\n     * if there is no list item\n     */\n    MDCList.prototype.getListItemIndex = function (el) {\n        var nearestParent = closest(el, \".\" + this.classNameMap[cssClasses.LIST_ITEM_CLASS] + \", .\" + this.classNameMap[cssClasses.ROOT]);\n        // Get the index of the element if it is a list item.\n        if (nearestParent &&\n            matches(nearestParent, \".\" + this.classNameMap[cssClasses.LIST_ITEM_CLASS])) {\n            return this.listElements.indexOf(nearestParent);\n        }\n        return -1;\n    };\n    /**\n     * Used to figure out which element was clicked before sending the event to\n     * the foundation.\n     */\n    MDCList.prototype.handleFocusInEvent = function (evt) {\n        var index = this.getListItemIndex(evt.target);\n        this.foundation.handleFocusIn(index);\n    };\n    /**\n     * Used to figure out which element was clicked before sending the event to\n     * the foundation.\n     */\n    MDCList.prototype.handleFocusOutEvent = function (evt) {\n        var index = this.getListItemIndex(evt.target);\n        this.foundation.handleFocusOut(index);\n    };\n    /**\n     * Used to figure out which element was focused when keydown event occurred\n     * before sending the event to the foundation.\n     */\n    MDCList.prototype.handleKeydownEvent = function (evt) {\n        var index = this.getListItemIndex(evt.target);\n        var target = evt.target;\n        this.foundation.handleKeydown(evt, target.classList.contains(this.classNameMap[cssClasses.LIST_ITEM_CLASS]), index);\n    };\n    /**\n     * Used to figure out which element was clicked before sending the event to\n     * the foundation.\n     */\n    MDCList.prototype.handleClickEvent = function (evt) {\n        var index = this.getListItemIndex(evt.target);\n        var target = evt.target;\n        // Toggle the checkbox only if it's not the target of the event, or the\n        // checkbox will have 2 change events.\n        var toggleCheckbox = !matches(target, strings.CHECKBOX_RADIO_SELECTOR);\n        this.foundation.handleClick(index, toggleCheckbox);\n    };\n    return MDCList;\n}(MDCComponent));\nexport { MDCList };\n//# sourceMappingURL=component.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __assign, __extends, __values } from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { Corner, CornerBit, cssClasses, numbers, strings } from './constants';\nvar MDCMenuSurfaceFoundation = /** @class */ (function (_super) {\n    __extends(MDCMenuSurfaceFoundation, _super);\n    function MDCMenuSurfaceFoundation(adapter) {\n        var _this = _super.call(this, __assign(__assign({}, MDCMenuSurfaceFoundation.defaultAdapter), adapter)) || this;\n        _this.isSurfaceOpen = false;\n        _this.isQuickOpen = false;\n        _this.isHoistedElement = false;\n        _this.isFixedPosition = false;\n        _this.isHorizontallyCenteredOnViewport = false;\n        _this.maxHeight = 0;\n        _this.openAnimationEndTimerId = 0;\n        _this.closeAnimationEndTimerId = 0;\n        _this.animationRequestId = 0;\n        _this.anchorCorner = Corner.TOP_START;\n        /**\n         * Corner of the menu surface to which menu surface is attached to anchor.\n         *\n         *  Anchor corner --->+----------+\n         *                    |  ANCHOR  |\n         *                    +----------+\n         *  Origin corner --->+--------------+\n         *                    |              |\n         *                    |              |\n         *                    | MENU SURFACE |\n         *                    |              |\n         *                    |              |\n         *                    +--------------+\n         */\n        _this.originCorner = Corner.TOP_START;\n        _this.anchorMargin = { top: 0, right: 0, bottom: 0, left: 0 };\n        _this.position = { x: 0, y: 0 };\n        return _this;\n    }\n    Object.defineProperty(MDCMenuSurfaceFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuSurfaceFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuSurfaceFoundation, \"numbers\", {\n        get: function () {\n            return numbers;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuSurfaceFoundation, \"Corner\", {\n        get: function () {\n            return Corner;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MDCMenuSurfaceFoundation, \"defaultAdapter\", {\n        /**\n         * @see {@link MDCMenuSurfaceAdapter} for typing information on parameters and return types.\n         */\n        get: function () {\n            // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n            return {\n                addClass: function () { return undefined; },\n                removeClass: function () { return undefined; },\n                hasClass: function () { return false; },\n                hasAnchor: function () { return false; },\n                isElementInContainer: function () { return false; },\n                isFocused: function () { return false; },\n                isRtl: function () { return false; },\n                getInnerDimensions: function () { return ({ height: 0, width: 0 }); },\n                getAnchorDimensions: function () { return null; },\n                getWindowDimensions: function () { return ({ height: 0, width: 0 }); },\n                getBodyDimensions: function () { return ({ height: 0, width: 0 }); },\n                getWindowScroll: function () { return ({ x: 0, y: 0 }); },\n                setPosition: function () { return undefined; },\n                setMaxHeight: function () { return undefined; },\n                setTransformOrigin: function () { return undefined; },\n                saveFocus: function () { return undefined; },\n                restoreFocus: function () { return undefined; },\n                notifyClose: function () { return undefined; },\n                notifyOpen: function () { return undefined; },\n                notifyClosing: function () { return undefined; },\n            };\n            // tslint:enable:object-literal-sort-keys\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MDCMenuSurfaceFoundation.prototype.init = function () {\n        var _a = MDCMenuSurfaceFoundation.cssClasses, ROOT = _a.ROOT, OPEN = _a.OPEN;\n        if (!this.adapter.hasClass(ROOT)) {\n            throw new Error(ROOT + \" class required in root element.\");\n        }\n        if (this.adapter.hasClass(OPEN)) {\n            this.isSurfaceOpen = true;\n        }\n    };\n    MDCMenuSurfaceFoundation.prototype.destroy = function () {\n        clearTimeout(this.openAnimationEndTimerId);\n        clearTimeout(this.closeAnimationEndTimerId);\n        // Cancel any currently running animations.\n        cancelAnimationFrame(this.animationRequestId);\n    };\n    /**\n     * @param corner Default anchor corner alignment of top-left menu surface\n     *     corner.\n     */\n    MDCMenuSurfaceFoundation.prototype.setAnchorCorner = function (corner) {\n        this.anchorCorner = corner;\n    };\n    /**\n     * Flip menu corner horizontally.\n     */\n    MDCMenuSurfaceFoundation.prototype.flipCornerHorizontally = function () {\n        this.originCorner = this.originCorner ^ CornerBit.RIGHT;\n    };\n    /**\n     * @param margin Set of margin values from anchor.\n     */\n    MDCMenuSurfaceFoundation.prototype.setAnchorMargin = function (margin) {\n        this.anchorMargin.top = margin.top || 0;\n        this.anchorMargin.right = margin.right || 0;\n        this.anchorMargin.bottom = margin.bottom || 0;\n        this.anchorMargin.left = margin.left || 0;\n    };\n    /** Used to indicate if the menu-surface is hoisted to the body. */\n    MDCMenuSurfaceFoundation.prototype.setIsHoisted = function (isHoisted) {\n        this.isHoistedElement = isHoisted;\n    };\n    /**\n     * Used to set the menu-surface calculations based on a fixed position menu.\n     */\n    MDCMenuSurfaceFoundation.prototype.setFixedPosition = function (isFixedPosition) {\n        this.isFixedPosition = isFixedPosition;\n    };\n    /**\n     * @return Returns true if menu is in fixed (`position: fixed`) position.\n     */\n    MDCMenuSurfaceFoundation.prototype.isFixed = function () {\n        return this.isFixedPosition;\n    };\n    /** Sets the menu-surface position on the page. */\n    MDCMenuSurfaceFoundation.prototype.setAbsolutePosition = function (x, y) {\n        this.position.x = this.isFinite(x) ? x : 0;\n        this.position.y = this.isFinite(y) ? y : 0;\n    };\n    /** Sets whether menu-surface should be horizontally centered to viewport. */\n    MDCMenuSurfaceFoundation.prototype.setIsHorizontallyCenteredOnViewport = function (isCentered) {\n        this.isHorizontallyCenteredOnViewport = isCentered;\n    };\n    MDCMenuSurfaceFoundation.prototype.setQuickOpen = function (quickOpen) {\n        this.isQuickOpen = quickOpen;\n    };\n    /**\n     * Sets maximum menu-surface height on open.\n     * @param maxHeight The desired max-height. Set to 0 (default) to\n     *     automatically calculate max height based on available viewport space.\n     */\n    MDCMenuSurfaceFoundation.prototype.setMaxHeight = function (maxHeight) {\n        this.maxHeight = maxHeight;\n    };\n    MDCMenuSurfaceFoundation.prototype.isOpen = function () {\n        return this.isSurfaceOpen;\n    };\n    /**\n     * Open the menu surface.\n     */\n    MDCMenuSurfaceFoundation.prototype.open = function () {\n        var _this = this;\n        if (this.isSurfaceOpen) {\n            return;\n        }\n        this.adapter.saveFocus();\n        if (this.isQuickOpen) {\n            this.isSurfaceOpen = true;\n            this.adapter.addClass(MDCMenuSurfaceFoundation.cssClasses.OPEN);\n            this.dimensions = this.adapter.getInnerDimensions();\n            this.autoposition();\n            this.adapter.notifyOpen();\n        }\n        else {\n            this.adapter.addClass(MDCMenuSurfaceFoundation.cssClasses.ANIMATING_OPEN);\n            this.animationRequestId = requestAnimationFrame(function () {\n                _this.dimensions = _this.adapter.getInnerDimensions();\n                _this.autoposition();\n                _this.adapter.addClass(MDCMenuSurfaceFoundation.cssClasses.OPEN);\n                _this.openAnimationEndTimerId = setTimeout(function () {\n                    _this.openAnimationEndTimerId = 0;\n                    _this.adapter.removeClass(MDCMenuSurfaceFoundation.cssClasses.ANIMATING_OPEN);\n                    _this.adapter.notifyOpen();\n                }, numbers.TRANSITION_OPEN_DURATION);\n            });\n            this.isSurfaceOpen = true;\n        }\n    };\n    /**\n     * Closes the menu surface.\n     */\n    MDCMenuSurfaceFoundation.prototype.close = function (skipRestoreFocus) {\n        var _this = this;\n        if (skipRestoreFocus === void 0) { skipRestoreFocus = false; }\n        if (!this.isSurfaceOpen) {\n            return;\n        }\n        this.adapter.notifyClosing();\n        if (this.isQuickOpen) {\n            this.isSurfaceOpen = false;\n            if (!skipRestoreFocus) {\n                this.maybeRestoreFocus();\n            }\n            this.adapter.removeClass(MDCMenuSurfaceFoundation.cssClasses.OPEN);\n            this.adapter.removeClass(MDCMenuSurfaceFoundation.cssClasses.IS_OPEN_BELOW);\n            this.adapter.notifyClose();\n            return;\n        }\n        this.adapter.addClass(MDCMenuSurfaceFoundation.cssClasses.ANIMATING_CLOSED);\n        requestAnimationFrame(function () {\n            _this.adapter.removeClass(MDCMenuSurfaceFoundation.cssClasses.OPEN);\n            _this.adapter.removeClass(MDCMenuSurfaceFoundation.cssClasses.IS_OPEN_BELOW);\n            _this.closeAnimationEndTimerId = setTimeout(function () {\n                _this.closeAnimationEndTimerId = 0;\n                _this.adapter.removeClass(MDCMenuSurfaceFoundation.cssClasses.ANIMATING_CLOSED);\n                _this.adapter.notifyClose();\n            }, numbers.TRANSITION_CLOSE_DURATION);\n        });\n        this.isSurfaceOpen = false;\n        if (!skipRestoreFocus) {\n            this.maybeRestoreFocus();\n        }\n    };\n    /** Handle clicks and close if not within menu-surface element. */\n    MDCMenuSurfaceFoundation.prototype.handleBodyClick = function (evt) {\n        var el = evt.target;\n        if (this.adapter.isElementInContainer(el)) {\n            return;\n        }\n        this.close();\n    };\n    /** Handle keys that close the surface. */\n    MDCMenuSurfaceFoundation.prototype.handleKeydown = function (evt) {\n        var keyCode = evt.keyCode, key = evt.key;\n        var isEscape = key === 'Escape' || keyCode === 27;\n        if (isEscape) {\n            this.close();\n        }\n    };\n    MDCMenuSurfaceFoundation.prototype.autoposition = function () {\n        var _a;\n        // Compute measurements for autoposition methods reuse.\n        this.measurements = this.getAutoLayoutmeasurements();\n        var corner = this.getoriginCorner();\n        var maxMenuSurfaceHeight = this.getMenuSurfaceMaxHeight(corner);\n        var verticalAlignment = this.hasBit(corner, CornerBit.BOTTOM) ? 'bottom' : 'top';\n        var horizontalAlignment = this.hasBit(corner, CornerBit.RIGHT) ? 'right' : 'left';\n        var horizontalOffset = this.getHorizontalOriginOffset(corner);\n        var verticalOffset = this.getVerticalOriginOffset(corner);\n        var _b = this.measurements, anchorSize = _b.anchorSize, surfaceSize = _b.surfaceSize;\n        var position = (_a = {},\n            _a[horizontalAlignment] = horizontalOffset,\n            _a[verticalAlignment] = verticalOffset,\n            _a);\n        // Center align when anchor width is comparable or greater than menu\n        // surface, otherwise keep corner.\n        if (anchorSize.width / surfaceSize.width >\n            numbers.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO) {\n            horizontalAlignment = 'center';\n        }\n        // If the menu-surface has been hoisted to the body, it's no longer relative\n        // to the anchor element\n        if (this.isHoistedElement || this.isFixedPosition) {\n            this.adjustPositionForHoistedElement(position);\n        }\n        this.adapter.setTransformOrigin(horizontalAlignment + \" \" + verticalAlignment);\n        this.adapter.setPosition(position);\n        this.adapter.setMaxHeight(maxMenuSurfaceHeight ? maxMenuSurfaceHeight + 'px' : '');\n        // If it is opened from the top then add is-open-below class\n        if (!this.hasBit(corner, CornerBit.BOTTOM)) {\n            this.adapter.addClass(MDCMenuSurfaceFoundation.cssClasses.IS_OPEN_BELOW);\n        }\n    };\n    /**\n     * @return Measurements used to position menu surface popup.\n     */\n    MDCMenuSurfaceFoundation.prototype.getAutoLayoutmeasurements = function () {\n        var anchorRect = this.adapter.getAnchorDimensions();\n        var bodySize = this.adapter.getBodyDimensions();\n        var viewportSize = this.adapter.getWindowDimensions();\n        var windowScroll = this.adapter.getWindowScroll();\n        if (!anchorRect) {\n            // tslint:disable:object-literal-sort-keys Positional properties are more readable when they're grouped together\n            anchorRect = {\n                top: this.position.y,\n                right: this.position.x,\n                bottom: this.position.y,\n                left: this.position.x,\n                width: 0,\n                height: 0,\n            };\n            // tslint:enable:object-literal-sort-keys\n        }\n        return {\n            anchorSize: anchorRect,\n            bodySize: bodySize,\n            surfaceSize: this.dimensions,\n            viewportDistance: {\n                // tslint:disable:object-literal-sort-keys Positional properties are more readable when they're grouped together\n                top: anchorRect.top,\n                right: viewportSize.width - anchorRect.right,\n                bottom: viewportSize.height - anchorRect.bottom,\n                left: anchorRect.left,\n                // tslint:enable:object-literal-sort-keys\n            },\n            viewportSize: viewportSize,\n            windowScroll: windowScroll,\n        };\n    };\n    /**\n     * Computes the corner of the anchor from which to animate and position the\n     * menu surface.\n     *\n     * Only LEFT or RIGHT bit is used to position the menu surface ignoring RTL\n     * context. E.g., menu surface will be positioned from right side on TOP_END.\n     */\n    MDCMenuSurfaceFoundation.prototype.getoriginCorner = function () {\n        var corner = this.originCorner;\n        var _a = this.measurements, viewportDistance = _a.viewportDistance, anchorSize = _a.anchorSize, surfaceSize = _a.surfaceSize;\n        var MARGIN_TO_EDGE = MDCMenuSurfaceFoundation.numbers.MARGIN_TO_EDGE;\n        var isAnchoredToBottom = this.hasBit(this.anchorCorner, CornerBit.BOTTOM);\n        var availableTop;\n        var availableBottom;\n        if (isAnchoredToBottom) {\n            availableTop =\n                viewportDistance.top - MARGIN_TO_EDGE + this.anchorMargin.bottom;\n            availableBottom =\n                viewportDistance.bottom - MARGIN_TO_EDGE - this.anchorMargin.bottom;\n        }\n        else {\n            availableTop =\n                viewportDistance.top - MARGIN_TO_EDGE + this.anchorMargin.top;\n            availableBottom = viewportDistance.bottom - MARGIN_TO_EDGE +\n                anchorSize.height - this.anchorMargin.top;\n        }\n        var isAvailableBottom = availableBottom - surfaceSize.height > 0;\n        if (!isAvailableBottom && availableTop > availableBottom) {\n            // Attach bottom side of surface to the anchor.\n            corner = this.setBit(corner, CornerBit.BOTTOM);\n        }\n        var isRtl = this.adapter.isRtl();\n        var isFlipRtl = this.hasBit(this.anchorCorner, CornerBit.FLIP_RTL);\n        var hasRightBit = this.hasBit(this.anchorCorner, CornerBit.RIGHT) ||\n            this.hasBit(corner, CornerBit.RIGHT);\n        // Whether surface attached to right side of anchor element.\n        var isAnchoredToRight = false;\n        // Anchored to start\n        if (isRtl && isFlipRtl) {\n            isAnchoredToRight = !hasRightBit;\n        }\n        else {\n            // Anchored to right\n            isAnchoredToRight = hasRightBit;\n        }\n        var availableLeft;\n        var availableRight;\n        if (isAnchoredToRight) {\n            availableLeft =\n                viewportDistance.left + anchorSize.width + this.anchorMargin.right;\n            availableRight = viewportDistance.right - this.anchorMargin.right;\n        }\n        else {\n            availableLeft = viewportDistance.left + this.anchorMargin.left;\n            availableRight =\n                viewportDistance.right + anchorSize.width - this.anchorMargin.left;\n        }\n        var isAvailableLeft = availableLeft - surfaceSize.width > 0;\n        var isAvailableRight = availableRight - surfaceSize.width > 0;\n        var isOriginCornerAlignedToEnd = this.hasBit(corner, CornerBit.FLIP_RTL) &&\n            this.hasBit(corner, CornerBit.RIGHT);\n        if (isAvailableRight && isOriginCornerAlignedToEnd && isRtl ||\n            !isAvailableLeft && isOriginCornerAlignedToEnd) {\n            // Attach left side of surface to the anchor.\n            corner = this.unsetBit(corner, CornerBit.RIGHT);\n        }\n        else if (isAvailableLeft && isAnchoredToRight && isRtl ||\n            (isAvailableLeft && !isAnchoredToRight && hasRightBit) ||\n            (!isAvailableRight && availableLeft >= availableRight)) {\n            // Attach right side of surface to the anchor.\n            corner = this.setBit(corner, CornerBit.RIGHT);\n        }\n        return corner;\n    };\n    /**\n     * @param corner Origin corner of the menu surface.\n     * @return Maximum height of the menu surface, based on available space. 0\n     *     indicates should not be set.\n     */\n    MDCMenuSurfaceFoundation.prototype.getMenuSurfaceMaxHeight = function (corner) {\n        if (this.maxHeight > 0) {\n            return this.maxHeight;\n        }\n        var viewportDistance = this.measurements.viewportDistance;\n        var maxHeight = 0;\n        var isBottomAligned = this.hasBit(corner, CornerBit.BOTTOM);\n        var isBottomAnchored = this.hasBit(this.anchorCorner, CornerBit.BOTTOM);\n        var MARGIN_TO_EDGE = MDCMenuSurfaceFoundation.numbers.MARGIN_TO_EDGE;\n        // When maximum height is not specified, it is handled from CSS.\n        if (isBottomAligned) {\n            maxHeight = viewportDistance.top + this.anchorMargin.top - MARGIN_TO_EDGE;\n            if (!isBottomAnchored) {\n                maxHeight += this.measurements.anchorSize.height;\n            }\n        }\n        else {\n            maxHeight = viewportDistance.bottom - this.anchorMargin.bottom +\n                this.measurements.anchorSize.height - MARGIN_TO_EDGE;\n            if (isBottomAnchored) {\n                maxHeight -= this.measurements.anchorSize.height;\n            }\n        }\n        return maxHeight;\n    };\n    /**\n     * @param corner Origin corner of the menu surface.\n     * @return Horizontal offset of menu surface origin corner from corresponding\n     *     anchor corner.\n     */\n    MDCMenuSurfaceFoundation.prototype.getHorizontalOriginOffset = function (corner) {\n        var anchorSize = this.measurements.anchorSize;\n        // isRightAligned corresponds to using the 'right' property on the surface.\n        var isRightAligned = this.hasBit(corner, CornerBit.RIGHT);\n        var avoidHorizontalOverlap = this.hasBit(this.anchorCorner, CornerBit.RIGHT);\n        if (isRightAligned) {\n            var rightOffset = avoidHorizontalOverlap ?\n                anchorSize.width - this.anchorMargin.left :\n                this.anchorMargin.right;\n            // For hoisted or fixed elements, adjust the offset by the difference\n            // between viewport width and body width so when we calculate the right\n            // value (`adjustPositionForHoistedElement`) based on the element\n            // position, the right property is correct.\n            if (this.isHoistedElement || this.isFixedPosition) {\n                return rightOffset -\n                    (this.measurements.viewportSize.width -\n                        this.measurements.bodySize.width);\n            }\n            return rightOffset;\n        }\n        return avoidHorizontalOverlap ? anchorSize.width - this.anchorMargin.right :\n            this.anchorMargin.left;\n    };\n    /**\n     * @param corner Origin corner of the menu surface.\n     * @return Vertical offset of menu surface origin corner from corresponding\n     *     anchor corner.\n     */\n    MDCMenuSurfaceFoundation.prototype.getVerticalOriginOffset = function (corner) {\n        var anchorSize = this.measurements.anchorSize;\n        var isBottomAligned = this.hasBit(corner, CornerBit.BOTTOM);\n        var avoidVerticalOverlap = this.hasBit(this.anchorCorner, CornerBit.BOTTOM);\n        var y = 0;\n        if (isBottomAligned) {\n            y = avoidVerticalOverlap ? anchorSize.height - this.anchorMargin.top :\n                -this.anchorMargin.bottom;\n        }\n        else {\n            y = avoidVerticalOverlap ?\n                (anchorSize.height + this.anchorMargin.bottom) :\n                this.anchorMargin.top;\n        }\n        return y;\n    };\n    /**\n     * Calculates the offsets for positioning the menu-surface when the\n     * menu-surface has been hoisted to the body.\n     */\n    MDCMenuSurfaceFoundation.prototype.adjustPositionForHoistedElement = function (position) {\n        var e_1, _a;\n        var _b = this.measurements, windowScroll = _b.windowScroll, viewportDistance = _b.viewportDistance, surfaceSize = _b.surfaceSize, viewportSize = _b.viewportSize;\n        var props = Object.keys(position);\n        try {\n            for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n                var prop = props_1_1.value;\n                var value = position[prop] || 0;\n                if (this.isHorizontallyCenteredOnViewport &&\n                    (prop === 'left' || prop === 'right')) {\n                    position[prop] = (viewportSize.width - surfaceSize.width) / 2;\n                    continue;\n                }\n                // Hoisted surfaces need to have the anchor elements location on the page\n                // added to the position properties for proper alignment on the body.\n                value += viewportDistance[prop];\n                // Surfaces that are absolutely positioned need to have additional\n                // calculations for scroll and bottom positioning.\n                if (!this.isFixedPosition) {\n                    if (prop === 'top') {\n                        value += windowScroll.y;\n                    }\n                    else if (prop === 'bottom') {\n                        value -= windowScroll.y;\n                    }\n                    else if (prop === 'left') {\n                        value += windowScroll.x;\n                    }\n                    else { // prop === 'right'\n                        value -= windowScroll.x;\n                    }\n                }\n                position[prop] = value;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    /**\n     * The last focused element when the menu surface was opened should regain\n     * focus, if the user is focused on or within the menu surface when it is\n     * closed.\n     */\n    MDCMenuSurfaceFoundation.prototype.maybeRestoreFocus = function () {\n        var _this = this;\n        var isRootFocused = this.adapter.isFocused();\n        var childHasFocus = document.activeElement &&\n            this.adapter.isElementInContainer(document.activeElement);\n        if (isRootFocused || childHasFocus) {\n            // Wait before restoring focus when closing the menu surface. This is\n            // important because if a touch event triggered the menu close, and the\n            // subsequent mouse event occurs after focus is restored, then the\n            // restored focus would be lost.\n            setTimeout(function () {\n                _this.adapter.restoreFocus();\n            }, numbers.TOUCH_EVENT_WAIT_MS);\n        }\n    };\n    MDCMenuSurfaceFoundation.prototype.hasBit = function (corner, bit) {\n        return Boolean(corner & bit); // tslint:disable-line:no-bitwise\n    };\n    MDCMenuSurfaceFoundation.prototype.setBit = function (corner, bit) {\n        return corner | bit; // tslint:disable-line:no-bitwise\n    };\n    MDCMenuSurfaceFoundation.prototype.unsetBit = function (corner, bit) {\n        return corner ^ bit;\n    };\n    /**\n     * isFinite that doesn't force conversion to number type.\n     * Equivalent to Number.isFinite in ES2015, which is not supported in IE.\n     */\n    MDCMenuSurfaceFoundation.prototype.isFinite = function (num) {\n        return typeof num === 'number' && isFinite(num);\n    };\n    return MDCMenuSurfaceFoundation;\n}(MDCFoundation));\nexport { MDCMenuSurfaceFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCMenuSurfaceFoundation;\n//# sourceMappingURL=foundation.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __extends } from \"tslib\";\nimport { MDCComponent } from '@material/base/component';\nimport { cssClasses, strings } from './constants';\nimport { MDCMenuSurfaceFoundation } from './foundation';\nimport { getCorrectPropertyName } from '@material/animation/util';\nvar MDCMenuSurface = /** @class */ (function (_super) {\n    __extends(MDCMenuSurface, _super);\n    function MDCMenuSurface() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MDCMenuSurface.attachTo = function (root) {\n        return new MDCMenuSurface(root);\n    };\n    MDCMenuSurface.prototype.initialSyncWithDOM = function () {\n        var _this = this;\n        var parentEl = this.root.parentElement;\n        this.anchorElement = parentEl && parentEl.classList.contains(cssClasses.ANCHOR) ? parentEl : null;\n        if (this.root.classList.contains(cssClasses.FIXED)) {\n            this.setFixedPosition(true);\n        }\n        this.handleKeydown = function (event) {\n            _this.foundation.handleKeydown(event);\n        };\n        this.handleBodyClick = function (event) {\n            _this.foundation.handleBodyClick(event);\n        };\n        // capture so that no race between handleBodyClick and quickOpen when\n        // menusurface opened on button click which registers this listener\n        this.registerBodyClickListener = function () {\n            document.body.addEventListener('click', _this.handleBodyClick, { capture: true });\n        };\n        this.deregisterBodyClickListener = function () {\n            document.body.removeEventListener('click', _this.handleBodyClick, { capture: true });\n        };\n        this.listen('keydown', this.handleKeydown);\n        this.listen(strings.OPENED_EVENT, this.registerBodyClickListener);\n        this.listen(strings.CLOSED_EVENT, this.deregisterBodyClickListener);\n    };\n    MDCMenuSurface.prototype.destroy = function () {\n        this.unlisten('keydown', this.handleKeydown);\n        this.unlisten(strings.OPENED_EVENT, this.registerBodyClickListener);\n        this.unlisten(strings.CLOSED_EVENT, this.deregisterBodyClickListener);\n        _super.prototype.destroy.call(this);\n    };\n    MDCMenuSurface.prototype.isOpen = function () {\n        return this.foundation.isOpen();\n    };\n    MDCMenuSurface.prototype.open = function () {\n        this.foundation.open();\n    };\n    MDCMenuSurface.prototype.close = function (skipRestoreFocus) {\n        if (skipRestoreFocus === void 0) { skipRestoreFocus = false; }\n        this.foundation.close(skipRestoreFocus);\n    };\n    Object.defineProperty(MDCMenuSurface.prototype, \"quickOpen\", {\n        set: function (quickOpen) {\n            this.foundation.setQuickOpen(quickOpen);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /** Sets the foundation to use page offsets for an positioning when the menu is hoisted to the body. */\n    MDCMenuSurface.prototype.setIsHoisted = function (isHoisted) {\n        this.foundation.setIsHoisted(isHoisted);\n    };\n    /** Sets the element that the menu-surface is anchored to. */\n    MDCMenuSurface.prototype.setMenuSurfaceAnchorElement = function (element) {\n        this.anchorElement = element;\n    };\n    /** Sets the menu-surface to position: fixed. */\n    MDCMenuSurface.prototype.setFixedPosition = function (isFixed) {\n        if (isFixed) {\n            this.root.classList.add(cssClasses.FIXED);\n        }\n        else {\n            this.root.classList.remove(cssClasses.FIXED);\n        }\n        this.foundation.setFixedPosition(isFixed);\n    };\n    /** Sets the absolute x/y position to position based on. Requires the menu to be hoisted. */\n    MDCMenuSurface.prototype.setAbsolutePosition = function (x, y) {\n        this.foundation.setAbsolutePosition(x, y);\n        this.setIsHoisted(true);\n    };\n    /**\n     * @param corner Default anchor corner alignment of top-left surface corner.\n     */\n    MDCMenuSurface.prototype.setAnchorCorner = function (corner) {\n        this.foundation.setAnchorCorner(corner);\n    };\n    MDCMenuSurface.prototype.setAnchorMargin = function (margin) {\n        this.foundation.setAnchorMargin(margin);\n    };\n    MDCMenuSurface.prototype.getDefaultFoundation = function () {\n        var _this = this;\n        // DO NOT INLINE this variable. For backward compatibility, foundations take a Partial<MDCFooAdapter>.\n        // To ensure we don't accidentally omit any methods, we need a separate, strongly typed adapter variable.\n        // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n        var adapter = {\n            addClass: function (className) { return _this.root.classList.add(className); },\n            removeClass: function (className) { return _this.root.classList.remove(className); },\n            hasClass: function (className) { return _this.root.classList.contains(className); },\n            hasAnchor: function () { return !!_this.anchorElement; },\n            notifyClose: function () {\n                return _this.emit(MDCMenuSurfaceFoundation.strings.CLOSED_EVENT, {});\n            },\n            notifyClosing: function () {\n                _this.emit(MDCMenuSurfaceFoundation.strings.CLOSING_EVENT, {});\n            },\n            notifyOpen: function () {\n                return _this.emit(MDCMenuSurfaceFoundation.strings.OPENED_EVENT, {});\n            },\n            isElementInContainer: function (el) { return _this.root.contains(el); },\n            isRtl: function () {\n                return getComputedStyle(_this.root).getPropertyValue('direction') === 'rtl';\n            },\n            setTransformOrigin: function (origin) {\n                var propertyName = getCorrectPropertyName(window, 'transform') + \"-origin\";\n                _this.root.style.setProperty(propertyName, origin);\n            },\n            isFocused: function () { return document.activeElement === _this.root; },\n            saveFocus: function () {\n                _this.previousFocus =\n                    document.activeElement;\n            },\n            restoreFocus: function () {\n                if (_this.root.contains(document.activeElement)) {\n                    if (_this.previousFocus && _this.previousFocus.focus) {\n                        _this.previousFocus.focus();\n                    }\n                }\n            },\n            getInnerDimensions: function () {\n                return {\n                    width: _this.root.offsetWidth,\n                    height: _this.root.offsetHeight\n                };\n            },\n            getAnchorDimensions: function () { return _this.anchorElement ?\n                _this.anchorElement.getBoundingClientRect() :\n                null; },\n            getWindowDimensions: function () {\n                return { width: window.innerWidth, height: window.innerHeight };\n            },\n            getBodyDimensions: function () {\n                return { width: document.body.clientWidth, height: document.body.clientHeight };\n            },\n            getWindowScroll: function () {\n                return { x: window.pageXOffset, y: window.pageYOffset };\n            },\n            setPosition: function (position) {\n                var rootHTML = _this.root;\n                rootHTML.style.left = 'left' in position ? position.left + \"px\" : '';\n                rootHTML.style.right = 'right' in position ? position.right + \"px\" : '';\n                rootHTML.style.top = 'top' in position ? position.top + \"px\" : '';\n                rootHTML.style.bottom =\n                    'bottom' in position ? position.bottom + \"px\" : '';\n            },\n            setMaxHeight: function (height) {\n                _this.root.style.maxHeight = height;\n            },\n        };\n        // tslint:enable:object-literal-sort-keys\n        return new MDCMenuSurfaceFoundation(adapter);\n    };\n    return MDCMenuSurface;\n}(MDCComponent));\nexport { MDCMenuSurface };\n//# sourceMappingURL=component.js.map"],"mappings":"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"}