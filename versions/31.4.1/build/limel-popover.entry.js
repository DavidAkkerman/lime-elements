import{r as t,c as e,h as i,g as r}from"./index-954e57b6.js";import"./_baseGetTag-accbac5b.js";import"./isObject-7039fcda.js";import"./eq-5dc06ea1.js";import"./_defineProperty-f13bbdd5.js";import{a as o}from"./_assignValue-9df5f80a.js";import{c as s}from"./random-string-2246b81e.js";function n(t,e){var i;if(t.contains(e)||(null===(i=t.shadowRoot)||void 0===i?void 0:i.contains(e)))return!0;const r=function(t){const e=t.closest(".limel-portal--container");return e?e.portalSource:t.getRootNode().host}(e);return!!r&&n(t,r)}const c=class{constructor(i){t(this,i),this.close=e(this,"close",7),this.open=!1,this.portalId=s(),this.globalClickListener=this.globalClickListener.bind(this)}watchOpen(){this.setupClickHandler()}componentWillLoad(){this.setupClickHandler()}setupClickHandler(){this.open?document.addEventListener("click",this.globalClickListener,{capture:!0}):document.removeEventListener("click",this.globalClickListener)}render(){const t=this.getCssProperties(),e=getComputedStyle(this.host).getPropertyValue("--popover-z-index");return i("div",{class:"trigger-anchor"},i("slot",{name:"trigger"}),i("limel-portal",{visible:this.open,containerId:this.portalId,containerStyle:{"z-index":e}},i("limel-popover-surface",{contentCollection:this.host.children,style:t})))}globalClickListener(t){const e=n(this.host,t.target);this.open&&!e&&(t.stopPropagation(),this.close.emit())}getCssProperties(){const t=["--popover-surface-width","--popover-body-background-color","--popover-border-radius"],e=getComputedStyle(this.host),i=t.map((t=>e.getPropertyValue(t)));return function(t,e){return function(t,e,i){for(var r=-1,o=t.length,s=e.length,n={};++r<o;)i(n,t[r],r<s?e[r]:void 0);return n}(t||[],e||[],o)}(t,i)}get host(){return r(this)}static get watchers(){return{open:["watchOpen"]}}};c.style=".trigger-anchor{display:inline-block;position:relative}";export{c as limel_popover}